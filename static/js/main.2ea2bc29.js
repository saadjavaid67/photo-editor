/*! For license information please see main.2ea2bc29.js.LICENSE.txt */
(()=>{var e={888:(e,t,n)=>{"use strict";var r=n(47);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},7:(e,t,n)=>{e.exports=n(888)()},47:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:(e,t,n)=>{"use strict";var r=n(791),o=n(296);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,l={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function m(e,t,n,r,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function $(e){return e[1].toUpperCase()}function b(e,t,n,r){var o=g.hasOwnProperty(t)?g[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!d.call(f,e)||!d.call(h,e)&&(p.test(e)?f[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,$);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,$);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,$);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var v=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),M=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var z=Symbol.iterator;function F(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=z&&e[z]||e["@@iterator"])?e:null}var O,D=Object.assign;function _(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var B=!1;function N(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var o=c.stack.split("\n"),i=r.stack.split("\n"),a=o.length-1,l=i.length-1;1<=a&&0<=l&&o[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(o[a]!==i[l]){if(1!==a||1!==l)do{if(a--,0>--l||o[a]!==i[l]){var s="\n"+o[a].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=a&&0<=l);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?_(e):""}function j(e){switch(e.tag){case 5:return _(e.type);case 16:return _("Lazy");case 13:return _("Suspense");case 19:return _("SuspenseList");case 0:case 2:case 15:return e=N(e.type,!1);case 11:return e=N(e.type.render,!1);case 1:return e=N(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case w:return"Portal";case C:return"Profiler";case k:return"StrictMode";case E:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case M:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case P:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function U(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Z(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return D({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=U(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function K(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){K(e,t);var n=U(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,U(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+U(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return D({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:U(n)}}function ie(e,t){var n=U(t.value),r=U(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function pe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(he).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ye=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $e(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,ke=null;function Ce(e){if(e=vo(e)){if("function"!==typeof we)throw Error(i(280));var t=e.stateNode;t&&(t=wo(t),we(e.stateNode,e.type,t))}}function Te(e){Se?ke?ke.push(e):ke=[e]:Se=e}function Me(){if(Se){var e=Se,t=ke;if(ke=Se=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Pe(e,t){return e(t)}function Ee(){}var Re=!1;function Ie(e,t,n){if(Re)return e(t,n);Re=!0;try{return Pe(e,t,n)}finally{Re=!1,(null!==Se||null!==ke)&&(Ee(),Me())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=wo(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Le=!1;if(u)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){Le=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(ue){Le=!1}function Fe(e,t,n,r,o,i,a,l,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,De=null,_e=!1,Be=null,Ne={onError:function(e){Oe=!0,De=e}};function je(e,t,n,r,o,i,a,l,s){Oe=!1,De=null,Fe.apply(Ne,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ue(e){if(We(e)!==e)throw Error(i(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(r=o.return)){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return Ue(o),e;if(a===r)return Ue(o),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=o,r=a;else{for(var l=!1,s=o.child;s;){if(s===n){l=!0,n=o,r=a;break}if(s===r){l=!0,r=o,n=a;break}s=s.sibling}if(!l){for(s=a.child;s;){if(s===n){l=!0,n=a,r=o;break}if(s===r){l=!0,r=a,n=o;break}s=s.sibling}if(!l)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ze=o.unstable_scheduleCallback,Xe=o.unstable_cancelCallback,Ye=o.unstable_shouldYield,qe=o.unstable_requestPaint,Ke=o.unstable_now,Qe=o.unstable_getCurrentPriorityLevel,Je=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(lt(e)/st|0)|0},lt=Math.log,st=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var l=a&~o;0!==l?r=dt(l):0!==(i&=a)&&(r=dt(i))}else 0!==(a=n&~o)?r=dt(a):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(i=t&-t)||16===o&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-at(t)),r|=e[n],t&=~o;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function $t(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var bt=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,wt,St,kt,Ct,Tt=!1,Mt=[],Pt=null,Et=null,Rt=null,It=new Map,At=new Map,Lt=[],zt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ft(e,t){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Ot(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=vo(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Dt(e){var t=bo(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Ct(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function _t(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vo(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ve=r,n.target.dispatchEvent(r),ve=null,t.shift()}return!0}function Bt(e,t,n){_t(e)&&n.delete(t)}function Nt(){Tt=!1,null!==Pt&&_t(Pt)&&(Pt=null),null!==Et&&_t(Et)&&(Et=null),null!==Rt&&_t(Rt)&&(Rt=null),It.forEach(Bt),At.forEach(Bt)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Nt)))}function Wt(e){function t(t){return jt(t,e)}if(0<Mt.length){jt(Mt[0],e);for(var n=1;n<Mt.length;n++){var r=Mt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Pt&&jt(Pt,e),null!==Et&&jt(Et,e),null!==Rt&&jt(Rt,e),It.forEach(t),At.forEach(t),n=0;n<Lt.length;n++)(r=Lt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)Dt(n),null===n.blockedOn&&Lt.shift()}var Vt=v.ReactCurrentBatchConfig,Ut=!0;function Ht(e,t,n,r){var o=bt,i=Vt.transition;Vt.transition=null;try{bt=1,Zt(e,t,n,r)}finally{bt=o,Vt.transition=i}}function Gt(e,t,n,r){var o=bt,i=Vt.transition;Vt.transition=null;try{bt=4,Zt(e,t,n,r)}finally{bt=o,Vt.transition=i}}function Zt(e,t,n,r){if(Ut){var o=Yt(e,t,n,r);if(null===o)Ur(e,t,r,Xt,n),Ft(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return Pt=Ot(Pt,e,t,n,r,o),!0;case"dragenter":return Et=Ot(Et,e,t,n,r,o),!0;case"mouseover":return Rt=Ot(Rt,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return It.set(i,Ot(It.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,At.set(i,Ot(At.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Ft(e,r),4&t&&-1<zt.indexOf(e)){for(;null!==o;){var i=vo(o);if(null!==i&&xt(i),null===(i=Yt(e,t,n,r))&&Ur(e,t,r,Xt,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else Ur(e,t,r,null,n)}}var Xt=null;function Yt(e,t,n,r){if(Xt=null,null!==(e=bo(e=xe(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Kt=null,Qt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Qt,r=n.length,o="value"in Kt?Kt.value:Kt.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return Jt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,ln,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=D({},cn,{view:0,detail:0}),pn=on(dn),hn=D({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(an=e.screenX-sn.screenX,ln=e.screenY-sn.screenY):ln=an=0,sn=e),an)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),fn=on(hn),mn=on(D({},hn,{dataTransfer:0})),gn=on(D({},dn,{relatedTarget:0})),yn=on(D({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),$n=D({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on($n),vn=on(D({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return kn}var Tn=D({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Mn=on(Tn),Pn=on(D({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=on(D({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Rn=on(D({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=D({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=on(In),Ln=[9,13,27,32],zn=u&&"CompositionEvent"in window,Fn=null;u&&"documentMode"in document&&(Fn=document.documentMode);var On=u&&"TextEvent"in window&&!Fn,Dn=u&&(!zn||Fn&&8<Fn&&11>=Fn),_n=String.fromCharCode(32),Bn=!1;function Nn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Un(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Hn(e,t,n,r){Te(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Zn=null;function Xn(e){_r(e,0)}function Yn(e){if(Z(xo(e)))return e}function qn(e,t){if("change"===e)return t}var Kn=!1;if(u){var Qn;if(u){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Qn=Jn}else Qn=!1;Kn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Zn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Zn)){var t=[];Hn(t,Zn,e,xe(e)),Ie(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Zn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Zn)}function ir(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!d.call(t,o)||!lr(e[o],t[o]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=pr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=ur(n,i);var a=ur(n,r);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,$r=null,br=!1;function vr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==X(r)||("selectionStart"in(r=gr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},$r&&sr($r,r)||($r=r,0<(r=Gr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},kr={};function Cr(e){if(Sr[e])return Sr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Sr[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Tr=Cr("animationend"),Mr=Cr("animationiteration"),Pr=Cr("animationstart"),Er=Cr("transitionend"),Rr=new Map,Ir="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Rr.set(e,t),s(t,[e])}for(var Lr=0;Lr<Ir.length;Lr++){var zr=Ir[Lr];Ar(zr.toLowerCase(),"on"+(zr[0].toUpperCase()+zr.slice(1)))}Ar(Tr,"onAnimationEnd"),Ar(Mr,"onAnimationIteration"),Ar(Pr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Er,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fr));function Dr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,a,l,s,c){if(je.apply(this,arguments),Oe){if(!Oe)throw Error(i(198));var u=De;Oe=!1,De=null,_e||(_e=!0,Be=u)}}(r,t,void 0,e),e.currentTarget=null}function _r(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],s=l.instance,c=l.currentTarget;if(l=l.listener,s!==i&&o.isPropagationStopped())break e;Dr(o,l,c),i=s}else for(a=0;a<r.length;a++){if(s=(l=r[a]).instance,c=l.currentTarget,l=l.listener,s!==i&&o.isPropagationStopped())break e;Dr(o,l,c),i=s}}}if(_e)throw e=Be,_e=!1,Be=null,e}function Br(e,t){var n=t[go];void 0===n&&(n=t[go]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Nr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[jr]){e[jr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Or.has(t)||Nr(t,!1,e),Nr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Nr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(qt(t)){case 1:var o=Ht;break;case 4:o=Gt;break;default:o=Zt}n=o.bind(null,t,n,e),o=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Ur(e,t,n,r,o){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var l=r.stateNode.containerInfo;if(l===o||8===l.nodeType&&l.parentNode===o)break;if(4===a)for(a=r.return;null!==a;){var s=a.tag;if((3===s||4===s)&&((s=a.stateNode.containerInfo)===o||8===s.nodeType&&s.parentNode===o))return;a=a.return}for(;null!==l;){if(null===(a=bo(l)))return;if(5===(s=a.tag)||6===s){r=i=a;continue e}l=l.parentNode}}r=r.return}Ie((function(){var r=i,o=xe(n),a=[];e:{var l=Rr.get(e);if(void 0!==l){var s=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Mn;break;case"focusin":c="focus",s=gn;break;case"focusout":c="blur",s=gn;break;case"beforeblur":case"afterblur":s=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=En;break;case Tr:case Mr:case Pr:s=yn;break;case Er:s=Rn;break;case"scroll":s=pn;break;case"wheel":s=An;break;case"copy":case"cut":case"paste":s=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Pn}var u=0!==(4&t),d=!u&&"scroll"===e,p=u?null!==l?l+"Capture":null:l;u=[];for(var h,f=r;null!==f;){var m=(h=f).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==p&&(null!=(m=Ae(f,p))&&u.push(Hr(f,m,h)))),d)break;f=f.return}0<u.length&&(l=new s(l,c,null,n,o),a.push({event:l,listeners:u}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===ve||!(c=n.relatedTarget||n.fromElement)||!bo(c)&&!c[mo])&&(s||l)&&(l=o.window===o?o:(l=o.ownerDocument)?l.defaultView||l.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?bo(c):null)&&(c!==(d=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(u=fn,m="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Pn,m="onPointerLeave",p="onPointerEnter",f="pointer"),d=null==s?l:xo(s),h=null==c?l:xo(c),(l=new u(m,f+"leave",s,n,o)).target=d,l.relatedTarget=h,m=null,bo(o)===r&&((u=new u(p,f+"enter",c,n,o)).target=h,u.relatedTarget=d,m=u),d=m,s&&c)e:{for(p=c,f=0,h=u=s;h;h=Zr(h))f++;for(h=0,m=p;m;m=Zr(m))h++;for(;0<f-h;)u=Zr(u),f--;for(;0<h-f;)p=Zr(p),h--;for(;f--;){if(u===p||null!==p&&u===p.alternate)break e;u=Zr(u),p=Zr(p)}u=null}else u=null;null!==s&&Xr(a,l,s,u,!1),null!==c&&null!==d&&Xr(a,d,c,u,!0)}if("select"===(s=(l=r?xo(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===s&&"file"===l.type)var g=qn;else if(Un(l))if(Kn)g=ar;else{g=or;var y=rr}else(s=l.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(g=ir);switch(g&&(g=g(e,r))?Hn(a,g,n,o):(y&&y(e,l,r),"focusout"===e&&(y=l._wrapperState)&&y.controlled&&"number"===l.type&&ee(l,"number",l.value)),y=r?xo(r):window,e){case"focusin":(Un(y)||"true"===y.contentEditable)&&(gr=y,yr=r,$r=null);break;case"focusout":$r=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,vr(a,n,o);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":vr(a,n,o)}var $;if(zn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?Nn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Dn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&($=en()):(Qt="value"in(Kt=o)?Kt.value:Kt.textContent,Wn=!0)),0<(y=Gr(r,b)).length&&(b=new vn(b,e,null,n,o),a.push({event:b,listeners:y}),$?b.data=$:null!==($=jn(n))&&(b.data=$))),($=On?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Bn=!0,_n);case"textInput":return(e=t.data)===_n&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!zn&&Nn(e,t)?(e=en(),Jt=Qt=Kt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(o=new vn("onBeforeInput","beforeinput",null,n,o),a.push({event:o,listeners:r}),o.data=$))}_r(a,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=Ae(e,n))&&r.unshift(Hr(e,i,o)),null!=(i=Ae(e,t))&&r.push(Hr(e,i,o))),e=e.return}return r}function Zr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var l=n,s=l.alternate,c=l.stateNode;if(null!==s&&s===r)break;5===l.tag&&null!==c&&(l=c,o?null!=(s=Ae(n,i))&&a.unshift(Hr(n,s,l)):o||null!=(s=Ae(n,i))&&a.push(Hr(n,s,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,qr=/\u0000|\uFFFD/g;function Kr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(qr,"")}function Qr(e,t,n){if(t=Kr(t),Kr(e)!==t&&n)throw Error(i(425))}function Jr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,io="function"===typeof Promise?Promise:void 0,ao="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof io?function(e){return io.resolve(null).then(e).catch(lo)}:ro;function lo(e){setTimeout((function(){throw e}))}function so(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);Wt(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var po=Math.random().toString(36).slice(2),ho="__reactFiber$"+po,fo="__reactProps$"+po,mo="__reactContainer$"+po,go="__reactEvents$"+po,yo="__reactListeners$"+po,$o="__reactHandles$"+po;function bo(e){var t=e[ho];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mo]||n[ho]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uo(e);null!==e;){if(n=e[ho])return n;e=uo(e)}return t}n=(e=n).parentNode}return null}function vo(e){return!(e=e[ho]||e[mo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function wo(e){return e[fo]||null}var So=[],ko=-1;function Co(e){return{current:e}}function To(e){0>ko||(e.current=So[ko],So[ko]=null,ko--)}function Mo(e,t){ko++,So[ko]=e.current,e.current=t}var Po={},Eo=Co(Po),Ro=Co(!1),Io=Po;function Ao(e,t){var n=e.type.contextTypes;if(!n)return Po;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Lo(e){return null!==(e=e.childContextTypes)&&void 0!==e}function zo(){To(Ro),To(Eo)}function Fo(e,t,n){if(Eo.current!==Po)throw Error(i(168));Mo(Eo,t),Mo(Ro,n)}function Oo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(i(108,V(e)||"Unknown",o));return D({},n,r)}function Do(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Po,Io=Eo.current,Mo(Eo,e),Mo(Ro,Ro.current),!0}function _o(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Oo(e,t,Io),r.__reactInternalMemoizedMergedChildContext=e,To(Ro),To(Eo),Mo(Eo,e)):To(Ro),Mo(Ro,n)}var Bo=null,No=!1,jo=!1;function Wo(e){null===Bo?Bo=[e]:Bo.push(e)}function Vo(){if(!jo&&null!==Bo){jo=!0;var e=0,t=bt;try{var n=Bo;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Bo=null,No=!1}catch(o){throw null!==Bo&&(Bo=Bo.slice(e+1)),Ze(Je,Vo),o}finally{bt=t,jo=!1}}return null}var Uo=[],Ho=0,Go=null,Zo=0,Xo=[],Yo=0,qo=null,Ko=1,Qo="";function Jo(e,t){Uo[Ho++]=Zo,Uo[Ho++]=Go,Go=e,Zo=t}function ei(e,t,n){Xo[Yo++]=Ko,Xo[Yo++]=Qo,Xo[Yo++]=qo,qo=e;var r=Ko;e=Qo;var o=32-at(r)-1;r&=~(1<<o),n+=1;var i=32-at(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Ko=1<<32-at(t)+o|n<<o|r,Qo=i+e}else Ko=1<<i|n<<o|r,Qo=e}function ti(e){null!==e.return&&(Jo(e,1),ei(e,1,0))}function ni(e){for(;e===Go;)Go=Uo[--Ho],Uo[Ho]=null,Zo=Uo[--Ho],Uo[Ho]=null;for(;e===qo;)qo=Xo[--Yo],Xo[Yo]=null,Qo=Xo[--Yo],Xo[Yo]=null,Ko=Xo[--Yo],Xo[Yo]=null}var ri=null,oi=null,ii=!1,ai=null;function li(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function si(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ri=e,oi=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ri=e,oi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==qo?{id:Ko,overflow:Qo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ri=e,oi=null,!0);default:return!1}}function ci(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ui(e){if(ii){var t=oi;if(t){var n=t;if(!si(e,t)){if(ci(e))throw Error(i(418));t=co(n.nextSibling);var r=ri;t&&si(e,t)?li(r,n):(e.flags=-4097&e.flags|2,ii=!1,ri=e)}}else{if(ci(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,ri=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ri=e}function pi(e){if(e!==ri)return!1;if(!ii)return di(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oi)){if(ci(e))throw hi(),Error(i(418));for(;t;)li(e,t),t=co(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oi=co(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oi=null}}else oi=ri?co(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=oi;e;)e=co(e.nextSibling)}function fi(){oi=ri=null,ii=!1}function mi(e){null===ai?ai=[e]:ai.push(e)}var gi=v.ReactCurrentBatchConfig;function yi(e,t){if(e&&e.defaultProps){for(var n in t=D({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var $i=Co(null),bi=null,vi=null,xi=null;function wi(){xi=vi=bi=null}function Si(e){var t=$i.current;To($i),e._currentValue=t}function ki(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ci(e,t){bi=e,xi=vi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vl=!0),e.firstContext=null)}function Ti(e){var t=e._currentValue;if(xi!==e)if(e={context:e,memoizedValue:t,next:null},null===vi){if(null===bi)throw Error(i(308));vi=e,bi.dependencies={lanes:0,firstContext:e}}else vi=vi.next=e;return t}var Mi=null;function Pi(e){null===Mi?Mi=[e]:Mi.push(e)}function Ei(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Pi(t)):(n.next=o.next,o.next=n),t.interleaved=n,Ri(e,r)}function Ri(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ii=!1;function Ai(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Li(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Es)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Ri(e,n)}return null===(o=r.interleaved)?(t.next=t,Pi(r)):(t.next=o.next,o.next=t),r.interleaved=t,Ri(e,n)}function Oi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,$t(e,n)}}function Di(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function _i(e,t,n,r){var o=e.updateQueue;Ii=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,l=o.shared.pending;if(null!==l){o.shared.pending=null;var s=l,c=s.next;s.next=null,null===a?i=c:a.next=c,a=s;var u=e.alternate;null!==u&&((l=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===l?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=s))}if(null!==i){var d=o.baseState;for(a=0,u=c=s=null,l=i;;){var p=l.lane,h=l.eventTime;if((r&p)===p){null!==u&&(u=u.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var f=e,m=l;switch(p=t,h=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(h,d,p);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(p="function"===typeof(f=m.payload)?f.call(h,d,p):f)||void 0===p)break e;d=D({},d,p);break e;case 2:Ii=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(p=o.effects)?o.effects=[l]:p.push(l))}else h={eventTime:h,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===u?(c=u=h,s=d):u=u.next=h,a|=p;if(null===(l=l.next)){if(null===(l=o.shared.pending))break;l=(p=l).next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}if(null===u&&(s=d),o.baseState=s,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{a|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);Ds|=a,e.lanes=a,e.memoizedState=d}}function Bi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(i(191,o));o.call(r)}}}var Ni=(new r.Component).refs;function ji(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:D({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Wi={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),o=nc(e),i=zi(r,o);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Fi(e,i,o))&&(rc(t,e,o,r),Oi(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),o=nc(e),i=zi(r,o);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Fi(e,i,o))&&(rc(t,e,o,r),Oi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),o=zi(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Fi(e,o,r))&&(rc(t,e,r,n),Oi(t,e,r))}};function Vi(e,t,n,r,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(o,i))}function Ui(e,t,n){var r=!1,o=Po,i=t.contextType;return"object"===typeof i&&null!==i?i=Ti(i):(o=Lo(t)?Io:Eo.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ao(e,o):Po),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Wi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function Hi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Wi.enqueueReplaceState(t,t.state,null)}function Gi(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=Ni,Ai(e);var i=t.contextType;"object"===typeof i&&null!==i?o.context=Ti(i):(i=Lo(t)?Io:Eo.current,o.context=Ao(e,i)),o.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(ji(e,t,i,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&Wi.enqueueReplaceState(o,o.state,null),_i(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function Zi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var o=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=o.refs;t===Ni&&(t=o.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Xi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yi(e){return(0,e._init)(e._payload)}function qi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=zc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function l(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=_c(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===A&&Yi(i)===t.type)?((r=o(t,n.props)).ref=Zi(e,t,n),r.return=e,r):((r=Fc(n.type,n.key,n.props,null,e.mode,r)).ref=Zi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function p(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=_c(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Fc(t.type,t.key,t.props,null,e.mode,n)).ref=Zi(e,null,t),n.return=e,n;case w:return(t=Bc(t,e.mode,n)).return=e,t;case A:return p(e,(0,t._init)(t._payload),n)}if(te(t)||F(t))return(t=Oc(t,e.mode,n,null)).return=e,t;Xi(e,t)}return null}function h(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===o?c(e,t,n,r):null;case w:return n.key===o?u(e,t,n,r):null;case A:return h(e,t,(o=n._init)(n._payload),r)}if(te(n)||F(n))return null!==o?null:d(e,t,n,r,null);Xi(e,n)}return null}function f(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case A:return f(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||F(r))return d(t,e=e.get(n)||null,r,o,null);Xi(t,r)}return null}function m(o,i,l,s){for(var c=null,u=null,d=i,m=i=0,g=null;null!==d&&m<l.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=h(o,d,l[m],s);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(o,d),i=a(y,i,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===l.length)return n(o,d),ii&&Jo(o,m),c;if(null===d){for(;m<l.length;m++)null!==(d=p(o,l[m],s))&&(i=a(d,i,m),null===u?c=d:u.sibling=d,u=d);return ii&&Jo(o,m),c}for(d=r(o,d);m<l.length;m++)null!==(g=f(d,o,m,l[m],s))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=a(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(o,e)})),ii&&Jo(o,m),c}function g(o,l,s,c){var u=F(s);if("function"!==typeof u)throw Error(i(150));if(null==(s=u.call(s)))throw Error(i(151));for(var d=u=null,m=l,g=l=0,y=null,$=s.next();null!==m&&!$.done;g++,$=s.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=h(o,m,$.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(o,m),l=a(b,l,g),null===d?u=b:d.sibling=b,d=b,m=y}if($.done)return n(o,m),ii&&Jo(o,g),u;if(null===m){for(;!$.done;g++,$=s.next())null!==($=p(o,$.value,c))&&(l=a($,l,g),null===d?u=$:d.sibling=$,d=$);return ii&&Jo(o,g),u}for(m=r(o,m);!$.done;g++,$=s.next())null!==($=f(m,o,g,$.value,c))&&(e&&null!==$.alternate&&m.delete(null===$.key?g:$.key),l=a($,l,g),null===d?u=$:d.sibling=$,d=$);return e&&m.forEach((function(e){return t(o,e)})),ii&&Jo(o,g),u}return function e(r,i,a,s){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){n(r,u.sibling),(i=o(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&Yi(c)===u.type){n(r,u.sibling),(i=o(u,a.props)).ref=Zi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===S?((i=Oc(a.props.children,r.mode,s,a.key)).return=r,r=i):((s=Fc(a.type,a.key,a.props,null,r.mode,s)).ref=Zi(r,i,a),s.return=r,r=s)}return l(r);case w:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=o(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Bc(a,r.mode,s)).return=r,r=i}return l(r);case A:return e(r,i,(u=a._init)(a._payload),s)}if(te(a))return m(r,i,a,s);if(F(a))return g(r,i,a,s);Xi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=o(i,a)).return=r,r=i):(n(r,i),(i=_c(a,r.mode,s)).return=r,r=i),l(r)):n(r,i)}}var Ki=qi(!0),Qi=qi(!1),Ji={},ea=Co(Ji),ta=Co(Ji),na=Co(Ji);function ra(e){if(e===Ji)throw Error(i(174));return e}function oa(e,t){switch(Mo(na,t),Mo(ta,e),Mo(ea,Ji),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}To(ea),Mo(ea,t)}function ia(){To(ea),To(ta),To(na)}function aa(e){ra(na.current);var t=ra(ea.current),n=se(t,e.type);t!==n&&(Mo(ta,e),Mo(ea,n))}function la(e){ta.current===e&&(To(ea),To(ta))}var sa=Co(0);function ca(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ua=[];function da(){for(var e=0;e<ua.length;e++)ua[e]._workInProgressVersionPrimary=null;ua.length=0}var pa=v.ReactCurrentDispatcher,ha=v.ReactCurrentBatchConfig,fa=0,ma=null,ga=null,ya=null,$a=!1,ba=!1,va=0,xa=0;function wa(){throw Error(i(321))}function Sa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function ka(e,t,n,r,o,a){if(fa=a,ma=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,pa.current=null===e||null===e.memoizedState?ll:sl,e=n(r,o),ba){a=0;do{if(ba=!1,va=0,25<=a)throw Error(i(301));a+=1,ya=ga=null,t.updateQueue=null,pa.current=cl,e=n(r,o)}while(ba)}if(pa.current=al,t=null!==ga&&null!==ga.next,fa=0,ya=ga=ma=null,$a=!1,t)throw Error(i(300));return e}function Ca(){var e=0!==va;return va=0,e}function Ta(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ya?ma.memoizedState=ya=e:ya=ya.next=e,ya}function Ma(){if(null===ga){var e=ma.alternate;e=null!==e?e.memoizedState:null}else e=ga.next;var t=null===ya?ma.memoizedState:ya.next;if(null!==t)ya=t,ga=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ga=e).memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},null===ya?ma.memoizedState=ya=e:ya=ya.next=e}return ya}function Pa(e,t){return"function"===typeof t?t(e):t}function Ea(e){var t=Ma(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ga,o=r.baseQueue,a=n.pending;if(null!==a){if(null!==o){var l=o.next;o.next=a.next,a.next=l}r.baseQueue=o=a,n.pending=null}if(null!==o){a=o.next,r=r.baseState;var s=l=null,c=null,u=a;do{var d=u.lane;if((fa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var p={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(s=c=p,l=r):c=c.next=p,ma.lanes|=d,Ds|=d}u=u.next}while(null!==u&&u!==a);null===c?l=r:c.next=s,lr(r,t.memoizedState)||(vl=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{a=o.lane,ma.lanes|=a,Ds|=a,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ra(e){var t=Ma(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var l=o=o.next;do{a=e(a,l.action),l=l.next}while(l!==o);lr(a,t.memoizedState)||(vl=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ia(){}function Aa(e,t){var n=ma,r=Ma(),o=t(),a=!lr(r.memoizedState,o);if(a&&(r.memoizedState=o,vl=!0),r=r.queue,Ua(Fa.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ya&&1&ya.memoizedState.tag){if(n.flags|=2048,Ba(9,za.bind(null,n,r,o,t),void 0,null),null===Rs)throw Error(i(349));0!==(30&fa)||La(n,t,o)}return o}function La(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function za(e,t,n,r){t.value=n,t.getSnapshot=r,Oa(t)&&Da(e)}function Fa(e,t,n){return n((function(){Oa(t)&&Da(e)}))}function Oa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lr(e,n)}catch(r){return!0}}function Da(e){var t=Ri(e,1);null!==t&&rc(t,e,1,-1)}function _a(e){var t=Ta();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:e},t.queue=e,e=e.dispatch=nl.bind(null,ma,e),[t.memoizedState,e]}function Ba(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Na(){return Ma().memoizedState}function ja(e,t,n,r){var o=Ta();ma.flags|=e,o.memoizedState=Ba(1|t,n,void 0,void 0===r?null:r)}function Wa(e,t,n,r){var o=Ma();r=void 0===r?null:r;var i=void 0;if(null!==ga){var a=ga.memoizedState;if(i=a.destroy,null!==r&&Sa(r,a.deps))return void(o.memoizedState=Ba(t,n,i,r))}ma.flags|=e,o.memoizedState=Ba(1|t,n,i,r)}function Va(e,t){return ja(8390656,8,e,t)}function Ua(e,t){return Wa(2048,8,e,t)}function Ha(e,t){return Wa(4,2,e,t)}function Ga(e,t){return Wa(4,4,e,t)}function Za(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Xa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Wa(4,4,Za.bind(null,t,e),n)}function Ya(){}function qa(e,t){var n=Ma();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Sa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ka(e,t){var n=Ma();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Sa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Qa(e,t,n){return 0===(21&fa)?(e.baseState&&(e.baseState=!1,vl=!0),e.memoizedState=n):(lr(n,t)||(n=mt(),ma.lanes|=n,Ds|=n,e.baseState=!0),t)}function Ja(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ha.transition;ha.transition={};try{e(!1),t()}finally{bt=n,ha.transition=r}}function el(){return Ma().memoizedState}function tl(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rl(e))ol(t,n);else if(null!==(n=Ei(e,t,n,r))){rc(n,e,r,tc()),il(n,t,r)}}function nl(e,t,n){var r=nc(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rl(e))ol(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,l=i(a,n);if(o.hasEagerState=!0,o.eagerState=l,lr(l,a)){var s=t.interleaved;return null===s?(o.next=o,Pi(t)):(o.next=s.next,s.next=o),void(t.interleaved=o)}}catch(c){}null!==(n=Ei(e,t,o,r))&&(rc(n,e,r,o=tc()),il(n,t,r))}}function rl(e){var t=e.alternate;return e===ma||null!==t&&t===ma}function ol(e,t){ba=$a=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function il(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,$t(e,n)}}var al={readContext:Ti,useCallback:wa,useContext:wa,useEffect:wa,useImperativeHandle:wa,useInsertionEffect:wa,useLayoutEffect:wa,useMemo:wa,useReducer:wa,useRef:wa,useState:wa,useDebugValue:wa,useDeferredValue:wa,useTransition:wa,useMutableSource:wa,useSyncExternalStore:wa,useId:wa,unstable_isNewReconciler:!1},ll={readContext:Ti,useCallback:function(e,t){return Ta().memoizedState=[e,void 0===t?null:t],e},useContext:Ti,useEffect:Va,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ja(4194308,4,Za.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ja(4194308,4,e,t)},useInsertionEffect:function(e,t){return ja(4,2,e,t)},useMemo:function(e,t){var n=Ta();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ta();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tl.bind(null,ma,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ta().memoizedState=e},useState:_a,useDebugValue:Ya,useDeferredValue:function(e){return Ta().memoizedState=e},useTransition:function(){var e=_a(!1),t=e[0];return e=Ja.bind(null,e[1]),Ta().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ma,o=Ta();if(ii){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Rs)throw Error(i(349));0!==(30&fa)||La(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,Va(Fa.bind(null,r,a,e),[e]),r.flags|=2048,Ba(9,za.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ta(),t=Rs.identifierPrefix;if(ii){var n=Qo;t=":"+t+"R"+(n=(Ko&~(1<<32-at(Ko)-1)).toString(32)+n),0<(n=va++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sl={readContext:Ti,useCallback:qa,useContext:Ti,useEffect:Ua,useImperativeHandle:Xa,useInsertionEffect:Ha,useLayoutEffect:Ga,useMemo:Ka,useReducer:Ea,useRef:Na,useState:function(){return Ea(Pa)},useDebugValue:Ya,useDeferredValue:function(e){return Qa(Ma(),ga.memoizedState,e)},useTransition:function(){return[Ea(Pa)[0],Ma().memoizedState]},useMutableSource:Ia,useSyncExternalStore:Aa,useId:el,unstable_isNewReconciler:!1},cl={readContext:Ti,useCallback:qa,useContext:Ti,useEffect:Ua,useImperativeHandle:Xa,useInsertionEffect:Ha,useLayoutEffect:Ga,useMemo:Ka,useReducer:Ra,useRef:Na,useState:function(){return Ra(Pa)},useDebugValue:Ya,useDeferredValue:function(e){var t=Ma();return null===ga?t.memoizedState=e:Qa(t,ga.memoizedState,e)},useTransition:function(){return[Ra(Pa)[0],Ma().memoizedState]},useMutableSource:Ia,useSyncExternalStore:Aa,useId:el,unstable_isNewReconciler:!1};function ul(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var o=n}catch(i){o="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:o,digest:null}}function dl(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function pl(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var hl="function"===typeof WeakMap?WeakMap:Map;function fl(e,t,n){(n=zi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hs||(Hs=!0,Gs=r),pl(0,t)},n}function ml(e,t,n){(n=zi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){pl(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){pl(0,t),"function"!==typeof r&&(null===Zs?Zs=new Set([this]):Zs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gl(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hl;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function yl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function $l(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=zi(-1,1)).tag=2,Fi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var bl=v.ReactCurrentOwner,vl=!1;function xl(e,t,n,r){t.child=null===e?Qi(t,null,n,r):Ki(t,e.child,n,r)}function wl(e,t,n,r,o){n=n.render;var i=t.ref;return Ci(t,o),r=ka(e,t,n,r,i,o),n=Ca(),null===e||vl?(ii&&n&&ti(t),t.flags|=1,xl(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Hl(e,t,o))}function Sl(e,t,n,r,o){if(null===e){var i=n.type;return"function"!==typeof i||Lc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Fc(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,kl(e,t,i,r,o))}if(i=e.child,0===(e.lanes&o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(a,r)&&e.ref===t.ref)return Hl(e,t,o)}return t.flags|=1,(e=zc(i,r)).ref=t.ref,e.return=t,t.child=e}function kl(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(sr(i,r)&&e.ref===t.ref){if(vl=!1,t.pendingProps=r=i,0===(e.lanes&o))return t.lanes=e.lanes,Hl(e,t,o);0!==(131072&e.flags)&&(vl=!0)}}return Ml(e,t,n,r,o)}function Cl(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mo(zs,Ls),Ls|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Mo(zs,Ls),Ls|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Mo(zs,Ls),Ls|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Mo(zs,Ls),Ls|=r;return xl(e,t,o,n),t.child}function Tl(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ml(e,t,n,r,o){var i=Lo(n)?Io:Eo.current;return i=Ao(t,i),Ci(t,o),n=ka(e,t,n,r,i,o),r=Ca(),null===e||vl?(ii&&r&&ti(t),t.flags|=1,xl(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Hl(e,t,o))}function Pl(e,t,n,r,o){if(Lo(n)){var i=!0;Do(t)}else i=!1;if(Ci(t,o),null===t.stateNode)Ul(e,t),Ui(t,n,r),Gi(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,l=t.memoizedProps;a.props=l;var s=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ti(c):c=Ao(t,c=Lo(n)?Io:Eo.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(l!==r||s!==c)&&Hi(t,a,r,c),Ii=!1;var p=t.memoizedState;a.state=p,_i(t,r,a,o),s=t.memoizedState,l!==r||p!==s||Ro.current||Ii?("function"===typeof u&&(ji(t,n,u,r),s=t.memoizedState),(l=Ii||Vi(t,n,l,r,p,s,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),a.props=r,a.state=s,a.context=c,r=l):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Li(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:yi(t.type,l),a.props=c,d=t.pendingProps,p=a.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ti(s):s=Ao(t,s=Lo(n)?Io:Eo.current);var h=n.getDerivedStateFromProps;(u="function"===typeof h||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(l!==d||p!==s)&&Hi(t,a,r,s),Ii=!1,p=t.memoizedState,a.state=p,_i(t,r,a,o);var f=t.memoizedState;l!==d||p!==f||Ro.current||Ii?("function"===typeof h&&(ji(t,n,h,r),f=t.memoizedState),(c=Ii||Vi(t,n,c,r,p,f,s)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,s),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,s)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=s,r=c):("function"!==typeof a.componentDidUpdate||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return El(e,t,n,r,i,o)}function El(e,t,n,r,o,i){Tl(e,t);var a=0!==(128&t.flags);if(!r&&!a)return o&&_o(t,n,!1),Hl(e,t,i);r=t.stateNode,bl.current=t;var l=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ki(t,e.child,null,i),t.child=Ki(t,null,l,i)):xl(e,t,l,i),t.memoizedState=r.state,o&&_o(t,n,!0),t.child}function Rl(e){var t=e.stateNode;t.pendingContext?Fo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Fo(0,t.context,!1),oa(e,t.containerInfo)}function Il(e,t,n,r,o){return fi(),mi(o),t.flags|=256,xl(e,t,n,r),t.child}var Al,Ll,zl,Fl,Ol={dehydrated:null,treeContext:null,retryLane:0};function Dl(e){return{baseLanes:e,cachePool:null,transitions:null}}function _l(e,t,n){var r,o=t.pendingProps,a=sa.current,l=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(l=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Mo(sa,1&a),null===e)return ui(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=o.children,e=o.fallback,l?(o=t.mode,l=t.child,s={mode:"hidden",children:s},0===(1&o)&&null!==l?(l.childLanes=0,l.pendingProps=s):l=Dc(s,o,0,null),e=Oc(e,o,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Dl(n),t.memoizedState=Ol,e):Bl(t,s));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,o,a,l){if(n)return 256&t.flags?(t.flags&=-257,Nl(e,t,l,r=dl(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=Dc({mode:"visible",children:r.children},o,0,null),(a=Oc(a,o,l,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Ki(t,e.child,null,l),t.child.memoizedState=Dl(l),t.memoizedState=Ol,a);if(0===(1&t.mode))return Nl(e,t,l,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var s=r.dgst;return r=s,Nl(e,t,l,r=dl(a=Error(i(419)),r,void 0))}if(s=0!==(l&e.childLanes),vl||s){if(null!==(r=Rs)){switch(l&-l){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|l))?0:o)&&o!==a.retryLane&&(a.retryLane=o,Ri(e,o),rc(r,e,o,-1))}return gc(),Nl(e,t,l,r=dl(Error(i(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Pc.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,oi=co(o.nextSibling),ri=t,ii=!0,ai=null,null!==e&&(Xo[Yo++]=Ko,Xo[Yo++]=Qo,Xo[Yo++]=qo,Ko=e.id,Qo=e.overflow,qo=t),t=Bl(t,r.children),t.flags|=4096,t)}(e,t,s,o,r,a,n);if(l){l=o.fallback,s=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:o.children};return 0===(1&s)&&t.child!==a?((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null):(o=zc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?l=zc(r,l):(l=Oc(l,s,n,null)).flags|=2,l.return=t,o.return=t,o.sibling=l,t.child=o,o=l,l=t.child,s=null===(s=e.child.memoizedState)?Dl(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},l.memoizedState=s,l.childLanes=e.childLanes&~n,t.memoizedState=Ol,o}return e=(l=e.child).sibling,o=zc(l,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Bl(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Nl(e,t,n,r){return null!==r&&mi(r),Ki(t,e.child,null,n),(e=Bl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function jl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ki(e.return,t,n)}function Wl(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Vl(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(xl(e,t,r.children,n),0!==(2&(r=sa.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&jl(e,n,t);else if(19===e.tag)jl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Mo(sa,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ca(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Wl(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ca(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Wl(t,!0,n,null,i);break;case"together":Wl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ul(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ds|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=zc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gl(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Zl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xl(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zl(t),null;case 1:case 17:return Lo(t.type)&&zo(),Zl(t),null;case 3:return r=t.stateNode,ia(),To(Ro),To(Eo),da(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(pi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ai&&(lc(ai),ai=null))),Ll(e,t),Zl(t),null;case 5:la(t);var o=ra(na.current);if(n=t.type,null!==e&&null!=t.stateNode)zl(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Zl(t),null}if(e=ra(ea.current),pi(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[ho]=t,r[fo]=a,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(o=0;o<Fr.length;o++)Br(Fr[o],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":q(r,a),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Br("invalid",r);break;case"textarea":oe(r,a),Br("invalid",r)}for(var s in $e(n,a),o=null,a)if(a.hasOwnProperty(s)){var c=a[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,c,e),o=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,c,e),o=["children",""+c]):l.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Br("scroll",r)}switch(n){case"input":G(r),J(r,a,!0);break;case"textarea":G(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Jr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[ho]=t,e[fo]=r,Al(e,t,!1,!1),t.stateNode=e;e:{switch(s=be(n,r),n){case"dialog":Br("cancel",e),Br("close",e),o=r;break;case"iframe":case"object":case"embed":Br("load",e),o=r;break;case"video":case"audio":for(o=0;o<Fr.length;o++)Br(Fr[o],e);o=r;break;case"source":Br("error",e),o=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),o=r;break;case"details":Br("toggle",e),o=r;break;case"input":q(e,r),o=Y(e,r),Br("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=D({},r,{value:void 0}),Br("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),Br("invalid",e)}for(a in $e(n,o),c=o)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&pe(e,u):"number"===typeof u&&pe(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(l.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Br("scroll",e):null!=u&&b(e,a,u,s))}switch(n){case"input":G(e),J(e,r,!1);break;case"textarea":G(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+U(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Zl(t),null;case 6:if(e&&null!=t.stateNode)Fl(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=ra(na.current),ra(ea.current),pi(t)){if(r=t.stateNode,n=t.memoizedProps,r[ho]=t,(a=r.nodeValue!==n)&&null!==(e=ri))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ho]=t,t.stateNode=r}return Zl(t),null;case 13:if(To(sa),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==oi&&0!==(1&t.mode)&&0===(128&t.flags))hi(),fi(),t.flags|=98560,a=!1;else if(a=pi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[ho]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Zl(t),a=!1}else null!==ai&&(lc(ai),ai=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&sa.current)?0===Fs&&(Fs=3):gc())),null!==t.updateQueue&&(t.flags|=4),Zl(t),null);case 4:return ia(),Ll(e,t),null===e&&Wr(t.stateNode.containerInfo),Zl(t),null;case 10:return Si(t.type._context),Zl(t),null;case 19:if(To(sa),null===(a=t.memoizedState))return Zl(t),null;if(r=0!==(128&t.flags),null===(s=a.rendering))if(r)Gl(a,!1);else{if(0!==Fs||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=ca(e))){for(t.flags|=128,Gl(a,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(s=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Mo(sa,1&sa.current|2),t.child}e=e.sibling}null!==a.tail&&Ke()>Vs&&(t.flags|=128,r=!0,Gl(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ca(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gl(a,!0),null===a.tail&&"hidden"===a.tailMode&&!s.alternate&&!ii)return Zl(t),null}else 2*Ke()-a.renderingStartTime>Vs&&1073741824!==n&&(t.flags|=128,r=!0,Gl(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=a.last)?n.sibling=s:t.child=s,a.last=s)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ke(),t.sibling=null,n=sa.current,Mo(sa,r?1&n|2:1&n),t):(Zl(t),null);case 22:case 23:return pc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ls)&&(Zl(t),6&t.subtreeFlags&&(t.flags|=8192)):Zl(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Yl(e,t){switch(ni(t),t.tag){case 1:return Lo(t.type)&&zo(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ia(),To(Ro),To(Eo),da(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return la(t),null;case 13:if(To(sa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return To(sa),null;case 4:return ia(),null;case 10:return Si(t.type._context),null;case 22:case 23:return pc(),null;default:return null}}Al=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ll=function(){},zl=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,ra(ea.current);var i,a=null;switch(n){case"input":o=Y(e,o),r=Y(e,r),a=[];break;case"select":o=D({},o,{value:void 0}),r=D({},r,{value:void 0}),a=[];break;case"textarea":o=re(e,o),r=re(e,r),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(u in $e(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var s=o[u];for(i in s)s.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(l.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(s=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&c!==s&&(null!=c||null!=s))if("style"===u)if(s){for(i in s)!s.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&s[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(l.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Br("scroll",e),a||s===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Fl=function(e,t,n,r){n!==r&&(t.flags|=4)};var ql=!1,Kl=!1,Ql="function"===typeof WeakSet?WeakSet:Set,Jl=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cc(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Cc(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&ts(t,n,i)}o=o.next}while(o!==r)}}function os(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ho],delete t[fo],delete t[go],delete t[yo],delete t[$o])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ls(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ls(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function us(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(us(e,t,n),e=e.sibling;null!==e;)us(e,t,n),e=e.sibling}var ds=null,ps=!1;function hs(e,t,n){for(n=n.child;null!==n;)fs(e,t,n),n=n.sibling}function fs(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(ot,n)}catch(l){}switch(n.tag){case 5:Kl||es(n,t);case 6:var r=ds,o=ps;ds=null,hs(e,t,n),ps=o,null!==(ds=r)&&(ps?(e=ds,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ds.removeChild(n.stateNode));break;case 18:null!==ds&&(ps?(e=ds,n=n.stateNode,8===e.nodeType?so(e.parentNode,n):1===e.nodeType&&so(e,n),Wt(e)):so(ds,n.stateNode));break;case 4:r=ds,o=ps,ds=n.stateNode.containerInfo,ps=!0,hs(e,t,n),ds=r,ps=o;break;case 0:case 11:case 14:case 15:if(!Kl&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&ts(n,t,a),o=o.next}while(o!==r)}hs(e,t,n);break;case 1:if(!Kl&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Cc(n,t,l)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?(Kl=(r=Kl)||null!==n.memoizedState,hs(e,t,n),Kl=r):hs(e,t,n);break;default:hs(e,t,n)}}function ms(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ql),t.forEach((function(t){var r=Ec.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var a=e,l=t,s=l;e:for(;null!==s;){switch(s.tag){case 5:ds=s.stateNode,ps=!1;break e;case 3:case 4:ds=s.stateNode.containerInfo,ps=!0;break e}s=s.return}if(null===ds)throw Error(i(160));fs(a,l,o),ds=null,ps=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(u){Cc(o,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gs(t,e),$s(e),4&r){try{rs(3,e,e.return),os(3,e)}catch(g){Cc(e,e.return,g)}try{rs(5,e,e.return)}catch(g){Cc(e,e.return,g)}}break;case 1:gs(t,e),$s(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(gs(t,e),$s(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var o=e.stateNode;try{pe(o,"")}catch(g){Cc(e,e.return,g)}}if(4&r&&null!=(o=e.stateNode)){var a=e.memoizedProps,l=null!==n?n.memoizedProps:a,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===a.type&&null!=a.name&&K(o,a),be(s,l);var u=be(s,a);for(l=0;l<c.length;l+=2){var d=c[l],p=c[l+1];"style"===d?ge(o,p):"dangerouslySetInnerHTML"===d?de(o,p):"children"===d?pe(o,p):b(o,d,p,u)}switch(s){case"input":Q(o,a);break;case"textarea":ie(o,a);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(o,!!a.multiple,f,!1):h!==!!a.multiple&&(null!=a.defaultValue?ne(o,!!a.multiple,a.defaultValue,!0):ne(o,!!a.multiple,a.multiple?[]:"",!1))}o[fo]=a}catch(g){Cc(e,e.return,g)}}break;case 6:if(gs(t,e),$s(e),4&r){if(null===e.stateNode)throw Error(i(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(g){Cc(e,e.return,g)}}break;case 3:if(gs(t,e),$s(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(g){Cc(e,e.return,g)}break;case 4:default:gs(t,e),$s(e);break;case 13:gs(t,e),$s(e),8192&(o=e.child).flags&&(a=null!==o.memoizedState,o.stateNode.isHidden=a,!a||null!==o.alternate&&null!==o.alternate.memoizedState||(Ws=Ke())),4&r&&ms(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Kl=(u=Kl)||d,gs(t,e),Kl=u):gs(t,e),$s(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Jl=e,d=e.child;null!==d;){for(p=Jl=d;null!==Jl;){switch(f=(h=Jl).child,h.tag){case 0:case 11:case 14:case 15:rs(4,h,h.return);break;case 1:es(h,h.return);var m=h.stateNode;if("function"===typeof m.componentWillUnmount){r=h,n=h.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Cc(r,n,g)}}break;case 5:es(h,h.return);break;case 22:if(null!==h.memoizedState){ws(p);continue}}null!==f?(f.return=h,Jl=f):ws(p)}d=d.sibling}e:for(d=null,p=e;;){if(5===p.tag){if(null===d){d=p;try{o=p.stateNode,u?"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none":(s=p.stateNode,l=void 0!==(c=p.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=me("display",l))}catch(g){Cc(e,e.return,g)}}}else if(6===p.tag){if(null===d)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(g){Cc(e,e.return,g)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:gs(t,e),$s(e),4&r&&ms(e);case 21:}}function $s(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ls(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(pe(o,""),r.flags&=-33),us(e,ss(e),o);break;case 3:case 4:var a=r.stateNode.containerInfo;cs(e,ss(e),a);break;default:throw Error(i(161))}}catch(l){Cc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bs(e,t,n){Jl=e,vs(e,t,n)}function vs(e,t,n){for(var r=0!==(1&e.mode);null!==Jl;){var o=Jl,i=o.child;if(22===o.tag&&r){var a=null!==o.memoizedState||ql;if(!a){var l=o.alternate,s=null!==l&&null!==l.memoizedState||Kl;l=ql;var c=Kl;if(ql=a,(Kl=s)&&!c)for(Jl=o;null!==Jl;)s=(a=Jl).child,22===a.tag&&null!==a.memoizedState?Ss(o):null!==s?(s.return=a,Jl=s):Ss(o);for(;null!==i;)Jl=i,vs(i,t,n),i=i.sibling;Jl=o,ql=l,Kl=c}xs(e)}else 0!==(8772&o.subtreeFlags)&&null!==i?(i.return=o,Jl=i):xs(e)}}function xs(e){for(;null!==Jl;){var t=Jl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Kl||os(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Kl)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:yi(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Bi(t,a,r);break;case 3:var l=t.updateQueue;if(null!==l){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bi(t,l,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var p=d.dehydrated;null!==p&&Wt(p)}}}break;default:throw Error(i(163))}Kl||512&t.flags&&is(t)}catch(h){Cc(t,t.return,h)}}if(t===e){Jl=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jl=n;break}Jl=t.return}}function ws(e){for(;null!==Jl;){var t=Jl;if(t===e){Jl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jl=n;break}Jl=t.return}}function Ss(e){for(;null!==Jl;){var t=Jl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{os(4,t)}catch(s){Cc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(s){Cc(t,o,s)}}var i=t.return;try{is(t)}catch(s){Cc(t,i,s)}break;case 5:var a=t.return;try{is(t)}catch(s){Cc(t,a,s)}}}catch(s){Cc(t,t.return,s)}if(t===e){Jl=null;break}var l=t.sibling;if(null!==l){l.return=t.return,Jl=l;break}Jl=t.return}}var ks,Cs=Math.ceil,Ts=v.ReactCurrentDispatcher,Ms=v.ReactCurrentOwner,Ps=v.ReactCurrentBatchConfig,Es=0,Rs=null,Is=null,As=0,Ls=0,zs=Co(0),Fs=0,Os=null,Ds=0,_s=0,Bs=0,Ns=null,js=null,Ws=0,Vs=1/0,Us=null,Hs=!1,Gs=null,Zs=null,Xs=!1,Ys=null,qs=0,Ks=0,Qs=null,Js=-1,ec=0;function tc(){return 0!==(6&Es)?Ke():-1!==Js?Js:Js=Ke()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Es)&&0!==As?As&-As:null!==gi.transition?(0===ec&&(ec=mt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:qt(e.type)}function rc(e,t,n,r){if(50<Ks)throw Ks=0,Qs=null,Error(i(185));yt(e,n,r),0!==(2&Es)&&e===Rs||(e===Rs&&(0===(2&Es)&&(_s|=n),4===Fs&&sc(e,As)),oc(e,r),1===n&&0===Es&&0===(1&t.mode)&&(Vs=Ke()+500,No&&Vo()))}function oc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),l=1<<a,s=o[a];-1===s?0!==(l&n)&&0===(l&r)||(o[a]=ht(l,t)):s<=t&&(e.expiredLanes|=l),i&=~l}}(e,t);var r=pt(e,e===Rs?As:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){No=!0,Wo(e)}(cc.bind(null,e)):Wo(cc.bind(null,e)),ao((function(){0===(6&Es)&&Vo()})),n=null;else{switch(vt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Js=-1,ec=0,0!==(6&Es))throw Error(i(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var r=pt(e,e===Rs?As:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var o=Es;Es|=2;var a=mc();for(Rs===e&&As===t||(Us=null,Vs=Ke()+500,hc(e,t));;)try{bc();break}catch(s){fc(e,s)}wi(),Ts.current=a,Es=o,null!==Is?t=0:(Rs=null,As=0,t=Fs)}if(0!==t){if(2===t&&(0!==(o=ft(e))&&(r=o,t=ac(e,o))),1===t)throw n=Os,hc(e,0),sc(e,r),oc(e,Ke()),n;if(6===t)sc(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!lr(i(),o))return!1}catch(l){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=yc(e,r))&&(0!==(a=ft(e))&&(r=a,t=ac(e,a))),1===t))throw n=Os,hc(e,0),sc(e,r),oc(e,Ke()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:wc(e,js,Us);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Ws+500-Ke())){if(0!==pt(e,0))break;if(((o=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(wc.bind(null,e,js,Us),t);break}wc(e,js,Us);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var l=31-at(r);a=1<<l,(l=t[l])>o&&(o=l),r&=~a}if(r=o,10<(r=(120>(r=Ke()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cs(r/1960))-r)){e.timeoutHandle=ro(wc.bind(null,e,js,Us),r);break}wc(e,js,Us);break;default:throw Error(i(329))}}}return oc(e,Ke()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Ns;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=js,js=n,null!==t&&lc(t)),e}function lc(e){null===js?js=e:js.push.apply(js,e)}function sc(e,t){for(t&=~Bs,t&=~_s,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Es))throw Error(i(327));Sc();var t=pt(e,0);if(0===(1&t))return oc(e,Ke()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Os,hc(e,0),sc(e,t),oc(e,Ke()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,js,Us),oc(e,Ke()),null}function uc(e,t){var n=Es;Es|=1;try{return e(t)}finally{0===(Es=n)&&(Vs=Ke()+500,No&&Vo())}}function dc(e){null!==Ys&&0===Ys.tag&&0===(6&Es)&&Sc();var t=Es;Es|=1;var n=Ps.transition,r=bt;try{if(Ps.transition=null,bt=1,e)return e()}finally{bt=r,Ps.transition=n,0===(6&(Es=t))&&Vo()}}function pc(){Ls=zs.current,To(zs)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Is)for(n=Is.return;null!==n;){var r=n;switch(ni(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&zo();break;case 3:ia(),To(Ro),To(Eo),da();break;case 5:la(r);break;case 4:ia();break;case 13:case 19:To(sa);break;case 10:Si(r.type._context);break;case 22:case 23:pc()}n=n.return}if(Rs=e,Is=e=zc(e.current,null),As=Ls=t,Fs=0,Os=null,Bs=_s=Ds=0,js=Ns=null,null!==Mi){for(t=0;t<Mi.length;t++)if(null!==(r=(n=Mi[t]).interleaved)){n.interleaved=null;var o=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=o,r.next=a}n.pending=r}Mi=null}return e}function fc(e,t){for(;;){var n=Is;try{if(wi(),pa.current=al,$a){for(var r=ma.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}$a=!1}if(fa=0,ya=ga=ma=null,ba=!1,va=0,Ms.current=null,null===n||null===n.return){Fs=1,Os=t,Is=null;break}e:{var a=e,l=n.return,s=n,c=t;if(t=As,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=s,p=d.tag;if(0===(1&d.mode)&&(0===p||11===p||15===p)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=yl(l);if(null!==f){f.flags&=-257,$l(f,l,s,0,t),1&f.mode&&gl(a,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){gl(a,u,t),gc();break e}c=Error(i(426))}else if(ii&&1&s.mode){var y=yl(l);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),$l(y,l,s,0,t),mi(ul(c,s));break e}}a=c=ul(c,s),4!==Fs&&(Fs=2),null===Ns?Ns=[a]:Ns.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Di(a,fl(0,c,t));break e;case 1:s=c;var $=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof $.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Zs||!Zs.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Di(a,ml(a,s,t));break e}}a=a.return}while(null!==a)}xc(n)}catch(v){t=v,Is===n&&null!==n&&(Is=n=n.return);continue}break}}function mc(){var e=Ts.current;return Ts.current=al,null===e?al:e}function gc(){0!==Fs&&3!==Fs&&2!==Fs||(Fs=4),null===Rs||0===(268435455&Ds)&&0===(268435455&_s)||sc(Rs,As)}function yc(e,t){var n=Es;Es|=2;var r=mc();for(Rs===e&&As===t||(Us=null,hc(e,t));;)try{$c();break}catch(o){fc(e,o)}if(wi(),Es=n,Ts.current=r,null!==Is)throw Error(i(261));return Rs=null,As=0,Fs}function $c(){for(;null!==Is;)vc(Is)}function bc(){for(;null!==Is&&!Ye();)vc(Is)}function vc(e){var t=ks(e.alternate,e,Ls);e.memoizedProps=e.pendingProps,null===t?xc(e):Is=t,Ms.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xl(n,t,Ls)))return void(Is=n)}else{if(null!==(n=Yl(n,t)))return n.flags&=32767,void(Is=n);if(null===e)return Fs=6,void(Is=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Is=t);Is=t=e}while(null!==t);0===Fs&&(Fs=5)}function wc(e,t,n){var r=bt,o=Ps.transition;try{Ps.transition=null,bt=1,function(e,t,n,r){do{Sc()}while(null!==Ys);if(0!==(6&Es))throw Error(i(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-at(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}(e,a),e===Rs&&(Is=Rs=null,As=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xs||(Xs=!0,Rc(tt,(function(){return Sc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Ps.transition,Ps.transition=null;var l=bt;bt=1;var s=Es;Es|=4,Ms.current=null,function(e,t){if(eo=Ut,hr(e=pr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break e}var l=0,s=-1,c=-1,u=0,d=0,p=e,h=null;t:for(;;){for(var f;p!==n||0!==o&&3!==p.nodeType||(s=l+o),p!==a||0!==r&&3!==p.nodeType||(c=l+r),3===p.nodeType&&(l+=p.nodeValue.length),null!==(f=p.firstChild);)h=p,p=f;for(;;){if(p===e)break t;if(h===n&&++u===o&&(s=l),h===a&&++d===r&&(c=l),null!==(f=p.nextSibling))break;h=(p=h).parentNode}p=f}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Ut=!1,Jl=t;null!==Jl;)if(e=(t=Jl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jl=e;else for(;null!==Jl;){t=Jl;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,$=t.stateNode,b=$.getSnapshotBeforeUpdate(t.elementType===t.type?g:yi(t.type,g),y);$.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(i(163))}}catch(x){Cc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Jl=e;break}Jl=t.return}m=ns,ns=!1}(e,n),ys(n,e),fr(to),Ut=!!eo,to=eo=null,e.current=n,bs(n,e,o),qe(),Es=s,bt=l,Ps.transition=a}else e.current=n;if(Xs&&(Xs=!1,Ys=e,qs=o),a=e.pendingLanes,0===a&&(Zs=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),oc(e,Ke()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Hs)throw Hs=!1,e=Gs,Gs=null,e;0!==(1&qs)&&0!==e.tag&&Sc(),a=e.pendingLanes,0!==(1&a)?e===Qs?Ks++:(Ks=0,Qs=e):Ks=0,Vo()}(e,t,n,r)}finally{Ps.transition=o,bt=r}return null}function Sc(){if(null!==Ys){var e=vt(qs),t=Ps.transition,n=bt;try{if(Ps.transition=null,bt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,qs=0,0!==(6&Es))throw Error(i(331));var o=Es;for(Es|=4,Jl=e.current;null!==Jl;){var a=Jl,l=a.child;if(0!==(16&Jl.flags)){var s=a.deletions;if(null!==s){for(var c=0;c<s.length;c++){var u=s[c];for(Jl=u;null!==Jl;){var d=Jl;switch(d.tag){case 0:case 11:case 15:rs(8,d,a)}var p=d.child;if(null!==p)p.return=d,Jl=p;else for(;null!==Jl;){var h=(d=Jl).sibling,f=d.return;if(as(d),d===u){Jl=null;break}if(null!==h){h.return=f,Jl=h;break}Jl=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Jl=a}}if(0!==(2064&a.subtreeFlags)&&null!==l)l.return=a,Jl=l;else e:for(;null!==Jl;){if(0!==(2048&(a=Jl).flags))switch(a.tag){case 0:case 11:case 15:rs(9,a,a.return)}var $=a.sibling;if(null!==$){$.return=a.return,Jl=$;break e}Jl=a.return}}var b=e.current;for(Jl=b;null!==Jl;){var v=(l=Jl).child;if(0!==(2064&l.subtreeFlags)&&null!==v)v.return=l,Jl=v;else e:for(l=b;null!==Jl;){if(0!==(2048&(s=Jl).flags))try{switch(s.tag){case 0:case 11:case 15:os(9,s)}}catch(w){Cc(s,s.return,w)}if(s===l){Jl=null;break e}var x=s.sibling;if(null!==x){x.return=s.return,Jl=x;break e}Jl=s.return}}if(Es=o,Vo(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(ot,e)}catch(w){}r=!0}return r}finally{bt=n,Ps.transition=t}}return!1}function kc(e,t,n){e=Fi(e,t=fl(0,t=ul(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),oc(e,t))}function Cc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Zs||!Zs.has(r))){t=Fi(t,e=ml(t,e=ul(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),oc(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Rs===e&&(As&n)===n&&(4===Fs||3===Fs&&(130023424&As)===As&&500>Ke()-Ws?hc(e,0):Bs|=n),oc(e,t)}function Mc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Ri(e,t))&&(yt(e,t,n),oc(e,n))}function Pc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Mc(e,n)}function Ec(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Mc(e,n)}function Rc(e,t){return Ze(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Ic(e,t,n,r)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fc(e,t,n,r,o,a){var l=2;if(r=e,"function"===typeof e)Lc(e)&&(l=1);else if("string"===typeof e)l=5;else e:switch(e){case S:return Oc(n.children,o,a,t);case k:l=8,o|=8;break;case C:return(e=Ac(12,n,t,2|o)).elementType=C,e.lanes=a,e;case E:return(e=Ac(13,n,t,o)).elementType=E,e.lanes=a,e;case R:return(e=Ac(19,n,t,o)).elementType=R,e.lanes=a,e;case L:return Dc(n,o,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:l=10;break e;case M:l=9;break e;case P:l=11;break e;case I:l=14;break e;case A:l=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Ac(l,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function Oc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Dc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=L,e.lanes=n,e.stateNode={isHidden:!1},e}function _c(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Nc(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,o,i,a,l,s){return e=new Nc(e,t,n,l,s),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Ac(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ai(i),e}function Wc(e){if(!e)return Po;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Lo(n))return Oo(e,n,t)}return t}function Vc(e,t,n,r,o,i,a,l,s){return(e=jc(n,r,!0,e,0,i,0,l,s)).context=Wc(null),n=e.current,(i=zi(r=tc(),o=nc(n))).callback=void 0!==t&&null!==t?t:null,Fi(n,i,o),e.current.lanes=o,yt(e,o,r),oc(e,r),e}function Uc(e,t,n,r){var o=t.current,i=tc(),a=nc(o);return n=Wc(n),null===t.context?t.context=n:t.pendingContext=n,(t=zi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fi(o,t,a))&&(rc(e,o,a,i),Oi(e,o,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Zc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}ks=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ro.current)vl=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return vl=!1,function(e,t,n){switch(t.tag){case 3:Rl(t),fi();break;case 5:aa(t);break;case 1:Lo(t.type)&&Do(t);break;case 4:oa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Mo($i,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Mo(sa,1&sa.current),t.flags|=128,null):0!==(n&t.child.childLanes)?_l(e,t,n):(Mo(sa,1&sa.current),null!==(e=Hl(e,t,n))?e.sibling:null);Mo(sa,1&sa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vl(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Mo(sa,sa.current),r)break;return null;case 22:case 23:return t.lanes=0,Cl(e,t,n)}return Hl(e,t,n)}(e,t,n);vl=0!==(131072&e.flags)}else vl=!1,ii&&0!==(1048576&t.flags)&&ei(t,Zo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ul(e,t),e=t.pendingProps;var o=Ao(t,Eo.current);Ci(t,n),o=ka(null,t,r,e,o,n);var a=Ca();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lo(r)?(a=!0,Do(t)):a=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Ai(t),o.updater=Wi,t.stateNode=o,o._reactInternals=t,Gi(t,r,e,n),t=El(null,t,r,!0,a,n)):(t.tag=0,ii&&a&&ti(t),xl(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ul(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Lc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===P)return 11;if(e===I)return 14}return 2}(r),e=yi(r,e),o){case 0:t=Ml(null,t,r,e,n);break e;case 1:t=Pl(null,t,r,e,n);break e;case 11:t=wl(null,t,r,e,n);break e;case 14:t=Sl(null,t,r,yi(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Ml(e,t,r,o=t.elementType===r?o:yi(r,o),n);case 1:return r=t.type,o=t.pendingProps,Pl(e,t,r,o=t.elementType===r?o:yi(r,o),n);case 3:e:{if(Rl(t),null===e)throw Error(i(387));r=t.pendingProps,o=(a=t.memoizedState).element,Li(e,t),_i(t,r,null,n);var l=t.memoizedState;if(r=l.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Il(e,t,r,n,o=ul(Error(i(423)),t));break e}if(r!==o){t=Il(e,t,r,n,o=ul(Error(i(424)),t));break e}for(oi=co(t.stateNode.containerInfo.firstChild),ri=t,ii=!0,ai=null,n=Qi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===o){t=Hl(e,t,n);break e}xl(e,t,r,n)}t=t.child}return t;case 5:return aa(t),null===e&&ui(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,l=o.children,no(r,o)?l=null:null!==a&&no(r,a)&&(t.flags|=32),Tl(e,t),xl(e,t,l,n),t.child;case 6:return null===e&&ui(t),null;case 13:return _l(e,t,n);case 4:return oa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ki(t,null,r,n):xl(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,wl(e,t,r,o=t.elementType===r?o:yi(r,o),n);case 7:return xl(e,t,t.pendingProps,n),t.child;case 8:case 12:return xl(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,a=t.memoizedProps,l=o.value,Mo($i,r._currentValue),r._currentValue=l,null!==a)if(lr(a.value,l)){if(a.children===o.children&&!Ro.current){t=Hl(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var s=a.dependencies;if(null!==s){l=a.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=zi(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),ki(a.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===a.tag)l=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(l=a.return))throw Error(i(341));l.lanes|=n,null!==(s=l.alternate)&&(s.lanes|=n),ki(l,n,t),l=a.sibling}else l=a.child;if(null!==l)l.return=a;else for(l=a;null!==l;){if(l===t){l=null;break}if(null!==(a=l.sibling)){a.return=l.return,l=a;break}l=l.return}a=l}xl(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ci(t,n),r=r(o=Ti(o)),t.flags|=1,xl(e,t,r,n),t.child;case 14:return o=yi(r=t.type,t.pendingProps),Sl(e,t,r,o=yi(r.type,o),n);case 15:return kl(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:yi(r,o),Ul(e,t),t.tag=1,Lo(r)?(e=!0,Do(t)):e=!1,Ci(t,n),Ui(t,r,o),Gi(t,r,o,n),El(null,t,r,!0,e,n);case 19:return Vl(e,t,n);case 22:return Cl(e,t,n)}throw Error(i(156,t.tag))};var Xc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function qc(e){this._internalRoot=e}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function eu(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof o){var l=o;o=function(){var e=Hc(a);l.call(e)}}Uc(t,a,e,o)}else a=function(e,t,n,r,o){if(o){if("function"===typeof r){var i=r;r=function(){var e=Hc(a);i.call(e)}}var a=Vc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=a,e[mo]=a.current,Wr(8===e.nodeType?e.parentNode:e),dc(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var l=r;r=function(){var e=Hc(s);l.call(e)}}var s=jc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=s,e[mo]=s.current,Wr(8===e.nodeType?e.parentNode:e),dc((function(){Uc(t,s,n,r)})),s}(n,t,e,o,r);return Hc(a)}qc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Uc(e,t,null,null)},qc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Uc(null,e,null,null)})),t[mo]=null}},qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&Dt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&($t(t,1|n),oc(t,Ke()),0===(6&Es)&&(Vs=Ke()+500,Vo()))}break;case 13:dc((function(){var t=Ri(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Zc(e,1)}},wt=function(e){if(13===e.tag){var t=Ri(e,134217728);if(null!==t)rc(t,e,134217728,tc());Zc(e,134217728)}},St=function(e){if(13===e.tag){var t=nc(e),n=Ri(e,t);if(null!==n)rc(n,e,t,tc());Zc(e,t)}},kt=function(){return bt},Ct=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},we=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=wo(r);if(!o)throw Error(i(90));Z(r),Q(r,o)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Pe=uc,Ee=dc;var tu={usingClientEntryPoint:!1,Events:[vo,xo,wo,Te,Me,uc]},nu={findFiberByHostInstance:bo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ou.isDisabled&&ou.supportsFiber)try{ot=ou.inject(ru),it=ou}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Kc(e))throw Error(i(299));var n=!1,r="",o=Xc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,o),e[mo]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(i(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Kc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,o=!1,a="",l=Xc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(l=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,o,0,a,l),e[mo]=t.current,Wr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new qc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(i(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(i(40));return!!e._reactRootContainer&&(dc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[mo]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:(e,t,n)=>{"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},730:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(791),i=l(o),a=l(n(7));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){this.getImageData()}},{key:"getCanvasSideSizes",value:function(){var e=this.props,t=e.imgElem,n=t.naturalWidth,r=t.naturalHeight,o=e.sideSize,i=void 0===o?Math.max(n,r):o,a=n>r;return{width:a?i:Math.ceil(i*(n/r)),height:a?Math.ceil(i*(r/n)):i}}},{key:"getImageData",value:function(){if(this.props.sideSize<=0)console.error("CanvasController: sideSize can't be lower or equal to zero!");else{var e=this.getCanvasSideSizes(),t=e.width,n=e.height,r=this.canvas.getContext("2d"),o=[];this.canvas=Object.assign(this.canvas,{width:t,height:n}),r.clearRect(0,0,t,n),r.drawImage(this.props.imgElem,0,0,t,n);try{o=r.getImageData(0,0,t,n).data}catch(i){console.error("CanvasController: catch error on getImageData!",i)}this.props.onImageData(o)}}},{key:"render",value:function(){var e=this;return i.default.createElement("canvas",{ref:function(t){return e.canvas=t}})}}]),t}(o.PureComponent);s.propTypes={imgElem:a.default.object.isRequired,sideSize:a.default.number,onImageData:a.default.func},s.defaultProps={onImageData:function(){}},t.default=s},746:(e,t,n)=>{"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(791),i=s(o),a=s(n(7)),l=s(n(730));function s(e){return e&&e.__esModule?e:{default:e}}var c={display:"none"},u=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return i.imageParsed=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];i.props.onImageParsed({data:e,size:{width:i.state.imgElem.naturalWidth,height:i.state.imgElem.naturalHeight}}),i.setState({isImageParsed:!0})},i.onImgLoad=function(e){i.setState({imgElem:e.target})},i.onImgError=function(){return console.error('react-image-parser: error on load image "'+i.props.img+'"')},i.state={imgElem:null,isImageParsed:!1},i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"render",value:function(){var e=this.state,t=e.imgElem,n=e.isImageParsed,r=this.props,o=r.img,a=r.maxImgSideSize,s=r.onImageParsed;if(n)return null;var u="function"===typeof s&&!!t;return i.default.createElement("div",{style:c},u&&i.default.createElement(l.default,{imgElem:t,sideSize:a,onImageData:this.imageParsed}),!t&&o&&i.default.createElement("img",{src:o,alt:"react-image-parser image",onLoad:this.onImgLoad,onError:this.onImgError}))}}]),t}(o.PureComponent);u.propTypes={img:a.default.string.isRequired,maxImgSideSize:a.default.number,onImageParsed:a.default.func},u.defaultProps={img:null,onImageParsed:function(){}},t.Z=u},374:(e,t,n)=>{"use strict";var r=n(791),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!s.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:u,props:i,_owner:l.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},117:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function $(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},$.prototype=y.prototype;var v=b.prototype=new $;v.constructor=b,m(v,y.prototype),v.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var o,i={},a=null,l=null;if(null!=t)for(o in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,o)&&!k.hasOwnProperty(o)&&(i[o]=t[o]);var s=arguments.length-2;if(1===s)i.children=r;else if(1<s){for(var c=Array(s),u=0;u<s;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(o in s=e.defaultProps)void 0===i[o]&&(i[o]=s[o]);return{$$typeof:n,type:e,key:a,ref:l,props:i,_owner:S.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var M=/\/+/g;function P(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function E(e,t,o,i,a){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var s=!1;if(null===e)s=!0;else switch(l){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return a=a(s=e),e=""===i?"."+P(s,0):i,x(a)?(o="",null!=e&&(o=e.replace(M,"$&/")+"/"),E(a,t,o,"",(function(e){return e}))):null!=a&&(T(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(M,"$&/")+"/")+e)),t.push(a)),1;if(s=0,i=""===i?".":i+":",x(e))for(var c=0;c<e.length;c++){var u=i+P(l=e[c],c);s+=E(l,t,o,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(l=e.next()).done;)s+=E(l=l.value,t,o,u=i+P(l,c++),a);else if("object"===l)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function R(e,t,n){if(null==e)return e;var r=[],o=0;return E(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},L={transition:null},z={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:L,ReactCurrentOwner:S};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=o,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=m({},e.props),i=e.key,a=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,l=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)w.call(t,c)&&!k.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){s=Array(c);for(var u=0;u<c;u++)s[u]=arguments[u+2];o.children=s}return{$$typeof:n,type:e.type,key:i,ref:a,props:o,_owner:l}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.2.0"},791:(e,t,n)=>{"use strict";e.exports=n(117)},184:(e,t,n)=>{"use strict";e.exports=n(374)},813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var l=2*(r+1)-1,s=e[l],c=l+1,u=e[c];if(0>i(s,n))c<o&&0>i(u,s)?(e[r]=u,e[c]=n,r=c):(e[r]=s,e[l]=n,r=l);else{if(!(c<o&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,s=l.now();t.unstable_now=function(){return l.now()-s}}var c=[],u=[],d=1,p=null,h=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,$="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,v(e),!m)if(null!==r(c))m=!0,L(w);else{var t=r(u);null!==t&&z(x,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,$(T),T=-1),f=!0;var i=h;try{for(v(n),p=r(c);null!==p&&(!(p.expirationTime>n)||e&&!E());){var a=p.callback;if("function"===typeof a){p.callback=null,h=p.priorityLevel;var l=a(p.expirationTime<=n);n=t.unstable_now(),"function"===typeof l?p.callback=l:p===r(c)&&o(c),v(n)}else o(c);p=r(c)}if(null!==p)var s=!0;else{var d=r(u);null!==d&&z(x,d.startTime-n),s=!1}return s}finally{p=null,h=i,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,C=null,T=-1,M=5,P=-1;function E(){return!(t.unstable_now()-P<M)}function R(){if(null!==C){var e=t.unstable_now();P=e;var n=!0;try{n=C(!0,e)}finally{n?S():(k=!1,C=null)}}else k=!1}if("function"===typeof b)S=function(){b(R)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,A=I.port2;I.port1.onmessage=R,S=function(){A.postMessage(null)}}else S=function(){y(R,0)};function L(e){C=e,k||(k=!0,S())}function z(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,L(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:l=i+l,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?($(T),T=-1):g=!0,z(x,i-a))):(e.sortIndex=l,n(c,e),m||f||(m=!0,L(w))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},296:(e,t,n)=>{"use strict";e.exports=n(813)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".58361557.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="photo-editor:";n.l=(r,o,i,a)=>{if(e[r])e[r].push(o);else{var l,s;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){l=d;break}}l||(s=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+i),l.src=r),e[r]=[o];var p=(t,n)=>{l.onerror=l.onload=null,clearTimeout(h);var o=e[r];if(delete e[r],l.parentNode&&l.parentNode.removeChild(l),o&&o.forEach((e=>e(n))),t)return t(n)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=p.bind(null,l.onerror),l.onload=p.bind(null,l.onload),s&&document.head.appendChild(l)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/photo-editor/",(()=>{var e={179:0};n.f.j=(t,r)=>{var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var i=new Promise(((n,r)=>o=e[t]=[n,r]));r.push(o[2]=i);var a=n.p+n.u(t),l=new Error;n.l(a,(r=>{if(n.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",l.name="ChunkLoadError",l.type=i,l.request=a,o[1](l)}}),"chunk-"+t,t)}};var t=(t,r)=>{var o,i,a=r[0],l=r[1],s=r[2],c=0;if(a.some((t=>0!==e[t]))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(s)s(n)}for(t&&t(r);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkphoto_editor=self.webpackChunkphoto_editor||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=n(791),t=n(250),r=n(184);const o=e=>{let{setEditor:t}=e;return(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"container",children:[(0,r.jsx)("h1",{className:"text-center",children:"Go with the one that sparks your chemistry."}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-6 mb-2 text-center",children:(0,r.jsx)("button",{onClick:()=>t(1),className:" btn btn-primary w-100 fs-1 py-4",children:"Editor Pro"})}),(0,r.jsx)("div",{className:"col-md-6 mb-2 text-center",children:(0,r.jsx)("button",{onClick:()=>t(2),className:" btn btn-success w-100 fs-1 py-4",children:"Editor Pro Max"})})]})]})})},i="PhotoEditor_ImageContainer__hNNFr",a="PhotoEditor_ImageWrapper__bzdUW",l="PhotoEditor_ToolsContainer__eCZCb",s=t=>{let{file:n,imageData:o,imageSize:s}=t;const c=(0,e.useRef)(null);(0,e.useEffect)((()=>{c.current.getContext("2d").putImageData(o,0,0)}),[o]);const u={scale:1,transformX:0,transformY:0,rotate:0},[d,p]=(0,e.useState)(u),[h,f]=(0,e.useState)({transform:"scale(".concat(d.scale,")")});(0,e.useEffect)((()=>{f({transform:"scale(".concat(d.scale,") translate(").concat(d.transformY,"px, ").concat(d.transformX,"px) rotate(").concat(d.rotate,"deg)")})}),[d]);const m=e=>{let t=parseFloat(d.scale+.1*e);t>=.1&&p({...d,scale:t})},g=(e,t)=>{let n=parseFloat(d.transformX+20*e),r=parseFloat(d.transformY+20*t);p({...d,transformX:n,transformY:r})};return(0,r.jsxs)("div",{className:a,children:[(0,r.jsxs)("div",{className:l,children:[(0,r.jsx)("button",{onClick:e=>m(1),className:"btn btn-success",title:"Zoom-in",children:(0,r.jsx)("i",{className:"fa-solid fa-magnifying-glass-plus"})}),(0,r.jsx)("button",{onClick:e=>m(-1),className:"btn btn-success",title:"Zoom-out",children:(0,r.jsx)("i",{className:"fa-solid fa-magnifying-glass-minus"})}),(0,r.jsx)("button",{onClick:()=>g(-1,0),className:"btn btn-success",title:"Up",children:(0,r.jsx)("i",{className:"fa-solid fa-chevron-up"})}),(0,r.jsx)("button",{onClick:()=>g(1,0),className:"btn btn-success",title:"Down",children:(0,r.jsx)("i",{className:"fa-solid fa-chevron-down"})}),(0,r.jsx)("button",{onClick:()=>g(0,-1),className:"btn btn-success",title:"Left",children:(0,r.jsx)("i",{className:"fa-solid fa-chevron-left"})}),(0,r.jsx)("button",{onClick:()=>g(0,1),className:"btn btn-success",title:"Right",children:(0,r.jsx)("i",{className:"fa-solid fa-chevron-right"})}),(0,r.jsx)("button",{onClick:()=>{p({...d,rotate:(d.rotate+45)%360})},className:"btn btn-success",title:"Rotate",children:(0,r.jsx)("i",{className:"fa-solid fa-rotate-right"})}),(0,r.jsx)("button",{onClick:()=>{p(u)},className:"btn btn-success",title:"Reset",children:(0,r.jsx)("i",{className:"fa-solid fa-refresh"})}),(0,r.jsx)("button",{onClick:()=>(()=>{var e=c.current.toDataURL("image/png",1).replace("image/png","image/octet-stream"),t=document.createElement("a");t.download="mzy_ka_h_na_:D.png",t.href=e,t.click()})(),className:"btn btn-success",title:"Download",children:(0,r.jsx)("i",{className:"fa-solid fa-download"})})]}),(0,r.jsx)("div",{className:i,children:(0,r.jsx)("canvas",{ref:c,style:h,width:s.width,height:s.height})})]})},c="photo_filters_FiltersWrapper__n2l2m",u="photo_filters_FiltersContainer__fxoBR",d=t=>{let{file:n,setFile:o,filterHandler:i,imgData:a}=t;const l={contrast:1,opacity:100,brightness:0,power:0,red:0,green:0,blue:0,negative:0,bw:0,blur:0},[s,d]=(0,e.useState)(l),[p,h]=(0,e.useState)(l);return(0,e.useEffect)((()=>{let e=new Uint8ClampedArray(a.data);for(let t=0;t<a.width*a.height;t++){const n=4*t;e[n+0]=(1==s.negative?-1:1)*parseInt(s.contrast)*((0==s.bw?a.data[n+0]:parseInt(a.data[n+0]>2.55*s.bw?0:255))^parseFloat(s.power))+parseInt(s.brightness)+parseInt(s.red)+(1==s.negative?255:0),e[n+1]=(1==s.negative?-1:1)*parseInt(s.contrast)*((0==s.bw?a.data[n+1]:parseInt(a.data[n+1]>2.55*s.bw?0:255))^parseFloat(s.power))+parseInt(s.brightness)+parseInt(s.green)+(1==s.negative?255:0),e[n+2]=(1==s.negative?-1:1)*parseInt(s.contrast)*((0==s.bw?a.data[n+2]:parseInt(a.data[n+2]>2.55*s.bw?0:255))^parseFloat(s.power))+parseInt(s.brightness)+parseInt(s.blue)+(1==s.negative?255:0),e[n+3]=parseInt(parseFloat(a.data[n+3]/100)*parseInt(s.opacity))}(e=>{const t=[1,4,6,4,1,4,16,24,16,4,6,24,36,24,6,4,16,24,16,4,1,4,6,4,1],n=t.reduce(((e,t)=>e+t),0);for(let r=0;r<s.blur;r++)for(let o=2;o<a.height-2;o++)for(let r=2;r<a.width-2;r++){let i=0,l=0,s=0;for(let n=-2;n<=2;n++)for(let c=-2;c<=2;c++){const u=4*((o+n)*a.width+(r+c)),d=t[5*(n+2)+(c+2)];i+=e[u]*d,l+=e[u+1]*d,s+=e[u+2]*d}const c=4*(o*a.width+r);e[c]=parseFloat(i/n),e[c+1]=parseFloat(l/n),e[c+2]=parseFloat(s/n),e[c+3]=e[c+3]}console.log(e)})(e),i(e)}),[s]),(0,r.jsxs)("div",{className:c,children:[(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-6",children:(0,r.jsx)("h4",{children:"Filters"})}),(0,r.jsxs)("div",{className:"col-6 text-end",children:[(0,r.jsxs)("button",{onMouseDown:()=>{h(s),d(l)},onMouseUp:()=>d(p),className:"btn btn-success me-2",title:"Right",children:[(0,r.jsx)("i",{class:"fa-solid fa-code-compare"})," Compare"]}),(0,r.jsxs)("button",{onClick:()=>d(l),className:"btn btn-success",title:"Right",children:[(0,r.jsx)("i",{className:"fa-solid fa-refresh"})," Reset"]})]})]}),(0,r.jsxs)("div",{className:u,children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"",className:"form-label",children:"Brightness"}),(0,r.jsx)("label",{htmlFor:"",className:"form-label float-end",children:s.brightness}),(0,r.jsx)("input",{type:"range",className:"form-range",name:"",min:-100,value:s.brightness,onChange:e=>d({...s,brightness:e.target.value}),max:100,id:""})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"",className:"form-label",children:"Red"}),(0,r.jsx)("label",{htmlFor:"",className:"form-label float-end",children:s.red}),(0,r.jsx)("input",{type:"range",className:"form-range",name:"",min:-255,value:s.red,onChange:e=>d({...s,red:e.target.value}),max:255,id:""})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"",className:"form-label",children:"Green"}),(0,r.jsx)("label",{htmlFor:"",className:"form-label float-end",children:s.green}),(0,r.jsx)("input",{type:"range",className:"form-range",name:"",min:-255,value:s.green,onChange:e=>d({...s,green:e.target.value}),max:255,id:""})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"",className:"form-label",children:"Blue"}),(0,r.jsx)("label",{htmlFor:"",className:"form-label float-end",children:s.blue}),(0,r.jsx)("input",{type:"range",className:"form-range",name:"",min:-255,value:s.blue,onChange:e=>d({...s,blue:e.target.value}),max:255,id:""})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"",className:"form-label",children:"B/W"}),(0,r.jsx)("label",{htmlFor:"",className:"form-label float-end",children:s.bw}),(0,r.jsx)("input",{type:"range",className:"form-range",name:"",min:0,value:s.bw,onChange:e=>d({...s,bw:e.target.value}),max:100,id:""})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"",className:"form-label",children:"Opacity"}),(0,r.jsx)("label",{htmlFor:"",className:"form-label float-end",children:s.opacity}),(0,r.jsx)("input",{type:"range",className:"form-range",name:"",min:0,value:s.opacity,onChange:e=>d({...s,opacity:e.target.value}),max:100,id:""})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"",className:"form-label",children:"Gaussian Blur"}),(0,r.jsx)("label",{htmlFor:"",className:"form-label float-end",children:s.blur}),(0,r.jsx)("input",{type:"range",className:"form-range",name:"",min:0,value:s.blur,onChange:e=>d({...s,blur:e.target.value}),max:10,id:""})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"",className:"form-label",children:"Power Law"}),(0,r.jsx)("label",{htmlFor:"",className:"form-label float-end",children:s.power}),(0,r.jsx)("input",{type:"range",className:"form-range",name:"",min:0,value:s.power,onChange:e=>d({...s,power:e.target.value}),max:100,id:""})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"",className:"form-label",children:"Contrast"}),(0,r.jsx)("label",{htmlFor:"",className:"form-label float-end",children:s.contrast}),(0,r.jsx)("input",{type:"range",className:"form-range",name:"",min:1,value:s.contrast,onChange:e=>d({...s,contrast:e.target.value}),max:10,step:.1,id:""})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"",className:"form-label",children:"Negative"}),(0,r.jsx)("label",{htmlFor:"",className:"form-label float-end",children:s.negative}),(0,r.jsx)("input",{type:"range",className:"form-range",name:"",min:0,value:s.negative,onChange:e=>d({...s,negative:e.target.value}),max:1,id:""})]})]})]})};var p=n(746);const h=()=>{const[t,n]=(0,e.useState)(),[o,i]=(0,e.useState)(),[a,l]=(0,e.useState)(),[c,u]=(0,e.useState)({height:0,width:0,data:null});(0,e.useEffect)((()=>{if(c.data){const e=new ImageData(c.data,c.width,c.height);i(e)}}),[c]);return(0,r.jsx)("div",{children:t?(0,r.jsxs)("div",{className:" mt-2",children:[(0,r.jsx)(p.Z,{img:t,onImageParsed:e=>{let{data:t,size:n}=e;l(t),u({height:n.height,width:n.width,data:t})}}),o&&(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsx)(s,{file:t,imageData:o,imageSize:{height:c.height,width:c.width}})}),(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsx)(d,{file:t,setFile:n,filterHandler:e=>{u({...c,data:e})},imgData:{width:c.width,height:c.height,data:a}})})]})]}):(0,r.jsxs)("div",{className:"my-4 d-flex flex-column justify-content-center",children:[(0,r.jsx)("span",{className:"fw-bold me-2",children:"Select your image:"}),(0,r.jsx)("input",{type:"file",onChange:function(e){let t=URL.createObjectURL(e.target.files[0]);n(t)}})]})})},f=()=>(0,r.jsx)("div",{children:(0,r.jsx)("nav",{className:"navbar navbar-expand-lg bg-dark",children:(0,r.jsxs)("div",{className:"container-fluid",children:[(0,r.jsx)("a",{className:"navbar-brand text-white",href:"/",children:"Team Ultra Photo Editor"}),(0,r.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"})]})})}),m=()=>(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)("footer",{className:"d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top",children:[(0,r.jsxs)("div",{className:"col-md-4 d-flex align-items-center",children:[(0,r.jsx)("a",{href:"/",className:"mb-3 me-2 mb-md-0 text-muted text-decoration-none lh-1",children:(0,r.jsx)("svg",{className:"bi",width:30,height:24,children:(0,r.jsx)("use",{xlinkHref:"#bootstrap"})})}),(0,r.jsx)("span",{className:"text-muted",children:"\xa9 2023 All Rights Reserved :'D"})]}),(0,r.jsxs)("ul",{className:"nav col-md-4 justify-content-end list-unstyled d-flex",children:[(0,r.jsx)("li",{className:"ms-3",children:(0,r.jsx)("a",{className:"text-muted",target:"_blank",href:"https://twitter.com/saadjavaid21",children:(0,r.jsx)("i",{className:"fab fa-twitter",width:24,height:24})})}),(0,r.jsx)("li",{className:"ms-3",children:(0,r.jsx)("a",{className:"text-muted",target:"_blank",href:"https://instagram.com/saad._.javed",children:(0,r.jsx)("i",{className:"fab fa-instagram",width:24,height:24})})}),(0,r.jsx)("li",{className:"ms-3",children:(0,r.jsx)("a",{className:"text-muted",target:"_blank",href:"https://web.facebook.com/profile.php?id=100005482758456",children:(0,r.jsx)("i",{className:"fab fa-facebook",width:24,height:24})})})]})]})}),g=e=>{let{children:t}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)(f,{}),(0,r.jsx)("main",{className:"container py-4",style:{minHeight:"85vh"},children:t}),(0,r.jsx)(m,{})]})},y=[{value:65504,name:"jfif"},{value:65498,name:"sos"},{value:65505,subvalue:17784,name:"exif"},{value:65505,subvalue:26740,name:"xmp"},{value:65506,subvalue:19792,name:"mpf"}];var $=e=>{if(65496!==e.getUint16(0))return;const t=e.byteLength;let n,r,o=2;for(;o<t&&255===e.getUint8(o);){n=e.getUint16(o);const t=y.find((t=>t.value===n&&(!t.subvalue||t.subvalue===e.getUint16(o+2+2))));if(t){const{name:n}=t;r||(r={}),r[n]||(r[n]={offset:o,size:e.getUint16(o+2)})}if(65498===n)break;o+=2+e.getUint16(o+2)}return r},b=(e,t,n)=>{if(!e)return;const r=new DataView(e),o=$(r);if(!o||!o.exif)return;const i=((e,t)=>{if(65505!==e.getUint16(t))return;const n=e.getUint16(t+2);if(t+=4,1165519206!==e.getUint32(t))return;t+=6;const r=e.getUint16(t);if(18761!==r&&19789!==r)return;const o=18761===r;if(t+=2,42!==e.getUint16(t,o))return;t+=e.getUint32(t+2,o);const i=r=>{const i=[];let a=t;const l=Math.min(e.byteLength,t+n-16);for(;a<l;a+=12){const t=a;e.getUint16(t,o)===r&&i.push(t)}return i};return{read:t=>{const n=i(t);if(n.length)return e.getUint16(n[0]+8,o)},write:(t,n)=>{const r=i(t);return!!r.length&&(r.forEach((t=>e.setUint16(t+8,n,o))),!0)}}})(r,o.exif.offset);return i?void 0===n?i.read(t):i.write(t,n):void 0},v=e=>window.__pqina_webapi__?window.__pqina_webapi__[e]:window[e],x=function(){};const w={ArrayBuffer:"readAsArrayBuffer"};var S=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,e.size],n=arguments.length>2?arguments[2]:void 0;return await function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(((r,o)=>{const{dataFormat:i=w.ArrayBuffer}=n,a=new(v("FileReader"));a.onload=()=>r(a.result),a.onerror=()=>o(a.error),a.onprogress=t,a[i](e)}))}(e.slice(...t),n)},k=async(e,t)=>{const n=await S(e,[0,262144],t);return b(n,274)||1};let C=null;var T=()=>(null===C&&(C="undefined"!=typeof window&&void 0!==window.document),C);let M=null;var P=()=>new Promise((e=>{if(null===M){const t="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let n=T()?new Image:{};return n.onload=()=>{M=1===n.naturalWidth,n=void 0,e(M)},void(n.src=t)}return e(M)})),E=e=>e.getContext("2d").getImageData(0,0,e.width,e.height),R=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const r=document.createElement(e),o=Object.getOwnPropertyDescriptors(r.__proto__);for(const i in t)"style"===i?r.style.cssText=t[i]:o[i]&&o[i].set||/textContent|innerHTML/.test(i)||"function"==typeof t[i]?r[i]=t[i]:r.setAttribute(i,t[i]);return n.forEach((e=>r.appendChild(e))),r};const I={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]};var A=e=>{e.width=1,e.height=1;const t=e.getContext("2d");t&&t.clearRect(0,0,1,1)},L=e=>"data"in e,z=e=>T()?RegExp(e).test(window.navigator.userAgent):void 0;let F=null;var O=()=>(null===F&&(F=z(/Android/)),F),D=(e,t)=>{const n=R("canvas",{width:e.width,height:e.height});return n.getContext("2d",t).drawImage(e,0,0),n},_=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=await P(),[r,o]=n||t<5?[e.width,e.height]:[e.height,e.width],i=R("canvas",{width:r,height:o}),a=i.getContext("2d",{willReadFrequently:!0});if(L(e)&&!n&&t>1){const t=R("canvas",{width:e.width,height:e.height});t.getContext("2d",{willReadFrequently:!0}).putImageData(e,0,0),e=t}if(!n&&t>1&&a.transform.apply(a,function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return-1===n&&(n=1),I[n](e,t)}(e.width,e.height,t)),L(e)){if(a.putImageData(e,0,0),O())return D(i)}else a.drawImage(e,0,0);return e instanceof HTMLCanvasElement&&A(e),i},B=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 1===t||await P()?e:E(await _(e,t))},N=e=>"object"==typeof e;const j=e=>e instanceof HTMLElement?e:N(e)?W(e):e,W=e=>{let t;return Array.isArray(e)?(t=[],e.forEach(((e,n)=>{t[n]=j(e)}))):(t={},Object.keys(e).forEach((n=>{const r=e[n];t[n]=j(r)}))),t};var V=e=>"string"==typeof e,U=e=>"function"==typeof e,H=()=>"createImageBitmap"in window,G=e=>/svg/.test(e.type),Z=()=>Math.random().toString(36).substring(2,9);const X=new Map;var Y=(e,t,n)=>new Promise(((r,o)=>{const i=e.toString();let a=X.get(i);if(!a){const t=(e=>"function () {self.onmessage = function (message) {(".concat(e.toString(),").apply(null, message.data.content.concat([function (err, response) {\n    response = response || {};\n    const transfer = 'data' in response ? [response.data.buffer] : 'width' in response ? [response] : [];\n    return self.postMessage({ id: message.data.id, content: response, error: err }, transfer);\n}]))}}"))(e),n=URL.createObjectURL((e=>new Blob(["(","function"==typeof e?e.toString():e,")()"],{type:"application/javascript"}))(t)),r=new Map,o=new Worker(n);a={url:n,worker:o,messages:r,terminationTimeout:void 0,terminate:()=>{clearTimeout(a.terminationTimeout),a.worker.terminate(),URL.revokeObjectURL(n),X.delete(i)}},o.onmessage=function(e){const{id:t,content:n,error:o}=e.data;if(clearTimeout(a.terminationTimeout),a.terminationTimeout=setTimeout((()=>{r.size>0||a.terminate()}),500),!r.has(t))return;const i=r.get(t);r.delete(t),null!=o?i.reject(o):i.resolve(n)},X.set(i,a)}const l=Z();a.messages.set(l,{resolve:r,reject:o}),a.worker.postMessage({id:l,content:t},n)})),q=async(e,t)=>{const n=async()=>{const n=await(async(e,t)=>{const n=R("img",{src:URL.createObjectURL(e)}),r=await((e,t)=>new Promise(((n,r)=>{const o=()=>n(((e,t)=>{let{width:n,height:r,canvasMemoryLimit:o,contextOptions:i}=t,a=n||e.naturalWidth,l=r||e.naturalHeight;a||l||(a=300,l=150);const s=a*l;if(o&&s>o){const e=Math.sqrt(o)/Math.sqrt(s);a=Math.floor(a*e),l=Math.floor(l*e)}const c=R("canvas");return c.width=a,c.height=l,c.getContext("2d",i).drawImage(e,0,0,a,l),c})(e,t));e.complete&&e.width?o():(e.onload=o,e.onerror=()=>r(new Error("Failed to load image")))})))(n,t);return URL.revokeObjectURL(n.src),r})(e,{canvasMemoryLimit:t,contextOptions:{willReadFrequently:!0}}),r=E(n);return A(n),r};if(O())return await n();let r;if(H()&&!G(e)&&"OffscreenCanvas"in window)try{r=await Y(((e,t,n)=>{createImageBitmap(e).then((e=>{let r=e.width,o=e.height;const i=r*o;if(t&&i>t){const e=Math.sqrt(t)/Math.sqrt(i);r=Math.floor(r*e),o=Math.floor(o*e)}const a=new OffscreenCanvas(r,o),l=a.getContext("2d",{willReadFrequently:!0});l.drawImage(e,0,0,r,o);const s=l.getImageData(0,0,a.width,a.height);n(null,s)})).catch((e=>{n(e)}))}),[e,t])}catch(e){}return r&&r.width?r:await n()},K=(e,t,n)=>new Promise(((r,o)=>{try{e.toBlob((e=>{if(!e)return o(new Error("Failed to create blob"));r(e)}),t,n)}catch(e){o(e)}})),Q=async(e,t,n)=>{const r=await _(e),o=await K(r,t,n);return A(r),o};const J={matroska:"mkv"};var ee=e=>{const t=(e.match(/\/([a-z0-9]+)/)||[])[1];if(/^x/.test(t)){const[,t=""]=e.split("/x-");return J[t]}return t},te=e=>e.substr(0,e.lastIndexOf("."))||e;const ne=/avif|bmp|gif|jpg|jpeg|jpe|jif|jfif|png|svg|tiff|webp/;var re=e=>{return e&&(t=(n=e,n.split(".").pop()).toLowerCase(),ne.test(t)?"image/"+(/jfif|jif|jpe|jpg/.test(t)?"jpeg":"svg"===t?"svg+xml":t):"");var t,n},oe=(e,t,n)=>{const r=(new Date).getTime(),o=e.type.length&&!/null|text/.test(e.type),i=o?e.type:n,a=((e,t)=>{const n=re(e);if(n===t)return e;const r=ee(t)||n;return"".concat(te(e),".").concat(r)})(t,i);try{return new(v("File"))([e],a,{lastModified:r,type:o?e.type:i})}catch(t){const n=o?e.slice():e.slice(0,e.size,i);return n.lastModified=r,n.name=a,n}},ie=(e,t)=>e/t,ae=e=>e;const le=Math.PI,se=Math.PI/2,ce=se/2;var ue=e=>{const t=Math.abs(e)%Math.PI;return t>ce&&t<Math.PI-ce};const de={Top:"t",Right:"r",Bottom:"b",Left:"l",TopLeft:"tl",TopRight:"tr",BottomRight:"br",BottomLeft:"bl"},{Top:pe,Right:he,Bottom:fe,Left:me,TopLeft:ge,TopRight:ye,BottomRight:$e,BottomLeft:be}=de;var ve={[pe]:[.5,0],[he]:[1,.5],[fe]:[.5,1],[me]:[0,.5],[ge]:[0,0],[ye]:[1,0],[$e]:[1,1],[be]:[0,1]},xe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return parseFloat(e.toFixed(t))};const we=(e,t,n)=>n+(e-n)*t,Se=e=>({x:e.x+.5*e.width,y:e.y+.5*e.height,rx:.5*e.width,ry:.5*e.height}),ke=()=>Ce(0,0),Ce=(e,t)=>({x:e,y:t}),Te=e=>Ce(e.pageX,e.pageY),Me=e=>Ce(e.x,e.y),Pe=e=>(e.x=-e.x,e.y=-e.y,e),Ee=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ke();const r=Math.cos(t),o=Math.sin(t),i=e.x-n.x,a=e.y-n.y;return e.x=n.x+r*i-o*a,e.y=n.y+o*i+r*a,e},Re=e=>Math.sqrt(e.x*e.x+e.y*e.y),Ie=e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return 0===t?ke():(e.x/=t,e.y/=t,e)},Ae=(e,t)=>Math.atan2(t.y-e.y,t.x-e.x),Le=(e,t)=>e.x===t.x&&e.y===t.y,ze=(e,t)=>(e.x=t(e.x),e.y=t(e.y),e),Fe=(e,t)=>(e.x+=t.x,e.y+=t.y,e),Oe=(e,t)=>(e.x-=t.x,e.y-=t.y,e),De=(e,t)=>(e.x/=t,e.y/=t,e),_e=(e,t)=>(e.x*=t,e.y*=t,e),Be=(e,t)=>e.x*t.x+e.y*t.y,Ne=(e,t)=>e.x*t.y-e.y*t.x,je=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ke();const n=e.x-t.x,r=e.y-t.y;return n*n+r*r},We=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ke();return Math.sqrt(je(e,t))},Ve=e=>{let t=0,n=0;return e.forEach((e=>{t+=e.x,n+=e.y})),Ce(t/e.length,n/e.length)},Ue=(e,t,n,r,o)=>(e.forEach((e=>{e.x=t?r-(e.x-r):e.x,e.y=n?o-(e.y-o):e.y})),e),He=(e,t,n,r)=>{const o=Math.sin(t),i=Math.cos(t);return e.forEach((e=>{e.x-=n,e.y-=r;const t=e.x*i-e.y*o,a=e.x*o+e.y*i;e.x=n+t,e.y=r+a})),e},Ge=(e,t)=>({width:e,height:t}),Ze=e=>Ge(e.width,e.height),Xe=e=>Ge(e.width,e.height),Ye=e=>Ge(e.width,e.height),qe=e=>Ge(e[0],e[1]),Ke=e=>{return/img/i.test(e.nodeName)?Ge((t=e).naturalWidth,t.naturalHeight):Xe(e);var t},Qe=(e,t)=>Ge(e,t),Je=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ae;return n(e.width)===n(t.width)&&n(e.height)===n(t.height)},et=(e,t)=>(e.width*=t,e.height*=t,e),tt=e=>Ce(.5*e.width,.5*e.height),nt=(e,t)=>{const n=Math.abs(t),r=Math.abs(Math.cos(n)),o=Math.abs(Math.sin(n)),i=r*e.width+o*e.height,a=o*e.width+r*e.height;return e.width=i,e.height=a,e},rt=(e,t)=>e.width>=t.width&&e.height>=t.height,ot=(e,t)=>(e.width=t(e.width),e.height=t(e.height),e),it=(e,t)=>({start:e,end:t}),at=e=>it(Me(e.start),Me(e.end)),lt=(e,t)=>{if(0===t)return e;const n=Ce(e.start.x-e.end.x,e.start.y-e.end.y),r=Ie(n),o=_e(r,t);return e.start.x+=o.x,e.start.y+=o.y,e.end.x-=o.x,e.end.y-=o.y,e},st=[Ce(-1,-1),Ce(-1,1),Ce(1,1),Ce(1,-1)],ct=(e,t,n,r)=>({x:e,y:t,width:n,height:r}),ut=e=>ct(e.x,e.y,e.width,e.height),dt=()=>ct(0,0,0,0),pt=e=>ct(0,0,e.width,e.height),ht=e=>ct(e[3],e[0],e[1]-e[3],e[2]-e[0]),ft=e=>ct(e.x||0,e.y||0,e.width||0,e.height||0),mt=e=>{let t=e[0].x,n=e[0].x,r=e[0].y,o=e[0].y;return e.forEach((e=>{t=Math.min(t,e.x),n=Math.max(n,e.x),r=Math.min(r,e.y),o=Math.max(o,e.y)})),ct(t,r,n-t,o-r)},gt=e=>$t(e.x-e.rx,e.y-e.ry,2*e.rx,2*e.ry),yt=(e,t)=>ct(e.x-.5*t.width,e.y-.5*t.height,t.width,t.height),$t=(e,t,n,r)=>ct(e,t,n,r),bt=e=>Ce(e.x+.5*e.width,e.y+.5*e.height),vt=(e,t)=>(e.x+=t.x,e.y+=t.y,e),xt=(e,t,n)=>(n=n||bt(e),e.x=t*(e.x-n.x)+n.x,e.y=t*(e.y-n.y)+n.y,e.width=t*e.width,e.height=t*e.height,e),wt=(e,t,n,r)=>{const o=(r.x-e.x)/e.width,i=(r.y-e.y)/e.height;let a=Math.max(t.width,e.width),l=Math.max(t.height,e.height);return a=Math.min(n.width,a),l=Math.min(n.height,l),e.x=r.x-o*a,e.y=r.y-i*l,e.width=a,e.height=l,e},St=(e,t)=>{const[n,r]=ve[t],o=n*e.width,i=r*e.height;return Ce(e.x+o,e.y+i)},kt=(e,t)=>(e.x*=t,e.y*=t,e.width*=t,e.height*=t,e),Ct=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ae;return n(e.x)===n(t.x)&&n(e.y)===n(t.y)&&n(e.width)===n(t.width)&&n(e.height)===n(t.height)},Tt=e=>ie(e.width,e.height),Mt=(e,t,n,r,o)=>(e.x=t,e.y=n,e.width=r,e.height=o,e),Pt=(e,t)=>(e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e),Et=(e,t,n)=>(n||(n=bt(e)),Ft(e).map((e=>Ee(e,t,n)))),Rt=(e,t)=>ct(.5*e.width-.5*t.width,.5*e.height-.5*t.height,t.width,t.height),It=(e,t)=>!(t.x<e.x)&&!(t.y<e.y)&&!(t.x>e.x+e.width)&&!(t.y>e.y+e.height),At=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ke();if(0===e.width||0===e.height)return dt();const r=Tt(e);t||(t=r);let o=e.width,i=e.height;return t>r?o=i*t:i=o/t,ct(n.x+.5*(e.width-o),n.y+.5*(e.height-i),o,i)},Lt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tt(e),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ke();if(0===e.width||0===e.height)return dt();let r=e.width,o=r/t;return o>e.height&&(o=e.height,r=o*t),ct(n.x+.5*(e.width-r),n.y+.5*(e.height-o),r,o)},zt=e=>[Math.min(e.y,e.y+e.height),Math.max(e.x,e.x+e.width),Math.max(e.y,e.y+e.height),Math.min(e.x,e.x+e.width)],Ft=e=>[Ce(e.x,e.y),Ce(e.x+e.width,e.y),Ce(e.x+e.width,e.y+e.height),Ce(e.x,e.y+e.height)],Ot=(e,t)=>{if(e)return e.x=t(e.x),e.y=t(e.y),e.width=t(e.width),e.height=t(e.height),e},Dt=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bt(e);return Ft(e).map(((e,r)=>{const o=st[r];return Ce(we(e.x,1+o.x*t.x,n.x),we(e.y,1+o.y*t.y,n.y))}))},_t=e=>(e.x=0,e.y=0,e),Bt=e=>{const t=e[0],n=e[e.length-1];e=Le(t,n)?e:[...e,t];const r=t.x,o=t.y;let i,a,l,s=0,c=0,u=0,d=0;const p=e.length;for(;c<p;c++)i=e[c],a=e[c+1>p-1?0:c+1],l=(i.y-o)*(a.x-r)-(a.y-o)*(i.x-r),s+=l,u+=(i.x+a.x-2*r)*l,d+=(i.y+a.y-2*o)*l;return l=3*s,Ce(r+u/l,o+d/l)},Nt=(e,t)=>jt(e.start,e.end,t.start,t.end),jt=(e,t,n,r)=>{const o=(r.y-n.y)*(t.x-e.x)-(r.x-n.x)*(t.y-e.y);if(0===o)return;const i=((r.x-n.x)*(e.y-n.y)-(r.y-n.y)*(e.x-n.x))/o,a=((t.x-e.x)*(e.y-n.y)-(t.y-e.y)*(e.x-n.x))/o;return i<0||i>1||a<0||a>1?void 0:Ce(e.x+i*(t.x-e.x),e.y+i*(t.y-e.y))},Wt=function(e,t){let{ignoreIdenticalLines:n=!1,breakOnIntersection:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=t.length,i=[];for(let a=0;a<o-1;a++){if(n&&(Le(e.start,t[a])||Le(e.start,t[a+1])||Le(e.end,t[a])||Le(e.end,t[a+1])))continue;const o=jt(e.start,e.end,t[a],t[a+1]);if(o){if(r)return[o];i.push(o)}}return i.length?i:void 0},Vt=(e,t)=>{let n=0,r=0,o=!1;const i=t.length;for(n=0,r=i-1;n<i;r=n++)t[n].y>e.y!=t[r].y>e.y&&e.x<(t[r].x-t[n].x)*(e.y-t[n].y)/(t[r].y-t[n].y)+t[n].x&&(o=!o);return o},Ut=e=>{const t=[];for(let n=0;n<e.length;n++){let r=n+1;r===e.length&&(r=0),t.push(it(Me(e[n]),Me(e[r])))}return t},Ht=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Ut(e).map((e=>lt(e,t)))},Gt=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:12;const l=[];for(let s=0;s<a;s++)l.push(Ce(e.x+t*Math.cos(s*(2*Math.PI)/a),e.y+n*Math.sin(s*(2*Math.PI)/a)));return(o||i)&&Ue(l,o,i,e.x,e.y),r&&He(l,r,e.x,e.y),l},Zt=(e,t,n,r)=>{const o=Ce(e.x-n.x,e.y-n.y),i=Ce(r.x-n.x,r.y-n.y),a=Be(i,i);let l=Be(o,i)/a;l=l<0?0:l,l=l>1?1:l;const s=Ce(i.x*l+n.x-e.x,i.y*l+n.y-e.y);return Be(s,s)<=t*t},Xt=(e,t,n)=>{const r=n.length;for(let o=0;o<r-1;o++)if(Zt(e,t,n[o],n[o+1]))return!0;return!1},Yt=(e,t,n)=>!!Vt(e,n)||!!Xt(e,t,n)||Zt(e,t,n[0],n[n.length-1]),qt=(e,t,n,r,o)=>Yt(e,t,Et(n,r,o||bt(n)));var Kt=(e,t)=>{const n=pt(e),r=bt(n),o=Et(n,t,r);return _t(mt(o))},Qt=(e,t)=>e instanceof HTMLElement&&(!t||new RegExp("^".concat(t,"$"),"i").test(e.nodeName)),Jt=e=>e instanceof File,en=async(e,t,n)=>{const r=await K(e,t,n);return oe(r,"canvas")},tn=e=>e.split("/").pop().split(/\?|\#/).shift();const nn=T()&&Node.prototype.replaceChildren?(e,t)=>e.replaceChildren(t):(e,t)=>{for(;e.lastChild;)e.removeChild(e.lastChild);void 0!==t&&e.append(t)},rn=T()&&R("div",{class:"PinturaMeasure",style:"position:absolute;left:0;top:0;width:99999px;height:0;pointer-events:none;contain:strict;margin:0;padding:0;"});let on;var an=e=>(nn(rn,e),rn.parentNode||document.body.append(rn),clearTimeout(on),on=setTimeout((()=>{rn.remove()}),500),e);let ln=null;var sn=()=>(null===ln&&(ln=T()&&/^((?!chrome|android).)*(safari|iphone|ipad)/i.test(navigator.userAgent)),ln),cn=e=>new Promise(((t,n)=>{let r=!1;!e.parentNode&&sn()&&(r=!0,e.style.cssText="position:absolute;visibility:hidden;pointer-events:none;left:0;top:0;width:0;height:0;",an(e));const o=()=>{const n=e.naturalWidth,o=e.naturalHeight;n&&o&&(r&&e.remove(),clearInterval(i),t({width:n,height:o}))};e.onerror=e=>{clearInterval(i),n(e)};const i=setInterval(o,1);o()})),un=e=>new Promise(((t,n)=>{const r=()=>{t({width:e.videoWidth,height:e.videoHeight})};if(e.readyState>=1)return r();e.onloadedmetadata=r,e.onerror=()=>n(e.error)})),dn=e=>/^image/.test(e.type),pn=e=>new Promise((t=>{const n=V(e)?e:URL.createObjectURL(e),r=()=>{const e=new Image;e.src=n,t(e)};if(e instanceof Blob&&dn(e))return r();const o=document.createElement("video");o.preload="metadata",o.onloadedmetadata=()=>t(o),o.onerror=r,o.src=n})),hn=e=>"VIDEO"===e.nodeName,fn=async e=>{let t,n;t=e.src?e:await pn(e);try{n=hn(t)?await un(t):await cn(t)}finally{Jt(e)&&URL.revokeObjectURL(t.src)}return n},mn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new(v("ProgressEvent"))("progress",{loaded:100*e,total:100,lengthComputable:t})},gn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e;return e.getAllResponseHeaders().indexOf(t)>=0?n(e.getResponseHeader(t)):void 0},yn=e=>{if(!e)return null;const t=e.split(/filename=|filename\*=.+''/).splice(1).map((e=>e.trim().replace(/^["']|[;"']{0,2}$/g,""))).filter((e=>e.length));return t.length?decodeURI(t[t.length-1]):null};class $n extends Error{constructor(e,t,n){super(e),this.name="EditorError",this.code=t,this.metadata=n}}var bn=(e,t)=>{const{headers:n={},credentials:r}=t||{};Object.entries(n).forEach((t=>{let[n,r]=t;return e.setRequestHeader(n,r)})),r&&(e.withCredentials="omit"!==r)},vn=e=>e instanceof Blob&&!(e instanceof File),xn=e=>"close"in e,wn=async(e,t,n)=>{if(Jt(e)||vn(e))return e;if(V(e))return await((e,t,n)=>/^data:/.test(e)?async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data-uri",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x;n(mn(0));const r=await fetch(e);n(mn(.33));const o=await r.blob();let i;dn(o)||(i="image/"+(e.includes(",/9j/")?"jpeg":"png")),n(mn(.66));const a=oe(o,t,i);return n(mn(1)),a}(e,void 0,t):((e,t,n)=>new Promise(((r,o)=>{const i=()=>o(new $n("Error fetching image","URL_REQUEST",a)),a=new XMLHttpRequest;a.onprogress=t,a.onerror=i,a.onload=()=>{if(!a.response||a.status>=300||a.status<200)return i();const t=gn(a,"Content-Type"),n=gn(a,"Content-Disposition",yn)||tn(e);r(oe(a.response,n,t||re(n)))};const{willRequest:l}=n;Promise.resolve(l&&l(e,{resourceType:"image"})).then((t=>{if(!1===t)return o("Image load rejected");a.open("GET",e),bn(a,t),a.responseType="blob",a.send()})).catch(console.error)})))(e,t,n))(e,t,n);if(Qt(e,"canvas"))return await en(e);if(Qt(e,"img"))return await(async e=>{const t=await fn(e),n=await(e=>new Promise(((t,n)=>{if(e.complete)return t(e);e.onload=()=>t(e),e.onerror=()=>n(new Error("Failed to load image"))})))(e),r=R("canvas",t);r.getContext("2d",{willReadFrequently:!0}).drawImage(n,0,0);const o=await K(r);return oe(o,tn(n.src))})(e);if(L(e)||xn(e))return await en(await _(e));throw new $n("Invalid image source","invalid-image-source")};let Sn=null;var kn=()=>(null===Sn&&(Sn=T()&&/^mac/i.test(navigator.platform)),Sn);let Cn=null;var Tn=()=>(null===Cn&&(Cn=T()&&(z(/iPhone|iPad|iPod/)||kn()&&navigator.maxTouchPoints>=1)),Cn),Mn=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return await P()||Tn()||t<5?e:Qe(e.height,e.width)},Pn=e=>/jpeg/.test(e.type),En=e=>{return"object"!=typeof(t=e)||t.constructor!=Object?e:JSON.stringify(e);var t},Rn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return 0===t||(e.translate(n.x,n.y),e.rotate(t),e.translate(-n.x,-n.y)),e},In=(e,t,n)=>(e.scale(t,n),e),An=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{flipX:n,flipY:r,rotation:o,crop:i}=t,a=Xe(e),l=n||r,s=!!o,c=i&&(i.x||i.y||i.width||i.height),u=c&&Ct(i,pt(a)),d=c&&!u;if(!l&&!s&&!d)return e;let p,h=R("canvas",{width:e.width,height:e.height});if(h.getContext("2d",{willReadFrequently:!0}).putImageData(e,0,0),l){const e=R("canvas",{width:h.width,height:h.height}).getContext("2d",{willReadFrequently:!0});In(e,n?-1:1,r?-1:1),e.drawImage(h,n?-h.width:0,r?-h.height:0),e.restore(),A(h),h=e.canvas}if(s){const e=ot(Ye(mt(Et(ft(h),o))),Math.floor),t=R("canvas",{width:i.width,height:i.height}).getContext("2d",{willReadFrequently:!0});((e,t,n)=>{e.translate(t,n)})(t,-i.x,-i.y),Rn(t,o,tt(e)),t.drawImage(h,.5*(e.width-h.width),.5*(e.height-h.height)),t.restore(),A(h),h=t.canvas}else if(d)return p=h.getContext("2d",{willReadFrequently:!0}).getImageData(i.x,i.y,i.width,i.height),A(h),p;return p=h.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,h.width,h.height),A(h),p},Ln=(e,t)=>{const{imageData:n,width:r,height:o}=e,i=n.width,a=n.height,l=Math.round(r),s=Math.round(o),c=n.data,u=new Uint8ClampedArray(l*s*4),d=i/l,p=a/s,h=Math.ceil(.5*d),f=Math.ceil(.5*p);for(let m=0;m<s;m++)for(let e=0;e<l;e++){const t=4*(e+m*l);let n=0,r=0,o=0,a=0,s=0,g=0,y=0;const $=(m+.5)*p;for(let l=Math.floor(m*p);l<(m+1)*p;l++){const t=Math.abs($-(l+.5))/f,u=(e+.5)*d,p=t*t;for(let f=Math.floor(e*d);f<(e+1)*d;f++){let e=Math.abs(u-(f+.5))/h;const t=Math.sqrt(p+e*e);if(t<-1||t>1)continue;if(n=2*t*t*t-3*t*t+1,n<=0)continue;e=4*(f+l*i);const d=c[e+3];y+=n*d,o+=n,d<255&&(n=n*d/250),a+=n*c[e],s+=n*c[e+1],g+=n*c[e+2],r+=n}}u[t]=a/r,u[t+1]=s/r,u[t+2]=g/r,u[t+3]=y/o}t(null,{data:u,width:l,height:s})},zn=e=>{if(e instanceof ImageData)return e;let t;try{t=new ImageData(e.width,e.height)}catch(b){t=R("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(e.data),t},Fn=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{width:r,height:o,fit:i,upscale:a}=t;if(!r&&!o)return e;let l=r,s=o;if(r?o||(s=r):l=o,"force"!==i){const t=l/e.width,n=s/e.height;let r=1;if("cover"===i?r=Math.max(t,n):"contain"===i&&(r=Math.min(t,n)),r>1&&!1===a)return e;l=Math.round(e.width*r),s=Math.round(e.height*r)}return l=Math.max(l,1),s=Math.max(s,1),e.width===l&&e.height===s?e:n?n(e,l,s):(e=await Y(Ln,[{imageData:e,width:l,height:s}],[e.data.buffer]),zn(e))},On=(e,t)=>{const{imageData:n,matrix:r}=e;if(!r)return t(null,n);const o=new Uint8ClampedArray(n.width*n.height*4),i=n.data,a=i.length,l=r[0],s=r[1],c=r[2],u=r[3],d=r[4],p=r[5],h=r[6],f=r[7],m=r[8],g=r[9],y=r[10],$=r[11],b=r[12],v=r[13],x=r[14],w=r[15],S=r[16],k=r[17],C=r[18],T=r[19];let M=0,P=0,E=0,R=0,I=0,A=0,L=0,z=0,F=0,O=0,D=0,_=0;for(;M<a;M+=4)P=i[M]/255,E=i[M+1]/255,R=i[M+2]/255,I=i[M+3]/255,A=P*l+E*s+R*c+I*u+d,L=P*p+E*h+R*f+I*m+g,z=P*y+E*$+R*b+I*v+x,F=P*w+E*S+R*k+I*C+T,O=Math.max(0,A*F)+(1-F),D=Math.max(0,L*F)+(1-F),_=Math.max(0,z*F)+(1-F),o[M]=255*Math.max(0,Math.min(1,O)),o[M+1]=255*Math.max(0,Math.min(1,D)),o[M+2]=255*Math.max(0,Math.min(1,_)),o[M+3]=255*I;t(null,{data:o,width:n.width,height:n.height})},Dn=(e,t)=>{const{imageData:n,matrix:r}=e;if(!r)return t(null,n);let o=r.reduce(((e,t)=>e+t));o=o<=0?1:o;const i=n.width,a=n.height,l=n.data;let s=0,c=0,u=0;const d=Math.round(Math.sqrt(r.length)),p=Math.floor(d/2);let h=0,f=0,m=0,g=0,y=0,$=0,b=0,v=0,x=0,w=0;const S=new Uint8ClampedArray(i*a*4);for(u=0;u<a;u++)for(c=0;c<i;c++){for(h=0,f=0,m=0,g=0,$=0;$<d;$++)for(y=0;y<d;y++)b=u+$-p,v=c+y-p,b<0&&(b=a-1),b>=a&&(b=0),v<0&&(v=i-1),v>=i&&(v=0),x=4*(b*i+v),w=r[$*d+y],h+=l[x]*w,f+=l[x+1]*w,m+=l[x+2]*w,g+=l[x+3]*w;S[s]=h/o,S[s+1]=f/o,S[s+2]=m/o,S[s+3]=g/o,s+=4}t(null,{data:S,width:i,height:a})},_n=(e,t)=>{let{imageData:n,strength:r}=e;if(!r)return t(null,n);const o=new Uint8ClampedArray(n.width*n.height*4),i=n.width,a=n.height,l=n.data,s=(e,t)=>(c=e-w,u=t-S,Math.sqrt(c*c+u*u));let c,u,d,p,h,f,m,g,y,$,b,v=0,x=0,w=.5*i,S=.5*a,k=s(0,0);for(r>0?(d=0,p=0,h=0):(r=Math.abs(r),d=1,p=1,h=1),x=0;x<a;x++)for(v=0;v<i;v++)C=4*(v+x*i),T=l,M=o,P=s(v,x)*r/k,f=T[C]/255,m=T[C+1]/255,g=T[C+2]/255,y=T[C+3]/255,$=1-P,b=$*y+P,M[C]=($*y*f+P*d)/b*255,M[C+1]=($*y*m+P*p)/b*255,M[C+2]=($*y*g+P*h)/b*255,M[C+3]=255*b;var C,T,M,P;t(null,{data:o,width:n.width,height:n.height})},Bn=(e,t)=>{const{imageData:n,level:r,monochrome:o=!1}=e;if(!r)return t(null,n);const i=new Uint8ClampedArray(n.width*n.height*4),a=n.data,l=a.length;let s,c,u,d=0;const p=()=>255*(2*Math.random()-1)*r,h=o?()=>{const e=p();return[e,e,e]}:()=>[p(),p(),p()];for(;d<l;d+=4)[s,c,u]=h(),i[d]=a[d]+s,i[d+1]=a[d+1]+c,i[d+2]=a[d+2]+u,i[d+3]=a[d+3];t(null,{data:i,width:n.width,height:n.height})},Nn=(e,t)=>{const{imageData:n,level:r}=e;if(!r)return t(null,n);const o=new Uint8ClampedArray(n.width*n.height*4),i=n.data,a=i.length;let l,s,c,u=0;for(;u<a;u+=4)l=i[u]/255,s=i[u+1]/255,c=i[u+2]/255,o[u]=255*Math.pow(l,r),o[u+1]=255*Math.pow(s,r),o[u+2]=255*Math.pow(c,r),o[u+3]=i[u+3];t(null,{data:o,width:n.width,height:n.height})},jn=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorMatrix:n,convolutionMatrix:r,gamma:o,noise:i,vignette:a}=t,l=[];if(r&&l.push([Dn,{matrix:r.clarity}]),o>0&&l.push([Nn,{level:1/o}]),n&&!(e=>{const t=e.length;let n;const r=t>=20?6:t>=16?5:3;for(let o=0;o<t;o++){if(n=e[o],1===n&&o%r!=0)return!1;if(0!==n&&1!==n)return!1}return!0})(n)&&l.push([On,{matrix:n}]),(i>0||i<0)&&l.push([Bn,{level:i}]),(a>0||a<0)&&l.push([_n,{strength:a}]),!l.length)return e;const s=(e,t)=>"(err, imageData) => {\n            (".concat(e[t][0].toString(),")(Object.assign({ imageData: imageData }, filterInstructions[").concat(t,"]), \n                ").concat(e[t+1]?s(e,t+1):"done",")\n        }"),c="function (options, done) {\n        const filterInstructions = options.filterInstructions;\n        const imageData = options.imageData;\n        (".concat(s(l,0),")(null, imageData)\n    }");return e=await Y(c,[{imageData:e,filterInstructions:l.map((e=>e[1]))}],[e.data.buffer]),zn(e)},Wn=e=>"number"==typeof e,Vn=e=>V(e)&&null!==e.match(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g),Un=(e,t)=>e.hasOwnProperty(t),Hn=e=>Array.isArray(e);let Gn=64,Zn=102,Xn=112,Yn=!1;var qn=(e,t)=>(!Yn&&T()&&(/^win/i.test(navigator.platform)&&(Zn=103),(Tn()||kn())&&(Gn=63.5,Zn=110,Xn=123),Yn=!0),"<svg".concat(t?' aria-label="'.concat(t,'"'):"",' width="128" height="128" viewBox="0 0 128 128" preserveAspectRatio="xMinYMin meet" xmlns="http://www.w3.org/2000/svg"><text x="').concat(Gn,'" y="').concat(Zn,'" alignment-baseline="text-top" dominant-baseline="text-top" text-anchor="middle" font-size="').concat(Xn,'px">').concat(e,"</text></svg>")),Kn=e=>e instanceof Blob,Qn=(e,t)=>e/t*100+"%",Jn=e=>"rgba(".concat(Math.round(255*e[0]),", ").concat(Math.round(255*e[1]),", ").concat(Math.round(255*e[2]),", ").concat(Wn(e[3])?e[3]:1,")"),er=e=>Object.values(e).join("_");const tr=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=R("canvas",{width:80,height:80}).getContext("2d");return await function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((t=>{setTimeout(t,e)}))}(t),n.drawImage(e,0,0,80,80),!((e=>!new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data.buffer).some((e=>0!==e)))(n)&&t<=256)||await tr(e,t+16)},nr=new Map;var rr=e=>new Promise(((t,n)=>{const r=new FileReader;r.onerror=()=>n(r.error),r.onload=()=>t(r.result),r.readAsDataURL(e)})),or=()=>{let e=[];return{sub:(t,n)=>(e.push({event:t,callback:n}),()=>e=e.filter((e=>e.event!==t||e.callback!==n))),pub:(t,n)=>{e.filter((e=>e.event===t)).forEach((e=>e.callback(n)))}}};let ir=null;var ar=()=>(null===ir&&(ir=z(/Firefox/)),ir);const lr=32,sr=function(e){let{color:t=[0,0,0],fontSize:n=16,fontFamily:r="sans-serif",fontVariant:o="normal",fontWeight:i="normal",fontStyle:a="normal",textAlign:l="left",letterSpacing:s="normal",lineHeight:c=20}=e,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return"font-size:".concat(n*u,"px;font-style:").concat(a,";font-weight:").concat(i,";font-family:").concat(r,";font-variant:").concat(o,";line-height:").concat(c*u,"px;text-align:").concat(l,";letter-spacing:").concat(Wn(s)?s+"px":"normal",";color:").concat(Jn(t),";")},cr=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const{width:r,height:o,disableNewline:i}=t,a=!r,l=!1===i?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("\n").length}(e):void 0,s=a?"normal":"break-word",c=a&&!l?"nowrap":"pre-line";return"max-width:none;min-width:auto;width:".concat(a?"auto":r*n+"px",";height:").concat(o?o*n+"px":"auto",";margin-top:0;margin-bottom:0;padding-top:").concat(function(){let{fontSize:e=16,lineHeight:t=20}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return.5*Math.max(0,e-t)}(t)*n,"px;word-break:").concat(s,";word-wrap:normal;white-space:").concat(c,";")},ur=new Map,dr=e=>{const t=[];for(const n of Array.from(e.childNodes))n.nodeType===Node.TEXT_NODE?t.push(hr(n)):t.push(...dr(n));return t},pr="pointer-events:none;visibility:hidden;position:absolute;left:0;top:0;",hr=e=>{const t=e.nodeValue;if(!t)return[];const n=t.length,r=document.createRange();r.selectNodeContents(e);const o=[];for(let a=0;a<n;a++){r.setStart(e,0),r.setEnd(e,a+1);const n=r.getClientRects().length-1,i=t.charAt(a);o[n]?o[n]+=i:o.push(i)}const i=r.getClientRects();return o.map(((e,t)=>({rect:i[t],text:e})))},fr=new Map,mr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;const{width:n=0,height:r=0}=t;if(n&&r)return Qe(n,r);let{fontSize:o=16,fontFamily:i,lineHeight:a=20,fontWeight:l,fontStyle:s,fontVariant:c,letterSpacing:u}=t;const d=er({text:e,fontFamily:i,fontWeight:l,fontStyle:s,fontVariant:c,fontSize:o,letterSpacing:u,lineHeight:a,width:n});let p=fr.get(d);if(p)return p;let h=1;o>1e3&&ar()&&(h=o/1e3,o=1e3,a/=h);const f=an(R("pre",{contenteditable:"true",spellcheck:"false",style:"".concat(pr).concat(sr({...t,fontSize:o,lineHeight:a}),";").concat(cr(e,t),'"'),innerHTML:e})).getBoundingClientRect();return p=Xe(f),p.height+=Math.max(0,o-a),p=ot(p,(e=>e*h)),n&&(p.width=n),fr.set(d,p),p},gr=new Map,yr=async(e,t)=>{let n;try{n=await((e,t)=>new Promise(((n,r)=>{let o=gr.get(e);void 0===o&&(o=((e,t)=>{const{sub:n,pub:r}=or();let o,i;return Promise.resolve(t&&t(e,{resourceType:"stylesheet"})).then((t=>{if(!1===t)return i="requestPrevented",r("error",i);const{headers:n,credentials:a}=t||{};fetch(e,{headers:n,credentials:a}).then((e=>e.text())).then((e=>{o=e,r("load",o)})).catch((e=>{i=e,r("error",i)}))})),{sub:(e,t)=>"load"===e&&o?t(o):"error"===e&&i?t(i):void n(e,t)}})(e,t),gr.set(e,o)),o.sub("load",n),o.sub("error",r)})))(e,t)}catch(e){return[]}const r=R("style",{innerHTML:n,id:Z()});document.head.append(r);const o=Array.from(document.styleSheets).find((e=>e.ownerNode.id===r.id));return r.remove(),Array.from(o.cssRules)},$r=new Map,br=(e,t)=>e.style.getPropertyValue(t),vr=(e,t)=>!!e.style&&br(e,"font-family").replace(/^"|"$/g,"")==t,xr=async(e,t)=>{const n=((e,t)=>{const n=[];for(const r of e)vr(r,t)&&n.push(r);return n})(await(async e=>{const t=Array.from(document.styleSheets).map((t=>(async(e,t)=>{if($r.has(e.href))return $r.get(e.href);let n;try{n=Array.from(e.cssRules);for(const e of(e=>e.filter((e=>e instanceof CSSImportRule)))(n)){const r=e.href;if($r.has(r)){const e=$r.get(r);n=[...n,...e];continue}const o=await yr(r,t);$r.set(r,o),n=[...n,...o]}}catch(r){const i=e.href;n=await yr(i,t),$r.set(i,n)}return(e=>e.filter((e=>e instanceof CSSFontFaceRule)))(n)})(t,e))),n=await Promise.all(t),r=[];return n.forEach((e=>r.push(...e))),r})(t),e);return n.length?n.map((e=>{const t=e.parentStyleSheet.href&&new URL(e.parentStyleSheet.href),n=t?t.origin+(e=>e.pathname.split("/").slice(0,-1).join("/"))(t)+"/":"",r=e.style.getPropertyValue("src").match(/url\("?(.*?)"?\)/)[1],o=Array.from(e.style).filter((e=>"src"!=e)).reduce(((t,n)=>t+(n+":")+br(e,n)+";"),"");return[/^http/.test(r)?r:n+r,o]})):[]},wr=new Map,Sr=new Map;var kr=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(!e.length)return;let{color:n,imageWidth:r=300,imageHeight:o=150,paddingTop:i=0,paddingRight:a=lr,paddingBottom:l=0,paddingLeft:s=lr,fontFamily:c,fontSize:u,pixelRatio:d=1,willRequest:p,outline:h,blur:f}=t,m=1,g="";u>1e3&&ar()&&(m=u/1e3,g="transform-origin:0 0;transform:scale(".concat(m,")"));const y=d/m,$=(r+s+a)*d,b=(o+l+i)*d,v=await(async(e,t)=>{if(wr.get(e))return;let n=Sr.get(e);if(!n){const o=await xr(e,t);if(!o.length)return void wr.set(e,!0);const i=[];for(const[e,t]of o){const n=await fetch(e).then((e=>e.blob())),o=!(r=n.type)||/woff2/.test(r)?"woff2":/woff/.test(r)?"woff":/ttf|truetype/.test(r)?"truetype":/otf|opentype/.test(r)?"opentype":/svg/.test(r)?"svg":"woff2",a=await rr(n);i.push("@font-face { src:url(".concat(a,") format('").concat(o,"');").concat(t,";font-display:block; }"))}n=i.join(""),Sr.set(e,n)}var r;return n})(c,p),x=e.replace(/%/g,"%25").replace(/#/g,"%23").replace(/&nbsp;/g,"\xa0").replace(/&(?!#\d{4};|[a-z]+;)/gi,"&amp;").replace(/<br>|\n/g,"<br/>"),w="top:".concat(i*y,"px;right:").concat(a*y,"px;bottom:").concat(l*y,"px;left:").concat(s*y,"px");let S=n,k="",C="";if(h||f){const e=Jn(n);h&&(S=[0,0,0,0],k="-webkit-text-stroke: ".concat(2*h*y,"px ").concat(e)),f&&(sn()?C="filter:blur(".concat(f*y*.4,"px)"):(S=[0,0,0,0],C="text-shadow: 0 0 ".concat(f*y,"px ").concat(e)))}return function(e){let{safariCacheKey:t="*"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((n,r)=>{const o=new Image;o.onerror=()=>r(new Error("Failed to load SVG")),o.onload=()=>{if(!sn()||!e.includes("@font-face")||nr.has(t))return n(o);tr(o).then((()=>{nr.set(t,!0),n(o)}))},o.src="data:image/svg+xml,"+e}))}('<svg xmlns="http://www.w3.org/2000/svg" width="'.concat($,'" height="').concat(b,'" viewBox="0 0 ').concat($," ").concat(b,'"><foreignObject x="0" y="0" width="').concat($,'" height="').concat(b,'"><div xmlns="http://www.w3.org/1999/xhtml">').concat(v?"<style>".concat(v,"</style>"):"",'<pre contenteditable="true" spellcheck="false" style="position:absolute;').concat(w,";").concat(sr({...t,color:S,fontSize:u},y),";").concat(cr(e,t,y),";").concat(g,";").concat(k,";").concat(C,'">').concat(x,"</pre></div></foreignObject></svg>"),{safariCacheKey:c})};const Cr=e=>{const t={...e};return W(t)},Tr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Tt(e);let r,o;const i=t.width||t.rx,a=t.height||t.ry;if(i&&a)return Ze(t);if(i||a){r=parseFloat(i||Number.MAX_SAFE_INTEGER),o=parseFloat(a||Number.MAX_SAFE_INTEGER);const e=Math.min(r,o);V(i)||V(a)?(r=e+"%",o=e*n+"%"):(r=e,o=e)}else{const e=10;r=e+"%",o=e*n+"%"}return{[(t.width?"width":t.rx?"rx":void 0)||"width"]:r,[(t.width?"height":t.rx?"ry":void 0)||"height"]:o}},Mr=function(e){return{width:void 0,height:void 0,...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},aspectRatio:1,backgroundImage:(t=qn(e),"data:image/svg+xml,"+t.replace("<","%3C").replace(">","%3E"))};var t},Pr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{backgroundColor:[0,0,0,0],...Or(t)?{}:{width:void 0,height:void 0,aspectRatio:void 0},...t,backgroundImage:V(e)?e:Kn(e)?URL.createObjectURL(e):e}},Er=(e,t)=>{let n;if(V(e)||Kn(e)){const r={...Tr(t),backgroundSize:"contain"};n=Vn(e)?Mr(e,r):Pr(e,r)}else if(e.src){const r=Tr(t,e.shape||e),o={...e.shape,...r};if(e.width&&e.height&&!Un(o,"aspectRatio")){const e=So(r,"width",t),n=So(r,"height",t);o.aspectRatio=ie(e,n)}o.backgroundSize||e.shape||e.width&&e.height||(o.backgroundSize="contain"),n=Vn(e.src)?Mr(e.src,o):Pr(e.src,o)}else e.shape&&(n=Cr(e.shape));return Un(n,"backgroundImage")&&(Un(n,"backgroundColor")||(n.backgroundColor=[0,0,0,0]),Un(n,"disableStyle")||(n.disableStyle=["cornerRadius","backgroundColor","strokeColor","strokeWidth"])),t?xo(n,t):n},Rr=e=>Ce(e.x1,e.y1),Ir=e=>Ce(e.x2,e.y2),Ar=e=>Un(e,"text"),Lr=e=>Ar(e)&&!(Gr(e)||Un(e,"width")),zr=e=>Ar(e)&&(Gr(e)||Un(e,"width")),Fr=e=>!Ar(e)&&Zr(e),Or=e=>Un(e,"rx"),Dr=e=>Un(e,"x1"),_r=e=>Un(e,"points"),Br=e=>Ar(e)&&e.isEditing,Nr=e=>!Un(e,"opacity")||e.opacity>0,jr=e=>e.isSelected,Wr=e=>e.isEditing,Vr=e=>e._isDraft,Ur=e=>Un(e,"width")&&Un(e,"height"),Hr=e=>{const t=Un(e,"right"),n=Un(e,"bottom");return t||n},Gr=e=>(Un(e,"x")||Un(e,"left"))&&Un(e,"right")||(Un(e,"y")||Un(e,"top"))&&Un(e,"bottom"),Zr=e=>Ur(e)||Gr(e),Xr=e=>(e._isDraft=!0,e),Yr=e=>(e._isDraft=!1,e),qr=(e,t)=>!0!==e.disableStyle&&(!Hn(e.disableStyle)||!t||!e.disableStyle.includes(t)),Kr=e=>!0!==e.disableSelect,Qr=e=>!0!==e.disableRemove,Jr=e=>!e.disableFlip&&!Vr(e)&&!Hr(e)&&(e=>Un(e,"backgroundImage")||Un(e,"text"))(e),eo=(e,t)=>!!Ar(e)&&!0!==e.disableInput&&(U(e.disableInput)?e.disableInput(null!=t?t:e.text):t||!0),to=(e,t)=>!0!==e.disableTextLayout&&(!Hn(e.disableTextLayout)||!t||!e.disableTextLayout.includes(t)),no=e=>!0!==e.disableManipulate&&!Vr(e)&&!Hr(e),ro=e=>no(e)&&!0!==e.disableMove,oo=e=>(delete e.left,delete e.right,delete e.top,delete e.bottom,e),io=e=>(delete e.rotation,e),ao=e=>(e.strokeWidth=e.strokeWidth||1,e.strokeColor=e.strokeColor||[0,0,0],e),lo=e=>(e.backgroundColor=e.backgroundColor?e.backgroundColor:e.strokeWidth||e.backgroundImage?void 0:[0,0,0],e),so=e=>{let t=e.text;t=t.replace(/&(#[0-9]+|[a-z]+);/gi,((e,t)=>"___".concat(t,"___"))),t=t.replace(/&/,"&amp;"),e.text=t.replace(/___(#[0-9]+|[a-z]+)___/gi,((e,t)=>"&".concat(t,";")))},co=e=>(!1!==e.disableNewline&&(delete e.textAlign,e.text=e.text.replace(/\n/g," ")),oo(e)),uo=e=>(e.textAlign=e.textAlign||"left",e),po=e=>((e=>{V(e.id)||(e.id=Z()),Un(e,"rotation")||(e.rotation=0),Un(e,"opacity")||(e.opacity=1),Un(e,"disableErase")||(e.disableErase=!0)})(e),Ar(e)?(e=>{if(e.fontSize=e.fontSize||"4%",e.fontFamily=e.fontFamily||"sans-serif",e.fontWeight=e.fontWeight||"normal",e.fontStyle=e.fontStyle||"normal",e.fontVariant=e.fontVariant||"normal",e.lineHeight=e.lineHeight||"120%",e.color=e.color||[0,0,0],e.format="html"===e.format?"html":"text",e.textShadow){const[t,n,r,o]=e.textShadow;e.textShadowX=t,e.textShadowY=n,e.textShadowBlur=r,e.textShadowColor=o,delete e.textShadow}if(e.textOutline){const[t,n]=e.textOutline;e.textOutlineWidth=t,e.textOutlineColor=n,delete e.textOutline}"html"===e.format?so(e):(e=>{so(e);let t=e.text;t=t.replace(/</g,"&gt;"),t=t.replace(/>/g,"&lt;"),e.text=t})(e),Lr(e)?co(e):uo(e)})(e):Fr(e)?(e=>{e.cornerRadius=e.cornerRadius||0,e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],lo(e)})(e):_r(e)?(e=>{ao(e),io(e),Un(e,"pathClose")||(e.disableResize=!0,Un(e,"disableMove")||(e.disableMove=!0)),oo(e)})(e):Dr(e)?(e=>{ao(e),e.lineStart=e.lineStart||void 0,e.lineEnd=e.lineEnd||void 0,io(e),oo(e)})(e):Or(e)&&(e=>{e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],lo(e)})(e),e),ho=e=>Ar(e)?"text":Fr(e)?"rectangle":_r(e)?"path":Dr(e)?"line":Or(e)?"ellipse":void 0,fo=(e,t)=>parseFloat(e)/100*t,mo=new RegExp(/^x|left|right|^width|rx|fontSize|eraseRadius|feather|cornerRadius|strokeWidth|strokeDash/,"i"),go=new RegExp(/^y|top|bottom|^height|ry/,"i"),yo=(e,t,n)=>{let{width:r,height:o}=n;if(Array.isArray(t))return t.map((t=>(N(t)&&vo(t,{width:r,height:o}),V(t)&&(t=yo(e,t,{width:r,height:o})),t)));if("string"!=typeof t)return t;if(!t.endsWith("%"))return t;const i=parseFloat(t)/100;return mo.test(e)?xe(r*i,6):go.test(e)?xe(o*i,6):t},$o=yo,bo=["lineHeight","textOutlineWidth","textShadowX","textShadowY","textShadowBlur"],vo=(e,t)=>{Object.entries(e).map((n=>{let[r,o]=n;e[r]=yo(r,o,t)})),e.text&&bo.filter((t=>V(e[t]))).forEach((t=>{var n,r;e[t]=(n=e[t],r=e.fontSize,Math.round(r*(parseFloat(n)/100)))}))},xo=(e,t)=>(vo(e,t),Po(e,t),e),wo=(e,t)=>{let n;return/^x|width|rx|fontSize|strokeWidth|cornerRadius/.test(e)?n=t.width:/^y|height|ry/.test(e)&&(n=t.height),n},So=(e,t,n)=>Array.isArray(e[t])?e[t].map((e=>Object.entries(e).reduce(((e,t)=>{let[r,o]=t;return e[r]=V(o)?fo(o,wo(r,n)):o,e}),{}))):V(e[t])?fo(e[t],wo(t,n)):e[t],ko=(e,t,n)=>t.reduce(((t,r)=>{const o=So(e,r,n);return t[r]=o,t}),{}),Co=(e,t,n)=>(Object.keys(t).forEach((r=>((e,t,n,r)=>{if(!V(e[t]))return e[t]=n,e;const o=wo(t,r);return e[t]=void 0===o?n:Qn(n,o),e})(e,r,t[r],n))),e),To=(e,t)=>{const n=e.filter((e=>e.x<0||e.y<0||e.x1<0||e.y1<0)).reduce(((e,t)=>{const[n,r,o,i]=(e=>{const t=dt(),n=e.strokeWidth||0;if(Fr(e))t.x=e.x-.5*n,t.y=e.y-.5*n,t.width=e.width+n,t.height=e.height+n;else if(Dr(e)){const{x1:r,y1:o,x2:i,y2:a}=e,l=Math.abs(Math.min(r,i)),s=Math.abs(Math.max(r,i)),c=Math.abs(Math.min(o,a)),u=Math.abs(Math.min(o,a));t.x=l+.5*n,t.y=s+.5*n,t.width=s-l+n,t.height=u-c+n}else Or(e)&&(t.x=e.x-e.rx+.5*n,t.y=e.y-e.ry+.5*n,t.width=2*e.rx+n,t.height=2*e.ry+n);return t&&Un(e,"rotation")&&Et(t,e.rotation),zt(t)})(t);return e.top=Math.min(n,e.top),e.left=Math.min(i,e.left),e.bottom=Math.max(o,e.bottom),e.right=Math.max(r,e.right),e}),{top:0,right:0,bottom:0,left:0});return n.right>0&&(n.right-=t.width),n.bottom>0&&(n.bottom-=t.height),n},Mo=(e,t,n)=>{const r=Cr(e);xo(r,t);const o=n(r);return Array.isArray(o)?o:[o]},Po=(e,t)=>{if(Un(e,"left")&&(e.x=e.left),Un(e,"right")&&!V(e.right)){const n=t.width-e.right;Un(e,"left")?(e.x=e.left,e.width=Math.max(0,n-e.left)):Un(e,"width")&&(e.x=n-e.width)}if(Un(e,"top")&&(e.y=e.top),Un(e,"bottom")&&!V(e.bottom)){const n=t.height-e.bottom;Un(e,"top")?(e.y=e.top,e.height=Math.max(0,n-e.top)):Un(e,"height")&&(e.y=n-e.height)}return e},Eo=(e,t)=>(_r(e)&&e.points.filter((e=>Wn(e.x))).forEach((e=>{e.x*=t,e.y*=t})),Dr(e)&&Wn(e.x1)&&(e.x1*=t,e.y1*=t,e.x2*=t,e.y2*=t),Wn(e.x)&&Wn(e.y)&&(e.x*=t,e.y*=t),Wn(e.width)&&Wn(e.height)&&(e.width*=t,e.height*=t),Wn(e.rx)&&Wn(e.ry)&&(e.rx*=t,e.ry*=t),(e=>Wn(e.strokeWidth)&&e.strokeWidth>0)(e)&&(e.strokeWidth*=t),Ar(e)&&(e._scale=t,Wn(e.fontSize)&&(e.fontSize*=t),Wn(e.lineHeight)&&(e.lineHeight*=t),Wn(e.width)&&!Wn(e.height)&&(e.width*=t)),Un(e,"cornerRadius")&&Wn(e.cornerRadius)&&(e.cornerRadius*=t),e),Ro=e=>{if(Fr(e))return Ce(e.x+.5*e.width,e.y+.5*e.height);if(Or(e))return Ce(e.x,e.y);if(e.text){if(zr(e)){const t=e.height||mr(e.text,e).height;return Ce(e.x+.5*e.width,e.y+.5*t)}const t=mr(e.text,e);return Ce(e.x+.5*t.width,e.y+.5*t.height)}return _r(e)?Ve(e.points):Dr(e)?Ve([Rr(e),Ir(e)]):void 0};var Io=e=>/canvas/i.test(e.nodeName);const Ao=new Map([]),Lo=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((n,r)=>{const{onMetadata:o=x,onLoad:i=n,onError:a=r,onComplete:l=x}=t;let s=Ao.get(e);if(s||(s={loading:!1,complete:!1,error:!1,image:void 0,size:void 0,bus:or()},Ao.set(e,s)),s.bus.sub("meta",o),s.bus.sub("load",i),s.bus.sub("error",a),s.bus.sub("complete",l),Io(e)){const t=e,n=t.cloneNode();s.complete=!0,s.image=n,s.size=Ke(t)}if(s.complete)return s.bus.pub("meta",{size:s.size}),s.error?s.bus.pub("error",s.error):s.bus.pub("load",s.image),s.bus.pub("complete"),void(s.bus=or());s.loading||(s.loading=!0,((e,t)=>new Promise(((n,r)=>{let o=e,i=!1;const a=()=>{i||(i=!0,U(t)&&Promise.resolve().then((()=>t(Qe(o.naturalWidth,o.naturalHeight)))))};if(o.src||(o=new Image,V(e)&&new URL(e,location.href).origin!==location.origin&&(o.crossOrigin="anonymous"),o.src=V(e)?e:URL.createObjectURL(e)),o.complete)return a(),n(o);U(t)&&cn(o).then(a).catch(r),o.onload=()=>{a(),n(o)},o.onerror=()=>r(new Error("Failed to load image"))})))(e,(e=>{s.size=e,s.bus.pub("meta",{size:e})})).then((e=>{s.image=e,s.bus.pub("load",e)})).catch((e=>{s.error=e,s.bus.pub("error",e)})).finally((()=>{s.complete=!0,s.loading=!1,s.bus.pub("complete"),s.bus=or()})))}))},zo=(e,t,n,r)=>e.drawImage(t,n.x,n.x,n.width,n.height,r.x,r.y,r.width,r.height);var Fo=async function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:zo,i=arguments.length>5?arguments[5]:void 0;e.save(),e.clip(),await o(e,t,n,r,i),e.restore()};const Oo=(e,t,n,r,o)=>{const i=ut(e);if(r){const e=Ot(mt(r),xe);return e.x*=n.width,e.width*=n.width,e.y*=n.height,e.height*=n.height,{srcRect:e,destRect:i}}const a=$t(0,0,n.width,n.height);if("contain"===t){const t=Lt(e,Tt(a));i.width=t.width,i.height=t.height,o?(i.x+=o.x,i.y+=o.y):(i.x+=t.x,i.y+=t.y)}else if("cover"===t){const e=At(i,a.width/a.height);i.width=e.width,i.height=e.height,o?(i.x+=o.x,i.y+=o.y):(i.x+=e.x,i.y+=e.y)}else t?(i.width=t.width,i.height=t.height,o&&(i.x+=o.x,i.y+=o.y)):o&&(i.width=n.width,i.height=n.height,i.x+=o.x,i.y+=o.y);return{srcRect:a,destRect:i}},Do=(e,t)=>(t.cornerRadius>0?((e,t,n,r,o,i)=>{r<2*i&&(i=r/2),o<2*i&&(i=o/2),e.beginPath(),e.moveTo(t+i,n),e.arcTo(t+r,n,t+r,n+o,i),e.arcTo(t+r,n+o,t,n+o,i),e.arcTo(t,n+o,t,n,i),e.arcTo(t,n,t+r,n,i),e.closePath()})(e,t.x,t.y,t.width,t.height,t.cornerRadius):e.rect(t.x,t.y,t.width,t.height),e),_o=(e,t)=>(t.backgroundColor&&e.fill(),e),Bo=(e,t)=>(t.strokeWidth&&e.stroke(),e);var No=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{drawImage:r}=n;if(e.lineWidth=t.strokeWidth?t.strokeWidth:1,e.strokeStyle=t.strokeColor?Jn(t.strokeColor):"none",e.fillStyle=t.backgroundColor?Jn(t.backgroundColor):"none",e.globalAlpha=t.opacity,t.backgroundImage){let n;n=Io(t.backgroundImage)?t.backgroundImage:await Lo(t.backgroundImage),Do(e,t),_o(e,t);const{srcRect:o,destRect:i}=Oo(t,t.backgroundSize,Ke(n),t.backgroundCorners,t.backgroundPosition);return await Fo(e,n,o,i,r,{feather:t.feather}),Bo(e,t),[]}return Do(e,t),_o(e,t),Bo(e,t),[]},jo=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((async(r,o)=>{const{drawImage:i}=n;if(e.lineWidth=t.strokeWidth||1,e.strokeStyle=t.strokeColor?Jn(t.strokeColor):"none",e.fillStyle=t.backgroundColor?Jn(t.backgroundColor):"none",e.globalAlpha=t.opacity,e.ellipse(t.x,t.y,t.rx,t.ry,0,0,2*Math.PI),t.backgroundColor&&e.fill(),t.backgroundImage){let n;try{n=await Lo(t.backgroundImage)}catch(e){o(e)}const a=$t(t.x-t.rx,t.y-t.ry,2*t.rx,2*t.ry),{srcRect:l,destRect:s}=Oo(a,t.backgroundSize,Ke(n),t.backgroundCorners,t.backgroundPosition);await Fo(e,n,l,s,i),t.strokeWidth&&e.stroke(),r([])}else t.strokeWidth&&e.stroke(),r([])}))},Wo=async(e,t,n)=>{const r=t.width&&t.height?Xe(t):mr(t.text,t),o={x:t.x,y:t.y,width:r.width,height:r.height};if(No(e,{...t,...o,options:n}),!t.text.length)return[];const{textOutlineWidth:i=0,textShadowX:a=0,textShadowY:l=0,textShadowBlur:s=0,textShadowColor:c,outline:u,blur:d,...p}=t;return t.height&&(e.rect(o.x-i+Math.min(a,0),o.y-i+Math.min(l,0),o.width+i+i+Math.abs(a)+s,o.height+i+Math.abs(l)+s),e.save(),e.clip()),(a||l||s)&&(e.save(),e.translate(a,l),await Vo(e,o,t,{...n,paddingLeft:lr+s,paddingRight:lr+s,paddingTop:s,paddingBottom:s,shapeExtendedProps:{color:c,blur:s}}),e.restore()),i&&await Vo(e,o,t,{...n,paddingLeft:lr+i,paddingRight:lr+i,paddingTop:i,paddingBottom:i,shapeExtendedProps:{color:t.textOutlineColor,outline:i}}),t.height&&e.restore(),await Vo(e,o,p,{...n,paddingLeft:lr,paddingRight:lr,paddingTop:0,paddingBottom:0}),[]};const Vo=async(e,t,n,r)=>{const{willRequest:o,shapeExtendedProps:i,paddingLeft:a,paddingRight:l,paddingTop:s,paddingBottom:c}=r,u=await kr(n.text,{...n,...i,...t,paddingLeft:a,paddingRight:l,paddingTop:s,paddingBottom:c,imageWidth:t.width,imageHeight:t.height,willRequest:o});e.drawImage(u,n.x-a,n.y-s,u.width,u.height)};var Uo=async(e,t)=>new Promise((async n=>{e.lineWidth=t.strokeWidth||1,e.strokeStyle=t.strokeColor?Jn(t.strokeColor):"none",e.globalAlpha=t.opacity;let r=Rr(t),o=Ir(t);e.moveTo(r.x,r.y),e.lineTo(o.x,o.y),t.strokeWidth&&e.stroke(),n([])})),Ho=async(e,t)=>new Promise(((n,r)=>{if(t.bitmap&&1===t.points.length)return void jo(e,{x:t.points[0].x,y:t.points[0].y,rx:.5*t.strokeWidth,ry:.5*t.strokeWidth,backgroundColor:t.strokeColor}).then((()=>n([])));e.lineWidth=t.strokeWidth||1,e.strokeStyle=t.strokeColor?Jn(t.strokeColor):"none",e.fillStyle=t.backgroundColor?Jn(t.backgroundColor):"none",e.globalAlpha=t.opacity;const{points:o}=t;e.lineCap=t.strokeCap,e.lineJoin=t.strokeJoin,e.setLineDash(t.strokeDash||[]),t.pathClose&&e.beginPath(),e.moveTo(o[0].x,o[0].y);const i=o.length;for(let t=1;t<i;t++)e.lineTo(o[t].x,o[t].y);t.pathClose&&e.closePath(),t.strokeWidth&&e.stroke(),t.backgroundColor&&e.fill(),n([])})),Go=(e,t,n,r)=>t||n?(e.translate(r.x,r.y),e.scale(t?-1:1,n?-1:1),e.translate(-r.x,-r.y),e):e;const Zo=async(e,t,n)=>{e.globalCompositeOperation="subtract"===t.drawMode?"destination-out":"source-over";const r=Ro(t);let o;if(Rn(e,t.rotation,r),Go(e,t.flipX,t.flipY,r),Fr(t)?o=No:Or(t)?o=jo:Dr(t)?o=Uo:_r(t)?o=Ho:Ar(t)&&(o=Wo),o){const r=await o(e,t,n);return r.length?[t,...await Xo(e,r,n)]:[]}return[]};var Xo=async(e,t,n)=>{let r=[];for(const o of t)e.save(),e.beginPath(),r=[...r,...await Zo(e,o,n)],e.restore();return r},Yo=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{shapes:n=[],contextBounds:r=e,transform:o=x,drawImage:i,willRequest:a,canvasMemoryLimit:l,computeShape:s=ae,preprocessShape:c=ae}=t;if(!n.length)return e;const u=R("canvas");u.width=r.width,u.height=r.height;const d=u.getContext("2d",{willReadFrequently:!0});d.putImageData(e,r.x||0,r.y||0);const p=n.map(Cr).map(s).map(c).flat();o(d),await Xo(d,p,{drawImage:i,canvasMemoryLimit:l,willRequest:a});const h=d.getImageData(0,0,u.width,u.height);return A(u),h},qo=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{backgroundColor:n,backgroundImage:r}=t,o=!(!n||n&&0===n[3]);if(!r&&!o)return e;const i=R("canvas");i.width=e.width,i.height=e.height;const a=i.getContext("2d",{willReadFrequently:!0});if(a.putImageData(e,0,0),a.globalCompositeOperation="destination-over",o&&(a.fillStyle=Jn(n),a.fillRect(0,0,i.width,i.height)),r){let t;t=Io(r)?r:await Lo(r);const{srcRect:n,destRect:o}=Oo({x:0,y:0,width:e.width,height:e.height},"cover",{width:t.width,height:t.height});a.drawImage(t,n.x,n.y,n.width,n.height,o.x,o.y,o.width,o.height)}const l=a.getImageData(0,0,i.width,i.height);return A(i),l},Ko=e=>e.length?e.reduce(((e,t)=>((e,t)=>{const n=new Array(20);return n[0]=e[0]*t[0]+e[1]*t[5]+e[2]*t[10]+e[3]*t[15],n[1]=e[0]*t[1]+e[1]*t[6]+e[2]*t[11]+e[3]*t[16],n[2]=e[0]*t[2]+e[1]*t[7]+e[2]*t[12]+e[3]*t[17],n[3]=e[0]*t[3]+e[1]*t[8]+e[2]*t[13]+e[3]*t[18],n[4]=e[0]*t[4]+e[1]*t[9]+e[2]*t[14]+e[3]*t[19]+e[4],n[5]=e[5]*t[0]+e[6]*t[5]+e[7]*t[10]+e[8]*t[15],n[6]=e[5]*t[1]+e[6]*t[6]+e[7]*t[11]+e[8]*t[16],n[7]=e[5]*t[2]+e[6]*t[7]+e[7]*t[12]+e[8]*t[17],n[8]=e[5]*t[3]+e[6]*t[8]+e[7]*t[13]+e[8]*t[18],n[9]=e[5]*t[4]+e[6]*t[9]+e[7]*t[14]+e[8]*t[19]+e[9],n[10]=e[10]*t[0]+e[11]*t[5]+e[12]*t[10]+e[13]*t[15],n[11]=e[10]*t[1]+e[11]*t[6]+e[12]*t[11]+e[13]*t[16],n[12]=e[10]*t[2]+e[11]*t[7]+e[12]*t[12]+e[13]*t[17],n[13]=e[10]*t[3]+e[11]*t[8]+e[12]*t[13]+e[13]*t[18],n[14]=e[10]*t[4]+e[11]*t[9]+e[12]*t[14]+e[13]*t[19]+e[14],n[15]=e[15]*t[0]+e[16]*t[5]+e[17]*t[10]+e[18]*t[15],n[16]=e[15]*t[1]+e[16]*t[6]+e[17]*t[11]+e[18]*t[16],n[17]=e[15]*t[2]+e[16]*t[7]+e[17]*t[12]+e[18]*t[17],n[18]=e[15]*t[3]+e[16]*t[8]+e[17]*t[13]+e[18]*t[18],n[19]=e[15]*t[4]+e[16]*t[9]+e[17]*t[14]+e[18]*t[19]+e[19],n})([...e],t)),e.shift()):[],Qo=(e,t)=>{const n=e.width*e.height,r=t.reduce(((e,t)=>(t.width>e.width&&t.height>e.height&&(e.width=t.width,e.height=t.height),e)),{width:0,height:0}),o=r.width*r.height;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Math.round(e*t)/t}(Math.max(.5,.5+(1-o/n)/2),5)};function Jo(){}const ei=e=>e;function ti(e,t){for(const n in t)e[n]=t[n];return e}function ni(e){return e()}function ri(){return Object.create(null)}function oi(e){e.forEach(ni)}function ii(e){return"function"==typeof e}function ai(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function li(e){if(null==e)return Jo;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function si(e){let t;return li(e,(e=>t=e))(),t}function ci(e,t,n){e.$$.on_destroy.push(li(t,n))}function ui(e,t,n,r){if(e){const o=di(e,t,n,r);return e[0](o)}}function di(e,t,n,r){return e[1]&&r?ti(n.ctx.slice(),e[1](r(t))):n.ctx}function pi(e,t,n,r){if(e[2]&&r){const o=e[2](r(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|o[r];return e}return t.dirty|o}return t.dirty}function hi(e,t,n,r,o,i){if(o){const a=di(t,n,r,i);e.p(a,o)}}function fi(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function mi(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function gi(e,t){const n={};t=new Set(t);for(const r in e)t.has(r)||"$"===r[0]||(n[r]=e[r]);return n}function yi(e,t,n){return e.set(n),t}function $i(e){return e&&ii(e.destroy)?e.destroy:Jo}const bi="undefined"!=typeof window;let vi=bi?()=>window.performance.now():()=>Date.now(),xi=bi?e=>requestAnimationFrame(e):Jo;const wi=new Set;function Si(e){wi.forEach((t=>{t.c(e)||(wi.delete(t),t.f())})),0!==wi.size&&xi(Si)}function ki(e){let t;return 0===wi.size&&xi(Si),{promise:new Promise((n=>{wi.add(t={c:e,f:n})})),abort(){wi.delete(t)}}}function Ci(e,t){e.appendChild(t)}function Ti(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Mi(e){const t=Ri("style");return function(e,t){Ci(e.head||e,t),t.sheet}(Ti(e),t),t.sheet}function Pi(e,t,n){e.insertBefore(t,n||null)}function Ei(e){e.parentNode.removeChild(e)}function Ri(e){return document.createElement(e)}function Ii(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Ai(e){return document.createTextNode(e)}function Li(){return Ai(" ")}function zi(){return Ai("")}function Fi(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function Oi(e){return function(t){return t.preventDefault(),e.call(this,t)}}function Di(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function _i(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Bi(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const r in t)null==t[r]?e.removeAttribute(r):"style"===r?e.style.cssText=t[r]:"__value"===r?e.value=e[r]=t[r]:n[r]&&n[r].set?e[r]=t[r]:_i(e,r,t[r])}function Ni(e,t){Object.keys(t).forEach((n=>{!function(e,t,n){t in e?e[t]="boolean"==typeof e[t]&&""===n||n:_i(e,t,n)}(e,n,t[n])}))}function ji(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Wi(e,t){e.value=null==t?"":t}function Vi(e,t){let{bubbles:n=!1,cancelable:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,r,t),o}class Ui{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.e||(this.is_svg?this.e=Ii(t.nodeName):this.e=Ri(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)Pi(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(Ei)}}function Hi(e,t){return new e(t)}const Gi=new Map;let Zi,Xi=0;function Yi(e,t,n,r,o,i,a){let l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;const s=16.666/r;let c="{\n";for(let g=0;g<=1;g+=s){const e=t+(n-t)*i(g);c+=100*g+"%{".concat(a(e,1-e),"}\n")}const u=c+"100% {".concat(a(n,1-n),"}\n}"),d="__svelte_".concat(function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u),"_").concat(l),p=Ti(e),{stylesheet:h,rules:f}=Gi.get(p)||function(e,t){const n={stylesheet:Mi(t),rules:{}};return Gi.set(e,n),n}(p,e);f[d]||(f[d]=!0,h.insertRule("@keyframes ".concat(d," ").concat(u),h.cssRules.length));const m=e.style.animation||"";return e.style.animation="".concat(m?m+", ":"").concat(d," ").concat(r,"ms linear ").concat(o,"ms 1 both"),Xi+=1,d}function qi(e){Zi=e}function Ki(){if(!Zi)throw new Error("Function called outside component initialization");return Zi}function Qi(e){Ki().$$.on_mount.push(e)}function Ji(e){Ki().$$.after_update.push(e)}function ea(e){Ki().$$.on_destroy.push(e)}function ta(){const e=Ki();return function(t,n){let{cancelable:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=e.$$.callbacks[t];if(o){const i=Vi(t,n,{cancelable:r});return o.slice().forEach((t=>{t.call(e,i)})),!i.defaultPrevented}return!0}}function na(e,t){return Ki().$$.context.set(e,t),t}function ra(e){return Ki().$$.context.get(e)}function oa(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const ia=[],aa=[],la=[],sa=[],ca=Promise.resolve();let ua=!1;function da(){ua||(ua=!0,ca.then($a))}function pa(){return da(),ca}function ha(e){la.push(e)}function fa(e){sa.push(e)}const ma=new Set;let ga,ya=0;function $a(){const e=Zi;do{for(;ya<ia.length;){const e=ia[ya];ya++,qi(e),ba(e.$$)}for(qi(null),ia.length=0,ya=0;aa.length;)aa.pop()();for(let e=0;e<la.length;e+=1){const t=la[e];ma.has(t)||(ma.add(t),t())}la.length=0}while(ia.length);for(;sa.length;)sa.pop()();ua=!1,ma.clear(),qi(e)}function ba(e){if(null!==e.fragment){e.update(),oi(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ha)}}function va(e,t,n){e.dispatchEvent(Vi("".concat(t?"intro":"outro").concat(n)))}const xa=new Set;let wa;function Sa(){wa={r:0,c:[],p:wa}}function ka(){wa.r||oi(wa.c),wa=wa.p}function Ca(e,t){e&&e.i&&(xa.delete(e),e.i(t))}function Ta(e,t,n,r){if(e&&e.o){if(xa.has(e))return;xa.add(e),wa.c.push((()=>{xa.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}else r&&r()}const Ma={duration:0};function Pa(e,t,n,r){let o=t(e,n),i=r?0:1,a=null,l=null,s=null;function c(){s&&function(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),o=n.length-r.length;o&&(e.style.animation=r.join(", "),Xi-=o,Xi||xi((()=>{Xi||(Gi.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&Ei(t)})),Gi.clear())})))}(e,s)}function u(e,t){const n=e.b-i;return t*=Math.abs(n),{a:i,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function d(t){const{delay:n=0,duration:r=300,easing:d=ei,tick:p=Jo,css:h}=o||Ma,f={start:vi()+n,b:t};t||(f.group=wa,wa.r+=1),a||l?l=f:(h&&(c(),s=Yi(e,i,t,r,n,d,h)),t&&p(0,1),a=u(f,r),ha((()=>va(e,t,"start"))),ki((t=>{if(l&&t>l.start&&(a=u(l,r),l=null,va(e,a.b,"start"),h&&(c(),s=Yi(e,i,a.b,a.duration,0,d,o.css))),a)if(t>=a.end)p(i=a.b,1-i),va(e,a.b,"end"),l||(a.b?c():--a.group.r||oi(a.group.c)),a=null;else if(t>=a.start){const e=t-a.start;i=a.a+a.d*d(e/a.duration),p(i,1-i)}return!(!a&&!l)})))}return{run(e){ii(o)?(ga||(ga=Promise.resolve(),ga.then((()=>{ga=null}))),ga).then((()=>{o=o(),d(e)})):d(e)},end(){c(),a=l=null}}}const Ea="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function Ra(e,t){e.d(1),t.delete(e.key)}function Ia(e,t){Ta(e,1,1,(()=>{t.delete(e.key)}))}function Aa(e,t,n,r,o,i,a,l,s,c,u,d){let p=e.length,h=i.length,f=p;const m={};for(;f--;)m[e[f].key]=f;const g=[],y=new Map,$=new Map;for(f=h;f--;){const e=d(o,i,f),l=n(e);let s=a.get(l);s?r&&s.p(e,t):(s=c(l,e),s.c()),y.set(l,g[f]=s),l in m&&$.set(l,Math.abs(f-m[l]))}const b=new Set,v=new Set;function x(e){Ca(e,1),e.m(l,u),a.set(e.key,e),u=e.first,h--}for(;p&&h;){const t=g[h-1],n=e[p-1],r=t.key,o=n.key;t===n?(u=t.first,p--,h--):y.has(o)?!a.has(r)||b.has(r)?x(t):v.has(o)?p--:$.get(r)>$.get(o)?(v.add(r),x(t)):(b.add(o),p--):(s(n,a),p--)}for(;p--;){const t=e[p];y.has(t.key)||s(t,a)}for(;h;)x(g[h-1]);return g}function La(e,t){const n={},r={},o={$$scope:1};let i=e.length;for(;i--;){const a=e[i],l=t[i];if(l){for(const e in a)e in l||(r[e]=1);for(const e in l)o[e]||(n[e]=l[e],o[e]=1);e[i]=l}else for(const e in a)o[e]=1}for(const a in r)a in n||(n[a]=void 0);return n}function za(e){return"object"==typeof e&&null!==e?e:{}}function Fa(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Oa(e){e&&e.c()}function Da(e,t,n,r){const{fragment:o,after_update:i}=e.$$;o&&o.m(t,n),r||ha((()=>{const t=e.$$.on_mount.map(ni).filter(ii);e.$$.on_destroy?e.$$.on_destroy.push(...t):oi(t),e.$$.on_mount=[]})),i.forEach(ha)}function _a(e,t){const n=e.$$;null!==n.fragment&&(oi(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ba(e,t,n,r,o,i,a){let l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[-1];const s=Zi;qi(e);const c=e.$$={fragment:null,ctx:[],props:i,update:Jo,not_equal:o,bound:ri(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:ri(),dirty:l,skip_bound:!1,root:t.target||s.$$.root};a&&a(c.root);let u=!1;if(c.ctx=n?n(e,t.props||{},(function(t,n){const r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return c.ctx&&o(c.ctx[t],c.ctx[t]=r)&&(!c.skip_bound&&c.bound[t]&&c.bound[t](r),u&&function(e,t){-1===e.$$.dirty[0]&&(ia.push(e),da(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n})):[],c.update(),u=!0,oi(c.before_update),c.fragment=!!r&&r(c.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);c.fragment&&c.fragment.l(e),e.forEach(Ei)}else c.fragment&&c.fragment.c();t.intro&&Ca(e.$$.fragment),Da(e,t.target,t.anchor,t.customElement),$a()}qi(s)}class Na{$destroy(){_a(this,1),this.$destroy=Jo}$on(e,t){if(!ii(t))return Jo;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ja=[];function Wa(e,t){return{subscribe:Va(e,t).subscribe}}function Va(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jo;const r=new Set;function o(n){if(ai(e,n)&&(e=n,t)){const t=!ja.length;for(const n of r)n[1](),ja.push(n,e);if(t){for(let e=0;e<ja.length;e+=2)ja[e][0](ja[e+1]);ja.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(i){const a=[i,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jo];return r.add(a),1===r.size&&(t=n(o)||Jo),i(e),()=>{r.delete(a),0===r.size&&(t(),t=null)}}}}function Ua(e,t,n){const r=!Array.isArray(e),o=r?[e]:e,i=t.length<2;return Wa(n,(e=>{let n=!1;const a=[];let l=0,s=Jo;const c=()=>{if(l)return;s();const n=t(r?a[0]:a,e);i?e(n):s=ii(n)?n:Jo},u=o.map(((e,t)=>li(e,(e=>{a[t]=e,l&=~(1<<t),n&&c()}),(()=>{l|=1<<t}))));return n=!0,c(),function(){oi(u),s()}}))}var Ha=e=>e.reduce(((e,t)=>Object.assign(e,t)),{});const Ga=e=>({updateValue:e}),Za=e=>({defaultValue:e}),Xa=e=>({store:e}),Ya=e=>({store:(t,n)=>Ua(...e(n))}),qa=e=>({store:(t,n)=>{const[r,o,i=(()=>!1)]=e(n);let a,l=!0;return Ua(r,((e,t)=>{o(e,(e=>{!l&&i(a,e)||(a=e,l=!1,t(e))}))}))}}),Ka=e=>({store:(t,n)=>{const[r,o={},i]=e(n);let a=[];const l={},s=e=>r(e,l),c=e=>{(a.length||e.length)&&(a=e,u())},u=()=>{const e=a.map(s);i&&e.sort(i),a=[...e],p(e)};Object.entries(o).map((e=>{let[t,n]=e;return n.subscribe((e=>{l[t]=e,e&&u()}))}));const{subscribe:d,set:p}=Va(t||[]);return{set:c,update:e=>c(e(a)),subscribe:d}}});var Qa=e=>{const t={},n={};return e.forEach((e=>{let[r,...o]=e;const i=Ha(o),a=t[r]=((e,t,n)=>{const{store:r=(e=>Va(e)),defaultValue:o=x,updateValue:i}=n,a=r(o(),t,e),{subscribe:l,update:s=x}=a;let c;const u=e=>{let t=!0;c&&c(),c=l((n=>{if(t)return t=!1;e(n),c(),c=void 0}))},d=i?i(e):ae;return a.set=e=>s((t=>d(e,t,u))),a.defaultValue=o,a})(n,t,i),l={get:()=>si(a),set:a.set};Object.defineProperty(n,r,l)})),{stores:t,accessors:n}},Ja=[["src",Xa((()=>{let e;const{subscribe:t,set:n}=Va(),r=t=>{e!==t&&(e=t,n(e))};return{set:r,subscribe:t,update:t=>r(t(e))}}))],["imageReader"],["imageWriter"],["imageScrambler"],["imageRedactionRendering",Za((()=>"pixelated"))],["images",Za((()=>[]))],["shapePreprocessor"],["willRequestResource"],["willRequest"]],el=e=>e.charAt(0).toUpperCase()+e.slice(1),tl=(e,t)=>{Object.keys(t).forEach((n=>{const r=U(t[n])?{value:t[n],writable:!1}:t[n];Object.defineProperty(e,n,r)}))};const nl=(e,t)=>{let n,r,o,i,a,l,s,c,u,d;const p=t.length;for(n=0;n<p;n++)if(r=t[n],o=t[n+1>p-1?0:n+1],i=r.x-e.x,a=r.y-e.y,l=o.x-e.x,s=o.y-e.y,c=i-l,u=a-s,d=c*a-u*i,d<-1e-5)return!1;return!0};var rl=(e,t)=>{const n=Ut(t),r=ke();Ft(e).forEach((e=>{Fe(e,r),nl(e,t)||n.forEach((t=>{const n=Math.atan2(t.start.y-t.end.y,t.start.x-t.end.x),o=1e4*Math.sin(Math.PI-n),i=1e4*Math.cos(Math.PI-n),a=Ce(e.x+o,e.y+i),l=lt(at(t),1e4),s=Nt(it(e,a),l);s&&Fe(r,Oe(Me(s),e))}))}));const o=ut(e);return Fe(o,r),!!Ft(o).every((e=>nl(e,t)))&&(Pt(e,o),!0)},ol=(e,t)=>{const n=Ft(e),r=Ht(t,5),o=bt(e),i=[];n.forEach((e=>{const t=((e,t)=>{const n=Ce(e.start.x-e.end.x,e.start.y-e.end.y),r=Ie(n),o=_e(r,t);return e.end.x+=o.x,e.end.y+=o.y,e})(it(Me(o),Me(e)),1e6);let n=!1;r.map(at).forEach((e=>{const r=Nt(t,e);r&&!n&&(i.push(r),n=!0)}))}));const a=We(i[0],i[2])<We(i[1],i[3])?[i[0],i[2]]:[i[1],i[3]],l=mt(a);return l.width<e.width&&(Pt(e,l),!0)},il=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};const r=pt(e),o=bt(r),i=Dt(r,n,o).map((e=>Ee(e,t,o))),a=mt(i);return i.map((e=>Oe(e,a)))},al=function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tt(e);if(0!==r){const i=Math.atan2(1,o),a=Math.sign(r)*r,l=a%Math.PI,s=a%se;let c;c=l>ce&&l<se+ce?s>ce?a:se-s:s>ce?se-s:a;const u=Math.min(Math.abs(e.height/Math.sin(i+c)),Math.abs(e.width/Math.cos(i-c)));t=Math.cos(i)*u,n=t/o}else t=e.width,n=t/o,n>e.height&&(n=e.height,t=n*o);return Qe(t,n)},ll=(e,t,n)=>{const r=pt(e),o=bt(r),i=Et(r,n,o),a=bt(_t(mt(i))),l=bt(t),s=Ee(l,-n,a),c=Oe(s,a),u=ze(Fe(o,c),xe);return $t(u.x-.5*t.width,u.y-.5*t.height,t.width,t.height)},sl=(e,t,n)=>Math.max(t,Math.min(e,n));const cl=["cropLimitToImage","cropMinSize","cropMaxSize","cropAspectRatio","flipX","flipY","rotation","crop","colorMatrix","convolutionMatrix","gamma","vignette","manipulation","redaction","annotation","decoration","selection","frame","backgroundColor","backgroundImage","targetSize","metadata","trim","volume","minDuration","maxDuration"],ul=e=>Hn(e)?e.map(ul):vn(e)||Jt(e)?e:N(e)?{...e}:e,dl=e=>e.map((e=>Object.entries(e).reduce(((e,t)=>{let[n,r]=t;return n.startsWith("_")||(e[n]=r),e}),{}))),pl=(e,t)=>e===t;var hl=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pl;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0};const fl=(e,t,n)=>{const r=ze(bt(e),(e=>xe(e,8))),o=pt(t),i=bt(o),a=Et(o,n,i),l=ze(tt(mt(a)),(e=>xe(e,8))),s=Math.abs(l.x-r.x),c=Math.abs(l.y-r.y);return s<1&&c<1},ml=(e,t)=>{const{context:n,props:r}=t;return e._isFormatted||((e=po(e))._isFormatted=!0,Object.assign(e,r)),e._isDraft||!Gr(e)||e._context&&Ct(n,e._context)||(Po(e,n),e._context={...n}),e},gl=(e,t)=>(e._isFormatted||(e.disableMove=!0,e.disableSelect=!0,e.disableResize=!0,e.disableRotate=!0),ml(e,t));var yl=[["file"],["size"],["loadState"],["processState"],["aspectRatio",Ya((e=>{let{size:t}=e;return[t,e=>e?Tt(e):void 0]}))],["perspectiveX",Za((()=>0))],["perspectiveY",Za((()=>0))],["perspective",Ya((e=>{let{perspectiveX:t,perspectiveY:n}=e;return[[t,n],e=>{let[t,n]=e;return{x:t,y:n}}]}))],["rotation",Za((()=>0)),Ga((e=>(t,n,r)=>{if(t===n)return t;const{loadState:o,size:i,rotationRange:a,cropMinSize:l,cropMaxSize:s,crop:c,perspective:u,cropLimitToImage:d,cropOrigin:p}=e;if(!c||!o||!o.beforeComplete)return t;const h=d&&((e,t,n)=>{const r=al(t,n,Tt(e));return Je(ot(r,Math.round),ot(Ze(e),Math.round))})(c,i,n),f=d&&fl(c,i,n),m=((e,t,n,r,o,i,a,l,s,c)=>{const u=Ze(s),d=Ze(c);a&&(d.width=Math.min(c.width,o.width),d.height=Math.min(c.height,o.height));let p=!1;const h=(t,n)=>{const s=ll(o,r,t),c=pt(o),f=bt(c),m=Dt(c,i,f),g=Oe(Me(f),Bt(m)),y=Ee(bt(s),n,f),$=Oe(Me(f),y);m.forEach((e=>Ee(e,n,f)));const b=mt(m),v=Bt(m),x=Fe(Oe(Oe(v,$),b),g),w=$t(x.x-.5*s.width,x.y-.5*s.height,s.width,s.height);if(l&&xt(w,l.width/w.width),a){const e=il(o,n,i);ol(w,e)}const S=xe(Math.min(w.width/u.width,w.height/u.height),8),k=xe(Math.max(w.width/d.width,w.height/d.height),8);return(S<1||k>1)&&xe(Math.abs(n-t))===xe(Math.PI/2)&&!p?(p=!0,h(e,e+Math.sign(n-t)*Math.PI)):{rotation:n,crop:Ot(w,(e=>xe(e,8)))}},f=Math.sign(t)*Math.round(Math.abs(t)/se)*se,m=sl(t,f+n[0],f+n[1]);return h(e,m)})(n,t,a,c,i,u,d,p,l,s);if(h&&f){const e=al(i,t,Tt(m.crop));m.crop.x+=.5*m.crop.width,m.crop.y+=.5*m.crop.height,m.crop.x-=.5*e.width,m.crop.y-=.5*e.height,m.crop.width=e.width,m.crop.height=e.height}return r((()=>{e.crop=Ot(m.crop,(e=>xe(e,8)))})),m.rotation}))],["flipX",Za((()=>!1))],["flipY",Za((()=>!1))],["flip",Ya((e=>{let{flipX:t,flipY:n}=e;return[[t,n],e=>{let[t,n]=e;return{x:t,y:n}}]}))],["isRotatedSideways",qa((e=>{let{rotation:t}=e;return[[t],(e,t)=>{let[n]=e;return t(ue(n))},(e,t)=>e!==t]}))],["crop",Ga((e=>function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;const{loadState:r,size:o,cropMinSize:i,cropMaxSize:a,cropLimitToImage:l,cropAspectRatio:s,rotation:c,perspective:u}=e;if(!t&&!n||!r||!r.beforeComplete)return t;t||(t=pt(al(o,c,s||Tt(o))));const d=((e,t,n,r,o,i,a,l)=>{const s=Ze(a),c=Ze(l),u=xe(Math.max(t.width/c.width,t.height/c.height)),d=xe(Math.min(t.width/s.width,t.height/s.height)),p=ut(t);if(d<1||u>1){const n=bt(e),r=bt(t),o=d<1?d:u,i=(r.x+n.x)/2,a=(r.y+n.y)/2,l=p.width/o,s=p.height/o;Mt(p,i-.5*l,a-.5*s,l,s)}return i?(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ke(),o=arguments.length>4?arguments[4]:void 0;if(Wn(n)&&0!==n||r.x||r.y){const o=Tt(e),i=il(t,n,r),a=al(t,n,o);if(!(e.width<a.width&&e.height<a.height)){const t=.5*e.width-.5*a.width,n=.5*e.height-.5*a.height;e.width>a.width&&(e.width=a.width,e.x+=t),e.height>a.height&&(e.height=a.height,e.y+=n)}rl(e,i),ol(e,i)&&rl(e,i)}else{const n=Tt(e);e.width=Math.min(e.width,t.width),e.height=Math.min(e.height,t.height),e.x=Math.max(e.x,0),e.x+e.width>t.width&&(e.x-=e.x+e.width-t.width),e.y=Math.max(e.y,0),e.y+e.height>t.height&&(e.y-=e.y+e.height-t.height);const r=bt(e),i=Lt(e,n);i.width=Math.max(o.width,i.width),i.height=Math.max(o.height,i.height),i.x=r.x-.5*i.width,i.y=r.y-.5*i.height,Pt(e,i)}}(p,n,r,o,s),{crop:p}):{crop:p}})(n,t,o,c,u,l,i,a),p=Ot(d.crop,(e=>xe(e,8)));return Ct(n,p)?n:p}))],["cropAspectRatio",Ga((e=>(t,n)=>{const{loadState:r,crop:o,size:i,rotation:a,cropLimitToImage:l}=e,s=(e=>{if(e){if(/:/.test(e)){const[t,n]=e.split(":");return t/n}return parseFloat(e)}})(t);if(!s)return;if(!o||!r||!r.beforeComplete)return s;const c=n?Math.abs(t-n):1;if(fl(o,i,a)&&l&&c>=.1){const n=((e,t)=>{const n=e.width,r=e.height;return ue(t)&&(e.width=r,e.height=n),e})(Ze(i),a);e.crop=Ot(Lt(pt(n),t),xe)}else{const t={width:o.height*s,height:o.height},n=.5*(o.width-t.width),r=.5*(o.height-t.height);e.crop=Ot($t(o.x+n,o.y+r,t.width,t.height),xe)}return s}))],["cropOrigin"],["cropMinSize",Za((()=>({width:1,height:1})))],["cropMaxSize",Za((()=>({width:32768,height:32768})))],["cropLimitToImage",Za((()=>!0)),Ga((e=>(t,n,r)=>{const{crop:o}=e;return o?(!n&&t&&r((()=>e.crop=ut(e.crop))),t):t}))],["cropSize",qa((e=>{let{crop:t}=e;return[[t],(e,t)=>{let[n]=e;n&&t(Qe(n.width,n.height))},(e,t)=>Je(e,t)]}))],["cropRectAspectRatio",Ya((e=>{let{cropSize:t}=e;return[[t],(e,t)=>{let[n]=e;n&&t(xe(Tt(n),5))}]}))],["cropRange",qa((e=>{let{size:t,rotation:n,cropRectAspectRatio:r,cropMinSize:o,cropMaxSize:i,cropLimitToImage:a}=e;return[[t,n,r,o,i,a],(e,t)=>{let[n,r,o,i,a,l]=e;n&&t(((e,t,n,r,o,i)=>{const a=Ze(r),l=Ze(o);return i?[a,ot(al(e,t,n),Math.round)]:[a,l]})(n,r,o,i,a,l))},(e,t)=>hl(e,t)]}))],["rotationRange",qa((e=>{let{size:t,isRotatedSideways:n,cropMinSize:r,cropSize:o,cropLimitToImage:i}=e;return[[t,n,r,o,i],(e,t)=>{let[n,r,o,i,a]=e;n&&i&&t(((e,t,n,r,o)=>{if(!o)return[-1/0,1/0];const i=Math.max(n.width/r.width,n.height/r.height),a=Qe(r.width*i,r.height*i),l=(s=a,Math.sqrt(s.width*s.width+s.height*s.height));var s;if(l<Math.min(e.width,e.height))return[-1/0,1/0];const c=t?e.height:e.width,u=t?e.width:e.height,d=Math.acos(a.height/l),p=d-Math.acos(u/l),h=Math.asin(c/l)-d;if(Number.isNaN(p)&&Number.isNaN(h))return[-1/0,1/0];const f=Number.isNaN(p)?h:Number.isNaN(h)?p:Math.min(p,h);return[-f,f]})(n,r,o,i,a))},(e,t)=>hl(e,t)]}))],["backgroundColor",Ga((()=>e=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 4===e.length?e:[...e,t]}(e)))],["backgroundImage"],["targetSize"],["colorMatrix"],["convolutionMatrix"],["gamma"],["noise"],["vignette"],["duration"],["minDuration",Za((()=>1/24))],["maxDuration",Za((()=>1/0))],["trim"],["volume",Za((()=>1))],["redaction",Ka((e=>{let{size:t}=e;return[ml,{context:t}]}))],["manipulation",Ka((e=>{let{size:t}=e;return[ml,{context:t}]}))],["annotation",Ka((e=>{let{size:t}=e;return[ml,{context:t}]}))],["decoration",Ka((e=>{let{crop:t}=e;return[ml,{context:t}]}))],["selection",Ka((e=>{let{size:t}=e;return[gl,{context:t}]}))],["frame",Ga((()=>e=>{if(!e)return;const t={frameStyle:void 0,x:0,y:0,width:"100%",height:"100%",disableStyle:["backgroundColor","strokeColor","strokeWidth"]};return V(e)?t.frameStyle=e:Object.assign(t,e),t}))],["metadata"],["state",Xa(((e,t,n)=>{const r=cl.map((e=>t[e]));let o=!1;const i=Va({}),{subscribe:a}=Ua([...r,i],((e,t)=>{if(o)return;const n=cl.reduce(((t,n,r)=>(t[n]=ul(e[r]),t)),{});n.crop&&Ot(n.crop,Math.round),n.manipulation=n.manipulation&&dl(n.manipulation),n.redaction=n.redaction&&dl(n.redaction),n.annotation=n.annotation&&dl(n.annotation),n.decoration=n.decoration&&dl(n.decoration),n.selection=n.selection&&dl(n.selection),t(n)})),l=e=>{e&&(o=!0,n.cropOrigin=void 0,cl.filter((t=>Un(e,t))).forEach((t=>{const r=e[t];n[t]=null===r?void 0:ul(r)})),o=!1,i.set({}))};return{set:l,update:e=>l(e(null)),subscribe:a}}))]],$l=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;const{ontaskstart:o,ontaskprogress:i,ontaskend:a,token:l}=r;let s=!1;const c={cancel:x};l.cancel=()=>{s=!0,c.cancel()};for(const[u,d]of t.entries()){if(s)return;const[t,r]=d;o(u,r);try{e=await t(e,{...n,taskCancelToken:c},(e=>i(u,r,e)))}catch(e){throw s=!0,e}a(u,r)}return e};const bl=["loadstart","loadabort","loaderror","loadprogress","load","processstart","processabort","processerror","processprogress","process"],vl=["flip","cropOrigin","isRotatedSideways","perspective","perspectiveX","perspectiveY","cropRange"],xl=yl.map((e=>{let[t]=e;return t})).filter((e=>!vl.includes(e))),wl=e=>"image"+el(e),Sl=e=>Un(e,"crop");var kl=()=>{const{stores:e,accessors:t}=Qa(Ja),{sub:n,pub:r}=or(),o=()=>t.images?t.images[0]:{};let i={};const a={};xl.forEach((e=>{Object.defineProperty(t,wl(e),{get:()=>{const t=o();if(t)return t.accessors[e]},set:t=>{i[wl(e)]=t,a[wl(e)]=t;const n=o();n&&(n.accessors[e]=t)}})}));const l=()=>t.images&&t.images[0],s=e.src.subscribe((e=>{if(!e)return t.images=[];t.imageReader&&(t.images.length&&(i={}),u(e))})),c=e.imageReader.subscribe((e=>{e&&(t.images.length||t.src&&u(t.src))})),u=e=>{Promise.resolve().then((()=>p(e,i))).catch((()=>{}))};let d;const p=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((o,s)=>{let c=l();const u=!(!1===n.cropLimitToImage||!1===n.imageCropLimitToImage||!1===a.imageCropLmitedToImage),p=n.cropMinSize||n.imageCropMinSize||a.imageCropMinSize,h=u?p:c&&c.accessors.cropMinSize,m=n.minDuration||n.imageMinDuration;c&&f(),c=function(){let{minSize:e={width:1,height:1},minDuration:t=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{stores:n,accessors:r}=Qa(yl),{pub:o,sub:i}=or(),a=(e,t)=>{const n=()=>r[e]||{},i=t=>{r[e]={...n(),...t,timeStamp:Date.now()}},a=()=>n().error,l=e=>{a()||(i({error:e}),o(t+"error",{...n()}))};return{start(){o(t+"start")},onabort(){i({abort:!0}),o(t+"abort",{...n()})},ontaskstart(e,r){a()||(i({index:e,task:r,taskProgress:void 0,taskLengthComputable:void 0}),o(t+"taskstart",{...n()}))},ontaskprogress(e,r,l){a()||(i({index:e,task:r,taskProgress:l.loaded/l.total,taskLengthComputable:l.lengthComputable}),o(t+"taskprogress",{...n()}),o(t+"progress",{...n()}))},ontaskend(e,r){a()||(i({index:e,task:r}),o(t+"taskend",{...n()}))},ontaskerror(e){l(e)},error(e){l(e)},beforeComplete(e){a()||(i({beforeComplete:!0}),o("before"+t,e))},complete(e){a()||(i({complete:!0}),o(t,e))}}};return tl(r,{read:function(n,o){let{reader:i}=o,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!i)return;Object.assign(r,{file:void 0,size:void 0,loadState:void 0});let s={cancel:x},c=!1;const u=a("loadState","load"),d={token:s,...u},p={src:n,size:void 0,dest:void 0,duration:void 0};return Promise.resolve().then((async()=>{try{if(u.start(),c)return u.onabort();const n=await $l(p,i,l,d);if(c)return u.onabort();const{size:o,duration:a,dest:s}=n||{};if(!o||!o.width||!o.height)throw new $n("Image size missing","IMAGE_SIZE_MISSING",n);if(a>0&&a<t)throw new $n("Video too short","VIDEO_TOO_SHORT",{...n,minDuration:t});if(o.width<e.width||o.height<e.height)throw new $n("Image too small","IMAGE_TOO_SMALL",{...n,minWidth:e.width,minHeight:e.height});Object.assign(r,{file:s,size:o,duration:a}),u.beforeComplete(n),u.complete(n)}catch(e){u.error(e)}finally{s=void 0}})),()=>{c=!0,s&&s.cancel(),u.onabort()}},write:(e,t)=>{if(!r.loadState.complete)return;r.processState=void 0;const n=a("processState","process"),o={src:r.file,imageState:r.state,dest:void 0};if(U(e)&&(e=e(r.file,r.state)),!e)return n.start(),void n.complete(o);let i={cancel:x},l=!1;const s=t,c={token:i,...n};return Promise.resolve().then((async()=>{try{if(n.start(),l)return n.onabort();const t=await $l(o,e,s,c);if(l)return n.onabort();n.complete(t)}catch(e){n.error(e)}finally{i=void 0}})),()=>{l=!0,i&&i.cancel()}},on:i}),{accessors:r,stores:n}}({minSize:h,minDuration:m}),bl.map((e=>{return c.accessors.on(e,(t=e,e=>r(t,e)));var t}));const g=()=>{i={},y.forEach((e=>e()))},y=[];y.push(c.accessors.on("loaderror",(e=>{g(),s(e)}))),y.push(c.accessors.on("loadabort",(()=>{g(),s({name:"AbortError"})}))),y.push(c.accessors.on("load",(e=>{d=void 0,g(),o(e)}))),y.push(c.accessors.on("beforeload",(()=>((e,n)=>{if(Sl(n))return void(t.imageState=n);if(!n.imageCrop){const t=e.accessors.size,r=n.imageRotation||0,o=nt(Ze(t),r),i=pt(o);i.width=xe(Math.abs(i.width),6),i.height=xe(Math.abs(i.height),6);const a=n.imageCropAspectRatio||(n.imageCropLimitToImage?Tt(t):Tt(i));let l;n.imageCropLimitToImage?l=Lt(i,a):(l=At(i,a),l.x=(t.width-l.width)/2,l.y=(t.height-l.height)/2),n.imageCrop=l}if(e.accessors.duration&&!n.imageTrim&&n.imageMaxDuration){const{duration:t}=e.accessors;n.imageTrim=[[0,Math.min(n.imageMaxDuration/t,1)]]}const r=["imageCropLimitToImage","imageCrop","imageCropAspectRatio","imageRotation"];r.filter((e=>Un(n,e))).forEach((e=>{t[e]=n[e],delete n[e]}));const o=Object.keys(n).filter((e=>!r.includes(e))).reduce(((e,t)=>(e[t]=n[t],e)),{});Object.assign(t,o)})(c,n)))),t.images=[c],n.imageReader&&(t.imageReader=n.imageReader),n.imageWriter&&(t.imageWriter=n.imageWriter),d=c.accessors.read(e,{reader:t.imageReader},{willRequest:t.willRequest})}))};let h;const f=()=>{const e=l();e&&(d&&d(),e.accessors.loadState=void 0,t.images=[])};return Object.defineProperty(t,"stores",{get:()=>e}),tl(t,{on:n,loadImage:p,abortLoadImage:()=>{d&&d(),t.images=[]},editImage:(e,n)=>new Promise(((r,o)=>{p(e,n).then((()=>{const{images:e}=t,n=e[0],i=()=>{a(),l()},a=n.accessors.on("processerror",(e=>{i(),o(e)})),l=n.accessors.on("process",(e=>{i(),r(e)}))})).catch(o)})),removeImage:f,processImage:(e,n)=>new Promise(((r,o)=>{try{const i=[],a=()=>{h=void 0,i.forEach((e=>e()))};(async()=>{if((e=>V(e)||Kn(e)||Qt(e))(e))try{await p(e,n)}catch(e){o(e)}else e&&(Sl(e)?t.imageState=e:Object.assign(t,e));const s=l();if(!s)return o("no image");i.push(s.accessors.on("processerror",(e=>{a(),o(e)}))),i.push(s.accessors.on("processabort",(()=>{a(),o({name:"AbortError"})}))),i.push(s.accessors.on("process",(e=>{a(),r(e)}))),h=s.accessors.write(t.imageWriter,{redactionRenderStyle:t.imageRedactionRendering,shapePreprocessor:t.shapePreprocessor||ae,imageScrambler:t.imageScrambler,willRequest:t.willRequest,willRequestResource:t.willRequestResource})})()}catch(e){o(e)}})),abortProcessImage:()=>{const e=l();e&&(h&&h(),e.accessors.processState=void 0)},destroy:()=>{s&&s(),c&&c()}}),t};const Cl=(e,t)=>{const{processImage:n}=kl();return n(e,t)};var Tl=()=>sn()?Tn()?/15_|16_/.test(navigator.userAgent)?14745600:16777216:/15_/.test(navigator.userAgent)?16777216:1/0:1/0,Ml=(e,t)=>Object.keys(e).filter((e=>!t.includes(e))).reduce(((t,n)=>(t[n]=e[n],t)),{}),Pl=e=>new Promise((t=>{if(e.duration===1/0)return e.ontimeupdate=()=>{e.ontimeupdate=void 0,t(e)},void(e.currentTime=Number.MAX_SAFE_INTEGER);t(e)}));const El=function(){let{imageDataResizer:e,canvasMemoryLimit:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async(n,r,o,i,a)=>{o.width=Math.max(o.width,1),o.height=Math.max(o.height,1),i.width=Math.max(i.width,1),i.height=Math.max(i.height,1);const{dest:l}=await Cl(r,{imageReader:os(),imageWriter:as({format:"canvas",targetSize:{...i,upscale:!0},imageDataResizer:e,canvasMemoryLimit:t}),imageCrop:o}),{feather:s=0}=a||{};if(s>0){const e=R("canvas");e.width=l.width,e.height=l.height;const t=e.getContext("2d",{willReadFrequently:!0}),n=1/s;let r=0;for(r=0;r<s;r++){const e=r*n;t.strokeStyle="rgba(0,0,0,".concat(e*e,")"),t.strokeRect(r+.5,r+.5,l.width-2*r-1,l.height-2*r-1)}t.fillStyle="#000",t.fillRect(r,r,l.width+.5-2*r,l.height+.5-2*r);const o=l.getContext("2d");o.globalCompositeOperation="destination-in",o.drawImage(e,0,0),A(e)}n.drawImage(l,i.x,i.y,i.width,i.height),A(l)}},Rl=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t},n=arguments.length>2?arguments[2]:void 0;return async(r,o,i)=>{i(mn(0,!1));let a=!1;const l=await e(...t(r,o,(e=>{a=!0,i(e)})));return n&&n(r,l),a||i(mn(1,!1)),r}},Il=function(){let{willRequest:e,srcProp:t="src",destProp:n="dest"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Rl(wn,((n,r,o)=>[n[t],o,{...r,willRequest:e}]),((e,t)=>e[n]=t)),"any-to-file"]},Al=function(){let{srcProp:e="dest",destProp:t="dest"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Rl((async e=>{if(/octet-stream/.test(e.type)){console.warn('Pintura: File has unknown mime type "'.concat(e.type,'", make sure your server sets the correct Content-Type header.'));let t="image";const n=await pn(e);/video/i.test(n.nodeName)&&(t="video");const r={type:t+"/unknown"};return Jt(e)?new File([e],e.name,{...r,lastModified:e.lastModified}):new Blob([e],r)}return e}),(t=>[t[e]]),((e,n)=>e[t]=n)),"any-to-file"]},Ll=function(){let{srcProp:e="src",destProp:t="size"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Rl(fn,(t=>[t[e]]),((e,n)=>e[t]=n)),"read-image-size"]},zl=async e=>{const t=await pn(e);if(hn(t))return await(e=>new Promise(((t,n)=>{const r=()=>{Pl(e).then((()=>{t(e.duration)}))};if(e.readyState>=1)return r();e.onloadedmetadata=r,e.onerror=()=>n(e.error)})))(t)},Fl=function(){let{srcProp:e="src",destProp:t="duration"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Rl(zl,(t=>[t[e]]),((e,n)=>e[t]=n)),"read-media-duration"]},Ol=function(){let{srcSize:e="size",srcOrientation:t="orientation",destSize:n="size"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Rl(Mn,(n=>[n[e],n[t]]),((e,t)=>e[n]=t)),"image-size-match-orientation"]},Dl=function(){let{srcProp:e="src",destProp:t="head"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Rl(((e,t)=>Pn(e)?S(e,t):void 0),(t=>[t[e],[0,262144],onprogress]),((e,n)=>e[t]=n)),"read-image-head"]},_l=function(){let{srcProp:e="head",destProp:t="orientation"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Rl(b,(t=>[t[e],274]),(function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e[t]=n})),"read-exif-orientation-tag"]},Bl=function(){let{srcProp:e="head"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Rl(b,(t=>[t[e],274,1])),"clear-exif-orientation-tag"]},Nl=function(){let{srcImageSize:e="size",srcCanvasSize:t="imageData",srcImageState:n="imageState",destImageSize:r="size",destScalar:o="scalar"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Rl(((e,t)=>[Math.min(t.width/e.width,t.height/e.height),Xe(t)]),(r=>[r[e],r[t],r[n]]),((e,t)=>{let[n,i]=t;e[o]=n,e[r]=i})),"calculate-canvas-scalar"]},jl=function(){let{srcProp:e="src",destProp:t="imageData",canvasMemoryLimit:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Rl(q,(t=>[t[e],n]),((e,n)=>e[t]=n)),"blob-to-image-data"]},Wl=function(){let{srcImageData:e="imageData",srcOrientation:t="orientation"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Rl(B,(n=>[n[e],n[t]]),((e,t)=>e.imageData=t)),"image-data-match-orientation"]},Vl=function(){let{srcImageData:e="imageData",srcImageState:t="imageState"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Rl(qo,(n=>[n[e],{backgroundColor:n[t].backgroundColor,backgroundImage:n[t].backgroundImage}]),((e,t)=>e.imageData=t)),"image-data-fill"]},Ul=function(){let{srcImageData:e="imageData",srcImageState:t="imageState",destScalar:n="scalar"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Rl(An,(r=>{const o=r[n];let{crop:i}=r[t];return i&&1!==o&&(i=xt(ut(i),o,ke())),[r[e],{crop:i,rotation:r[t].rotation,flipX:r[t].flipX,flipY:r[t].flipY}]}),((e,t)=>e.imageData=t)),"image-data-crop"]},Hl=e=>{let{targetSize:t={width:void 0,height:void 0,fit:void 0,upscale:void 0},imageDataResizer:n,srcProp:r="imageData",srcImageState:o="imageState",destImageScaledSize:i="imageScaledSize"}=e;return[Rl(Fn,(e=>{const i=Math.min(t.width||Number.MAX_SAFE_INTEGER,e[o].targetSize&&e[o].targetSize.width||Number.MAX_SAFE_INTEGER),a=Math.min(t.height||Number.MAX_SAFE_INTEGER,e[o].targetSize&&e[o].targetSize.height||Number.MAX_SAFE_INTEGER);return[e[r],{width:i,height:a,fit:t.fit||"contain",upscale:(l=e[o],!!(l.targetSize&&l.targetSize.width||l.targetSize&&l.targetSize.height)||t.upscale||!1)},n];var l}),((e,t)=>{Je(e.imageData,t)||(e[i]=Xe(t)),e.imageData=t})),"image-data-resize"]},Gl=function(){let{srcImageData:e="imageData",srcImageState:t="imageState",destImageData:n="imageData"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Rl(jn,(n=>{const{colorMatrix:r}=n[t],o=r&&Object.keys(r).map((e=>r[e])).filter(Boolean);return[n[e],{colorMatrix:o&&Ko(o),convolutionMatrix:n[t].convolutionMatrix,gamma:n[t].gamma,noise:n[t].noise,vignette:n[t].vignette}]}),((e,t)=>e[n]=t)),"image-data-filter"]},Zl=function(){let{srcImageData:e="imageData",srcImageState:t="imageState",destImageData:n="imageData",destScalar:r="scalar"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Rl((async(e,t,n,r,o,i)=>{if(!t||!r.length)return e;let a;try{const o={dataSizeScalar:Qo(e,r)};n&&n[3]>0&&(o.backgroundColor=[...n]),a=await t(e,o)}catch(e){}const l=R("canvas");l.width=e.width,l.height=e.height;const s=l.getContext("2d",{willReadFrequently:!0});if(s.putImageData(e,0,0),"auto"===i){const t=Math.sqrt(e.width*e.height);s.filter="blur(".concat(Math.round(t/100),"px)")}const c=new Path2D;r.forEach((e=>{const t=$t(e.x,e.y,e.width,e.height);kt(t,o);const n=Et(ut(t),e.rotation),r=new Path2D;n.forEach(((e,t)=>{if(0===t)return r.moveTo(e.x,e.y);r.lineTo(e.x,e.y)})),c.addPath(r)})),s.clip(c,"nonzero"),s.imageSmoothingEnabled=!1,s.drawImage(a,0,0,l.width,l.height),A(a);const u=s.getImageData(0,0,l.width,l.height);return A(l),u}),((n,o)=>{let{imageScrambler:i,redactionRenderStyle:a}=o;return[n[e],i,n[t].backgroundColor,n[t].redaction,n[r],a]}),((e,t)=>e[n]=t)),"image-data-redact"]},Xl=function(){let{srcImageData:e="imageData",srcSize:t="size",srcImageState:n="imageState",srcShapes:r="annotation",destImageData:o="imageData",destImageScaledSize:i="imageScaledSize",destScalar:a="scalar",imageDataResizer:l,canvasMemoryLimit:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Rl(Yo,((o,c)=>{let{shapePreprocessor:u,willRequestResource:d,willRequest:p}=c;const h=o[n][r];if(!h.length)return[o[e]];const f=o[a],{crop:m}=o[n],g=o[t];let y=f;const $=o[i];$&&(y=Math.min($.width/m.width,$.height/m.height));const b={width:g.width/f,height:g.height/f};return[o[e],{shapes:h,computeShape:e=>(e=xo(e,b),e=Ml(e,["left","right","top","bottom"]),Eo(e,y)),transform:e=>{const r=o[t],{rotation:l=0,flipX:s,flipY:c,cropLimitToImage:u}=o[n],d=o[a],{crop:p=pt(r)}=o[n],h=o[i],f=h?Math.min(h.width/p.width,h.height/p.height):1,m={width:r.width/d*f,height:r.height/d*f},g=Kt(m,l),y=g.width,$=g.height,b=.5*m.width-.5*y,v=.5*m.height-.5*$,x=tt(m);e.translate(-b,-v),e.translate(-p.x*f,-p.y*f),e.translate(x.x,x.y),e.rotate(l),e.translate(-x.x,-x.y),e.scale(s?-1:1,c?-1:1),e.translate(s?-m.width:0,c?-m.height:0),u&&(e.rect(0,0,m.width,m.height),e.clip())},drawImage:El({imageDataResizer:l,canvasMemoryLimit:s}),preprocessShape:e=>u(e,{isPreview:!1,...o[n]}),canvasMemoryLimit:s,willRequest:p||d}]}),((e,t)=>e[o]=t)),"image-data-annotate"]},Yl=function(){let{srcImageData:e="imageData",srcImageState:t="imageState",destImageData:n="imageData",destImageScaledSize:r="imageScaledSize",imageDataResizer:o,canvasMemoryLimit:i,destScalar:a="scalar"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Rl(Yo,((n,l)=>{let{shapePreprocessor:s,willRequestResource:c,willRequest:u}=l,{decoration:d}=n[t];if("undefined"!=typeof window&&(e=>{if(e&&e._7vysqoe)return;const[r]=[[85,110,108,105,99,101,110,115,101,100,32,80,105,110,116,117,114,97,32,105,110,115,116,97,110,99,101,32]].map((e=>e.map((e=>String.fromCharCode(e))).join(""))),{width:o,height:i}=n[t].crop,a=i/15;d=[...d,{x:.5*-a,y:.5*-a,width:1.5*o,height:1.25*i,text:Array(50).fill(r).join(""),fontWeight:900,lineHeight:a,fontSize:a,color:[1,1,1,.05]}]})(window),!d.length)return[n[e]];let p=n[a];const{crop:h}=n[t],f=n[r];if(f){const e=Math.min(f.width/h.width,f.height/h.height);p=e}return[n[e],{shapes:d,drawImage:El({imageDataResizer:o,canvasMemoryLimit:i}),computeShape:e=>(e=xo(e,h),e=Ml(e,["left","right","top","bottom"]),Eo(e,p)),preprocessShape:e=>s(e,{isPreview:!1,...n[t]}),canvasMemoryLimit:i,willRequest:u||c}]}),((e,t)=>e[n]=t)),"image-data-decorate"]},ql=function(){let{srcImageData:e="imageData",srcImageState:t="imageState",destImageData:n="imageData",destImageScaledSize:r="imageScaledSize",imageDataResizer:o,canvasMemoryLimit:i,destScalar:a="scalar"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Rl(Yo,((n,l)=>{let{shapePreprocessor:s,willRequestResource:c,willRequest:u}=l;const d=n[t].frame;if(!d)return[n[e]];const p=n[a];let{crop:h}=n[t];h&&1!==p&&(h=xt(ut(h),p,ke()));const f={...h},m=To(Mo(d,f,s),f);f.x=Math.abs(m.left),f.y=Math.abs(m.top),f.width+=Math.abs(m.left)+Math.abs(m.right),f.height+=Math.abs(m.top)+Math.abs(m.bottom);const g=n[r],y=g?Math.min(g.width/h.width,g.height/h.height):1;return kt(f,y),f.x=Math.floor(f.x),f.y=Math.floor(f.y),f.width=Math.floor(f.width),f.height=Math.floor(f.height),[n[e],{shapes:[d],contextBounds:f,computeShape:t=>xo(t,n[e]),transform:e=>{e.translate(f.x,f.y)},drawImage:El({imageDataResizer:o,canvasMemoryLimit:i}),preprocessShape:e=>s(e,{isPreview:!1,...n[t]}),canvasMemoryLimit:i,willRequest:u||c}]}),((e,t)=>e[n]=t)),"image-data-frame"]},Kl=function(){let{mimeType:e,quality:t,srcImageData:n="imageData",srcFile:r="src",destBlob:o="blob"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Rl(Q,(o=>[o[n],e||re(o[r].name)||o[r].type,t]),((e,t)=>e[o]=t)),"image-data-to-blob"]},Ql=function(){let{srcImageData:e="imageData",srcOrientation:t="orientation",destCanvas:n="dest"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Rl(_,(n=>[n[e],n[t]]),((e,t)=>e[n]=t)),"image-data-to-canvas"]},Jl=async(e,t)=>{if(!Pn(e)||!t)return e;const n=new DataView(t),r=$(n);if(!r||!r.exif)return e;const o=["exif","mpf","xmp"].reduce(((e,t)=>r[t]?Math.max(e,r[t].offset+r[t].size):e),0);return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,e.size];return t?new Blob([t,e.slice(...n)],{type:e.type}):e}(e,t.slice(0,o+2),[20])},es=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"blob",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"head",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"blob";return[Rl(Jl,(n=>[n[e],n[t]]),((e,t)=>e[n]=t)),"blob-write-image-head"]},ts=function(){let{renameFile:e,srcBlob:t="blob",srcFile:n="src",destFile:r="dest",defaultFilename:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Rl(oe,(r=>[r[t],e?e(r[n]):r[n].name||"".concat(o,".").concat(ee(r[t].type))]),((e,t)=>e[r]=t)),"blob-to-file"]},ns=e=>{let{url:t="./",dataset:n=(e=>[["dest",e.dest,e.dest.name],["imageState",e.imageState]]),destStore:r="store",credentials:o,headers:i={}}=e;return[Rl((async(e,n)=>await((e,t,n)=>new Promise(((r,o)=>{const{token:i={},beforeSend:a=x,onprogress:l=x}=n;i.cancel=()=>s.abort();const s=new XMLHttpRequest;s.upload.onprogress=l,s.onload=()=>s.status>=200&&s.status<300?r(s):o(s),s.onerror=()=>o(s),s.ontimeout=()=>o(s),s.open("POST",encodeURI(e)),a(s),s.send(t instanceof FormData?t:t.reduce(((e,t)=>(e.append(...t.map(En)),e)),new FormData))})))(t,e,{onprogress:n,beforeSend:e=>bn(e,{headers:i,credentials:o})})),((e,t,r)=>[n(e),r]),((e,t)=>e[r]=t)),"store"]},rs=e=>[Rl((t=>e&&e.length?(Object.keys(t).forEach((n=>{e.includes(n)||delete t[n]})),t):t)),"prop-filter"],os=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{orientImage:t=!0,outputProps:n=["src","dest","size","duration"],preprocessImageFile:r,request:o={}}=e;return[Il({willRequest:()=>o}),Al(),r&&[Rl(r,((e,t,n)=>[e.dest,t,n]),((e,t)=>e.dest=t)),"preprocess-image-file"],Ll({srcProp:"dest"}),Fl({srcProp:"dest"}),t&&Dl({srcProp:"dest"}),t&&_l(),t&&Ol(),rs(n)].filter(Boolean)},is=e=>e&&(V(e)?ns({url:e}):U(e)?[e,"store"]:ns(e)),as=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!dn(t))return;let{canvasMemoryLimit:o=Tl(),orientImage:i=!0,copyImageHead:a=!0,mimeType:l,quality:s,renameFile:c,targetSize:u,imageDataResizer:d,store:p,format:h="file",outputProps:f=["src","dest","imageState","store"],preprocessImageSource:m,preprocessImageState:g,postprocessImageData:y,postprocessImageBlob:$}={...e,...r};return"blob"===h&&(h="file"),[m&&[Rl(m,((e,t,n)=>[e.src,t,n,e.imageState]),((e,t)=>e.src=t)),"preprocess-image-source"],(i||a)&&Dl(),i&&_l(),Ll(),g&&[Rl(g,((e,t,n,r)=>[e.imageState,t,n,{size:e.size,orientation:e.orientation}]),((e,t)=>e.imageState=t)),"preprocess-image-state"],jl({canvasMemoryLimit:o}),i&&Ol(),i&&Wl(),Nl(),Zl(),Ul(),Hl({imageDataResizer:d,targetSize:u}),Xl({imageDataResizer:d,canvasMemoryLimit:o,srcShapes:"manipulation"}),Gl(),Vl(),Xl({imageDataResizer:d,canvasMemoryLimit:o,srcShapes:"annotation"}),Yl({imageDataResizer:d,canvasMemoryLimit:o}),ql({imageDataResizer:d,canvasMemoryLimit:o}),y&&[Rl(y,((e,t,n)=>[e.imageData,t,n]),((e,t)=>e.imageData=t)),"postprocess-image-data"],"file"===h?Kl({mimeType:l,quality:s}):"canvas"===h?Ql():[e=>(e.dest=e.imageData,e)],"file"===h&&i&&Bl(),"file"===h&&a&&es(),$&&[Rl($,((e,t,n)=>{let{blob:r,imageData:o,src:i}=e;return[{blob:r,imageData:o,src:i},t,n]}),((e,t)=>e.blob=t)),"postprocess-image-file"],"file"===h&&ts({defaultFilename:"image",renameFile:c}),"file"===h?is(p):U(p)&&[p,"store"],rs(f)].filter(Boolean)}};var ls=(e,t,n,r,o,i,a,l,s,c,u)=>{if(!(e&&t&&n&&r&&l))return;l*=i;const d=_t(ut(t)),p=bt(d),h=bt(e),f=pt(n),m=bt(f),g=ll(n,r,s),y=bt(g),$=Oe(Me(m),y),b=Oe(Me(h),p);$.x+=b.x,$.y+=b.y;const v=Pe(Me($));v.x+=b.x,v.y+=b.y;const x=bt(vt(vt(ut(o),a),e)),w=Oe(x,h);return Fe($,w),{origin:v,translation:$,rotation:{x:u?Math.PI:0,y:c?Math.PI:0,z:s},scale:l}};let ss=null;var cs=()=>{if(null===ss)if("WebGL2RenderingContext"in window){let e;try{e=R("canvas"),ss=!!e.getContext("webgl2")}catch(y){ss=!1}e&&A(e),e=void 0}else ss=!1;return ss},us=e=>0==(e&e-1),ds=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return Object.keys(t).filter((e=>!N(t[e]))).reduce(((e,o)=>e.replace(new RegExp(n+o+r),t[o])),e)};const ps={head:"#version 300 es\n\nin vec4 aPosition;uniform mat4 uMatrix;",text:"\nin vec2 aTexCoord;out vec2 vTexCoord;",matrix:"\ngl_Position=uMatrix*vec4(aPosition.x,aPosition.y,0,1);"},hs={head:"#version 300 es\nprecision highp float;\n\nout vec4 fragColor;",mask:"\nuniform float uMaskFeather[8];uniform float uMaskBounds[4];uniform float uMaskOpacity;float mask(float x,float y,float bounds[4],float opacity){return 1.0-(1.0-(smoothstep(bounds[3],bounds[3]+1.0,x)*(1.0-smoothstep(bounds[1]-1.0,bounds[1],x))*(1.0-step(bounds[0],y))*step(bounds[2],y)))*(1.0-opacity);}",init:"\nfloat a=1.0;vec4 fillColor=uColor;vec4 textureColor=texture(uTexture,vTexCoord);textureColor*=(1.0-step(uRepeat.y,vTexCoord.y))*step(0.0,vTexCoord.y)*(1.0-step(uRepeat.x,vTexCoord.x))*step(0.0,vTexCoord.x);",colorize:"\nif(uTextureColor.a!=0.0&&textureColor.a>0.0){vec3 colorFlattened=textureColor.rgb/textureColor.a;if(colorFlattened.r>=.9999&&colorFlattened.g==0.0&&colorFlattened.b>=.9999){textureColor.rgb=uTextureColor.rgb*textureColor.a;}textureColor*=uTextureColor.a;}",maskapply:"\nfloat m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);",maskfeatherapply:"\nfloat leftFeatherOpacity=step(uMaskFeather[1],gl_FragCoord.x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],gl_FragCoord.x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],gl_FragCoord.x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],gl_FragCoord.x));a*=leftFeatherOpacity*rightFeatherOpacity;",rectaa:"\nvec2 scaledPoint=vec2(vRectCoord.x*uSize.x,vRectCoord.y*uSize.y);a*=smoothstep(0.0,uEdgeFeather,uSize.x-scaledPoint.x);a*=smoothstep(0.0,uEdgeFeather,uSize.y-scaledPoint.y);a*=smoothstep(0.0,uEdgeFeather,scaledPoint.x);a*=smoothstep(0.0,uEdgeFeather,scaledPoint.y);",cornerradius:"\nvec2 s=(uSize-2.0)*.5;vec2 r=(vRectCoord*uSize)-1.0;vec2 p=r-s;float cornerRadius=uCornerRadius[0];bool left=r.x<s.x;bool top=r.y<s.y;if(!left&&top){cornerRadius=uCornerRadius[1];}if(!left&&!top){cornerRadius=uCornerRadius[3];}if(left&&!top){cornerRadius=uCornerRadius[2];}a*=1.0-clamp(length(max(abs(p)-(s-cornerRadius),0.0))-cornerRadius,0.0,1.0);",fragcolor:"\nif(m<=0.0)discard;fillColor.a*=a;fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);textureColor*=uTextureOpacity;textureColor.a*=a;textureColor.rgb*=m*a;textureColor.rgb+=(1.0-m)*(uCanvasColor.rgb*textureColor.a);fragColor=textureColor+(fillColor*(1.0-textureColor.a));"},fs=(e,t,n)=>{const r=e.createShader(n),o=((e,t,n)=>(t=ds(t,n===e.VERTEX_SHADER?ps:hs,"##").trim(),cs()?t:(t=(t=t.replace(/#version.+/gm,"").trim()).replace(/^\/\/\#/gm,"#"),n===e.VERTEX_SHADER&&(t=t.replace(/in /gm,"attribute ").replace(/out /g,"varying ")),n===e.FRAGMENT_SHADER&&(t=t.replace(/in /gm,"varying ").replace(/out.*?;/gm,"").replace(/texture\(/g,"texture2D(").replace(/fragColor/g,"gl_FragColor")),""+t)))(e,t,n);return e.shaderSource(r,o),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)||console.error(e.getShaderInfoLog(r)),r},ms=(e,t,n,r,o)=>{const i=fs(e,t,e.VERTEX_SHADER),a=fs(e,n,e.FRAGMENT_SHADER),l=e.createProgram();e.attachShader(l,i),e.attachShader(l,a),e.linkProgram(l);const s={};return r.forEach((t=>{s[t]=e.getAttribLocation(l,t)})),o.forEach((t=>{s[t]=e.getUniformLocation(l,t)})),{program:l,locations:s,destroy(){e.detachShader(l,i),e.detachShader(l,a),e.deleteShader(i),e.deleteShader(a),e.deleteProgram(l)}}},gs=e=>"VIDEO"!==e.nodeName&&(!!cs()||us(e.width)&&us(e.height)),ys=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e?[e[0],e[1],e[2],Wn(e[3])?t*e[3]:t]:[0,0,0,0]},$s=()=>{const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},bs=(e,t,n,r,o,i,a)=>{const l=1/(t-n),s=1/(r-o),c=1/(i-a);e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*l,e[13]=(o+r)*s,e[14]=(a+i)*c,e[15]=1},vs=(e,t,n,r)=>{e[12]=e[0]*t+e[4]*n+e[8]*r+e[12],e[13]=e[1]*t+e[5]*n+e[9]*r+e[13],e[14]=e[2]*t+e[6]*n+e[10]*r+e[14],e[15]=e[3]*t+e[7]*n+e[11]*r+e[15]},xs=(e,t)=>{e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,e[4]*=t,e[5]*=t,e[6]*=t,e[7]*=t,e[8]*=t,e[9]*=t,e[10]*=t,e[11]*=t},ws=(e,t)=>{const n=Math.sin(t),r=Math.cos(t),o=e[4],i=e[5],a=e[6],l=e[7],s=e[8],c=e[9],u=e[10],d=e[11];e[4]=o*r+s*n,e[5]=i*r+c*n,e[6]=a*r+u*n,e[7]=l*r+d*n,e[8]=s*r-o*n,e[9]=c*r-i*n,e[10]=u*r-a*n,e[11]=d*r-l*n},Ss=(e,t)=>{const n=Math.sin(t),r=Math.cos(t),o=e[0],i=e[1],a=e[2],l=e[3],s=e[8],c=e[9],u=e[10],d=e[11];e[0]=o*r-s*n,e[1]=i*r-c*n,e[2]=a*r-u*n,e[3]=l*r-d*n,e[8]=o*n+s*r,e[9]=i*n+c*r,e[10]=a*n+u*r,e[11]=l*n+d*r},ks=(e,t)=>{const n=Math.sin(t),r=Math.cos(t),o=e[0],i=e[1],a=e[2],l=e[3],s=e[4],c=e[5],u=e[6],d=e[7];e[0]=o*r+s*n,e[1]=i*r+c*n,e[2]=a*r+u*n,e[3]=l*r+d*n,e[4]=s*r-o*n,e[5]=c*r-i*n,e[6]=u*r-a*n,e[7]=d*r-l*n};var Cs=(e,t)=>cs()?e.getContext("webgl2",t):e.getContext("webgl",t)||e.getContext("experimental-webgl",t);const Ts=(e,t)=>{const n=e.length;return t>=n?e[t%n]:t<0?e[t%n+n]:e[t]},Ms=(e,t,n,r)=>{const o=Ce(n.x-t.x,n.y-t.y),i=Ce(r.x-n.x,r.y-n.y),a=Ce(t.x-r.x,t.y-r.y),l=Ce(e.x-t.x,e.y-t.y),s=Ce(e.x-n.x,e.y-n.y),c=Ce(e.x-r.x,e.y-r.y),u=Ne(o,l),d=Ne(i,s),p=Ne(a,c);return u<=0&&d<=0&&p<=0},Ps=(e,t,n,r,o)=>{const i=Ie(Ce(r.x-n.x,r.y-n.y)),a=Ie(Ce(o.x-r.x,o.y-r.y)),l=Ie(Ce(i.x+a.x,i.y+a.y)),s=Ce(-l.y,l.x),c=Ce(-i.y,i.x),u=Math.min(1/Be(s,c),5);e[t]=r.x,e[t+1]=r.y,e[t+2]=s.x*u,e[t+3]=s.y*u,e[t+4]=-1,e[t+5]=r.x,e[t+6]=r.y,e[t+7]=s.x*u,e[t+8]=s.y*u,e[t+9]=1},Es=e=>{const t=new Float32Array(8);return t[0]=e[3].x,t[1]=e[3].y,t[2]=e[0].x,t[3]=e[0].y,t[4]=e[2].x,t[5]=e[2].y,t[6]=e[1].x,t[7]=e[1].y,t},Rs=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const o=Ft(e),i=e.x+.5*e.width,a=e.y+.5*e.height;return(n||r)&&Ue(o,n,r,i,a),0!==t&&He(o,t,i,a),o},Is=(e,t,n,r,o)=>{const i=Math.min(20,Math.max(4,Math.round(r/2)));let a=0,l=0,s=0,c=0,u=0;for(;u<i;u++)a=u/i,l=o*se+a*se,s=r*Math.cos(l),c=r*Math.sin(l),e.push(Ce(t+s,n+c))};let As=null;var Ls=()=>{if(null!==As)return As;let e=R("canvas");const t=Cs(e);return As=t?t.getParameter(t.MAX_TEXTURE_SIZE):void 0,A(e),e=void 0,As},zs=()=>T()&&!!window.chrome;const Fs=new Float32Array([0,1,0,0,1,1,1,0]),Os=new Float32Array([1,0,0,0,1,1,0,1]),Ds=T()&&ar(),_s=[0,0,0,0,1,0,0,0,0],Bs=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],Ns=[0,0,0,0],js=[0,0,0,0],Ws=(e,t,n,r,o)=>{if(!n||!r)return Fs;let i=r.x/n.width,a=r.y/n.height,l=e/n.width/o,s=t/n.height/o;return l-=i,s-=a,new Float32Array([-i,s,-i,-a,l,s,l,-a])};var Vs=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{alpha:n=!1}=t,r={width:0,height:0},o={width:0,height:0},i=Ls()||1024;let a,l,s;const c=$s(),u=$s();let d,p,h,f,m,g,y,$,b,v=0,x=0,w=0,S=1;const k=new Map([]),C=()=>{P.stencilOp(P.KEEP,P.KEEP,P.KEEP),P.stencilFunc(P.ALWAYS,1,255),P.stencilMask(255)},T=(e=>e*Math.PI/180)(30),M=Math.tan(T/2),P=Cs(e,{alpha:n,antialias:!1,premultipliedAlpha:!0,stencil:!0});if(!P)return;P.getExtension("OES_standard_derivatives"),P.disable(P.DEPTH_TEST),P.enable(P.STENCIL_TEST),P.enable(P.BLEND),P.blendFunc(P.ONE,P.ONE_MINUS_SRC_ALPHA),P.pixelStorei(P.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!(!n&&ar())),C();const E=P.createTexture();P.bindTexture(P.TEXTURE_2D,E),P.texImage2D(P.TEXTURE_2D,0,P.RGBA,1,1,0,P.RGBA,P.UNSIGNED_BYTE,new Uint8Array(Ns)),k.set(0,E);const R=P.createTexture();k.set(2,R);const I=P.createFramebuffer(),L=P.createTexture();k.set(1,L);const z=P.createFramebuffer(),F=ms(P,"\n##head\n##text\nvoid main(){vTexCoord=aTexCoord;gl_Position=uMatrix*aPosition;}","\n##head\nin vec2 vTexCoord;uniform sampler2D uTexture;uniform sampler2D uTextureOverlay;uniform sampler2D uTextureBlend;uniform vec2 uTextureSize;uniform float uOpacity;uniform int uAntialias;uniform vec4 uOverlayColor;uniform mat4 uColorMatrix;uniform vec4 uColorOffset;uniform float uClarityKernel[9];uniform float uClarityKernelWeight;uniform float uColorGamma;uniform float uColorVignette;uniform float uMaskClip;uniform float uMaskOpacity;uniform float uMaskBounds[4];uniform float uMaskCornerRadius[4];uniform float uMaskFeather[8];vec4 applyGamma(vec4 c,float g){c.r=pow(c.r,g);c.g=pow(c.g,g);c.b=pow(c.b,g);return c;}vec4 applyColorMatrix(vec4 c,mat4 m,vec4 o){return(c*m)+(o*c.a);}vec4 applyConvolutionMatrix(vec4 c,float k0,float k1,float k2,float k3,float k4,float k5,float k6,float k7,float k8,float w){vec2 pixel=vec2(1)/uTextureSize;vec4 colorSum=texture(uTexture,vTexCoord-pixel)*k0+texture(uTexture,vTexCoord+pixel*vec2(0.0,-1.0))*k1+texture(uTexture,vTexCoord+pixel*vec2(1.0,-1.0))*k2+texture(uTexture,vTexCoord+pixel*vec2(-1.0,0.0))*k3+texture(uTexture,vTexCoord)*k4+texture(uTexture,vTexCoord+pixel*vec2(1.0,0.0))*k5+texture(uTexture,vTexCoord+pixel*vec2(-1.0,1.0))*k6+texture(uTexture,vTexCoord+pixel*vec2(0.0,1.0))*k7+texture(uTexture,vTexCoord+pixel)*k8;vec4 color=vec4(clamp((colorSum/w),0.0,1.0).rgb,c.a);return color;}vec4 applyVignette(vec4 c,vec2 pos,vec2 center,float v){float d=distance(pos,center)/length(center);float f=1.0-(d*abs(v));if(v>0.0){c.rgb*=f;}else if(v<0.0){c.rgb+=(1.0-f)*(1.0-c.rgb);}return c;}vec4 blendPremultipliedAlpha(vec4 back,vec4 front){return front+(back*(1.0-front.a));}void main(){float x=gl_FragCoord.x;float y=gl_FragCoord.y;float a=1.0;float maskTop=uMaskBounds[0];float maskRight=uMaskBounds[1];float maskBottom=uMaskBounds[2];float maskLeft=uMaskBounds[3];float leftFeatherOpacity=step(uMaskFeather[1],x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],x));a*=leftFeatherOpacity*rightFeatherOpacity;float overlayColorAlpha=(smoothstep(maskLeft,maskLeft+1.0,x)*(1.0-smoothstep(maskRight-1.0,maskRight,x))*(1.0-step(maskTop,y))*step(maskBottom,y));if(uOverlayColor.a==0.0){a*=overlayColorAlpha;}vec2 offset=vec2(maskLeft,maskBottom);vec2 size=vec2(maskRight-maskLeft,maskTop-maskBottom)*.5;vec2 center=offset.xy+size.xy;int pixelX=int(step(center.x,x));int pixelY=int(step(y,center.y));float cornerRadius=0.0;if(pixelX==0&&pixelY==0)cornerRadius=uMaskCornerRadius[0];if(pixelX==1&&pixelY==0)cornerRadius=uMaskCornerRadius[1];if(pixelX==0&&pixelY==1)cornerRadius=uMaskCornerRadius[2];if(pixelX==1&&pixelY==1)cornerRadius=uMaskCornerRadius[3];float cornerOffset=sign(cornerRadius)*length(max(abs(gl_FragCoord.xy-size-offset)-size+cornerRadius,0.0))-cornerRadius;float cornerOpacity=1.0-smoothstep(0.0,1.0,cornerOffset);a*=cornerOpacity;if(uAntialias==1){vec2 scaledPoint=vec2(vTexCoord.x*uTextureSize.x,vTexCoord.y*uTextureSize.y);a*=smoothstep(0.0,1.0,uTextureSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uTextureSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);}vec4 color=texture(uTexture,vTexCoord);if(uClarityKernelWeight!=-1.0){color=applyConvolutionMatrix(color,uClarityKernel[0],uClarityKernel[1],uClarityKernel[2],uClarityKernel[3],uClarityKernel[4],uClarityKernel[5],uClarityKernel[6],uClarityKernel[7],uClarityKernel[8],uClarityKernelWeight);}color=blendPremultipliedAlpha(color,texture(uTextureBlend,vTexCoord));color=applyGamma(color,uColorGamma);color=applyColorMatrix(color,uColorMatrix,uColorOffset);color*=a;if(uColorVignette!=0.0){vec2 pos=gl_FragCoord.xy-offset;color=applyVignette(color,pos,center-offset,uColorVignette);}color=blendPremultipliedAlpha(color,texture(uTextureOverlay,vTexCoord));if(overlayColorAlpha<=0.0){color*=1.0-uOverlayColor.a;}color*=uOpacity;fragColor=color;}",["aPosition","aTexCoord"],["uMatrix","uTexture","uTextureBlend","uTextureOverlay","uTextureSize","uColorGamma","uColorVignette","uColorOffset","uColorMatrix","uClarityKernel","uClarityKernelWeight","uOpacity","uMaskOpacity","uMaskBounds","uMaskCornerRadius","uMaskFeather","uOverlayColor","uAntialias"]),O=P.createBuffer(),D=P.createBuffer();P.bindBuffer(P.ARRAY_BUFFER,D),P.bufferData(P.ARRAY_BUFFER,Fs,P.STATIC_DRAW);const _=P.createBuffer();P.bindBuffer(P.ARRAY_BUFFER,_),P.bufferData(P.ARRAY_BUFFER,Os,P.STATIC_DRAW);const B=ms(P,"#version 300 es\n\nin vec4 aPosition;in vec2 aNormal;in float aMiter;out vec2 vNormal;out float vMiter;out float vWidth;uniform float uWidth;uniform float uSharpness;uniform mat4 uMatrix;void main(){vMiter=aMiter;vNormal=aNormal;vWidth=(uWidth*.5)+uSharpness;gl_Position=uMatrix*vec4(aPosition.x+(aNormal.x*vWidth*aMiter),aPosition.y+(aNormal.y*vWidth*aMiter),0,1);}","\n##head\n##mask\nin vec2 vNormal;in float vMiter;in float vWidth;uniform float uWidth;uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);if(m<=0.0)discard;fillColor.a*=clamp(smoothstep(vWidth-.5,vWidth-1.0,abs(vMiter)*vWidth),0.0,1.0);fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}",["aPosition","aNormal","aMiter"],["uColor","uCanvasColor","uMatrix","uWidth","uSharpness","uMaskBounds","uMaskOpacity"]),N=P.createBuffer();zs()&&(P.bindBuffer(P.ARRAY_BUFFER,N),P.bufferData(P.ARRAY_BUFFER,1,P.DYNAMIC_DRAW));const j=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const{program:o,locations:i}=B;P.useProgram(o),P.enableVertexAttribArray(i.aPosition),P.enableVertexAttribArray(i.aNormal),P.enableVertexAttribArray(i.aMiter);const a=((e,t)=>{let n,r,o,i=0;const a=e.length,l=new Float32Array(10*(t?a+1:a)),s=e[0],c=e[a-1];for(i=0;i<a;i++)n=e[i-1],r=e[i],o=e[i+1],n||(n=t?c:Ce(r.x+(r.x-o.x),r.y+(r.y-o.y))),o||(o=t?s:Ce(r.x+(r.x-n.x),r.y+(r.y-n.y))),Ps(l,10*i,n,r,o);return t&&Ps(l,10*a,c,s,e[1]),l})(e,r),l=5*Float32Array.BYTES_PER_ELEMENT,c=2*Float32Array.BYTES_PER_ELEMENT,u=4*Float32Array.BYTES_PER_ELEMENT;P.uniform1f(i.uWidth,t),P.uniform1f(i.uSharpness,s),P.uniform4fv(i.uColor,n),P.uniformMatrix4fv(i.uMatrix,!1,d),P.uniform4f(i.uCanvasColor,v,x,w,S),P.uniform1fv(i.uMaskBounds,y),P.uniform1f(i.uMaskOpacity,g),P.bindBuffer(P.ARRAY_BUFFER,N),P.bufferData(P.ARRAY_BUFFER,a,P.STATIC_DRAW),P.vertexAttribPointer(i.aPosition,2,P.FLOAT,!1,l,0),P.vertexAttribPointer(i.aNormal,2,P.FLOAT,!1,l,c),P.vertexAttribPointer(i.aMiter,1,P.FLOAT,!1,l,u),P.drawArrays(P.TRIANGLE_STRIP,0,a.length/5),P.disableVertexAttribArray(i.aPosition),P.disableVertexAttribArray(i.aNormal),P.disableVertexAttribArray(i.aMiter)},W=ms(P,"\n##head\nvoid main(){\n##matrix\n}","\n##head\n##mask\nuniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;\n##maskapply\nfillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}",["aPosition"],["uColor","uCanvasColor","uMatrix","uMaskBounds","uMaskOpacity"]),V=P.createBuffer(),U=ms(P,"\n##head\n##text\nin vec2 aRectCoord;out vec2 vRectCoord;void main(){vTexCoord=aTexCoord;vRectCoord=aRectCoord;\n##matrix\n}","\n##head\n##mask\nin vec2 vTexCoord;in vec2 vRectCoord;uniform sampler2D uTexture;uniform vec4 uTextureColor;uniform float uTextureOpacity;uniform vec2 uRepeat;uniform vec4 uColor;uniform float uCornerRadius[4];uniform vec2 uSize;uniform vec2 uPosition;uniform vec4 uCanvasColor;uniform int uInverted;uniform float uEdgeFeather;void main(){\n##init\n##colorize\n##rectaa\n##cornerradius\n##maskfeatherapply\nif(uInverted==1)a=1.0-a;\n##maskapply\n##fragcolor\n}",["aPosition","aTexCoord","aRectCoord"],["uTexture","uColor","uMatrix","uCanvasColor","uTextureColor","uTextureOpacity","uRepeat","uPosition","uSize","uMaskBounds","uMaskOpacity","uMaskFeather","uCornerRadius","uInverted","uEdgeFeather"]),H=P.createBuffer(),G=P.createBuffer(),Z=P.createBuffer(),X=ms(P,"\n##head\n##text\nout vec2 vTexCoordDouble;void main(){vTexCoordDouble=vec2(aTexCoord.x*2.0-1.0,aTexCoord.y*2.0-1.0);vTexCoord=aTexCoord;\n##matrix\n}","\n##head\n##mask\nin vec2 vTexCoord;in vec2 vTexCoordDouble;uniform sampler2D uTexture;uniform float uTextureOpacity;uniform vec2 uRepeat;uniform vec2 uRadius;uniform vec4 uColor;uniform int uInverted;uniform vec4 uCanvasColor;void main(){\n##init\nfloat ar=uRadius.x/uRadius.y;vec2 rAA=vec2(uRadius.x-1.0,uRadius.y-(1.0/ar));vec2 scaledPointSq=vec2((vTexCoordDouble.x*uRadius.x)*(vTexCoordDouble.x*uRadius.x),(vTexCoordDouble.y*uRadius.y)*(vTexCoordDouble.y*uRadius.y));float p=(scaledPointSq.x/(uRadius.x*uRadius.x))+(scaledPointSq.y/(uRadius.y*uRadius.y));float pAA=(scaledPointSq.x/(rAA.x*rAA.x))+(scaledPointSq.y/(rAA.y*rAA.y));a=smoothstep(1.0,p/pAA,p);if(uInverted==1)a=1.0-a;\n##maskapply\n##fragcolor\n}",["aPosition","aTexCoord"],["uTexture","uTextureOpacity","uRepeat","uColor","uCanvasColor","uMatrix","uRadius","uInverted","uMaskBounds","uMaskOpacity"]),Y=P.createBuffer(),q=P.createBuffer(),K=new Map,Q={2:{width:0,height:0},1:{width:0,height:0}},J=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const a=Math.min(Math.min(4096,i)/n.width,Math.min(4096,i)/n.height,o),s=Math.floor(a*n.width),c=Math.floor(a*n.height);Je(n,Q[e])?P.bindFramebuffer(P.FRAMEBUFFER,t):(P.bindTexture(P.TEXTURE_2D,k.get(e)),P.texImage2D(P.TEXTURE_2D,0,P.RGBA,s,c,0,P.RGBA,P.UNSIGNED_BYTE,null),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,P.LINEAR),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_S,P.CLAMP_TO_EDGE),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_T,P.CLAMP_TO_EDGE),P.bindFramebuffer(P.FRAMEBUFFER,t),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,k.get(e),0),Q[e]=n);const p=n.width*l,h=n.height*l;var f;bs(u,0,p,h,0,-1,1),vs(u,0,h,0),(f=u)[0]*=1,f[1]*=1,f[2]*=1,f[3]*=1,((e,t)=>{e[4]*=-1,e[5]*=-1,e[6]*=-1,e[7]*=-1})(u),d=u,P.viewport(0,0,s,c),P.colorMask(!0,!0,!0,!0),P.clearColor(0,0,0,0),P.clear(P.COLOR_BUFFER_BIT),b=[1,0,1,0,1,Math.max(r.width,n.width),1,Math.max(r.width,n.width)]},ee=(e,t)=>{const{forceRelease:n=!1}=t||{},{src:r}=K.get(e);r instanceof HTMLCanvasElement&&(n||r.dataset.retain||A(r)),K.delete(e),P.deleteTexture(e)};return{drawPath:function(e){let t=arguments.length>4?arguments[4]:void 0,n=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0,o=arguments.length>7?arguments[7]:void 0,i=arguments.length>8?arguments[8]:void 0;if(e.length<2)return;const a=e.map((e=>({x:e.x*l,y:e.y*l}))),s=t*l;if(s>0&&j(a,s,ys(n,i),r),a.length<3||!o||0===o[3]||!r)return;const c=(e=>{if(e.length<3)return[];if((e=>{const t=e.length;for(let n=0;n<t;n++){const t=it(e[n],Ts(e,n+1));if(Wt(t,e,{ignoreIdenticalLines:!0,breakOnIntersection:!0}))return!0}return!1})(e))return[];(e=>{let t,n,r,o,i,a=0;const l=e.length;for(t=0;t<l;t++)n=e[t],r=e[(t+1)%l],o=r.x-n.x,i=(r.y+n.y)/2,a+=o*i;return a})(e)<0&&e.reverse();const t=e.length,n=[...Array(t).keys()],r=[];let o,i,a,l,s,c,u,d,p,h,f,m,g=128;for(;n.length>3;){if(g<=0)return[];for(g--,o=0;o<n.length;o++)if(a=n[o],l=Ts(n,o-1),s=Ts(n,o+1),c=e[a],u=e[l],d=e[s],p=Ce(u.x-c.x,u.y-c.y),h=Ce(d.x-c.x,d.y-c.y),!(Ne(p,h)<0)){for(f=!0,i=0;i<t;i++)if(i!==a&&i!==l&&i!==s&&(m=e[i],Ms(m,u,c,d))){f=!1;break}if(f){r.push([u,c,d]),n.splice(o,1);break}}}return r.push([e[n[0]],e[n[1]],e[n[2]]]),r})(a),u=new Float32Array(6*c.length);c.forEach(((e,t)=>{let[n,r,o]=e;const i=6*t;u[i+0]=n.x,u[i+1]=n.y,u[i+2]=r.x,u[i+3]=r.y,u[i+4]=o.x,u[i+5]=o.y})),((e,t)=>{const{program:n,locations:r}=W;P.useProgram(n),P.enableVertexAttribArray(r.aPosition),P.uniform4fv(r.uColor,t),P.uniformMatrix4fv(r.uMatrix,!1,d),P.uniform1fv(r.uMaskBounds,y),P.uniform1f(r.uMaskOpacity,g),P.uniform4f(r.uCanvasColor,v,x,w,S),P.bindBuffer(P.ARRAY_BUFFER,V),P.bufferData(P.ARRAY_BUFFER,e,P.STATIC_DRAW),P.vertexAttribPointer(r.aPosition,2,P.FLOAT,!1,0,0),P.drawArrays(P.TRIANGLES,0,e.length/2),P.disableVertexAttribArray(r.aPosition)})(u,ys(o,i))},drawRect:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,s=arguments.length>7?arguments[7]:void 0,c=arguments.length>8?arguments[8]:void 0,u=arguments.length>9&&void 0!==arguments[9]&&arguments[9],p=arguments.length>10?arguments[10]:void 0,h=arguments.length>11?arguments[11]:void 0,f=arguments.length>12?arguments[12]:void 0,m=arguments.length>13?arguments[13]:void 0,$=arguments.length>14?arguments[14]:void 0,k=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1/l,C=arguments.length>16?arguments[16]:void 0,T=arguments.length>17?arguments[17]:void 0;const M=kt(ut(e),l),R=o.map((t=>((e,t)=>Math.floor(sl(e,0,Math.min(.5*(t.width-1),.5*(t.height-1)))))(t||0,e))).map((e=>e*l));if(i||a){const e=ut(M);e.x-=.5,e.y-=.5,e.width+=1,e.height+=1;const o=Rs(e,t,n,r),h=Es(o);let f;C&&(f=ys(C),0===f[3]&&(f[3]=.001));const I=s&&u?[e.width/s.width,e.height/s.height]:[1,1];!function(e,t,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:E,a=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Ns,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Fs,p=arguments.length>10&&void 0!==arguments[10]?arguments[10]:b,h=arguments.length>11&&void 0!==arguments[11]?arguments[11]:1,f=arguments.length>12?arguments[12]:void 0;const{program:m,locations:$}=U;P.useProgram(m),P.enableVertexAttribArray($.aPosition),P.enableVertexAttribArray($.aTexCoord),P.enableVertexAttribArray($.aRectCoord),P.uniform4fv($.uColor,o),P.uniform2fv($.uSize,[t,n]),P.uniform2fv($.uPosition,[e[2],e[3]]),P.uniform2fv($.uRepeat,a),P.uniform1i($.uInverted,f?1:0),P.uniform1fv($.uCornerRadius,r),P.uniform4f($.uCanvasColor,v,x,w,S),P.uniform1fv($.uMaskFeather,p.map(((e,t)=>t%2==0?e:e*l))),P.uniform1fv($.uMaskBounds,y),P.uniform1f($.uMaskOpacity,g),P.uniform1f($.uEdgeFeather,Math.max(0,h)),P.uniformMatrix4fv($.uMatrix,!1,d),P.uniform1i($.uTexture,4),P.uniform4fv($.uTextureColor,c),P.uniform1f($.uTextureOpacity,s),P.activeTexture(P.TEXTURE0+4),P.bindTexture(P.TEXTURE_2D,i),P.bindBuffer(P.ARRAY_BUFFER,G),P.bufferData(P.ARRAY_BUFFER,u,P.STATIC_DRAW),P.vertexAttribPointer($.aTexCoord,2,P.FLOAT,!1,0,0),P.bindBuffer(P.ARRAY_BUFFER,Z),P.bufferData(P.ARRAY_BUFFER,Fs,P.STATIC_DRAW),P.vertexAttribPointer($.aRectCoord,2,P.FLOAT,!1,0,0),P.bindBuffer(P.ARRAY_BUFFER,H),P.bufferData(P.ARRAY_BUFFER,e,P.STATIC_DRAW),P.vertexAttribPointer($.aPosition,2,P.FLOAT,!1,0,0),P.drawArrays(P.TRIANGLE_STRIP,0,e.length/2),P.disableVertexAttribArray($.aPosition),P.disableVertexAttribArray($.aTexCoord),P.disableVertexAttribArray($.aRectCoord)}(h,e.width,e.height,R,ys(i,m),a,I,m,f,p?new Float32Array(p):Ws(e.width,e.height,s,c,l),$,k*l,T)}h&&(h=Math.min(h,M.width,M.height),j(((e,t,n,r,o,i,a,l)=>{const s=[];if(i.every((e=>0===e)))s.push(Ce(e,t),Ce(e+n,t),Ce(e+n,t+r),Ce(e,t+r));else{const[o,a,l,c]=i,u=e,d=e+n,p=t,h=t+r;s.push(Ce(u+o,p)),Is(s,d-a,p+a,a,-1),s.push(Ce(d,p+a)),Is(s,d-c,h-c,c,0),s.push(Ce(d-c,h)),Is(s,u+l,h-l,l,1),s.push(Ce(u,h-l)),Is(s,u+o,p+o,o,2)}return(a||l)&&Ue(s,a,l,e+.5*n,t+.5*r),o&&He(s,o,e+.5*n,t+.5*r),s})(M.x,M.y,M.width,M.height,t,R,n,r),h*l,ys(f,m),!0))},drawEllipse:(e,t,n,r,o,i,a,s,c,u,p,h,f,m,$)=>{const b=kt($t(e.x-t,e.y-n,2*t,2*n),l);if(a||s){const e=ut(b);e.x-=.5,e.y-=.5,e.width+=1,e.height+=1;const t=Rs(e,r,o,i);!function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:E,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Fs,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,l=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const{program:s,locations:c}=X;P.useProgram(s),P.enableVertexAttribArray(c.aPosition),P.enableVertexAttribArray(c.aTexCoord),P.uniformMatrix4fv(c.uMatrix,!1,d),P.uniform2fv(c.uRadius,[.5*t,.5*n]),P.uniform1i(c.uInverted,l?1:0),P.uniform4fv(c.uColor,r),P.uniform4f(c.uCanvasColor,v,x,w,S),P.uniform2fv(c.uRepeat,[1,1]),P.uniform1fv(c.uMaskBounds,y),P.uniform1f(c.uMaskOpacity,g),P.uniform1i(c.uTexture,4),P.uniform1f(c.uTextureOpacity,a),P.activeTexture(P.TEXTURE0+4),P.bindTexture(P.TEXTURE_2D,o),P.bindBuffer(P.ARRAY_BUFFER,q),P.bufferData(P.ARRAY_BUFFER,i,P.STATIC_DRAW),P.vertexAttribPointer(c.aTexCoord,2,P.FLOAT,!1,0,0),P.bindBuffer(P.ARRAY_BUFFER,Y),P.bufferData(P.ARRAY_BUFFER,e,P.STATIC_DRAW),P.vertexAttribPointer(c.aPosition,2,P.FLOAT,!1,0,0),P.drawArrays(P.TRIANGLE_STRIP,0,e.length/2),P.disableVertexAttribArray(c.aPosition),P.disableVertexAttribArray(c.aTexCoord)}(Es(t),e.width,e.height,ys(a,m),s,p?new Float32Array(p):Ws(e.width,e.height,c,u,l),m,$)}h&&j(((e,t,n,r,o,i,a)=>{const l=.5*Math.abs(n),s=.5*Math.abs(r),c=Math.abs(n)+Math.abs(r),u=Math.max(20,Math.round(c/6));return Gt(Ce(e+l,t+s),l,s,o,i,a,u)})(b.x,b.y,b.width,b.height,r,o,i),h*l,ys(f,m),!0)},drawImage:function(e,t,n,o,i,s,c,u,d,p){let h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:Bs,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:1,m=arguments.length>12?arguments[12]:void 0,b=arguments.length>13&&void 0!==arguments[13]?arguments[13]:1,v=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,x=arguments.length>15&&void 0!==arguments[15]?arguments[15]:$,w=arguments.length>16&&void 0!==arguments[16]?arguments[16]:js,S=arguments.length>17&&void 0!==arguments[17]?arguments[17]:Ns,C=arguments.length>18&&void 0!==arguments[18]&&arguments[18],E=arguments.length>19&&void 0!==arguments[19]&&arguments[19],R=!(arguments.length>20&&void 0!==arguments[20])||arguments[20];const I=t.width*l,A=t.height*l,L=-.5*I,z=.5*A,B=.5*I,N=-.5*A,j=new Float32Array([L,N,0,L,z,0,B,N,0,B,z,0]);P.bindBuffer(P.ARRAY_BUFFER,O),P.bufferData(P.ARRAY_BUFFER,j,P.STATIC_DRAW);const W=t.height/2/M*(r.height/t.height)*-1;i*=l,s*=l,n*=l,o*=l;const{program:V,locations:U}=F,H=$s();((e,t,n,r,o)=>{const i=1/Math.tan(t/2),a=1/(1-o);e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(o+1)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*o*1*a,e[15]=0})(H,T,a,0,2*-W),vs(H,i,-s,W),vs(H,n,-o,0),ks(H,-d),xs(H,p),vs(H,-n,o,0),Ss(H,u),ws(H,c),P.useProgram(V),P.enableVertexAttribArray(U.aPosition),P.enableVertexAttribArray(U.aTexCoord),P.uniform1i(U.uTexture,3),P.uniform2f(U.uTextureSize,t.width,t.height),P.activeTexture(P.TEXTURE0+3),P.bindTexture(P.TEXTURE_2D,e);const G=E?1:0,Z=k.get(G);P.uniform1i(U.uTextureBlend,G),P.activeTexture(P.TEXTURE0+G),P.bindTexture(P.TEXTURE_2D,Z);const X=C?2:0,Y=k.get(X);P.uniform1i(U.uTextureOverlay,X),P.activeTexture(P.TEXTURE0+X),P.bindTexture(P.TEXTURE_2D,Y),P.bindBuffer(P.ARRAY_BUFFER,O),P.vertexAttribPointer(U.aPosition,3,P.FLOAT,!1,0,0);const q=Ds&&(e=>K.get(e).isRotatedVideo)(e);let Q;P.bindBuffer(P.ARRAY_BUFFER,q?_:D),P.vertexAttribPointer(U.aTexCoord,2,P.FLOAT,!1,0,0),P.uniformMatrix4fv(U.uMatrix,!1,H),P.uniform4fv(U.uOverlayColor,S),!m||hl(m,_s)?(m=_s,Q=-1):(Q=m.reduce(((e,t)=>e+t),0),Q=Q<=0?1:Q),P.uniform1fv(U.uClarityKernel,m),P.uniform1f(U.uClarityKernelWeight,Q),P.uniform1f(U.uColorGamma,1/b),P.uniform1f(U.uColorVignette,v),P.uniform1i(U.uAntialias,R?1:0),P.uniform4f(U.uColorOffset,h[4],h[9],h[14],h[19]),P.uniformMatrix4fv(U.uColorMatrix,!1,[h[0],h[1],h[2],h[3],h[5],h[6],h[7],h[8],h[10],h[11],h[12],h[13],h[15],h[16],h[17],h[18]]),P.uniform1f(U.uOpacity,f),P.uniform1f(U.uMaskOpacity,g),P.uniform1fv(U.uMaskBounds,y),P.uniform1fv(U.uMaskCornerRadius,w.map((e=>e*l))),P.uniform1fv(U.uMaskFeather,x.map(((e,t)=>t%2==0?e:e*l))),P.drawArrays(P.TRIANGLE_STRIP,0,4),P.disableVertexAttribArray(U.aPosition),P.disableVertexAttribArray(U.aTexCoord)},textureFilterNearest:P.NEAREST,textureFilterLinear:P.LINEAR,textureClamp:P.CLAMP_TO_EDGE,textureRepeat:P.REPEAT,textureCreate:()=>P.createTexture(),textureUpdate:(e,t,n)=>(K.set(e,{src:t,options:n,isRotatedVideo:"VIDEO"===t.nodeName&&(t.dataset&&90==t.dataset.rotation||270==t.dataset.rotation)}),((e,t,n,r)=>(e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),((e,t,n)=>{e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,gs(t)?e.LINEAR_MIPMAP_LINEAR:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n.filterParam),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,n.wrapParam),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,n.wrapParam),gs(t)&&e.generateMipmap(e.TEXTURE_2D)})(e,n,r),e.bindTexture(e.TEXTURE_2D,null),t))(P,e,t,n)),textureGetSize:e=>{const{src:t,options:n}=K.get(e),r=Xe(t);return n.scalar?ot(r,(e=>e/n.scalar)):r},textureDelete:ee,enablePreviewStencil:()=>{P.stencilOp(P.KEEP,P.KEEP,P.REPLACE),P.stencilFunc(P.ALWAYS,1,255),P.stencilMask(255)},applyPreviewStencil:()=>{P.stencilFunc(P.EQUAL,1,255),P.stencilMask(0)},disablePreviewStencil:C,setCanvasColor(e){v=e[0],x=e[1],w=e[2],S=n?e[3]:1,P.clear(P.COLOR_BUFFER_BIT)},resetCanvasMatrix:()=>{bs(c,0,r.width,r.height,0,-1,1)},updateCanvasMatrix(e,t,n,o,i){const a=e.width,s=e.height,u=r.width*(.5/l),d=r.height*(.5/l),p={x:u+(n.x+t.x),y:d+(n.y+t.y)},h={x:p.x-t.x,y:p.y-t.y},f=.5*a,m=.5*s;Ee(h,i.z,p),((e,t,n)=>{e.x=we(e.x,t,n.x),e.y=we(e.y,t,n.y)})(h,o,p),vs(c,(h.x-f)*l,(h.y-m)*l,0),vs(c,f*l,m*l,0),ks(c,i.z);const g=i.x>Math.PI/2;ws(c,g?Math.PI:0);const y=i.y>Math.PI/2;Ss(c,y?Math.PI:0),xs(c,o),vs(c,-f*l,-m*l,0)},drawToCanvas(){P.bindFramebuffer(P.FRAMEBUFFER,null),d=c,P.viewport(0,0,P.drawingBufferWidth,P.drawingBufferHeight),P.colorMask(!0,!0,!0,!0),P.clearColor(v,x,w,S),P.clear(P.COLOR_BUFFER_BIT),b=[1,0,1,0,1,r.width,1,r.width]},drawToImageBlendBuffer(e,t){J(1,z,e,t)},drawToImageOverlayBuffer(e,t){J(2,I,e,t)},enableMask(e,t){const n=e.x*l,o=e.y*l,i=e.width*l,a=e.height*l;m=n,h=m+i,p=r.height-o,f=r.height-(o+a),g=1-t,y=[p,h,f,m]},disableMask(){m=0,h=r.width,p=r.height,f=0,g=1,y=[p,h,f,m]},resize:(t,n,i)=>{l=i,s=1===l?.75:1,o.width=t,o.height=n,r.width=t*l,r.height=n*l,a=ie(r.width,r.height),e.width=r.width,e.height=r.height,bs(c,0,r.width,r.height,0,-1,1),$=[1,0,1,0,1,o.width,1,o.width]},release(){Array.from(K.keys()).forEach((e=>ee(e,{forceRelease:!0}))),K.clear(),k.forEach((e=>{P.deleteTexture(e)})),k.clear(),F.destroy(),B.destroy(),W.destroy(),U.destroy(),X.destroy(),e.width=1,e.height=1,e=void 0}}},Us=(e,t)=>{const{imageData:n,amount:r=1}=e,o=Math.round(2*Math.max(1,r)),i=Math.round(.5*o),a=n.width,l=n.height,s=new Uint8ClampedArray(a*l*4),c=n.data;let u,d,p,h,f,m=0,g=0,y=0;const $=a*l*4-4;for(p=0;p<l;p++)for(u=crypto.getRandomValues(new Uint8ClampedArray(l)),d=0;d<a;d++)h=u[p]/255,g=0,y=0,h<.5&&(g=4*(-i+Math.round(Math.random()*o))),h>.5&&(y=(-i+Math.round(Math.random()*o))*(4*a)),f=Math.min(Math.max(0,m+g+y),$),s[m]=c[f],s[m+1]=c[f+1],s[m+2]=c[f+2],s[m+3]=c[f+3],m+=4;t(null,{data:s,width:n.width,height:n.height})};const Hs=[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625];function Gs(e){return Math.sqrt(1- --e*e)}function Zs(e){return"[object Date]"===Object.prototype.toString.call(e)}function Xs(e,t){if(e===t||e!=e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const n=t.map(((t,n)=>Xs(e[n],t)));return e=>n.map((t=>t(e)))}if("object"===n){if(!e||!t)throw new Error("Object cannot be null");if(Zs(e)&&Zs(t)){e=e.getTime();const n=(t=t.getTime())-e;return t=>new Date(e+t*n)}const n=Object.keys(t),r={};return n.forEach((n=>{r[n]=Xs(e[n],t[n])})),e=>{const t={};return n.forEach((n=>{t[n]=r[n](e)})),t}}if("number"===n){const n=t-e;return t=>e+t*n}throw new Error("Cannot interpolate ".concat(n," values"))}function Ys(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Va(e);let r,o=e;function i(i,a){if(null==e)return n.set(e=i),Promise.resolve();o=i;let l=r,s=!1,{delay:c=0,duration:u=400,easing:d=ei,interpolate:p=Xs}=ti(ti({},t),a);if(0===u)return l&&(l.abort(),l=null),n.set(e=o),Promise.resolve();const h=vi()+c;let f;return r=ki((t=>{if(t<h)return!0;s||(f=p(e,i),"function"==typeof u&&(u=u(e,i)),s=!0),l&&(l.abort(),l=null);const r=t-h;return r>u?(n.set(e=i),!1):(n.set(e=f(d(r/u))),!0)})),r.promise}return{set:i,update:(t,n)=>i(t(o,e),n),subscribe:n.subscribe}}function qs(e,t,n,r){if("number"==typeof n){const o=r-n,i=(n-t)/(e.dt||1/60),a=(i+(e.opts.stiffness*o-e.opts.damping*i)*e.inv_mass)*e.dt;return Math.abs(a)<e.opts.precision&&Math.abs(o)<e.opts.precision?r:(e.settled=!1,n+a)}if(Hn(n))return n.map(((o,i)=>qs(e,t[i],n[i],r[i])));if("object"==typeof n){const o={};for(const i in n)o[i]=qs(e,t[i],n[i],r[i]);return o}throw new Error("Cannot spring ".concat(typeof n," values"))}function Ks(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Va(e),{stiffness:r=.15,damping:o=.8,precision:i=.01}=t;let a,l,s,c=e,u=e,d=1,p=0,h=!1;function f(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u=t;const o=s={};if(null==e||r.hard||m.stiffness>=1&&m.damping>=1)return h=!0,a=null,c=t,n.set(e=u),Promise.resolve();if(r.soft){const e=!0===r.soft?.5:+r.soft;p=1/(60*e),d=0}if(!l){a=null,h=!1;const t={inv_mass:void 0,opts:m,settled:!0,dt:void 0};l=ki((r=>{if(null===a&&(a=r),h)return h=!1,l=null,!1;d=Math.min(d+p,1),t.inv_mass=d,t.opts=m,t.settled=!0,t.dt=60*(r-a)/1e3;const o=qs(t,c,e,u);return a=r,c=e,n.set(e=o),t.settled&&(l=null),!t.settled}))}return new Promise((e=>{l.promise.then((()=>{o===s&&e()}))}))}const m={set:f,update:(t,n)=>f(t(u,e),n),subscribe:n.subscribe,stiffness:r,damping:o,precision:i};return m}var Qs=Wa(!1,(e=>{const t=window.matchMedia("(prefers-reduced-motion:reduce)"),n=()=>e(t.matches);return n(),t.addListener(n),()=>t.removeListener(n)})),Js=()=>"ResizeObserver"in window;const ec=dt(),tc=(e,t,n,r,o)=>{e.rect||(e.rect=dt());const i=e.rect;Mt(ec,t,n,r,o),Ct(i,ec)||(Pt(i,ec),e.dispatchEvent(new CustomEvent("measure",{detail:i})))},nc=Math.round,rc=e=>{const t=e.getBoundingClientRect();sc&&tc(e,nc(t.x),nc(t.y),nc(t.width),nc(t.height))},oc=e=>{sc&&tc(e,e.offsetLeft,e.offsetTop,e.offsetWidth,e.offsetHeight)},ic=[];let ac,lc,sc;function cc(){ic.length?(ic.forEach((e=>e.measure(e))),sc=requestAnimationFrame(cc)):sc=void 0}let uc=new Map([]),dc=0,pc=0;var hc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{observePosition:n=!1,observeViewRect:r=!1,once:o=!1,disabled:i=!1,isMeasureRoot:a=!1}=t;if(Js()&&a&&(lc||(lc=new ResizeObserver((e=>{e.forEach((e=>{uc.set(e.target,e.contentRect)}));const t=Array.from(uc.values()).some((e=>{let{width:t,height:n}=e;return t>0&&n>0}));t?t&&!1===sc&&cc():(sc&&cancelAnimationFrame(sc),sc=!1)}))),lc.observe(e),dc++),!i)return!Js()||n||r?(e.measure=r?rc:oc,ic.push(e),void 0===sc&&(sc=requestAnimationFrame(cc)),e.measure(e),{destroy(){a&&lc&&(uc.delete(e),lc.unobserve(e),dc--,0===dc&&(lc.disconnect(),lc=void 0));const t=ic.indexOf(e);ic.splice(t,1),delete e.measure}}):(ac||(ac=new ResizeObserver((e=>{e.forEach((e=>{sc&&oc(e.target)}))}))),ac.observe(e),oc(e),o?ac.unobserve(e):pc++,{destroy(){a&&lc&&(uc.delete(e),lc.unobserve(e),dc--,0===dc&&(lc.disconnect(),lc=void 0)),o||(ac.unobserve(e),pc--,0===pc&&(ac.disconnect(),ac=void 0))}})},fc=e=>{let t=!1;const n={pointerdown:()=>{t=!1},keydown:()=>{t=!0},keyup:()=>{t=!1},focus:e=>{t&&(e.target.dataset.focusVisible="")},blur:e=>{delete e.target.dataset.focusVisible}};return Object.keys(n).forEach((t=>e.addEventListener(t,n[t],!0))),{destroy(){Object.keys(n).forEach((t=>e.removeEventListener(t,n[t],!0)))}}};const mc=async e=>new Promise((t=>{if("file"===e.kind)return t(e.getAsFile());e.getAsString(t)}));var gc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e=>{e.preventDefault()},r=async n=>{n.preventDefault(),n.stopPropagation();try{const r=await(e=>new Promise(((t,n)=>{const{items:r}=e.dataTransfer;if(!r)return t([]);Promise.all(Array.from(r).map(mc)).then((e=>{t(e.filter((e=>Kn(e)&&dn(e)||/^http/.test(e))))})).catch(n)})))(n);e.dispatchEvent(new CustomEvent("dropfiles",{detail:{event:n,resources:r},...t}))}catch(e){}};return e.addEventListener("drop",r),e.addEventListener("dragover",n),{destroy(){e.removeEventListener("drop",r),e.removeEventListener("dragover",n)}}};let yc=null;var $c=()=>{if(null===yc)if(T()){const e=R("canvas");yc=!Cs(e,{failIfMajorPerformanceCaveat:!0}),A(e)}else yc=!1;return yc},bc=e=>e instanceof WebGLTexture,vc=e=>{let[t,n,r,o]=e;return[o.x,o.y,t.x,t.y,r.x,r.y,n.x,n.y]};function xc(e){let t,n,r,o;return{c(){t=Ri("div"),n=Ri("canvas"),_i(t,"class","PinturaCanvas")},m(i,a){Pi(i,t,a),Ci(t,n),e[36](n),r||(o=[Fi(n,"measure",e[37]),$i(hc.call(null,n))],r=!0)},p:Jo,i:Jo,o:Jo,d(n){n&&Ei(t),e[36](null),r=!1,oi(o)}}}function wc(e,t,n){let r,o,i,a,l,s,c;const u=[0,0,0,0],d=ke(),p=T()&&(e=>{const t=64,n=R("canvas",{"data-retain":!0,width:128,height:128}),r=n.getContext("2d");return r.fillStyle="#f0f",r.fillRect(0,0,t,t),r.fillRect(t,t,t,t),n})(),h=ta();let f,{isAnimated:m}=t,{isTransparent:g}=t,{maskRect:y}=t,{maskOpacity:$=1}=t,{maskFrameOpacity:b=.95}=t,{maskMarkupOpacity:v=1}=t,{clipAnnotationsToImage:w=!0}=t,{pixelRatio:S=1}=t,{textPixelRatio:k=S}=t,{backgroundColor:C}=t,{willRender:M=ae}=t,{didRender:P=ae}=t,{willRequest:E}=t,{loadImageData:I=ae}=t,{enableGrid:z=!1}=t,{gridColors:F}=t,{gridSize:O}=t,{gridOpacity:D=0}=t,{images:_=[]}=t,{interfaceImages:B=[]}=t,{selectionColor:N}=t,j=null,W=null,U=null;const H=(e,t)=>e.set(t,{hard:!m}),G={precision:1e-4*.01};let Z=0;const X=Ys(void 0,{duration:0});ci(e,X,(e=>n(35,c=e)));const Y=Ks(1,G);ci(e,Y,(e=>n(34,l=e)));const q=Ks(1,G);ci(e,q,(e=>n(50,i=e)));const K=Va();ci(e,K,(e=>n(52,s=e)));const Q=Va();ci(e,Q,(e=>n(51,a=e)));const J={},ee=(e,t)=>{let n=J[e.id];const r=Math.min(1,2048/t.width);let o=n?n.element:R("canvas",{width:t.width*r,height:t.height*r,"data-retain":!0});if(!n||((e,t)=>{if(e.total!==t.length)return!0;const n=e.last,r=t[t.length-1];return n.drawMode!==r.drawMode||!(!Fr(n)||Fr(r)&&Ct(n,r))||!(!Or(n)||Or(r)&&n.x===r.x&&n.y===r.y&&n.rx===r.rx&&n.ry===r.ry)||!(!_r(n)||_r(r)&&r.points.length===n.points.length)})(n,e.actions)){o=o.cloneNode(),((e,t,n)=>{const{selectionColor:r=[1,1,1],scalar:o=1}=n||{};let i=!1;for(const a of t){const t="subtract"===a.drawMode;if(t&&!i)continue;e.globalCompositeOperation=t?"destination-out":"source-over",e.save(),e.beginPath();const n=Ro(a);In(e,o,o),Rn(e,a.rotation,n),Go(e,a.flipX,a.flipY,n),a.width?No(e,{...a,backgroundColor:r}):a.points?Ho(e,Object.assign({},a,a.pathClose?{backgroundColor:r,strokeColor:[0,0,0,0]}:{strokeColor:r,strokeJoin:"round",strokeCap:"round"})):a.rx&&jo(e,{...a,backgroundColor:r,strokeColor:[0,0,0,0],strokeJoin:"round",strokeCap:"round"}),e.restore(),i=!0}})(o.getContext("2d"),e.actions,{selectionColor:[1,0,1],scalar:r});const t=e.actions.length;J[e.id]={total:t,last:{...e.actions[t-1]},element:o}}return{x:0,y:0,...t,fillColor:e.color||[1,1,1],backgroundImage:o}};let te;const ne=()=>{cancelAnimationFrame(te),te=requestAnimationFrame((()=>{xe=!0,Ae=0,o()}))},re=new Map([]),oe=new Map([]),le=(e,t)=>({filterParam:"pixelated"===e?j.textureFilterNearest:j.textureFilterLinear,wrapParam:"repeat"===t?j.textureRepeat:j.textureClamp}),se=(e,t,n)=>{if(!re.has(e)){re.set(e,e);const o=le(t,n);if(!V(r=e)&&(xn(r)||L(r)||Io(r)||hn(r))){const t=j.textureCreate();j.textureUpdate(t,e,o),re.set(e,t)}else I(e).then((t=>{if(!j||!t)return;const n=j.textureCreate();j.textureUpdate(n,t,o),re.set(e,n),ne()})).catch((t=>{re.set(e,t)}))}var r,o;if(hn(e)&&((o=e).currentTime>0&&!o.paused&&!o.ended&&o.readyState>2||"true"===e.dataset.redraw)){const r=re.get(e),o=le(t,n);return j.textureUpdate(r,e,o),e.dataset.redraw=!1,r}return re.get(e)},ce=new Map,ue=(e,t)=>{let n;if(e.backgroundImage)n=se(e.backgroundImage,e.backgroundImageRendering);else if(V(e.text)){if(e.width&&e.width<1||e.height&&e.height<1)return;n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.id||e.id;if(!e.text.length)return void oe.delete(n);let{text:r,textAlign:o,fontFamily:i,fontSize:a=16,fontWeight:l,fontVariant:s,fontStyle:c,letterSpacing:u,lineHeight:d=a,width:p,height:h}=e,{outline:f=0,blur:m=0,paddingTop:g=0,paddingRight:y=lr,paddingBottom:$=0,paddingLeft:b=lr}=t;p=Wn(p)?Math.floor(p):p,h=Wn(h)?Math.floor(h):h;const{textSize:v,signature:x}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,{width:n=0,height:r="auto",fontSize:o,fontFamily:i,lineHeight:a,fontWeight:l,fontStyle:s,fontVariant:c,letterSpacing:u}=t;const d=er({text:e,fontFamily:i,fontWeight:l,fontStyle:s,fontVariant:c,fontSize:o,lineHeight:a,letterSpacing:u,width:n,height:r});let p=ur.get(d);if(p)return p;let h=1;o>1e3&&ar()&&(h=o/1e3,o=1e3,a*=h);const f=an(R("pre",{contenteditable:"true",spellcheck:"false",style:"".concat(pr).concat(sr({fontFamily:i,fontWeight:l,fontStyle:s,fontVariant:c,fontSize:o,letterSpacing:u,lineHeight:a}),";").concat(cr(e,t),'"'),innerHTML:e})),m=f.getBoundingClientRect();return p={signature:dr(f).flat().map((e=>e.text)).join("_;_"),textSize:ot(Xe(m),(e=>Math.ceil(e*h)))},ur.set(d,p),f.remove(),p}(r,{...e,width:p,height:h}),w=er({text:r,textAlign:o,fontFamily:i,fontSize:a,fontWeight:l,fontVariant:s,fontStyle:c,lineHeight:d,letterSpacing:u,outline:f,blur:m,signature:x});if(!re.has(w)){re.set(w,r);const e=Math.ceil(v.width),t=Math.ceil(v.height/d)*d;if(0===e||0===t)return;const x=Ls(),S=Math.min(1,(x-(b+y)*k)/(e*k),(x-(g+$)*k)/(t*k));kr(r,{fontSize:a,fontFamily:i,fontWeight:l,fontVariant:s,fontStyle:c,letterSpacing:u,textAlign:o,lineHeight:d,width:p,height:h,imageWidth:e,imageHeight:t,paddingLeft:b,paddingTop:g,paddingRight:y,paddingBottom:$,pixelRatio:k*S,willRequest:E,outline:f,blur:m,color:[1,0,1]}).then((e=>{if(!j)return;const t=j.textureCreate();j.textureUpdate(t,e,{filterParam:j.textureFilterLinear,wrapParam:j.textureClamp,scalar:S}),re.set(w,t),oe.set(n,t),ne()})).catch(console.error)}const S=re.get(w);return bc(S)?S:oe.get(n)}(e,t)}else e.bitmap&&e.points&&(n=(e=>{const{id:t,points:n,strokeWidth:r,strokeCap:o,strokeJoin:i,strokeColor:a}=e;let l=re.get(t),s=ce.get(t);const c=er({points:n.map((e=>"".concat(e.x,",").concat(e.y))).join(","),strokeWidth:r,strokeCap:o,strokeJoin:i,strokeColor:a});if(s){const{hash:e}=s;if(re.has(t)){if(c===e)return re.get(t)}else s=void 0}if(!s){const n=R("canvas",{width:1,height:1});s={canvas:n,hash:void 0},ce.set(e.id,s),l=j.textureCreate(),j.textureUpdate(l,n,{filterParam:j.textureFilterLinear,wrapParam:j.textureClamp}),re.set(t,l)}const{canvas:u}=s,d=Math.ceil(e.strokeWidth),p=mt(n),h=Math.floor(p.x)-.5*d,f=Math.floor(p.y)-.5*d,m=Math.ceil(p.width+d),g=Math.ceil(p.height+d);u.width=Math.max(m,1),u.height=Math.max(g,1);const y=u.getContext("2d");return y.clearRect(0,0,u.width,u.height),m>=1&&g>=1&&(y.translate(-h,-f),Ho(y,e),y.resetTransform()),j.textureUpdate(l,u,{filterParam:j.textureFilterLinear,wrapParam:j.textureClamp}),ce.set(t,{canvas:u,hash:c}),re.get(t)})(e));return n},de=e=>{let{texture:t,size:n,origin:r,translation:o,rotation:i,scale:a,colorMatrix:l,opacity:s,convolutionMatrix:c,gamma:u,vignette:d,maskFeather:p,maskCornerRadius:h,overlayColor:f,enableOverlay:m,enableManipulation:g,enableAntialiasing:y}=e,$=0,b=0;if(1===S){const e=Math.abs(1-a)<Number.EPSILON;$=e&&W%2!=0?.5:0,b=e&&U%2!=0?.5:0}return j.drawImage(t,n,r.x,r.y,o.x+$,o.y+b,i.x,i.y,i.z,a,l,sl(s,0,1),c,u,d,p,h,f,m,g,y),t},pe=(e,t,n,r,o,i,a,l,s)=>{const c={...t},u={width:o.width/k*n,height:o.height/k*n},d=Ce(0,0),p={width:u.width,height:u.height};return c.x-=s*n,c.y-=i*n,e.width?(c.height=c.height?c.height+i*n/r:u.height,c.width+=(s+a)*n/r,"center"===e.textAlign?d.x=.5*(c.width-p.width/r):"right"===e.textAlign&&(d.x=c.width-p.width/r)):(c.width=u.width,c.height=u.height),{rect:c,backgroundPosition:d,backgroundSize:p}},he=function(){let e=arguments.length>1?arguments[1]:void 0;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>{let n=ue(t);const r="loading"===t.status||t.backgroundImage&&n===t.backgroundImage;r&&ne();const o="error"===t.status||t.backgroundImage&&n instanceof Error;let i=bc(n)?n:void 0;const a=t._scale||1,l=t._translate||d,s=t.strokeWidth&&t.strokeWidth*a,c=!!t.width,u=!c&&V(t.text)&&i,p=Hn(t.points),h=Or(t);if(p){const r=t.points.map((e=>Ce(e.x*a+l.x,e.y*a+l.y)));if(t.bitmap){n&&e.push(n);const o=mt(r),l=Math.ceil(t.strokeWidth*a);j.drawRect({x:Math.floor(o.x)-.5*l,y:Math.floor(o.y)-.5*l,width:Math.ceil(o.width+l),height:Math.ceil(o.height+l)},t.rotation,t.flipX,t.flipY,[0,0,0,0],void 0,i,void 0,void 0,void 0,void 0,void 0,void 0,t.opacity,void 0,void 0,!1,!1)}else j.drawPath(r,t.rotation,t.flipX,t.flipY,s,t.strokeColor,t.pathClose,t.backgroundColor,t.opacity)}else if(h){let c=t.x,u=t.y;c*=a,u*=a,c+=l.x,u+=l.y;const d=Ce(c,u);j.drawEllipse(d,t.rx*a,t.ry*a,t.rotation,t.flipX,t.flipY,t.backgroundColor,i,void 0,void 0,t.backgroundCorners&&vc(t.backgroundCorners),s,t.strokeColor,t.opacity,t.inverted),n&&e.push(n),(r||o)&&(t.backgroundColor||t.strokeColor&&t.strokeWidth||j.drawEllipse(d,t.rx*a,t.ry*a,t.rotation,t.flipX,t.flipY,o?[1,0,0,.25*t.opacity]:[0,0,0,.25*t.opacity]),o&&be(d),r&&$e(d))}else if(u||c){const c=i&&j.textureGetSize(i);let u,d,p,h=t.fillColor,f=t.backgroundColor,m=t.strokeColor,g=[t.cornerRadius,t.cornerRadius,t.cornerRadius,t.cornerRadius].map((e=>e*a));if(u=t.width?ft(t):{x:t.x,y:t.y,...c},a&&l&&(u.x*=a,u.y*=a,u.x+=l.x,u.y+=l.y,u.width*=a,u.height*=a),n&&e.push(n),c)if(t.backgroundImage&&(t.backgroundSize||t.backgroundPosition)){const e=ie(c.width,c.height);if("contain"===t.backgroundSize){const n=Lt(u,e,u);d=Ye(n),p=t.backgroundPosition?t.backgroundPosition:Ce(.5*(u.width-d.width),.5*(u.height-d.height))}else if("cover"===t.backgroundSize){const n=At(u,e,u);d=Ye(n),t.backgroundPosition?p=t.backgroundPosition:(p=Ce(n.x,n.y),p=Ce(.5*(u.width-d.width),.5*(u.height-d.height)))}else t.backgroundSize?(d=t.backgroundSize,p=t.backgroundPosition):t.backgroundPosition&&(d={...c},p=t.backgroundPosition)}else if(t.text){const n={...u};if(t.backgroundColor||t.strokeColor){f=void 0,m=void 0;const e={width:c.width/k*a,height:c.height/k*a},n=(t.width||e.width-2*lr)*a,r=(t.height||e.height)*a;j.drawRect({...u,width:n,height:r},t.rotation,t.flipX,t.flipY,g,t.backgroundColor,void 0,void 0,void 0,!1,void 0,s,t.strokeColor,t.opacity,void 0,void 0,void 0,t.inverted)}let r=1;t.fontSize>1e3&&ar()&&(r=t.fontSize/1e3),h=t.color||[0,0,0],t._prerender&&(h[3]=0);const o=pe(t,n,a,r,c,0,lr,0,lr);u=o.rect,p=o.backgroundPosition,d=o.backgroundSize;const{textShadowX:i,textShadowY:l,textShadowBlur:y}=t;if(i||l||y){const o=Math.ceil(.5*y),s=o,c=Math.max(lr,o),d=o,p=Math.max(lr,o),h=ue(t,{id:t.id+"shadow",blur:y,paddingTop:s,paddingRight:c,paddingBottom:d,paddingLeft:p});if(h&&!t._prerender){e.push(h);const o=j.textureGetSize(h),{rect:d,backgroundPosition:f,backgroundSize:m}=pe(t,n,a,r,o,s,c,0,p),g=bt(u),y=bt(d);y.x+=i,y.y+=l;const $=Ee(y,t.rotation,g),b={x:$.x-.5*d.width,y:$.y-.5*d.height,width:d.width,height:d.height};t.height&&(b.height-=l),j.drawRect(b,t.rotation,t.flipX,t.flipY,[0,0,0,0],void 0,h,m,f,!1,void 0,void 0,void 0,t.opacity,void 0,0,t.textShadowColor)}}if(t.textOutlineWidth){const o=Math.ceil(.5*t.textOutlineWidth),i=o,l=lr+o,s=o,c=lr+o,u=ue(t,{id:t.id+"outline",outline:t.textOutlineWidth,paddingTop:i,paddingRight:l,paddingBottom:s,paddingLeft:c});if(u&&!t._prerender){const o=j.textureGetSize(u);e.push(u);const{rect:s,backgroundPosition:d,backgroundSize:p}=pe(t,n,a,r,o,i,l,0,c);j.drawRect(s,t.rotation,t.flipX,t.flipY,[0,0,0,0],void 0,u,p,d,!1,void 0,void 0,void 0,t.opacity,void 0,0,t.textOutlineColor)}}}if(j.drawRect(u,t.rotation,t.flipX,t.flipY,g,f,i,d,p,!1,t.backgroundCorners&&vc(t.backgroundCorners),s,m,t.opacity,void 0,t.feather,h,t.inverted),r||o){t.backgroundColor&&0!==t.backgroundColor[3]||t.strokeColor&&t.strokeWidth||j.drawRect(u,t.rotation,t.flipX,t.flipY,g,o?[1,.2549,.2118,.25*t.opacity]:[0,0,0,.25*t.opacity]);const e=bt(u);o&&be(e),r&&$e(e)}}else n&&e.push(n)}))};let fe=0;const me=[{x:-5,y:-5},{x:5,y:5}],ge=[{x:5,y:-5},{x:-5,y:5}],ye=Gt({x:0,y:0},10,10,0,!1,!1,16);ye.length=9;const $e=e=>{fe=Date.now()/50,j.drawEllipse(e,15,15,0,!1,!1,[0,0,0,.5]);const t=He(ye.map((t=>({x:t.x+e.x,y:t.y+e.y}))),fe,e.x,e.y);j.drawPath(t,0,!1,!1,2,[1,1,1])},be=e=>{j.drawEllipse(e,13,13,0,!1,!1,[1,.2549,.2118,.75]);const t=me.map((t=>({x:t.x+e.x,y:t.y+e.y}))),n=ge.map((t=>({x:t.x+e.x,y:t.y+e.y})));j.drawPath(t,0,!1,!1,3,[1,1,1]),j.drawPath(n,0,!1,!1,3,[1,1,1])},ve=(e,t,n,r,o,i)=>j.drawRect(t,0,!1,!1,u,u,e,r,n,!0,void 0,0,void 0,i,void 0,void 0,o);let xe=!1,we=!0,Se=!1;const Te=[],Me=[],Pe=[],Re=()=>{Pe.length=0;const e=_[0],{manipulationShapes:t,manipulationShapesDirty:n,annotationShapes:r,annotationShapesDirty:o,interfaceShapes:d,decorationShapes:h,frameShapes:f,selectionShapes:m}=M({opacity:e.opacity,rotation:e.rotation,scale:e.scale,images:_,size:Qe(W,U),backgroundColor:[...c],selectionRect:s}),$=[...c],b=s,x=sl(l,0,1),S=a,C=Math.abs(e.rotation.x/Math.PI*2-1),T=Math.abs(e.rotation.y/Math.PI*2-1),E=C<.99||T<.99,R={...e.size},I=e.backgroundColor,A=e.backgroundImage,L=t.length>0,V=r.length>0,H=I[3]>0,G=!!w&&v>=1;if(x<1&&H){const e=$[0],t=$[1],n=$[2],r=1-x,o=I[0]*r,i=I[1]*r,a=I[2]*r,l=1-r;$[0]=o+e*l,$[1]=i+t*l,$[2]=a+n*l,$[3]=1}if(j.setCanvasColor(g?u:$),L&&(n||xe)?(j.disableMask(),j.drawToImageBlendBuffer(R),Te.length=0,he(t,Te)):L||(Te.length=0),Pe.push(...Te),we&&(j.drawToImageOverlayBuffer(R,k),we=!1),E?(V&&(o||xe)||!Se?(j.disableMask(),j.drawToImageOverlayBuffer(R,k),Me.length=0,he(r,Me)):V||(Me.length=0),Se=!0):Se=!1,j.drawToCanvas(),j.enableMask(b,x),z&&O>=1&&2===F.length&&D&&((e,t,n,r,o)=>{const i=Qe(t,t),a=se(p,"pixelated","repeat"),l=Ce(-e.x%t,-e.y%t),s=Ce(l.x+.5*i.width,l.y);ve(a,e,l,i,n,o),ve(a,e,s,i,r,o)})(b,O,F[0],F[1],D),H&&j.drawRect(b,0,!1,!1,u,I),A){j.enableMask(b,1);const e=Math.max(y.width/A.width,y.height/A.height),t=A.width*e,n=A.height*e,r={x:y.x+.5*y.width-.5*t,y:y.y+.5*y.height-.5*n,width:t,height:n};j.drawRect(r,0,!1,!1,u,u,se(A,"linear")),j.enableMask(b,x)}if(G&&j.enablePreviewStencil(),Pe.push(...[..._].reverse().map((e=>de({...e,texture:se(e.data),enableOverlay:E&&V,enableManipulation:L,enableAntialiasing:!0,mask:b,maskOpacity:x,overlayColor:S})))),j.enableMask(b,v),E||(G&&j.applyPreviewStencil(),j.resetCanvasMatrix(),j.updateCanvasMatrix(R,e.origin,e.translation,e.scale,e.rotation),Me.length=0,he(r,Me),G&&j.disablePreviewStencil()),Pe.push(...Me),j.resetCanvasMatrix(),j.enableMask(b,v),he(h,Pe),f.length){j.enableMask(b,1);const e=f.filter((e=>!e.expandsCanvas)),t=f.filter((e=>e.expandsCanvas));e.length&&he(e,Pe),t.length&&(j.enableMask({x:b.x+.5,y:b.y+.5,width:b.width-1,height:b.height-1},i),he(t,Pe))}if(N&&m.length&&!E){j.resetCanvasMatrix(),j.updateCanvasMatrix(R,e.origin,e.translation,e.scale,e.rotation);const t=[...N];t[3]=.5;const n=[{id:"selection",color:t,actions:[...m]}].map((e=>ee(e,R)));he(n,Pe),j.resetCanvasMatrix()}j.disableMask(),he(d,Pe),B.forEach((e=>{if(j.enableMask(e.mask,e.maskOpacity),e.backgroundColor){const t=A&&At({...e.mask},A.width/A.height),n=A&&se(A,"linear");j.drawRect(e.mask,0,!1,!1,e.maskCornerRadius,e.backgroundColor,n,t,t,void 0,void 0,void 0,void 0,e.opacity,e.maskFeather),n&&Pe.push(n)}const t=de({...e,texture:se(e.data),enableAntialiasing:!1,translation:{x:e.translation.x+e.offset.x-.5*W,y:e.translation.y+e.offset.y-.5*U}});Pe.push(t)})),j.disableMask(),(e=>{re.forEach(((t,n)=>{!e.find((e=>e===t))&&bc(t)&&(Array.from(oe.values()).includes(t)||(re.delete(n),j.textureDelete(t)))}))})(Pe),P(),xe=!1};let Ie,Ae=0;const Le=()=>{clearTimeout(Ie);const e=Date.now();e-Ae<48?Ie=setTimeout(Le,48):(Ae=e,Re())};return Ji((()=>o())),Qi((()=>n(30,j=Vs(f,{alpha:g})))),ea((()=>{j&&(ce.forEach((e=>{let{canvas:t}=e;return A(t)})),ce.clear(),j.release(),n(30,j=void 0),n(0,f=void 0))})),e.$$set=e=>{"isAnimated"in e&&n(9,m=e.isAnimated),"isTransparent"in e&&n(10,g=e.isTransparent),"maskRect"in e&&n(11,y=e.maskRect),"maskOpacity"in e&&n(12,$=e.maskOpacity),"maskFrameOpacity"in e&&n(13,b=e.maskFrameOpacity),"maskMarkupOpacity"in e&&n(14,v=e.maskMarkupOpacity),"clipAnnotationsToImage"in e&&n(15,w=e.clipAnnotationsToImage),"pixelRatio"in e&&n(16,S=e.pixelRatio),"textPixelRatio"in e&&n(17,k=e.textPixelRatio),"backgroundColor"in e&&n(18,C=e.backgroundColor),"willRender"in e&&n(19,M=e.willRender),"didRender"in e&&n(20,P=e.didRender),"willRequest"in e&&n(21,E=e.willRequest),"loadImageData"in e&&n(22,I=e.loadImageData),"enableGrid"in e&&n(23,z=e.enableGrid),"gridColors"in e&&n(24,F=e.gridColors),"gridSize"in e&&n(25,O=e.gridSize),"gridOpacity"in e&&n(26,D=e.gridOpacity),"images"in e&&n(27,_=e.images),"interfaceImages"in e&&n(28,B=e.interfaceImages),"selectionColor"in e&&n(29,N=e.selectionColor)},e.$$.update=()=>{if(1&e.$$.dirty[0]&&f){const e=getComputedStyle(f).getPropertyValue("--color-transition-duration");n(31,Z=(e=>{let t=parseFloat(e);return/^[0-9]+s$/.test(e)?1e3*t:t})(e))}262656&e.$$.dirty[0]|1&e.$$.dirty[1]&&C&&X.set(C,{duration:m?Z:0}),4096&e.$$.dirty[0]&&H(Y,Wn($)?$:1),8192&e.$$.dirty[0]&&H(q,Wn(b)?b:1),2048&e.$$.dirty[0]&&y&&K.set(y),24&e.$$.dirty[1]&&c&&Q.set([c[0],c[1],c[2],sl(l,0,1)]),1207959558&e.$$.dirty[0]&&n(33,r=!!(j&&W&&U&&_.length)),1073807366&e.$$.dirty[0]&&W&&U&&j&&(Ae=0,j.resize(W,U,S)),4&e.$$.dirty[1]&&n(32,o=r?$c()?Le:Re:x),6&e.$$.dirty[1]&&r&&o&&o()},[f,W,U,h,X,Y,q,K,Q,m,g,y,$,b,v,w,S,k,C,M,P,E,I,z,F,O,D,_,B,N,j,Z,o,r,l,c,function(e){aa[e?"unshift":"push"]((()=>{f=e,n(0,f)}))},e=>{n(1,W=e.detail.width),n(2,U=e.detail.height),h("measure",{width:W,height:U})}]}class Sc extends Na{constructor(e){super(),Ba(this,e,wc,xc,ai,{isAnimated:9,isTransparent:10,maskRect:11,maskOpacity:12,maskFrameOpacity:13,maskMarkupOpacity:14,clipAnnotationsToImage:15,pixelRatio:16,textPixelRatio:17,backgroundColor:18,willRender:19,didRender:20,willRequest:21,loadImageData:22,enableGrid:23,gridColors:24,gridSize:25,gridOpacity:26,images:27,interfaceImages:28,selectionColor:29},null,[-1,-1,-1])}}var kc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Boolean,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";return e.filter(t).join(n)};function Cc(e,t,n){const r=e.slice();return r[17]=t[n],r}const Tc=e=>({tab:4&e}),Mc=e=>({tab:e[17]});function Pc(e){let t,n,r,o=[],i=new Map,a=e[2];const l=e=>e[17].id;for(let s=0;s<a.length;s+=1){let t=Cc(e,a,s),n=l(t);i.set(n,o[s]=Ec(n,t))}return{c(){t=Ri("ul");for(let e=0;e<o.length;e+=1)o[e].c();_i(t,"class",n=kc(["PinturaTabList",e[0]])),_i(t,"role","tablist"),_i(t,"data-layout",e[1])},m(n,i){Pi(n,t,i);for(let e=0;e<o.length;e+=1)o[e].m(t,null);e[14](t),r=!0},p(e,s){1124&s&&(a=e[2],Sa(),o=Aa(o,s,l,1,e,a,i,t,Ia,Ec,null,Cc),ka()),(!r||1&s&&n!==(n=kc(["PinturaTabList",e[0]])))&&_i(t,"class",n),(!r||2&s)&&_i(t,"data-layout",e[1])},i(e){if(!r){for(let e=0;e<a.length;e+=1)Ca(o[e]);r=!0}},o(e){for(let t=0;t<o.length;t+=1)Ta(o[t]);r=!1},d(n){n&&Ei(t);for(let e=0;e<o.length;e+=1)o[e].d();e[14](null)}}}function Ec(e,t){let n,r,o,i,a,l,s,c,u,d;const p=t[11].default,h=ui(p,t,t[10],Mc);function f(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t[12](t[17],...n)}function m(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t[13](t[17],...n)}return{key:e,first:null,c(){n=Ri("li"),r=Ri("button"),h&&h.c(),i=Li(),_i(r,"type","button"),r.disabled=o=t[17].disabled,_i(n,"role","tab"),_i(n,"aria-controls",a=t[17].href.substr(1)),_i(n,"id",l=t[17].tabId),_i(n,"aria-selected",s=t[17].selected),this.first=n},m(e,t){Pi(e,n,t),Ci(n,r),h&&h.m(r,null),Ci(n,i),c=!0,u||(d=[Fi(r,"keydown",f),Fi(r,"click",m)],u=!0)},p(e,i){t=e,h&&h.p&&(!c||1028&i)&&hi(h,p,t,t[10],c?pi(p,t[10],i,Tc):fi(t[10]),Mc),(!c||4&i&&o!==(o=t[17].disabled))&&(r.disabled=o),(!c||4&i&&a!==(a=t[17].href.substr(1)))&&_i(n,"aria-controls",a),(!c||4&i&&l!==(l=t[17].tabId))&&_i(n,"id",l),(!c||4&i&&s!==(s=t[17].selected))&&_i(n,"aria-selected",s)},i(e){c||(Ca(h,e),c=!0)},o(e){Ta(h,e),c=!1},d(e){e&&Ei(n),h&&h.d(e),u=!1,oi(d)}}}function Rc(e){let t,n,r=e[4]&&Pc(e);return{c(){r&&r.c(),t=zi()},m(e,o){r&&r.m(e,o),Pi(e,t,o),n=!0},p(e,n){let[o]=n;e[4]?r?(r.p(e,o),16&o&&Ca(r,1)):(r=Pc(e),r.c(),Ca(r,1),r.m(t.parentNode,t)):r&&(Sa(),Ta(r,1,1,(()=>{r=null})),ka())},i(e){n||(Ca(r),n=!0)},o(e){Ta(r),n=!1},d(e){r&&r.d(e),e&&Ei(t)}}}function Ic(e,t,n){let r,o,i,{$$slots:a={},$$scope:l}=t,{class:s}=t,{name:c}=t,{selected:u}=t,{tabs:d=[]}=t,{layout:p}=t;const h=ta(),f=e=>{const t=i.querySelectorAll('[role="tab"] button')[e];t&&t.focus()},m=(e,t)=>{e.preventDefault(),e.stopPropagation(),h("select",t)},g=(e,t)=>{let{key:n}=e;if(!/arrow/i.test(n))return;const r=d.findIndex((e=>e.id===t));return/right|down/i.test(n)?f(r<d.length-1?r+1:0):/left|up/i.test(n)?f(r>0?r-1:d.length-1):void 0};return e.$$set=e=>{"class"in e&&n(0,s=e.class),"name"in e&&n(7,c=e.name),"selected"in e&&n(8,u=e.selected),"tabs"in e&&n(9,d=e.tabs),"layout"in e&&n(1,p=e.layout),"$$scope"in e&&n(10,l=e.$$scope)},e.$$.update=()=>{896&e.$$.dirty&&n(2,r=d.map((e=>{const t=e.id===u;return{...e,tabId:"tab-".concat(c,"-").concat(e.id),href:"#panel-".concat(c,"-").concat(e.id),selected:t}}))),4&e.$$.dirty&&n(4,o=r.length>1)},[s,p,r,i,o,m,g,c,u,d,l,a,(e,t)=>g(t,e.id),(e,t)=>m(t,e.id),function(e){aa[e?"unshift":"push"]((()=>{i=e,n(3,i)}))}]}class Ac extends Na{constructor(e){super(),Ba(this,e,Ic,Rc,ai,{class:0,name:7,selected:8,tabs:9,layout:1})}}const Lc=e=>({panel:16&e}),zc=e=>({panel:e[4][0].id,panelIsActive:!0});function Fc(e,t,n){const r=e.slice();return r[14]=t[n].id,r[15]=t[n].shouldDraw,r[16]=t[n].panelId,r[17]=t[n].tabindex,r[18]=t[n].labelledBy,r[19]=t[n].isActive,r[20]=t[n].hidden,r[3]=t[n].visible,r}const Oc=e=>({panel:16&e,panelIsActive:16&e}),Dc=e=>({panel:e[14],panelIsActive:e[19]});function _c(e){let t,n,r,o,i,a;const l=e[11].default,s=ui(l,e,e[10],zc);return{c(){t=Ri("div"),n=Ri("div"),s&&s.c(),_i(n,"class",r=kc([e[1]])),_i(t,"class",e[0]),_i(t,"style",e[2])},m(r,l){Pi(r,t,l),Ci(t,n),s&&s.m(n,null),o=!0,i||(a=[Fi(t,"measure",e[13]),$i(hc.call(null,t))],i=!0)},p(e,i){s&&s.p&&(!o||1040&i)&&hi(s,l,e,e[10],o?pi(l,e[10],i,Lc):fi(e[10]),zc),(!o||2&i&&r!==(r=kc([e[1]])))&&_i(n,"class",r),(!o||1&i)&&_i(t,"class",e[0]),(!o||4&i)&&_i(t,"style",e[2])},i(e){o||(Ca(s,e),o=!0)},o(e){Ta(s,e),o=!1},d(e){e&&Ei(t),s&&s.d(e),i=!1,oi(a)}}}function Bc(e){let t,n,r,o,i,a=[],l=new Map,s=e[4];const c=e=>e[14];for(let u=0;u<s.length;u+=1){let t=Fc(e,s,u),n=c(t);l.set(n,a[u]=jc(n,t))}return{c(){t=Ri("div");for(let e=0;e<a.length;e+=1)a[e].c();_i(t,"class",n=kc(["PinturaTabPanels",e[0]])),_i(t,"style",e[2])},m(n,l){Pi(n,t,l);for(let e=0;e<a.length;e+=1)a[e].m(t,null);r=!0,o||(i=[Fi(t,"measure",e[12]),$i(hc.call(null,t,{observePosition:!0}))],o=!0)},p(e,o){1042&o&&(s=e[4],Sa(),a=Aa(a,o,c,1,e,s,l,t,Ia,jc,null,Fc),ka()),(!r||1&o&&n!==(n=kc(["PinturaTabPanels",e[0]])))&&_i(t,"class",n),(!r||4&o)&&_i(t,"style",e[2])},i(e){if(!r){for(let e=0;e<s.length;e+=1)Ca(a[e]);r=!0}},o(e){for(let t=0;t<a.length;t+=1)Ta(a[t]);r=!1},d(e){e&&Ei(t);for(let t=0;t<a.length;t+=1)a[t].d();o=!1,oi(i)}}}function Nc(e){let t;const n=e[11].default,r=ui(n,e,e[10],Dc);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||1040&o)&&hi(r,n,e,e[10],t?pi(n,e[10],o,Oc):fi(e[10]),Dc)},i(e){t||(Ca(r,e),t=!0)},o(e){Ta(r,e),t=!1},d(e){r&&r.d(e)}}}function jc(e,t){let n,r,o,i,a,l,s,c,u,d=t[15]&&Nc(t);return{key:e,first:null,c(){n=Ri("div"),d&&d.c(),r=Li(),_i(n,"class",o=kc(["PinturaTabPanel",t[1]])),n.hidden=i=t[20],_i(n,"id",a=t[16]),_i(n,"tabindex",l=t[17]),_i(n,"aria-labelledby",s=t[18]),_i(n,"data-inert",c=!t[3]),this.first=n},m(e,t){Pi(e,n,t),d&&d.m(n,null),Ci(n,r),u=!0},p(e,p){(t=e)[15]?d?(d.p(t,p),16&p&&Ca(d,1)):(d=Nc(t),d.c(),Ca(d,1),d.m(n,r)):d&&(Sa(),Ta(d,1,1,(()=>{d=null})),ka()),(!u||2&p&&o!==(o=kc(["PinturaTabPanel",t[1]])))&&_i(n,"class",o),(!u||16&p&&i!==(i=t[20]))&&(n.hidden=i),(!u||16&p&&a!==(a=t[16]))&&_i(n,"id",a),(!u||16&p&&l!==(l=t[17]))&&_i(n,"tabindex",l),(!u||16&p&&s!==(s=t[18]))&&_i(n,"aria-labelledby",s),(!u||16&p&&c!==(c=!t[3]))&&_i(n,"data-inert",c)},i(e){u||(Ca(d),u=!0)},o(e){Ta(d),u=!1},d(e){e&&Ei(n),d&&d.d()}}}function Wc(e){let t,n,r,o;const i=[Bc,_c],a=[];function l(e,t){return e[5]?0:1}return t=l(e),n=a[t]=i[t](e),{c(){n.c(),r=zi()},m(e,n){a[t].m(e,n),Pi(e,r,n),o=!0},p(e,o){let[s]=o,c=t;t=l(e),t===c?a[t].p(e,s):(Sa(),Ta(a[c],1,1,(()=>{a[c]=null})),ka(),n=a[t],n?n.p(e,s):(n=a[t]=i[t](e),n.c()),Ca(n,1),n.m(r.parentNode,r))},i(e){o||(Ca(n),o=!0)},o(e){Ta(n),o=!1},d(e){a[t].d(e),e&&Ei(r)}}}function Vc(e,t,n){let r,o,{$$slots:i={},$$scope:a}=t,{class:l}=t,{name:s}=t,{selected:c}=t,{panelClass:u}=t,{panels:d=[]}=t,{visible:p}=t,{style:h}=t;const f={};return e.$$set=e=>{"class"in e&&n(0,l=e.class),"name"in e&&n(6,s=e.name),"selected"in e&&n(7,c=e.selected),"panelClass"in e&&n(1,u=e.panelClass),"panels"in e&&n(8,d=e.panels),"visible"in e&&n(3,p=e.visible),"style"in e&&n(2,h=e.style),"$$scope"in e&&n(10,a=e.$$scope)},e.$$.update=()=>{968&e.$$.dirty&&n(4,r=d.map((e=>{const t=e===c;t&&n(9,f[e]=!0,f);const r=p?-1!==p.indexOf(e):t;return{id:e,panelId:"panel-".concat(s,"-").concat(e),labelledBy:"tab-".concat(s,"-").concat(e),isActive:t,hidden:!t,visible:r,tabindex:t?0:-1,shouldDraw:t||f[e]}}))),16&e.$$.dirty&&n(5,o=r.length>1)},[l,u,h,p,r,o,s,c,d,f,a,i,function(t){oa.call(this,e,t)},function(t){oa.call(this,e,t)}]}class Uc extends Na{constructor(e){super(),Ba(this,e,Vc,Wc,ai,{class:0,name:6,selected:7,panelClass:1,panels:8,visible:3,style:2})}}var Hc=e=>{const t=Object.getOwnPropertyDescriptors(e.prototype);return Object.keys(t).filter((e=>!!t[e].get))};function Gc(e){let t,n,r,o;const i=[e[4]];function a(t){e[22](t)}var l=e[10];function s(e){let t={};for(let n=0;n<i.length;n+=1)t=ti(t,i[n]);return void 0!==e[2]&&(t.name=e[2]),{props:t}}return l&&(t=Hi(l,s(e)),aa.push((()=>Fa(t,"name",a))),e[23](t),t.$on("measure",e[11])),{c(){t&&Oa(t.$$.fragment),r=zi()},m(e,n){t&&Da(t,e,n),Pi(e,r,n),o=!0},p(e,o){const c=16&o[0]?La(i,[za(e[4])]):{};if(!n&&4&o[0]&&(n=!0,c.name=e[2],fa((()=>n=!1))),l!==(l=e[10])){if(t){Sa();const e=t;Ta(e.$$.fragment,1,0,(()=>{_a(e,1)})),ka()}l?(t=Hi(l,s(e)),aa.push((()=>Fa(t,"name",a))),e[23](t),t.$on("measure",e[11]),Oa(t.$$.fragment),Ca(t.$$.fragment,1),Da(t,r.parentNode,r)):t=null}else l&&t.$set(c)},i(e){o||(t&&Ca(t.$$.fragment,e),o=!0)},o(e){t&&Ta(t.$$.fragment,e),o=!1},d(n){e[23](null),n&&Ei(r),t&&_a(t,n)}}}function Zc(e){let t,n,r,o=e[5]&&Gc(e);return{c(){t=Ri("div"),o&&o.c(),_i(t,"data-util",e[2]),_i(t,"class",n=kc(["PinturaUtilPanel",e[1]])),_i(t,"style",e[6])},m(n,i){Pi(n,t,i),o&&o.m(t,null),e[24](t),r=!0},p(e,i){e[5]?o?(o.p(e,i),32&i[0]&&Ca(o,1)):(o=Gc(e),o.c(),Ca(o,1),o.m(t,null)):o&&(Sa(),Ta(o,1,1,(()=>{o=null})),ka()),(!r||4&i[0])&&_i(t,"data-util",e[2]),(!r||2&i[0]&&n!==(n=kc(["PinturaUtilPanel",e[1]])))&&_i(t,"class",n),(!r||64&i[0])&&_i(t,"style",e[6])},i(e){r||(Ca(o),r=!0)},o(e){Ta(o),r=!1},d(n){n&&Ei(t),o&&o.d(),e[24](null)}}}function Xc(e,t,n){let r,o,i,a,l,s;const c=ta();let{isActive:u=!0}=t,{stores:d}=t,{content:p}=t,{component:h}=t,{locale:f}=t,{class:m}=t;const g=ra("isAnimated");let y;ci(e,g,(e=>n(21,s=e)));const $=Ks(0),b=Ua($,(e=>sl(e,0,1)));ci(e,b,(e=>n(20,l=e)));let v=!u;const x=Va(u);ci(e,x,(e=>n(25,a=e)));const w={isActive:Ua(x,(async(e,t)=>{if(!e)return t(e);await pa(),t(e)})),isActiveFraction:Ua(b,(e=>e)),isVisible:Ua(b,(e=>e>0))},S=p.view,k=Hc(S),C=Object.keys(p.props||{}).reduce(((e,t)=>k.includes(t)?(e[t]=p.props[t],e):e),{}),T=Object.keys(w).reduce(((e,t)=>k.includes(t)?(e[t]=w[t],e):e),{});let M,P;const E=e=>{n(17,y={...e.detail}),I&&u&&c("measure",{...y})};na("measurable",hc);const R=Ki().$$.context;let I=!1;return Qi((()=>{if(n(19,I=!0),i)return;n(0,h=new S({target:P,props:{...o},context:R})),n(2,M=h.name);const e=h.$on("measure",E);return()=>{e(),h.$destroy()}})),e.$$set=e=>{"isActive"in e&&n(12,u=e.isActive),"stores"in e&&n(13,d=e.stores),"content"in e&&n(14,p=e.content),"component"in e&&n(0,h=e.component),"locale"in e&&n(15,f=e.locale),"class"in e&&n(1,m=e.class)},e.$$.update=()=>{135169&e.$$.dirty[0]&&y&&u&&h&&c("measure",y),2101248&e.$$.dirty[0]&&$.set(u?1:0,{hard:!1===s}),1310720&e.$$.dirty[0]&&(l<=0&&!v?n(18,v=!0):l>0&&v&&n(18,v=!1)),786432&e.$$.dirty[0]&&I&&c(v?"hide":"show"),1048576&e.$$.dirty[0]&&c("fade",l),1048576&e.$$.dirty[0]&&n(6,r=l<1?"opacity: "+l:void 0),4096&e.$$.dirty[0]&&yi(x,a=u,a),40960&e.$$.dirty[0]&&n(4,o={...C,...T,stores:d,locale:f})},n(5,i=!k.includes("external")),[h,m,M,P,o,i,r,g,b,x,S,E,u,d,p,f,$,y,v,I,l,s,function(e){M=e,n(2,M)},function(e){aa[e?"unshift":"push"]((()=>{h=e,n(0,h)}))},function(e){aa[e?"unshift":"push"]((()=>{P=e,n(3,P)}))}]}class Yc extends Na{constructor(e){super(),Ba(this,e,Xc,Zc,ai,{isActive:12,stores:13,content:14,component:0,locale:15,class:1,opacity:16},null,[-1,-1])}get opacity(){return this.$$.ctx[16]}}function qc(e){let t,n,r;const o=e[5].default,i=ui(o,e,e[4],null);return{c(){t=Ii("svg"),i&&i.c(),_i(t,"class",e[3]),_i(t,"style",e[2]),_i(t,"width",e[0]),_i(t,"height",e[1]),_i(t,"viewBox",n="0 0 "+e[0]+"\n    "+e[1]),_i(t,"xmlns","http://www.w3.org/2000/svg"),_i(t,"aria-hidden","true"),_i(t,"focusable","false"),_i(t,"stroke-linecap","round"),_i(t,"stroke-linejoin","round")},m(e,n){Pi(e,t,n),i&&i.m(t,null),r=!0},p(e,a){let[l]=a;i&&i.p&&(!r||16&l)&&hi(i,o,e,e[4],r?pi(o,e[4],l,null):fi(e[4]),null),(!r||8&l)&&_i(t,"class",e[3]),(!r||4&l)&&_i(t,"style",e[2]),(!r||1&l)&&_i(t,"width",e[0]),(!r||2&l)&&_i(t,"height",e[1]),(!r||3&l&&n!==(n="0 0 "+e[0]+"\n    "+e[1]))&&_i(t,"viewBox",n)},i(e){r||(Ca(i,e),r=!0)},o(e){Ta(i,e),r=!1},d(e){e&&Ei(t),i&&i.d(e)}}}function Kc(e,t,n){let{$$slots:r={},$$scope:o}=t,{width:i=24}=t,{height:a=24}=t,{style:l}=t,{class:s}=t;return e.$$set=e=>{"width"in e&&n(0,i=e.width),"height"in e&&n(1,a=e.height),"style"in e&&n(2,l=e.style),"class"in e&&n(3,s=e.class),"$$scope"in e&&n(4,o=e.$$scope)},[i,a,l,s,o,r]}class Qc extends Na{constructor(e){super(),Ba(this,e,Kc,qc,ai,{width:0,height:1,style:2,class:3})}}var Jc=(e,t)=>t===e.target||t.contains(e.target),eu=(e,t,n)=>(V(t)?t:e)+(n?" (".concat(n.map((e=>"CMD"===e?kn()?"\u2318":"Ctrl":e)).join("+"),")"):"");function tu(e){let t,n;return t=new Qc({props:{class:"PinturaButtonIcon",$$slots:{default:[nu]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};536870920&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function nu(e){let t;return{c(){t=Ii("g")},m(n,r){Pi(n,t,r),t.innerHTML=e[3]},p(e,n){8&n&&(t.innerHTML=e[3])},d(e){e&&Ei(t)}}}function ru(e){let t;return{c(){t=Ri("span"),_i(t,"class",e[11])},m(n,r){Pi(n,t,r),t.innerHTML=e[0]},p(e,n){1&n&&(t.innerHTML=e[0]),2048&n&&_i(t,"class",e[11])},d(e){e&&Ei(t)}}}function ou(e){let t,n,r,o,i;const a=e[27].default,l=ui(a,e,e[29],null),s=l||function(e){let t,n,r,o=e[3]&&tu(e),i=e[0]&&ru(e);return{c(){t=Ri("span"),o&&o.c(),n=Li(),i&&i.c(),_i(t,"class",e[13])},m(e,a){Pi(e,t,a),o&&o.m(t,null),Ci(t,n),i&&i.m(t,null),r=!0},p(e,a){e[3]?o?(o.p(e,a),8&a&&Ca(o,1)):(o=tu(e),o.c(),Ca(o,1),o.m(t,n)):o&&(Sa(),Ta(o,1,1,(()=>{o=null})),ka()),e[0]?i?i.p(e,a):(i=ru(e),i.c(),i.m(t,null)):i&&(i.d(1),i=null),(!r||8192&a)&&_i(t,"class",e[13])},i(e){r||(Ca(o),r=!0)},o(e){Ta(o),r=!1},d(e){e&&Ei(t),o&&o.d(),i&&i.d()}}}(e);return{c(){t=Ri("button"),s&&s.c(),_i(t,"type",e[6]),_i(t,"style",e[4]),t.disabled=e[5],_i(t,"class",e[12]),_i(t,"title",n=eu(e[0],e[1],e[2]))},m(n,a){Pi(n,t,a),s&&s.m(t,null),e[28](t),r=!0,o||(i=[Fi(t,"keydown",(function(){ii(e[8])&&e[8].apply(this,arguments)})),Fi(t,"click",(function(){ii(e[7])&&e[7].apply(this,arguments)})),Fi(t,"pointerdown",(function(){ii(e[14])&&e[14].apply(this,arguments)})),$i(e[9].call(null,t))],o=!0)},p(o,i){let[c]=i;e=o,l?l.p&&(!r||536870912&c)&&hi(l,a,e,e[29],r?pi(a,e[29],c,null):fi(e[29]),null):s&&s.p&&(!r||10249&c)&&s.p(e,r?c:-1),(!r||64&c)&&_i(t,"type",e[6]),(!r||16&c)&&_i(t,"style",e[4]),(!r||32&c)&&(t.disabled=e[5]),(!r||4096&c)&&_i(t,"class",e[12]),(!r||7&c&&n!==(n=eu(e[0],e[1],e[2])))&&_i(t,"title",n)},i(e){r||(Ca(s,e),r=!0)},o(e){Ta(s,e),r=!1},d(n){n&&Ei(t),s&&s.d(n),e[28](null),o=!1,oi(i)}}}function iu(e,t,n){let r,o,i,a,l,s,{$$slots:c={},$$scope:u}=t,{class:d}=t,{label:p}=t,{title:h}=t,{shortcut:f}=t,{labelClass:m}=t,{innerClass:g}=t,{hideLabel:y=!1}=t,{icon:$}=t,{style:b}=t,{disabled:v}=t,{type:w="button"}=t,{onclick:S}=t,{onkeydown:k}=t,{onhold:C}=t,{action:T=(()=>{})}=t,{holdThreshold:M=500}=t,{holdSpeedUpFactor:P=.5}=t,{holdSpeedMin:E=20}=t;const R=e=>{n(25,s=setTimeout((()=>{C(),R(Math.max(e*P,E))}),e))};let I;return e.$$set=e=>{"class"in e&&n(15,d=e.class),"label"in e&&n(0,p=e.label),"title"in e&&n(1,h=e.title),"shortcut"in e&&n(2,f=e.shortcut),"labelClass"in e&&n(16,m=e.labelClass),"innerClass"in e&&n(17,g=e.innerClass),"hideLabel"in e&&n(18,y=e.hideLabel),"icon"in e&&n(3,$=e.icon),"style"in e&&n(4,b=e.style),"disabled"in e&&n(5,v=e.disabled),"type"in e&&n(6,w=e.type),"onclick"in e&&n(7,S=e.onclick),"onkeydown"in e&&n(8,k=e.onkeydown),"onhold"in e&&n(19,C=e.onhold),"action"in e&&n(9,T=e.action),"holdThreshold"in e&&n(20,M=e.holdThreshold),"holdSpeedUpFactor"in e&&n(21,P=e.holdSpeedUpFactor),"holdSpeedMin"in e&&n(22,E=e.holdSpeedMin),"$$scope"in e&&n(29,u=e.$$scope)},e.$$.update=()=>{101187584&e.$$.dirty&&n(26,o=C?()=>{s&&(clearTimeout(s),n(25,s=void 0),document.documentElement.removeEventListener("pointerup",o))}:x),68681728&e.$$.dirty&&n(14,r=C?()=>{document.documentElement.addEventListener("pointerup",o),R(M)}:x),131072&e.$$.dirty&&n(13,i=kc(["PinturaButtonInner",g])),294912&e.$$.dirty&&n(12,a=kc(["PinturaButton",y&&"PinturaButtonIconOnly",d])),327680&e.$$.dirty&&n(11,l=kc([y?"implicit":"PinturaButtonLabel",m]))},[p,h,f,$,b,v,w,S,k,T,I,l,a,i,r,d,m,g,y,C,M,P,E,e=>Jc(e,I),()=>I,s,o,c,function(e){aa[e?"unshift":"push"]((()=>{I=e,n(10,I)}))},u]}class au extends Na{constructor(e){super(),Ba(this,e,iu,ou,ai,{class:15,label:0,title:1,shortcut:2,labelClass:16,innerClass:17,hideLabel:18,icon:3,style:4,disabled:5,type:6,onclick:7,onkeydown:8,onhold:19,action:9,holdThreshold:20,holdSpeedUpFactor:21,holdSpeedMin:22,isEventTarget:23,getElement:24})}get isEventTarget(){return this.$$.ctx[23]}get getElement(){return this.$$.ctx[24]}}var lu=(e,t)=>{const n=e.findIndex(t);if(n>=0)return e.splice(n,1)};const su=80;var cu=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{inertia:n=!1,inertiaDurationMultiplier:r=su,shouldStartInteraction:o=(()=>!0),pinch:i=!1,multiTouch:a,getEventPosition:l=(e=>Ce(e.clientX,e.clientY)),observeKeys:s=!1}=t;function c(t,n){e.dispatchEvent(new CustomEvent(t,{detail:n}))}function u(){w&&w(),w=void 0}const d=[],p=e=>0===e.timeStamp?Date.now():e.timeStamp,h=()=>{const e=Me(d[0].position);if(d[1]){const t=.5*(d[1].position.x-e.x),n=.5*(d[1].position.y-e.y);e.x+=t,e.y+=n}return e},f=e=>{e.origin.x=e.position.x,e.origin.y=e.position.y,e.translation.x=0,e.translation.y=0},m=e=>{const t=(e=>d.findIndex((t=>t.event.pointerId===e.pointerId)))(e);if(!(t<0))return d[t]},g=()=>1===d.length,y=()=>2===d.length,$=e=>{const t=Ve(e.map((e=>e.position)));return{center:t,distance:((e,t)=>e.reduce(((e,n)=>e+We(t,n.position)),0)/e.length)(e,t),velocity:Ve(e.map((e=>e.velocity))),translation:Ve(e.map((e=>e.translation)))}};let b,v,x,w,S,k,C,T,M,P=0;e.addEventListener("pointerdown",L);const E=["Meta","Control","Alt","Shift"];function R(e){if(!E.includes(e.key))return;const{metaKey:t,ctrlKey:n,altKey:r,shiftKey:o}=e;A({metaKey:t,ctrlKey:n,altKey:r,shiftKey:o})}let I=Date.now();const A=e=>{const t=Me(d[0].translation);let n=C;i&&y()&&(n*=We(d[0].position,d[1].position)/S,Fe(t,d[1].translation)),Fe(t,k);const r=Date.now();r-I<16||(I=r,c("interactionupdate",{position:h(),translation:t,scalar:i?n:void 0,isMultiTouching:y(),...e}))};function L(t){if(!y()&&!(e=>Wn(e.button)&&0!==e.button)(t)&&o(t,e))if(u(),(e=>{const t=p(e),n={timeStamp:t,timeStampInitial:t,position:l(e),origin:l(e),velocity:ke(),velocityHistory:[],velocityAverage:ke(),translation:ke(),interactionState:void 0,event:e};d.push(n),n.interactionState=$(d)})(t),s&&(window.addEventListener("keydown",R),window.addEventListener("keyup",R)),g())document.documentElement.addEventListener("pointermove",z),document.documentElement.addEventListener("pointerup",F),document.documentElement.addEventListener("pointercancel",F),document.addEventListener("visibilitychange",D),T=!1,C=1,k=ke(),S=void 0,c("interactionstart",{origin:Me(m(t).origin)});else if(i)T=!0,S=We(d[0].position,d[1].position),k.x+=d[0].translation.x,k.y+=d[0].translation.y,f(d[0]);else if(!1===a)return d.length=0,B(),c("interactioncancel")}function z(e){e.preventDefault(),(e=>{const t=m(e);if(!t)return;const n=p(e),r=l(e),o=Math.max(1,n-t.timeStamp);t.velocity.x=(r.x-t.position.x)/o,t.velocity.y=(r.y-t.position.y)/o,t.velocityHistory.push(Me(t.velocity)),t.velocityHistory=t.velocityHistory.slice(-3),t.velocityAverage=t.velocityHistory.reduce(((e,t,n,r)=>(e.x+=t.x/r.length,e.y+=t.y/r.length,e)),ke()),t.translation.x=r.x-t.origin.x,t.translation.y=r.y-t.origin.y,t.timeStamp=n,t.position.x=r.x,t.position.y=r.y,t.event=e})(e);const{metaKey:t=!1,ctrlKey:n=!1,altKey:r=!1,shiftKey:o=!1}=s?e:{};A({metaKey:t,ctrlKey:n,altKey:r,shiftKey:o})}function F(e){if(!m(e))return;const t=h(),o=(e=>{const t=lu(d,(t=>t.event.pointerId===e.pointerId));if(t)return t[0]})(e);if(i&&g()){const e=We(d[0].position,o.position);C*=e/S,k.x+=d[0].translation.x+o.translation.x,k.y+=d[0].translation.y+o.translation.y,f(d[0])}let a=!1,l=!1;if(!T&&o){const e=performance.now(),t=e-o.timeStampInitial,n=je(o.translation);a=n<64&&t<300,l=!!(M&&a&&e-P<700&&je(M,o.position)<128),a&&(M=Me(o.position),P=e)}if(d.length>0)return;B();const s=Me(o.translation),u=Me(o.velocityAverage);let p=!1;c("interactionrelease",{isTap:a,isDoubleTap:l,position:t,translation:s,scalar:C,preventInertia:()=>p=!0});const y=We(u);if(p||!n||y<.25)return _(s,{isTap:a,isDoubleTap:l});v=Me(t),x=Me(s),b=Ys(Me(s),{easing:Gs,duration:y*r}),b.set({x:s.x+50*u.x,y:s.y+50*u.y}).then((()=>{w&&_(si(b),{isTap:a,isDoubleTap:l})})),w=b.subscribe(O)}function O(e){e&&c("interactionupdate",{position:Ce(v.x+(e.x-x.x),v.y+(e.y-x.y)),translation:e,scalar:i?C:void 0})}function D(e){if("visible"===document.visibilityState||!d.length)return;const t=$(d);u(),c("interactionend",{...t}),d.length=0,B()}function _(e,t){u(),c("interactionend",{...t,translation:e,scalar:i?C:void 0})}function B(){s&&window.removeEventListener("keydown",R),s&&window.removeEventListener("keyup",R),document.documentElement.removeEventListener("pointermove",z),document.documentElement.removeEventListener("pointerup",F),document.documentElement.removeEventListener("pointercancel",F),document.addEventListener("visibilitychange",D)}return{destroy(){u(),e.removeEventListener("pointerdown",L)}}},uu=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{direction:n,shiftMultiplier:r=10,bubbles:o=!1,preventDefault:i=!1,stopKeydownPropagation:a=!0}=t,l="horizontal"===n,s="vertical"===n,c=t=>{const{key:n}=t,c=t.shiftKey,u=/up|down/i.test(n),d=/left|right/i.test(n);if(!d&&!u)return;if(l&&u)return;if(s&&d)return;const p=c?r:1;a&&t.stopPropagation(),i&&t.preventDefault(),e.dispatchEvent(new CustomEvent("nudge",{bubbles:o,detail:Ce((/left/i.test(n)?-1:/right/i.test(n)?1:0)*p,(/up/i.test(n)?-1:/down/i.test(n)?1:0)*p)}))};return e.addEventListener("keydown",c),{destroy(){e.removeEventListener("keydown",c)}}};function du(e,t){return t?t*Math.sign(e)*Math.log10(1+Math.abs(e)/t):e}const pu=(e,t,n)=>{if(!t||!n)return{...e};const r=e.x+du(t.x-e.x,n),o=e.x+e.width+du(t.x+t.width-(e.x+e.width),n),i=e.y+du(t.y-e.y,n);return{x:r,y:i,width:o-r,height:e.y+e.height+du(t.y+t.height-(e.y+e.height),n)-i}};var hu=(e,t)=>{if(e)return/em/.test(e)?16*parseInt(e,10):/px/.test(e)?parseInt(e,10):void 0},fu=e=>{let t=e.detail||0;const{deltaX:n,deltaY:r,wheelDelta:o,wheelDeltaX:i,wheelDeltaY:a}=e;return Wn(i)&&Math.abs(i)>Math.abs(a)?t=i/-120:Wn(n)&&Math.abs(n)>Math.abs(r)?t=n/20:(o||a)&&(t=(o||a)/-120),t||(t=r/20),(ar()||sn())&&(t*=2),t};function mu(e){let t,n,r,o,i,a,l;const s=e[36].default,c=ui(s,e,e[35],null);return{c(){t=Ri("div"),n=Ri("div"),c&&c.c(),_i(n,"style",e[5]),_i(t,"class",r=kc(["PinturaScrollable",e[0]])),_i(t,"style",e[4]),_i(t,"data-direction",e[1]),_i(t,"data-state",e[6])},m(r,s){Pi(r,t,s),Ci(t,n),c&&c.m(n,null),e[38](t),i=!0,a||(l=[Fi(n,"interactionstart",e[8]),Fi(n,"interactionupdate",e[10]),Fi(n,"interactionend",e[11]),Fi(n,"interactionrelease",e[9]),$i(cu.call(null,n,{inertia:!0})),Fi(n,"measure",e[37]),$i(hc.call(null,n)),Fi(t,"wheel",e[13],{passive:!1}),Fi(t,"scroll",e[15]),Fi(t,"focusin",e[14]),Fi(t,"nudge",e[16]),Fi(t,"measure",e[12]),$i(hc.call(null,t,{observePosition:!0})),$i(o=uu.call(null,t,{direction:"x"===e[1]?"horizontal":"vertical",stopKeydownPropagation:!1}))],a=!0)},p(e,a){c&&c.p&&(!i||16&a[1])&&hi(c,s,e,e[35],i?pi(s,e[35],a,null):fi(e[35]),null),(!i||32&a[0])&&_i(n,"style",e[5]),(!i||1&a[0]&&r!==(r=kc(["PinturaScrollable",e[0]])))&&_i(t,"class",r),(!i||16&a[0])&&_i(t,"style",e[4]),(!i||2&a[0])&&_i(t,"data-direction",e[1]),(!i||64&a[0])&&_i(t,"data-state",e[6]),o&&ii(o.update)&&2&a[0]&&o.update.call(null,{direction:"x"===e[1]?"horizontal":"vertical",stopKeydownPropagation:!1})},i(e){i||(Ca(c,e),i=!0)},o(e){Ta(c,e),i=!1},d(n){n&&Ei(t),c&&c.d(n),e[38](null),a=!1,oi(l)}}}function gu(e,t,n){let r,o,i,a,l,s,c,u,{$$slots:d={},$$scope:p}=t;const h=ta();let f,m,g,y,$="idle",b=Ks(0);ci(e,b,(e=>n(34,u=e)));let v,{class:w}=t,{scrollBlockInteractionDist:S=5}=t,{scrollStep:k=10}=t,{scrollFocusMargin:C=64}=t,{scrollDirection:T="x"}=t,{scrollAutoCancel:M=!1}=t,{elasticity:P=0}=t,{onscroll:E=x}=t,{maskFeatherSize:R}=t,{maskFeatherStartOpacity:I}=t,{maskFeatherEndOpacity:A}=t,{scroll:L}=t,z="",F=!0;const O=b.subscribe((e=>{const t=ke();t[T]=e,E(t)})),D=e=>Math.max(Math.min(0,e),g[r]-m[r]);let _,B,N;const j=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{elastic:r=!1,animate:o=!1,preventScrollState:i=!1}=t;Math.abs(e-f)>S&&"idle"===$&&!y&&!i&&n(27,$="scrolling");const a=D(e),l=r&&P&&!y?a+du(e-a,P):a;let s=!0;o?s=!1:F||(s=!y),F=!1,b.set(l,{hard:s}).then((e=>{y&&(F=!0)}))};return ea((()=>{O()})),e.$$set=e=>{"class"in e&&n(0,w=e.class),"scrollBlockInteractionDist"in e&&n(20,S=e.scrollBlockInteractionDist),"scrollStep"in e&&n(21,k=e.scrollStep),"scrollFocusMargin"in e&&n(22,C=e.scrollFocusMargin),"scrollDirection"in e&&n(1,T=e.scrollDirection),"scrollAutoCancel"in e&&n(23,M=e.scrollAutoCancel),"elasticity"in e&&n(24,P=e.elasticity),"onscroll"in e&&n(25,E=e.onscroll),"maskFeatherSize"in e&&n(19,R=e.maskFeatherSize),"maskFeatherStartOpacity"in e&&n(17,I=e.maskFeatherStartOpacity),"maskFeatherEndOpacity"in e&&n(18,A=e.maskFeatherEndOpacity),"scroll"in e&&n(26,L=e.scroll),"$$scope"in e&&n(35,p=e.$$scope)},e.$$.update=()=>{if(2&e.$$.dirty[0]&&n(31,r="x"===T?"width":"height"),2&e.$$.dirty[0]&&n(29,o=T.toUpperCase()),8&e.$$.dirty[0]&&n(33,i=v&&getComputedStyle(v)),8&e.$$.dirty[0]|4&e.$$.dirty[1]&&n(32,a=i&&hu(i.getPropertyValue("--scrollable-feather-size"))),268828676&e.$$.dirty[0]|11&e.$$.dirty[1]&&null!=u&&g&&null!=a&&m){const e=-1*u/a,t=-(g[r]-m[r]-u)/a;n(17,I=sl(1-e,0,1)),n(18,A=sl(1-t,0,1)),n(19,R=a),n(4,z="--scrollable-feather-start-opacity: ".concat(I,";--scrollable-feather-end-opacity: ").concat(A))}67108872&e.$$.dirty[0]&&v&&void 0!==L&&(Wn(L)?j(L):j(L.scrollOffset,L)),268435460&e.$$.dirty[0]|1&e.$$.dirty[1]&&n(30,l=g&&m?m[r]>g[r]:void 0),1207959552&e.$$.dirty[0]&&n(6,s=kc([$,l?"overflows":void 0])),1610612736&e.$$.dirty[0]|8&e.$$.dirty[1]&&n(5,c=l?"transform: translate".concat(o,"(").concat(u,"px)"):void 0)},[w,T,m,v,z,c,s,b,()=>{l&&(B=!1,_=!0,N=Ce(0,0),y=!1,n(27,$="idle"),f=si(b))},e=>{let{detail:t}=e;l&&(y=!0,n(27,$="idle"))},e=>{let{detail:t}=e;l&&(B||_&&(_=!1,je(t.translation)<.1)||(!M||"x"!==T||(e=>{const t=ze(Ce(e.x-N.x,e.y-N.y),Math.abs);N=Me(e);const n=je(t),r=t.x-t.y;return!(n>1&&r<-.5)})(t.translation)?j(f+t.translation[T],{elastic:!0}):B=!0))},e=>{let{detail:t}=e;if(!l)return;if(B)return;const n=f+t.translation[T],r=D(n);F=!1,b.set(r).then((e=>{y&&(F=!0)}))},e=>{let{detail:t}=e;n(28,g=t),h("measure",{x:t.x,y:t.y,width:t.width,height:t.height})},e=>{if(!l)return;e.preventDefault(),e.stopPropagation();const t=e.shiftKey,n=fu(e)*(t?-1:1),r=si(b);j(r+n*k,{animate:!0})},e=>{if(!l)return;if(!y)return;let t=e.target;e.target.classList.contains("implicit")&&(t=t.parentNode);const n=t["x"===T?"offsetLeft":"offsetTop"],o=n+t["x"===T?"offsetWidth":"offsetHeight"],i=si(b),a=C+R;i+n<a?j(-n+a):i+o>g[r]-a&&j(g[r]-o-a,{animate:!0})},()=>{n(3,v["x"===T?"scrollLeft":"scrollTop"]=0,v)},e=>{let{detail:t}=e;if(v.querySelector("[data-focus-visible]"))return;const n=-2*t[T],r=si(b);j(r+n*k,{animate:!0,preventScrollState:!0})},I,A,R,S,k,C,M,P,E,L,$,g,o,l,r,a,i,u,p,d,e=>n(2,m=e.detail),function(e){aa[e?"unshift":"push"]((()=>{v=e,n(3,v)}))}]}class yu extends Na{constructor(e){super(),Ba(this,e,gu,mu,ai,{class:0,scrollBlockInteractionDist:20,scrollStep:21,scrollFocusMargin:22,scrollDirection:1,scrollAutoCancel:23,elasticity:24,onscroll:25,maskFeatherSize:19,maskFeatherStartOpacity:17,maskFeatherEndOpacity:18,scroll:26},null,[-1,-1])}}function $u(e){let{delay:t=0,duration:n=400,easing:r=ei}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:e=>"opacity: "+e*o}}function bu(e){let t,n,r,o,i;return{c(){t=Ri("span"),_i(t,"class","PinturaStatusMessage")},m(n,a){Pi(n,t,a),t.innerHTML=e[0],r=!0,o||(i=[Fi(t,"measure",(function(){ii(e[1])&&e[1].apply(this,arguments)})),$i(hc.call(null,t))],o=!0)},p(n,o){let[i]=o;e=n,(!r||1&i)&&(t.innerHTML=e[0])},i(e){r||(ha((()=>{n||(n=Pa(t,$u,{duration:500},!0)),n.run(1)})),r=!0)},o(e){n||(n=Pa(t,$u,{duration:500},!1)),n.run(0),r=!1},d(e){e&&Ei(t),e&&n&&n.end(),o=!1,oi(i)}}}function vu(e,t,n){let{text:r}=t,{onmeasure:o=x}=t;return e.$$set=e=>{"text"in e&&n(0,r=e.text),"onmeasure"in e&&n(1,o=e.onmeasure)},[r,o]}class xu extends Na{constructor(e){super(),Ba(this,e,vu,bu,ai,{text:0,onmeasure:1})}}function wu(e){let t,n,r,o,i,a,l,s,c;return{c(){t=Ri("span"),n=Ii("svg"),r=Ii("g"),o=Ii("circle"),i=Ii("circle"),a=Li(),l=Ri("span"),s=Ai(e[3]),_i(o,"class","PinturaProgressIndicatorBar"),_i(o,"r","8.5"),_i(o,"cx","10"),_i(o,"cy","10"),_i(o,"stroke-linecap","round"),_i(o,"opacity",".25"),_i(i,"class","PinturaProgressIndicatorFill"),_i(i,"r","8.5"),_i(i,"stroke-dasharray",e[2]),_i(i,"cx","10"),_i(i,"cy","10"),_i(i,"transform","rotate(-90) translate(-20)"),_i(r,"fill","none"),_i(r,"stroke","currentColor"),_i(r,"stroke-width","2.5"),_i(r,"stroke-linecap","round"),_i(r,"opacity",e[1]),_i(n,"width","20"),_i(n,"height","20"),_i(n,"viewBox","0 0 20 20"),_i(n,"xmlns","http://www.w3.org/2000/svg"),_i(n,"aria-hidden","true"),_i(n,"focusable","false"),_i(l,"class","implicit"),_i(t,"class","PinturaProgressIndicator"),_i(t,"data-status",e[0]),_i(t,"style",c="opacity:"+e[4])},m(e,c){Pi(e,t,c),Ci(t,n),Ci(n,r),Ci(r,o),Ci(r,i),Ci(t,a),Ci(t,l),Ci(l,s)},p(e,n){let[o]=n;4&o&&_i(i,"stroke-dasharray",e[2]),2&o&&_i(r,"opacity",e[1]),8&o&&ji(s,e[3]),1&o&&_i(t,"data-status",e[0]),16&o&&c!==(c="opacity:"+e[4])&&_i(t,"style",c)},i:Jo,o:Jo,d(e){e&&Ei(t)}}}function Su(e,t,n){let r,o,i,a,l,s,c;const u=ta();let{progress:d}=t,{min:p=0}=t,{max:h=100}=t,{labelBusy:f="Busy"}=t,{opacity:m}=t;const g=Ks(m,{precision:.01});ci(e,g,(e=>n(4,c=e)));const y=Ks(0,{precision:.01}),$=Ks(0,{precision:.01});ci(e,$,(e=>n(13,l=e)));const b=Ua([y],(e=>sl(e,p,h)));ci(e,b,(e=>n(14,s=e)));const v=b.subscribe((e=>{1===d&&Math.round(e)>=100&&u("complete")}));return Qi((()=>{$.set(1)})),ea((()=>{v()})),e.$$set=e=>{"progress"in e&&n(8,d=e.progress),"min"in e&&n(9,p=e.min),"max"in e&&n(10,h=e.max),"labelBusy"in e&&n(11,f=e.labelBusy),"opacity"in e&&n(12,m=e.opacity)},e.$$.update=()=>{4096&e.$$.dirty&&Wn(m)&&g.set(m),256&e.$$.dirty&&d&&d!==1/0&&y.set(100*d),18688&e.$$.dirty&&n(3,r=d===1/0?f:Math.round(s)+"%"),16640&e.$$.dirty&&n(2,o=d===1/0?"26.5 53":s/100*53+" 53"),8192&e.$$.dirty&&n(1,i=l),256&e.$$.dirty&&n(0,a=d===1/0?"busy":"loading")},[a,i,o,r,c,g,$,b,d,p,h,f,m,l,s]}class ku extends Na{constructor(e){super(),Ba(this,e,Su,wu,ai,{progress:8,min:9,max:10,labelBusy:11,opacity:12})}}function Cu(e){let t,n,r;const o=e[5].default,i=ui(o,e,e[4],null);return{c(){t=Ri("span"),i&&i.c(),_i(t,"class",n="PinturaStatusAside "+e[0]),_i(t,"style",e[1])},m(e,n){Pi(e,t,n),i&&i.m(t,null),r=!0},p(e,a){let[l]=a;i&&i.p&&(!r||16&l)&&hi(i,o,e,e[4],r?pi(o,e[4],l,null):fi(e[4]),null),(!r||1&l&&n!==(n="PinturaStatusAside "+e[0]))&&_i(t,"class",n),(!r||2&l)&&_i(t,"style",e[1])},i(e){r||(Ca(i,e),r=!0)},o(e){Ta(i,e),r=!1},d(e){e&&Ei(t),i&&i.d(e)}}}function Tu(e,t,n){let r,{$$slots:o={},$$scope:i}=t,{offset:a=0}=t,{opacity:l=0}=t,{class:s}=t;return e.$$set=e=>{"offset"in e&&n(2,a=e.offset),"opacity"in e&&n(3,l=e.opacity),"class"in e&&n(0,s=e.class),"$$scope"in e&&n(4,i=e.$$scope)},e.$$.update=()=>{12&e.$$.dirty&&n(1,r="transform:translateX(".concat(a,"px);opacity:").concat(l))},[s,r,a,l,i,o]}class Mu extends Na{constructor(e){super(),Ba(this,e,Tu,Cu,ai,{offset:2,opacity:3,class:0})}}const{document:Pu}=Ea;function Eu(e){let t,n,r,o;return{c(){t=Li(),n=Ri("button"),_i(n,"class","PinturaImageButton"),_i(n,"type","button"),_i(n,"title",e[1]),n.disabled=e[2]},m(i,a){Pi(i,t,a),Pi(i,n,a),n.innerHTML=e[0],e[11](n),r||(o=[Fi(Pu.body,"load",e[5],!0),Fi(Pu.body,"error",e[6],!0),Fi(n,"pointerdown",e[4])],r=!0)},p(e,t){let[r]=t;1&r&&(n.innerHTML=e[0]),2&r&&_i(n,"title",e[1]),4&r&&(n.disabled=e[2])},i:Jo,o:Jo,d(i){i&&Ei(t),i&&Ei(n),e[11](null),r=!1,oi(o)}}}function Ru(e,t,n){let r,{html:o}=t,{title:i}=t,{onclick:a}=t,{disabled:l=!1}=t,{ongrab:s=x}=t,{ondrag:c=x}=t,{ondrop:u=x}=t;const d=e=>je(p,Ce(e.pageX,e.pageY))<256;let p;const h=e=>{document.documentElement.removeEventListener("pointermove",f),document.documentElement.removeEventListener("pointerup",h);const t=Ce(e.pageX,e.pageY);if(je(p,t)<32)return a(e);d(e)||u(e)},f=e=>{d(e)||c(e)},m=e=>r&&r.contains(e)&&"IMG"===e.nodeName;return e.$$set=e=>{"html"in e&&n(0,o=e.html),"title"in e&&n(1,i=e.title),"onclick"in e&&n(7,a=e.onclick),"disabled"in e&&n(2,l=e.disabled),"ongrab"in e&&n(8,s=e.ongrab),"ondrag"in e&&n(9,c=e.ondrag),"ondrop"in e&&n(10,u=e.ondrop)},e.$$.update=()=>{8&e.$$.dirty&&r&&r.querySelector("img")&&n(3,r.dataset.loader=!0,r)},[o,i,l,r,e=>{p=Ce(e.pageX,e.pageY),s(e),document.documentElement.addEventListener("pointermove",f),document.documentElement.addEventListener("pointerup",h)},e=>{let{target:t}=e;m(t)&&n(3,r.dataset.load=!0,r)},e=>{let{target:t}=e;m(t)&&n(3,r.dataset.error=!0,r)},a,s,c,u,function(e){aa[e?"unshift":"push"]((()=>{r=e,n(3,r)}))}]}class Iu extends Na{constructor(e){super(),Ba(this,e,Ru,Eu,ai,{html:0,title:1,onclick:7,disabled:2,ongrab:8,ondrag:9,ondrop:10})}}function Au(e,t,n){const r=e.slice();return r[14]=t[n],r}function Lu(e,t){let n,r,o,i,a,l,s;function c(){return t[10](t[14])}function u(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t[11](t[14],...n)}function d(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t[12](t[14],...n)}function p(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t[13](t[14],...n)}return r=new Iu({props:{onclick:c,ongrab:u,ondrag:d,ondrop:p,disabled:t[1]||t[14].disabled,title:t[14].title,html:t[14].thumb}}),{key:e,first:null,c(){n=Ri("li"),Oa(r.$$.fragment),o=Li(),_i(n,"style",t[6]),this.first=n},m(e,c){Pi(e,n,c),Da(r,n,null),Ci(n,o),a=!0,l||(s=$i(i=t[8].call(null,n,t[14])),l=!0)},p(e,o){t=e;const l={};5&o&&(l.onclick=c),9&o&&(l.ongrab=u),17&o&&(l.ondrag=d),33&o&&(l.ondrop=p),3&o&&(l.disabled=t[1]||t[14].disabled),1&o&&(l.title=t[14].title),1&o&&(l.html=t[14].thumb),r.$set(l),(!a||64&o)&&_i(n,"style",t[6]),i&&ii(i.update)&&1&o&&i.update.call(null,t[14])},i(e){a||(Ca(r.$$.fragment,e),a=!0)},o(e){Ta(r.$$.fragment,e),a=!1},d(e){e&&Ei(n),_a(r),l=!1,s()}}}function zu(e){let t,n,r=[],o=new Map,i=e[0];const a=e=>e[14].id;for(let l=0;l<i.length;l+=1){let t=Au(e,i,l),n=a(t);o.set(n,r[l]=Lu(n,t))}return{c(){t=Ri("ul");for(let e=0;e<r.length;e+=1)r[e].c();_i(t,"class","PinturaImageButtonList")},m(e,o){Pi(e,t,o);for(let n=0;n<r.length;n+=1)r[n].m(t,null);n=!0},p(e,n){let[l]=n;127&l&&(i=e[0],Sa(),r=Aa(r,l,a,1,e,i,o,t,Ia,Lu,null,Au),ka())},i(e){if(!n){for(let e=0;e<i.length;e+=1)Ca(r[e]);n=!0}},o(e){for(let t=0;t<r.length;t+=1)Ta(r[t]);n=!1},d(e){e&&Ei(t);for(let t=0;t<r.length;t+=1)r[t].d()}}}function Fu(e,t,n){let r,o,{items:i}=t,{disabled:a}=t,{onclickitem:l}=t,{ongrabitem:s}=t,{ondragitem:c}=t,{ondropitem:u}=t;const d=Ks(0,{stiffness:.25,damping:.9});return ci(e,d,(e=>n(9,o=e))),Qi((()=>d.set(1))),e.$$set=e=>{"items"in e&&n(0,i=e.items),"disabled"in e&&n(1,a=e.disabled),"onclickitem"in e&&n(2,l=e.onclickitem),"ongrabitem"in e&&n(3,s=e.ongrabitem),"ondragitem"in e&&n(4,c=e.ondragitem),"ondropitem"in e&&n(5,u=e.ondropitem)},e.$$.update=()=>{512&e.$$.dirty&&n(6,r="opacity:"+o)},[i,a,l,s,c,u,r,d,(e,t)=>t.mount&&t.mount(e.firstChild,t),o,e=>l(e.id),(e,t)=>s&&s(e.id,t),(e,t)=>c&&c(e.id,t),(e,t)=>u&&u(e.id,t)]}class Ou extends Na{constructor(e){super(),Ba(this,e,Fu,zu,ai,{items:0,disabled:1,onclickitem:2,ongrabitem:3,ondragitem:4,ondropitem:5})}}var Du=()=>T()&&window.devicePixelRatio||1;let _u=null;var Bu=e=>(null===_u&&(_u=1===Du()?Math.round:e=>e),_u(e)),Nu=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){if(t.preventScroll&&sn()){const t=document.body.scrollTop;return e.focus(),void(document.body.scrollTop=t)}e.focus(t)}},ju=e=>/date|email|number|search|text|url/.test(e.type),Wu=e=>(e=>/textarea/i.test(e.nodeName))(e)||ju(e)||e.isContentEditable;const Vu=e=>({}),Uu=e=>({}),Hu=e=>({}),Gu=e=>({});function Zu(e){let t,n;const r=[e[7]];let o={$$slots:{default:[Yu]},$$scope:{ctx:e}};for(let i=0;i<r.length;i+=1)o=ti(o,r[i]);return t=new au({props:o}),e[44](t),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const o=128&n[0]?La(r,[za(e[7])]):{};131072&n[1]&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(n){e[44](null),_a(t,n)}}}function Xu(e){let t,n;const r=[e[7]];let o={};for(let i=0;i<r.length;i+=1)o=ti(o,r[i]);return t=new au({props:o}),e[43](t),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const o=128&n[0]?La(r,[za(e[7])]):{};t.$set(o)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(n){e[43](null),_a(t,n)}}}function Yu(e){let t;const n=e[42].label,r=ui(n,e,e[48],Gu);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||131072&o[1])&&hi(r,n,e,e[48],t?pi(n,e[48],o,Hu):fi(e[48]),Gu)},i(e){t||(Ca(r,e),t=!0)},o(e){Ta(r,e),t=!1},d(e){r&&r.d(e)}}}function qu(e){let t,n,r,o,i,a,l;const s=e[42].details,c=ui(s,e,e[48],Uu);return{c(){t=Ri("div"),c&&c.c(),n=Li(),r=Ri("span"),_i(r,"class","PinturaPanelTip"),_i(r,"style",e[10]),_i(t,"class",o=kc(["PinturaPanel","pintura-editor-panel",e[2]])),_i(t,"tabindex","-1"),_i(t,"style",e[11])},m(o,s){Pi(o,t,s),c&&c.m(t,null),Ci(t,n),Ci(t,r),e[45](t),i=!0,a||(l=[Fi(t,"close",e[46]),Fi(t,"keydown",e[18]),Fi(t,"measure",e[47]),$i(hc.call(null,t))],a=!0)},p(e,n){c&&c.p&&(!i||131072&n[1])&&hi(c,s,e,e[48],i?pi(s,e[48],n,Vu):fi(e[48]),Uu),(!i||1024&n[0])&&_i(r,"style",e[10]),(!i||4&n[0]&&o!==(o=kc(["PinturaPanel","pintura-editor-panel",e[2]])))&&_i(t,"class",o),(!i||2048&n[0])&&_i(t,"style",e[11])},i(e){i||(Ca(c,e),i=!0)},o(e){Ta(c,e),i=!1},d(n){n&&Ei(t),c&&c.d(n),e[45](null),a=!1,oi(l)}}}function Ku(e){let t,n,r,o,i,a,l,s,c;const u=[Xu,Zu],d=[];function p(e,t){return e[1]?0:1}n=p(e),r=d[n]=u[n](e);let h=e[6]&&qu(e);return{c(){t=Li(),r.c(),o=Li(),h&&h.c(),i=Li(),a=zi()},m(r,u){Pi(r,t,u),d[n].m(r,u),Pi(r,o,u),h&&h.m(r,u),Pi(r,i,u),Pi(r,a,u),l=!0,s||(c=[Fi(document.body,"pointerdown",(function(){ii(e[9])&&e[9].apply(this,arguments)})),Fi(document.body,"pointerup",(function(){ii(e[8])&&e[8].apply(this,arguments)}))],s=!0)},p(t,a){let l=n;n=p(e=t),n===l?d[n].p(e,a):(Sa(),Ta(d[l],1,1,(()=>{d[l]=null})),ka(),r=d[n],r?r.p(e,a):(r=d[n]=u[n](e),r.c()),Ca(r,1),r.m(o.parentNode,o)),e[6]?h?(h.p(e,a),64&a[0]&&Ca(h,1)):(h=qu(e),h.c(),Ca(h,1),h.m(i.parentNode,i)):h&&(Sa(),Ta(h,1,1,(()=>{h=null})),ka())},i(e){l||(Ca(r),Ca(h),Ca(!1),l=!0)},o(e){Ta(r),Ta(h),Ta(!1),l=!1},d(e){e&&Ei(t),d[n].d(e),e&&Ei(o),h&&h.d(e),e&&Ei(i),e&&Ei(a),s=!1,oi(c)}}}function Qu(e,t,n){let r,o,i,a,l,s,c,u,d,p,h,f,m,g,y,$,b,v,{$$slots:w={},$$scope:S}=t,{buttonClass:k}=t,{buttonLabel:C}=t,{buttonLabelClass:T}=t,{buttonHideLabel:M}=t,{buttonIcon:P}=t,{buttonTitle:E}=t,{panelClass:R}=t,{isActive:I=!1}=t,{onshow:A=(e=>{let{panel:t}=e;return Nu(t,{preventScroll:!0})})}=t,{onhide:L=x}=t;const z=ra("isAnimated");ci(e,z,(e=>n(41,v=e)));const F=ra("rootPortal");ci(e,F,(e=>n(36,m=e)));const O=ra("rootRect");let D,_,B;ci(e,O,(e=>n(40,b=e)));const N=()=>n(26,B=r&&r.getBoundingClientRect());let j=ke(),W=Ks(0);ci(e,W,(e=>n(38,y=e)));let V=ke();const U=Va({x:0,y:0});ci(e,U,(e=>n(37,g=e)));const H=Ks(-5,{stiffness:.1,damping:.35,precision:.001});ci(e,H,(e=>n(39,$=e)));const G=e=>Jc(e,m)||_.isEventTarget(e);let Z,X,Y=!1;const q=e=>{Wu(e.target)||(I||N(),n(30,X=e),n(0,I=!I))},K=e=>{/down/i.test(e.key)&&(n(0,I=!0),n(30,X=e))};return ea((()=>{if(!m)return;if(!Z)return;const e=Z;pa().then((()=>{e.parentNode&&e.remove()}))})),e.$$set=e=>{"buttonClass"in e&&n(19,k=e.buttonClass),"buttonLabel"in e&&n(1,C=e.buttonLabel),"buttonLabelClass"in e&&n(20,T=e.buttonLabelClass),"buttonHideLabel"in e&&n(21,M=e.buttonHideLabel),"buttonIcon"in e&&n(22,P=e.buttonIcon),"buttonTitle"in e&&n(23,E=e.buttonTitle),"panelClass"in e&&n(2,R=e.panelClass),"isActive"in e&&n(0,I=e.isActive),"onshow"in e&&n(24,A=e.onshow),"onhide"in e&&n(25,L=e.onhide),"$$scope"in e&&n(48,S=e.$$scope)},e.$$.update=()=>{if(16&e.$$.dirty[0]&&(r=_&&_.getElement()),536870913&e.$$.dirty[0]&&n(8,h=I?e=>{Y&&(n(29,Y=!1),G(e)||n(0,I=!1))}:void 0),1&e.$$.dirty[0]|1024&e.$$.dirty[1]&&W.set(I?1:0,{hard:!1===v}),1&e.$$.dirty[0]|1024&e.$$.dirty[1]&&H.set(I?0:-5,{hard:!1===v}),256&e.$$.dirty[1]&&n(33,o=1-$/-5),1&e.$$.dirty[0]|512&e.$$.dirty[1]&&b&&I&&N(),67108873&e.$$.dirty[0]|512&e.$$.dirty[1]&&b&&D&&B&&I){let e=B.x-b.x+.5*B.width-.5*D.width,t=B.y-b.y+B.height;const r=12,o=12,i=b.width-12,a=b.height-12,l=e,s=t,c=l+D.width,u=s+D.height;l<r&&(n(28,V.x=l-r,V),e=r),c>i&&(n(28,V.x=c-i,V),e=i-D.width),u>a?(n(27,j.y=-1,j),o<t-D.height-B.height?(n(28,V.y=0,V),t-=D.height+B.height):(n(28,V.y=t-(u-a),V),t-=u-a)):n(27,j.y=1,j),yi(U,g=ze(Ce(e,t),Bu),g)}128&e.$$.dirty[1]&&n(6,i=y>0),128&e.$$.dirty[1]&&n(35,a=y<1),134217728&e.$$.dirty[0]|320&e.$$.dirty[1]&&n(34,l="translateX(".concat(Math.round(g.x)+12*j.x,"px) translateY(").concat(Math.round(g.y)+12*j.y+j.y*$,"px)")),152&e.$$.dirty[1]&&n(11,s=a?"opacity: ".concat(y,"; pointer-events: ").concat(y<1?"none":"all","; transform: ").concat(l,";"):"transform: "+l),4&e.$$.dirty[1]&&n(31,c=.5+.5*o),4&e.$$.dirty[1]&&n(32,u=o),402653192&e.$$.dirty[0]|67&e.$$.dirty[1]&&n(10,d=g&&D&&"opacity:".concat(u,";transform:scaleX(").concat(c,")rotate(45deg);top:").concat(j.y<0?V.y+D.height:0,"px;left:").concat(V.x+.5*D.width,"px")),1&e.$$.dirty[0]&&n(9,p=I?e=>{G(e)||n(29,Y=!0)}:void 0),96&e.$$.dirty[0]|32&e.$$.dirty[1]&&i&&m&&Z&&Z.parentNode!==m&&m.append(Z),1&e.$$.dirty[0]&&(I||n(30,X=void 0)),1090519137&e.$$.dirty[0]&&I&&i&&Z&&A({e:X,panel:Z}),33554497&e.$$.dirty[0]&&i&&!I&&L(),16252930&e.$$.dirty[0]&&n(7,f={label:C,icon:P,class:kc(["PinturaPanelButton",k]),onkeydown:K,onclick:q,hideLabel:M,labelClass:T,title:E})},[I,C,R,D,_,Z,i,f,h,p,d,s,z,F,O,W,U,H,e=>{/esc/i.test(e.key)&&(n(0,I=!1),r.focus())},k,T,M,P,E,A,L,B,j,V,Y,X,c,u,o,l,a,m,g,y,$,b,v,w,function(e){aa[e?"unshift":"push"]((()=>{_=e,n(4,_)}))},function(e){aa[e?"unshift":"push"]((()=>{_=e,n(4,_)}))},function(e){aa[e?"unshift":"push"]((()=>{Z=e,n(5,Z)}))},e=>{e.stopPropagation(),n(0,I=!1)},e=>n(3,D=Xe(e.detail)),S]}class Ju extends Na{constructor(e){super(),Ba(this,e,Qu,Ku,ai,{buttonClass:19,buttonLabel:1,buttonLabelClass:20,buttonHideLabel:21,buttonIcon:22,buttonTitle:23,panelClass:2,isActive:0,onshow:24,onhide:25},null,[-1,-1])}}var ed={Up:38,Down:40,Left:37,Right:39};function td(e){let t,n,r,o,i,a,l,s;const c=e[15].default,u=ui(c,e,e[14],null);return{c(){t=Ri("li"),n=Ri("input"),r=Li(),o=Ri("label"),u&&u.c(),_i(n,"type","radio"),_i(n,"class","implicit"),_i(n,"id",e[7]),_i(n,"name",e[0]),n.value=e[3],n.disabled=e[6],n.hidden=e[5],n.checked=e[4],_i(o,"for",e[7]),_i(o,"title",e[2]),_i(t,"class",i=kc(["PinturaRadioGroupOption",e[1]])),_i(t,"data-hidden",e[5]),_i(t,"data-disabled",e[6]),_i(t,"data-selected",e[4])},m(i,c){Pi(i,t,c),Ci(t,n),Ci(t,r),Ci(t,o),u&&u.m(o,null),a=!0,l||(s=[Fi(n,"change",Di(e[16])),Fi(n,"keydown",e[9]),Fi(n,"click",e[10])],l=!0)},p(e,r){let[l]=r;(!a||128&l)&&_i(n,"id",e[7]),(!a||1&l)&&_i(n,"name",e[0]),(!a||8&l)&&(n.value=e[3]),(!a||64&l)&&(n.disabled=e[6]),(!a||32&l)&&(n.hidden=e[5]),(!a||16&l)&&(n.checked=e[4]),u&&u.p&&(!a||16384&l)&&hi(u,c,e,e[14],a?pi(c,e[14],l,null):fi(e[14]),null),(!a||128&l)&&_i(o,"for",e[7]),(!a||4&l)&&_i(o,"title",e[2]),(!a||2&l&&i!==(i=kc(["PinturaRadioGroupOption",e[1]])))&&_i(t,"class",i),(!a||32&l)&&_i(t,"data-hidden",e[5]),(!a||64&l)&&_i(t,"data-disabled",e[6]),(!a||16&l)&&_i(t,"data-selected",e[4])},i(e){a||(Ca(u,e),a=!0)},o(e){Ta(u,e),a=!1},d(e){e&&Ei(t),u&&u.d(e),l=!1,oi(s)}}}function nd(e,t,n){let r,o,{$$slots:i={},$$scope:a}=t,{name:l}=t,{class:s}=t,{label:c}=t,{id:u}=t,{value:d}=t,{checked:p}=t,{onkeydown:h}=t,{onclick:f}=t,{hidden:m=!1}=t,{disabled:g=!1}=t;const y=Object.values(ed),$=ra("keysPressed");return ci(e,$,(e=>n(17,o=e))),e.$$set=e=>{"name"in e&&n(0,l=e.name),"class"in e&&n(1,s=e.class),"label"in e&&n(2,c=e.label),"id"in e&&n(11,u=e.id),"value"in e&&n(3,d=e.value),"checked"in e&&n(4,p=e.checked),"onkeydown"in e&&n(12,h=e.onkeydown),"onclick"in e&&n(13,f=e.onclick),"hidden"in e&&n(5,m=e.hidden),"disabled"in e&&n(6,g=e.disabled),"$$scope"in e&&n(14,a=e.$$scope)},e.$$.update=()=>{2049&e.$$.dirty&&n(7,r="".concat(l,"-").concat(u))},[l,s,c,d,p,m,g,r,$,e=>{h(e)},e=>{o.some((e=>y.includes(e)))||f(e)},u,h,f,a,i,function(t){oa.call(this,e,t)}]}class rd extends Na{constructor(e){super(),Ba(this,e,nd,td,ai,{name:0,class:1,label:2,id:11,value:3,checked:4,onkeydown:12,onclick:13,hidden:5,disabled:6})}}var od=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(((e,t)=>(Hn(t)?Hn(t[1]):t.options)?e.concat(Hn(t)?t[1]:t.options):(e.push(t),e)),[])};const id=(e,t,n)=>{let r;return Hn(e)?r={id:t,value:e[0],label:e[1],...e[2]||{}}:(r=e,r.id=null!=r.id?r.id:t),n?n(r):r};var ad=(e,t,n)=>U(e)?e(t,n):e;const ld=(e,t)=>e.map((e=>{let[n,r,o]=e;if(Hn(r))return[ad(n,t),ld(r,t)];{const e=[n,ad(r,t)];if(o){let n={...o};o.icon&&(n.icon=ad(o.icon,t)),e.push(n)}return e}}));var sd=(e,t)=>ld(e,t),cd=(e,t)=>Array.isArray(e)&&Array.isArray(t)?hl(e,t):e===t;function ud(e,t,n){const r=e.slice();return r[27]=t[n],r}const dd=e=>({option:1024&e[0]}),pd=e=>({option:e[27]});function hd(e,t,n){const r=e.slice();return r[27]=t[n],r}const fd=e=>({option:1024&e[0]}),md=e=>({option:e[27]}),gd=e=>({option:1024&e[0]}),yd=e=>({option:e[27]});function $d(e){let t,n,r,o,i,a=[],l=new Map,s=e[1]&&bd(e),c=e[10];const u=e=>e[27].id;for(let d=0;d<c.length;d+=1){let t=ud(e,c,d),n=u(t);l.set(n,a[d]=Id(n,t))}return{c(){t=Ri("fieldset"),s&&s.c(),n=Li(),r=Ri("ul");for(let e=0;e<a.length;e+=1)a[e].c();_i(r,"class","PinturaRadioGroupOptions"),_i(t,"class",o=kc(["PinturaRadioGroup",e[3]])),_i(t,"data-layout",e[5]),_i(t,"title",e[7])},m(e,o){Pi(e,t,o),s&&s.m(t,null),Ci(t,n),Ci(t,r);for(let t=0;t<a.length;t+=1)a[t].m(r,null);i=!0},p(e,d){e[1]?s?s.p(e,d):(s=bd(e),s.c(),s.m(t,n)):s&&(s.d(1),s=null),8419153&d[0]&&(c=e[10],Sa(),a=Aa(a,d,u,1,e,c,l,r,Ia,Id,null,ud),ka()),(!i||8&d[0]&&o!==(o=kc(["PinturaRadioGroup",e[3]])))&&_i(t,"class",o),(!i||32&d[0])&&_i(t,"data-layout",e[5]),(!i||128&d[0])&&_i(t,"title",e[7])},i(e){if(!i){for(let e=0;e<c.length;e+=1)Ca(a[e]);i=!0}},o(e){for(let t=0;t<a.length;t+=1)Ta(a[t]);i=!1},d(e){e&&Ei(t),s&&s.d();for(let t=0;t<a.length;t+=1)a[t].d()}}}function bd(e){let t,n,r;return{c(){t=Ri("legend"),n=Ai(e[1]),_i(t,"class",r=e[2]&&"implicit")},m(e,r){Pi(e,t,r),Ci(t,n)},p(e,o){2&o[0]&&ji(n,e[1]),4&o[0]&&r!==(r=e[2]&&"implicit")&&_i(t,"class",r)},d(e){e&&Ei(t)}}}function vd(e){let t,n;return t=new rd({props:{name:e[4],label:e[27].label,id:e[27].id,value:e[27].value,disabled:e[27].disabled,hidden:e[27].hidden,class:e[8],checked:e[12](e[27])===e[0],onkeydown:e[13](e[27]),onclick:e[14](e[27]),$$slots:{default:[Cd]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};16&n[0]&&(r.name=e[4]),1024&n[0]&&(r.label=e[27].label),1024&n[0]&&(r.id=e[27].id),1024&n[0]&&(r.value=e[27].value),1024&n[0]&&(r.disabled=e[27].disabled),1024&n[0]&&(r.hidden=e[27].hidden),256&n[0]&&(r.class=e[8]),1025&n[0]&&(r.checked=e[12](e[27])===e[0]),1024&n[0]&&(r.onkeydown=e[13](e[27])),1024&n[0]&&(r.onclick=e[14](e[27])),8389696&n[0]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function xd(e){let t,n,r,o,i,a,l=[],s=new Map;const c=e[22].group,u=ui(c,e,e[23],yd),d=u||function(e){let t,n,r=e[27].label+"";return{c(){t=Ri("span"),n=Ai(r),_i(t,"class","PinturaRadioGroupOptionGroupLabel")},m(e,r){Pi(e,t,r),Ci(t,n)},p(e,t){1024&t[0]&&r!==(r=e[27].label+"")&&ji(n,r)},d(e){e&&Ei(t)}}}(e);let p=e[27].options;const h=e=>e[27].id;for(let f=0;f<p.length;f+=1){let t=hd(e,p,f),n=h(t);s.set(n,l[f]=Rd(n,t))}return{c(){t=Ri("li"),d&&d.c(),n=Li(),r=Ri("ul");for(let e=0;e<l.length;e+=1)l[e].c();o=Li(),_i(r,"class","PinturaRadioGroupOptions"),_i(t,"class",i=kc(["PinturaRadioGroupOptionGroup",e[9]]))},m(e,i){Pi(e,t,i),d&&d.m(t,null),Ci(t,n),Ci(t,r);for(let t=0;t<l.length;t+=1)l[t].m(r,null);Ci(t,o),a=!0},p(e,n){u?u.p&&(!a||8389632&n[0])&&hi(u,c,e,e[23],a?pi(c,e[23],n,gd):fi(e[23]),yd):d&&d.p&&(!a||1024&n[0])&&d.p(e,a?n:[-1,-1]),8418641&n[0]&&(p=e[27].options,Sa(),l=Aa(l,n,h,1,e,p,s,r,Ia,Rd,null,hd),ka()),(!a||512&n[0]&&i!==(i=kc(["PinturaRadioGroupOptionGroup",e[9]])))&&_i(t,"class",i)},i(e){if(!a){Ca(d,e);for(let e=0;e<p.length;e+=1)Ca(l[e]);a=!0}},o(e){Ta(d,e);for(let t=0;t<l.length;t+=1)Ta(l[t]);a=!1},d(e){e&&Ei(t),d&&d.d(e);for(let t=0;t<l.length;t+=1)l[t].d()}}}function wd(e){let t,n;return t=new Qc({props:{$$slots:{default:[Sd]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};8389632&n[0]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function Sd(e){let t,n=e[27].icon+"";return{c(){t=Ii("g")},m(e,r){Pi(e,t,r),t.innerHTML=n},p(e,r){1024&r[0]&&n!==(n=e[27].icon+"")&&(t.innerHTML=n)},d(e){e&&Ei(t)}}}function kd(e){let t,n,r=e[27].label+"";return{c(){t=Ri("span"),n=Ai(r),_i(t,"class",e[6])},m(e,r){Pi(e,t,r),Ci(t,n)},p(e,o){1024&o[0]&&r!==(r=e[27].label+"")&&ji(n,r),64&o[0]&&_i(t,"class",e[6])},d(e){e&&Ei(t)}}}function Cd(e){let t;const n=e[22].option,r=ui(n,e,e[23],pd),o=r||function(e){let t,n,r,o=e[27].icon&&wd(e),i=!e[27].hideLabel&&kd(e);return{c(){o&&o.c(),t=Li(),i&&i.c(),n=Li()},m(e,a){o&&o.m(e,a),Pi(e,t,a),i&&i.m(e,a),Pi(e,n,a),r=!0},p(e,r){e[27].icon?o?(o.p(e,r),1024&r[0]&&Ca(o,1)):(o=wd(e),o.c(),Ca(o,1),o.m(t.parentNode,t)):o&&(Sa(),Ta(o,1,1,(()=>{o=null})),ka()),e[27].hideLabel?i&&(i.d(1),i=null):i?i.p(e,r):(i=kd(e),i.c(),i.m(n.parentNode,n))},i(e){r||(Ca(o),r=!0)},o(e){Ta(o),r=!1},d(e){o&&o.d(e),e&&Ei(t),i&&i.d(e),e&&Ei(n)}}}(e);return{c(){o&&o.c()},m(e,n){o&&o.m(e,n),t=!0},p(e,i){r?r.p&&(!t||8389632&i[0])&&hi(r,n,e,e[23],t?pi(n,e[23],i,dd):fi(e[23]),pd):o&&o.p&&(!t||1088&i[0])&&o.p(e,t?i:[-1,-1])},i(e){t||(Ca(o,e),t=!0)},o(e){Ta(o,e),t=!1},d(e){o&&o.d(e)}}}function Td(e){let t,n;return t=new Qc({props:{$$slots:{default:[Md]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};8389632&n[0]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function Md(e){let t,n=e[27].icon+"";return{c(){t=Ii("g")},m(e,r){Pi(e,t,r),t.innerHTML=n},p(e,r){1024&r[0]&&n!==(n=e[27].icon+"")&&(t.innerHTML=n)},d(e){e&&Ei(t)}}}function Pd(e){let t,n,r=e[27].label+"";return{c(){t=Ri("span"),n=Ai(r),_i(t,"class",e[6])},m(e,r){Pi(e,t,r),Ci(t,n)},p(e,o){1024&o[0]&&r!==(r=e[27].label+"")&&ji(n,r),64&o[0]&&_i(t,"class",e[6])},d(e){e&&Ei(t)}}}function Ed(e){let t;const n=e[22].option,r=ui(n,e,e[23],md),o=r||function(e){let t,n,r,o=e[27].icon&&Td(e),i=!e[27].hideLabel&&Pd(e);return{c(){o&&o.c(),t=Li(),i&&i.c(),n=Li()},m(e,a){o&&o.m(e,a),Pi(e,t,a),i&&i.m(e,a),Pi(e,n,a),r=!0},p(e,r){e[27].icon?o?(o.p(e,r),1024&r[0]&&Ca(o,1)):(o=Td(e),o.c(),Ca(o,1),o.m(t.parentNode,t)):o&&(Sa(),Ta(o,1,1,(()=>{o=null})),ka()),e[27].hideLabel?i&&(i.d(1),i=null):i?i.p(e,r):(i=Pd(e),i.c(),i.m(n.parentNode,n))},i(e){r||(Ca(o),r=!0)},o(e){Ta(o),r=!1},d(e){o&&o.d(e),e&&Ei(t),i&&i.d(e),e&&Ei(n)}}}(e);return{c(){o&&o.c()},m(e,n){o&&o.m(e,n),t=!0},p(e,i){r?r.p&&(!t||8389632&i[0])&&hi(r,n,e,e[23],t?pi(n,e[23],i,fd):fi(e[23]),md):o&&o.p&&(!t||1088&i[0])&&o.p(e,t?i:[-1,-1])},i(e){t||(Ca(o,e),t=!0)},o(e){Ta(o,e),t=!1},d(e){o&&o.d(e)}}}function Rd(e,t){let n,r,o;return r=new rd({props:{name:t[4],label:t[27].label,id:t[27].id,value:t[27].value,disabled:t[27].disabled,hidden:t[27].hidden,class:t[8],checked:t[12](t[27])===t[0],onkeydown:t[13](t[27]),onclick:t[14](t[27]),$$slots:{default:[Ed]},$$scope:{ctx:t}}}),{key:e,first:null,c(){n=zi(),Oa(r.$$.fragment),this.first=n},m(e,t){Pi(e,n,t),Da(r,e,t),o=!0},p(e,n){t=e;const o={};16&n[0]&&(o.name=t[4]),1024&n[0]&&(o.label=t[27].label),1024&n[0]&&(o.id=t[27].id),1024&n[0]&&(o.value=t[27].value),1024&n[0]&&(o.disabled=t[27].disabled),1024&n[0]&&(o.hidden=t[27].hidden),256&n[0]&&(o.class=t[8]),1025&n[0]&&(o.checked=t[12](t[27])===t[0]),1024&n[0]&&(o.onkeydown=t[13](t[27])),1024&n[0]&&(o.onclick=t[14](t[27])),8389696&n[0]&&(o.$$scope={dirty:n,ctx:t}),r.$set(o)},i(e){o||(Ca(r.$$.fragment,e),o=!0)},o(e){Ta(r.$$.fragment,e),o=!1},d(e){e&&Ei(n),_a(r,e)}}}function Id(e,t){let n,r,o,i,a;const l=[xd,vd],s=[];function c(e,t){return e[27].options?0:1}return r=c(t),o=s[r]=l[r](t),{key:e,first:null,c(){n=zi(),o.c(),i=zi(),this.first=n},m(e,t){Pi(e,n,t),s[r].m(e,t),Pi(e,i,t),a=!0},p(e,n){let a=r;r=c(t=e),r===a?s[r].p(t,n):(Sa(),Ta(s[a],1,1,(()=>{s[a]=null})),ka(),o=s[r],o?o.p(t,n):(o=s[r]=l[r](t),o.c()),Ca(o,1),o.m(i.parentNode,i))},i(e){a||(Ca(o),a=!0)},o(e){Ta(o),a=!1},d(e){e&&Ei(n),s[r].d(e),e&&Ei(i)}}}function Ad(e){let t,n,r,o=e[11].length&&$d(e);return{c(){o&&o.c(),t=Li(),n=zi()},m(e,i){o&&o.m(e,i),Pi(e,t,i),Pi(e,n,i),r=!0},p(e,n){e[11].length?o?(o.p(e,n),2048&n[0]&&Ca(o,1)):(o=$d(e),o.c(),Ca(o,1),o.m(t.parentNode,t)):o&&(Sa(),Ta(o,1,1,(()=>{o=null})),ka())},i(e){r||(Ca(o),Ca(!1),r=!0)},o(e){Ta(o),Ta(!1),r=!1},d(e){o&&o.d(e),e&&Ei(t),e&&Ei(n)}}}function Ld(e,t,n){let r,o,i,{$$slots:a={},$$scope:l}=t;const s=ta();let{label:c}=t,{hideLabel:u=!0}=t,{class:d}=t,{name:p="radio-group-"+Z()}=t,{selectedIndex:h=-1}=t,{options:f=[]}=t,{onchange:m}=t,{layout:g}=t,{optionMapper:y}=t,{optionFilter:$}=t,{value:b}=t,{optionLabelClass:v}=t,{title:x}=t,{locale:w}=t,{optionClass:S}=t,{optionGroupClass:k}=t;const C=e=>i.findIndex((t=>t.id===e.id)),T=(e,t)=>{n(0,h=C(e));const r={index:h,...e};(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e&&e(...n)})(m,r,t),s("change",r)};return e.$$set=e=>{"label"in e&&n(1,c=e.label),"hideLabel"in e&&n(2,u=e.hideLabel),"class"in e&&n(3,d=e.class),"name"in e&&n(4,p=e.name),"selectedIndex"in e&&n(0,h=e.selectedIndex),"options"in e&&n(15,f=e.options),"onchange"in e&&n(16,m=e.onchange),"layout"in e&&n(5,g=e.layout),"optionMapper"in e&&n(17,y=e.optionMapper),"optionFilter"in e&&n(18,$=e.optionFilter),"value"in e&&n(19,b=e.value),"optionLabelClass"in e&&n(6,v=e.optionLabelClass),"title"in e&&n(7,x=e.title),"locale"in e&&n(20,w=e.locale),"optionClass"in e&&n(8,S=e.optionClass),"optionGroupClass"in e&&n(9,k=e.optionGroupClass),"$$scope"in e&&n(23,l=e.$$scope)},e.$$.update=()=>{1343488&e.$$.dirty[0]&&n(11,r=sd($?f.filter($):f,w)),133120&e.$$.dirty[0]&&n(10,o=function(){let e=arguments.length>1?arguments[1]:void 0,t=0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((n=>(t++,Hn(n)?Hn(n[1])?{id:t,label:n[0],options:n[1].map((n=>id(n,++t,e)))}:id(n,t,e):n.options?{id:n.id||t,label:n.label,options:n.options.map((n=>id(n,++t,e)))}:id(n,t,e))))}(r,y)),1024&e.$$.dirty[0]&&n(21,i=od(o)),2654209&e.$$.dirty[0]&&h<0&&(n(0,h=i.findIndex((e=>cd(e.value,b)))),h<0&&n(0,h=(e=>e.findIndex((e=>void 0===e[0])))(f)))},[h,c,u,d,p,g,v,x,S,k,o,r,C,e=>t=>{var n;n=t.key,/enter| /i.test(n)&&T(e,t)},e=>t=>{T(e,t)},f,m,y,$,b,w,i,a,l]}class zd extends Na{constructor(e){super(),Ba(this,e,Ld,Ad,ai,{label:1,hideLabel:2,class:3,name:4,selectedIndex:0,options:15,onchange:16,layout:5,optionMapper:17,optionFilter:18,value:19,optionLabelClass:6,title:7,locale:20,optionClass:8,optionGroupClass:9},null,[-1,-1])}}function Fd(e){let t,n,r,o,i,a,l,s,c,u;return{c(){t=Ri("div"),n=Ri("button"),r=Ai("\u25b2"),i=Li(),a=Ri("button"),l=Ai("\u25bc"),_i(n,"type","button"),_i(n,"tabindex","-1"),_i(n,"aria-label",o="increase "+e[7]),_i(a,"type","button"),_i(a,"tabindex","-1"),_i(a,"aria-label",s="decrease "+e[7]),_i(t,"class","PinturaInputSpinners")},m(o,s){Pi(o,t,s),Ci(t,n),Ci(n,r),Ci(t,i),Ci(t,a),Ci(a,l),c||(u=[Fi(n,"click",e[17]),Fi(a,"click",e[18])],c=!0)},p(e,t){128&t&&o!==(o="increase "+e[7])&&_i(n,"aria-label",o),128&t&&s!==(s="decrease "+e[7])&&_i(a,"aria-label",s)},d(e){e&&Ei(t),c=!1,oi(u)}}}function Od(e){let t,n,r,o,i,a,l="number"===e[1]&&e[9]&&Fd(e);return{c(){t=Ri("div"),n=Ri("input"),o=Li(),l&&l.c(),_i(n,"class","PinturaInputField"),_i(n,"title",e[7]),_i(n,"type",e[1]),_i(n,"min",e[4]),_i(n,"max",e[5]),_i(n,"step",e[6]),_i(n,"inputmode",e[3]),n.value=r=e[14]?e[13]:e[0],_i(n,"style",e[11]),_i(n,"placeholder",e[8]),_i(n,"maxlength",e[12]),n.disabled=e[2],_i(n,"spellcheck","false"),_i(n,"autocorrect","off"),_i(n,"autocapitalize","off"),_i(t,"class","PinturaInput")},m(r,s){Pi(r,t,s),Ci(t,n),e[26](n),Ci(t,o),l&&l.m(t,null),i||(a=[Fi(n,"input",e[16]),Fi(n,"blur",(function(){ii(e[14]&&e[15])&&(e[14]&&e[15]).apply(this,arguments)})),Fi(n,"keydown",e[19]),Fi(n,"keyup",e[20])],i=!0)},p(o,i){let[a]=i;e=o,128&a&&_i(n,"title",e[7]),2&a&&_i(n,"type",e[1]),16&a&&_i(n,"min",e[4]),32&a&&_i(n,"max",e[5]),64&a&&_i(n,"step",e[6]),8&a&&_i(n,"inputmode",e[3]),24577&a&&r!==(r=e[14]?e[13]:e[0])&&n.value!==r&&(n.value=r),2048&a&&_i(n,"style",e[11]),256&a&&_i(n,"placeholder",e[8]),4096&a&&_i(n,"maxlength",e[12]),4&a&&(n.disabled=e[2]),"number"===e[1]&&e[9]?l?l.p(e,a):(l=Fd(e),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},i:Jo,o:Jo,d(n){n&&Ei(t),e[26](null),l&&l.d(),i=!1,oi(a)}}}function Dd(e,t,n){let r,o,i,a,l,s,c,{value:u}=t,{type:d="text"}=t,{disabled:p=!1}=t,{inputmode:h}=t,{min:f}=t,{max:m}=t,{step:g}=t,{onchange:y=x}=t,{onkeydown:$=x}=t,{title:b}=t,{stepMultiplier:v=10}=t,{placeholder:w}=t,{enableSpinButtons:S=!0}=t;const k=()=>{let e=s.value;return"number"===d&&(e="numeric"===h?parseInt(e,10):parseFloat(e),!Wn(e)||Number.isNaN(e)?e=f||0:r&&(e=sl(e,f,m))),e};let C=u;const T=()=>{const e=sl(k()+(c?g*v:g),f,m);e!==u&&(n(24,C=e),n(0,u=e),y(u))},M=()=>{const e=sl(k()-(c?g*v:g),f,m);e!==u&&(n(24,C=e),n(0,u=e),y(u))};return e.$$set=e=>{"value"in e&&n(0,u=e.value),"type"in e&&n(1,d=e.type),"disabled"in e&&n(2,p=e.disabled),"inputmode"in e&&n(3,h=e.inputmode),"min"in e&&n(4,f=e.min),"max"in e&&n(5,m=e.max),"step"in e&&n(6,g=e.step),"onchange"in e&&n(21,y=e.onchange),"onkeydown"in e&&n(22,$=e.onkeydown),"title"in e&&n(7,b=e.title),"stepMultiplier"in e&&n(23,v=e.stepMultiplier),"placeholder"in e&&n(8,w=e.placeholder),"enableSpinButtons"in e&&n(9,S=e.enableSpinButtons)},e.$$.update=()=>{48&e.$$.dirty&&n(14,r=Wn(f)&&Wn(m)),16778241&e.$$.dirty&&n(13,o=s===document.activeElement?C:u),32&e.$$.dirty&&n(25,i=m?(m+"").length:void 0),33554440&e.$$.dirty&&n(12,a="numeric"===h&&i?i:void 0),33554432&e.$$.dirty&&n(11,l=i?"min-width:".concat(i,"em"):void 0)},[u,d,p,h,f,m,g,b,w,S,s,l,a,o,r,()=>{n(24,C=k()),y(u)},()=>{n(24,C=s.value),y(k())},T,M,e=>{c=e.shiftKey,$(e);const{key:t}=e;/up|down/i.test(t)&&(/up/i.test(t)&&T(),/down/i.test(t)&&M(),e.preventDefault(),e.stopPropagation())},e=>{const{key:t}=e;/up|down/i.test(t)&&(e.preventDefault(),e.stopPropagation())},y,$,v,C,i,function(e){aa[e?"unshift":"push"]((()=>{s=e,n(10,s)}))}]}class _d extends Na{constructor(e){super(),Ba(this,e,Dd,Od,ai,{value:0,type:1,disabled:2,inputmode:3,min:4,max:5,step:6,onchange:21,onkeydown:22,title:7,stepMultiplier:23,placeholder:8,enableSpinButtons:9})}}const Bd=e=>({}),Nd=e=>({});function jd(e){let t,n,r,o,i=(e[2]||e[21])+"",a=e[6]&&Vd(e);return{c(){a&&a.c(),t=Li(),n=Ri("span"),_i(n,"class",r=kc(["PinturaButtonLabel",e[3],e[5]&&"implicit"]))},m(e,r){a&&a.m(e,r),Pi(e,t,r),Pi(e,n,r),n.innerHTML=i,o=!0},p(e,l){e[6]?a?(a.p(e,l),64&l[0]&&Ca(a,1)):(a=Vd(e),a.c(),Ca(a,1),a.m(t.parentNode,t)):a&&(Sa(),Ta(a,1,1,(()=>{a=null})),ka()),(!o||2097156&l[0])&&i!==(i=(e[2]||e[21])+"")&&(n.innerHTML=i),(!o||40&l[0]&&r!==(r=kc(["PinturaButtonLabel",e[3],e[5]&&"implicit"])))&&_i(n,"class",r)},i(e){o||(Ca(a),o=!0)},o(e){Ta(a),o=!1},d(e){a&&a.d(e),e&&Ei(t),e&&Ei(n)}}}function Wd(e){let t,n;return t=new _d({props:{value:e[10],onchange:e[17],type:"number",inputmode:"numeric",min:e[8].reduce(ep,1/0),max:e[8].reduce(tp,-1/0),enableSpinButtons:!1}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};1024&n[0]&&(r.value=e[10]),131072&n[0]&&(r.onchange=e[17]),256&n[0]&&(r.min=e[8].reduce(ep,1/0)),256&n[0]&&(r.max=e[8].reduce(tp,-1/0)),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function Vd(e){let t,n;return t=new Qc({props:{class:"PinturaButtonIcon",$$slots:{default:[Ud]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};536870976&n[0]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function Ud(e){let t;return{c(){t=Ii("g")},m(n,r){Pi(n,t,r),t.innerHTML=e[6]},p(e,n){64&n[0]&&(t.innerHTML=e[6])},d(e){e&&Ei(t)}}}function Hd(e){let t,n,r,o,i,a;const l=[Wd,jd],s=[];function c(e,t){return e[18]?0:1}return n=c(e),r=s[n]=l[n](e),{c(){t=Ri("span"),r.c(),_i(t,"slot","label"),_i(t,"title",o=ad(e[1],e[16])),_i(t,"class",i=kc(["PinturaButtonInner",e[18]&&"PinturaComboBox",e[4]]))},m(e,r){Pi(e,t,r),s[n].m(t,null),a=!0},p(e,u){let d=n;n=c(e),n===d?s[n].p(e,u):(Sa(),Ta(s[d],1,1,(()=>{s[d]=null})),ka(),r=s[n],r?r.p(e,u):(r=s[n]=l[n](e),r.c()),Ca(r,1),r.m(t,null)),(!a||65538&u[0]&&o!==(o=ad(e[1],e[16])))&&_i(t,"title",o),(!a||262160&u[0]&&i!==(i=kc(["PinturaButtonInner",e[18]&&"PinturaComboBox",e[4]])))&&_i(t,"class",i)},i(e){a||(Ca(r),a=!0)},o(e){Ta(r),a=!1},d(e){e&&Ei(t),s[n].d()}}}function Gd(e){let t,n,r=e[31].label+"";return{c(){t=Ri("span"),n=Ai(r),_i(t,"slot","group")},m(e,r){Pi(e,t,r),Ci(t,n)},p(e,t){1&t[1]&&r!==(r=e[31].label+"")&&ji(n,r)},d(e){e&&Ei(t)}}}function Zd(e){let t,n;return t=new Qc({props:{style:U(e[14])?e[14](e[31].value):e[14],$$slots:{default:[Xd]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};16384&n[0]|1&n[1]&&(r.style=U(e[14])?e[14](e[31].value):e[14]),536870912&n[0]|1&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function Xd(e){let t,n=e[31].icon+"";return{c(){t=Ii("g")},m(e,r){Pi(e,t,r),t.innerHTML=n},p(e,r){1&r[1]&&n!==(n=e[31].icon+"")&&(t.innerHTML=n)},d(e){e&&Ei(t)}}}function Yd(e){let t,n,r,o,i,a=e[31].label+"",l=e[31].sublabel&&qd(e);return{c(){t=Ri("span"),n=new Ui(!1),r=Li(),l&&l.c(),n.a=r,_i(t,"style",o=U(e[15])?e[15](e[31].value):e[15]),_i(t,"class",i=kc(["PinturaDropdownOptionLabel",e[11]]))},m(e,o){Pi(e,t,o),n.m(a,t),Ci(t,r),l&&l.m(t,null)},p(e,r){1&r[1]&&a!==(a=e[31].label+"")&&n.p(a),e[31].sublabel?l?l.p(e,r):(l=qd(e),l.c(),l.m(t,null)):l&&(l.d(1),l=null),32768&r[0]|1&r[1]&&o!==(o=U(e[15])?e[15](e[31].value):e[15])&&_i(t,"style",o),2048&r[0]&&i!==(i=kc(["PinturaDropdownOptionLabel",e[11]]))&&_i(t,"class",i)},d(e){e&&Ei(t),l&&l.d()}}}function qd(e){let t,n=e[31].sublabel+"";return{c(){t=Ri("span"),_i(t,"class","PinturaDropdownOptionSublabel")},m(e,r){Pi(e,t,r),t.innerHTML=n},p(e,r){1&r[1]&&n!==(n=e[31].sublabel+"")&&(t.innerHTML=n)},d(e){e&&Ei(t)}}}function Kd(e){let t,n,r,o=e[31].icon&&Zd(e),i=!e[31].hideLabel&&Yd(e);return{c(){t=Ri("span"),o&&o.c(),n=Li(),i&&i.c(),_i(t,"slot","option")},m(e,a){Pi(e,t,a),o&&o.m(t,null),Ci(t,n),i&&i.m(t,null),r=!0},p(e,r){e[31].icon?o?(o.p(e,r),1&r[1]&&Ca(o,1)):(o=Zd(e),o.c(),Ca(o,1),o.m(t,n)):o&&(Sa(),Ta(o,1,1,(()=>{o=null})),ka()),e[31].hideLabel?i&&(i.d(1),i=null):i?i.p(e,r):(i=Yd(e),i.c(),i.m(t,null))},i(e){r||(Ca(o),r=!0)},o(e){Ta(o),r=!1},d(e){e&&Ei(t),o&&o.d(),i&&i.d()}}}function Qd(e){let t,n,r,o,i,a;const l=e[27].controls,s=ui(l,e,e[29],Nd);return r=new zd({props:{class:"PinturaOptionsList PinturaScrollableContent",name:e[7],value:e[10],selectedIndex:e[9],optionFilter:e[12],optionMapper:e[13],optionLabelClass:kc(["PinturaDropdownOptionLabel",e[11]]),optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:e[19],onchange:e[22],$$slots:{option:[Kd,e=>{let{option:t}=e;return{31:t}},e=>{let{option:t}=e;return[0,t?1:0]}],group:[Gd,e=>{let{option:t}=e;return{31:t}},e=>{let{option:t}=e;return[0,t?1:0]}]},$$scope:{ctx:e}}}),{c(){t=Ri("div"),s&&s.c(),n=Li(),Oa(r.$$.fragment),_i(t,"slot","details"),_i(t,"class","PinturaOptionsListWrapper")},m(l,c){Pi(l,t,c),s&&s.m(t,null),Ci(t,n),Da(r,t,null),o=!0,i||(a=Fi(t,"keydown",e[24]),i=!0)},p(e,t){s&&s.p&&(!o||536870912&t[0])&&hi(s,l,e,e[29],o?pi(l,e[29],t,Bd):fi(e[29]),Nd);const n={};128&t[0]&&(n.name=e[7]),1024&t[0]&&(n.value=e[10]),512&t[0]&&(n.selectedIndex=e[9]),4096&t[0]&&(n.optionFilter=e[12]),8192&t[0]&&(n.optionMapper=e[13]),2048&t[0]&&(n.optionLabelClass=kc(["PinturaDropdownOptionLabel",e[11]])),524288&t[0]&&(n.options=e[19]),536922112&t[0]|1&t[1]&&(n.$$scope={dirty:t,ctx:e}),r.$set(n)},i(e){o||(Ca(s,e),Ca(r.$$.fragment,e),o=!0)},o(e){Ta(s,e),Ta(r.$$.fragment,e),o=!1},d(e){e&&Ei(t),s&&s.d(e),_a(r),i=!1,a()}}}function Jd(e){let t,n,r;function o(t){e[28](t)}let i={onshow:e[23],buttonClass:kc(["PinturaDropdownButton",e[0],e[5]&&"PinturaDropdownIconOnly"]),$$slots:{details:[Qd],label:[Hd]},$$scope:{ctx:e}};return void 0!==e[20]&&(i.isActive=e[20]),t=new Ju({props:i}),aa.push((()=>Fa(t,"isActive",o))),{c(){Oa(t.$$.fragment)},m(e,n){Da(t,e,n),r=!0},p(e,r){const o={};33&r[0]&&(o.buttonClass=kc(["PinturaDropdownButton",e[0],e[5]&&"PinturaDropdownIconOnly"])),540016638&r[0]&&(o.$$scope={dirty:r,ctx:e}),!n&&1048576&r[0]&&(n=!0,o.isActive=e[20],fa((()=>n=!1))),t.$set(o)},i(e){r||(Ca(t.$$.fragment,e),r=!0)},o(e){Ta(t.$$.fragment,e),r=!1},d(e){_a(t,e)}}}const ep=(e,t)=>{let[n]=t;return n<e?n:e},tp=(e,t)=>{let[n]=t;return n>e?n:e};function np(e,t,n){let r,o,i,{$$slots:a={},$$scope:l}=t,{class:s}=t,{title:c}=t,{label:u}=t,{labelClass:d}=t,{innerClass:p}=t,{hideLabel:h=!1}=t,{icon:f}=t,{name:m}=t,{options:g=[]}=t,{selectedIndex:y=-1}=t,{value:$}=t,{optionLabelClass:b}=t,{optionFilter:v}=t,{optionMapper:w}=t,{optionIconStyle:S}=t,{optionLabelStyle:k}=t,{locale:C}=t,{onchange:T=x}=t,{onload:M=x}=t,{ondestroy:P=x}=t,{enableInput:E=!1}=t;return Qi((()=>M({options:g}))),ea((()=>P({options:g}))),e.$$set=e=>{"class"in e&&n(0,s=e.class),"title"in e&&n(1,c=e.title),"label"in e&&n(2,u=e.label),"labelClass"in e&&n(3,d=e.labelClass),"innerClass"in e&&n(4,p=e.innerClass),"hideLabel"in e&&n(5,h=e.hideLabel),"icon"in e&&n(6,f=e.icon),"name"in e&&n(7,m=e.name),"options"in e&&n(8,g=e.options),"selectedIndex"in e&&n(9,y=e.selectedIndex),"value"in e&&n(10,$=e.value),"optionLabelClass"in e&&n(11,b=e.optionLabelClass),"optionFilter"in e&&n(12,v=e.optionFilter),"optionMapper"in e&&n(13,w=e.optionMapper),"optionIconStyle"in e&&n(14,S=e.optionIconStyle),"optionLabelStyle"in e&&n(15,k=e.optionLabelStyle),"locale"in e&&n(16,C=e.locale),"onchange"in e&&n(17,T=e.onchange),"onload"in e&&n(25,M=e.onload),"ondestroy"in e&&n(26,P=e.ondestroy),"enableInput"in e&&n(18,E=e.enableInput),"$$scope"in e&&n(29,l=e.$$scope)},e.$$.update=()=>{65792&e.$$.dirty[0]&&n(19,r=C?sd(g,C):g),525312&e.$$.dirty[0]&&n(21,o=r.reduce(((e,t)=>{if(e)return e;const n=Array.isArray(t)?t:[t,t],[r,o]=n;return cd(r,$)?o:void 0}),void 0)||(e=>{const t=e.find((e=>void 0===e[0]));if(t)return t[1]})(r)||$)},[s,c,u,d,p,h,f,m,g,y,$,b,v,w,S,k,C,T,E,r,i,o,e=>{n(21,o=e.value),T(e),n(20,i=!1)},e=>{let{e:t,panel:n}=e;if(t&&t.key&&/up|down/i.test(t.key))return Nu(n.querySelector("input:not([disabled])"));Nu(n.querySelector("fieldset"))},e=>{/tab/i.test(e.key)&&e.preventDefault()},M,P,a,function(e){i=e,n(20,i)},l]}class rp extends Na{constructor(e){super(),Ba(this,e,np,Jd,ai,{class:0,title:1,label:2,labelClass:3,innerClass:4,hideLabel:5,icon:6,name:7,options:8,selectedIndex:9,value:10,optionLabelClass:11,optionFilter:12,optionMapper:13,optionIconStyle:14,optionLabelStyle:15,locale:16,onchange:17,onload:25,ondestroy:26,enableInput:18},null,[-1,-1])}}function op(e){let t;return{c(){t=Ri("div"),_i(t,"slot","details")},m(n,r){Pi(n,t,r),e[14](t)},p:Jo,d(n){n&&Ei(t),e[14](null)}}}function ip(e){let t,n,r;function o(t){e[15](t)}let i={buttonLabel:e[0],buttonClass:e[1],buttonIcon:e[2],buttonHideLabel:e[3],buttonTitle:e[4],buttonLabelClass:e[5],onshow:e[6],onhide:e[7],$$slots:{details:[op]},$$scope:{ctx:e}};return void 0!==e[9]&&(i.isActive=e[9]),t=new Ju({props:i}),aa.push((()=>Fa(t,"isActive",o))),{c(){Oa(t.$$.fragment)},m(e,n){Da(t,e,n),r=!0},p(e,r){let[o]=r;const i={};1&o&&(i.buttonLabel=e[0]),2&o&&(i.buttonClass=e[1]),4&o&&(i.buttonIcon=e[2]),8&o&&(i.buttonHideLabel=e[3]),16&o&&(i.buttonTitle=e[4]),32&o&&(i.buttonLabelClass=e[5]),64&o&&(i.onshow=e[6]),128&o&&(i.onhide=e[7]),65792&o&&(i.$$scope={dirty:o,ctx:e}),!n&&512&o&&(n=!0,i.isActive=e[9],fa((()=>n=!1))),t.$set(i)},i(e){r||(Ca(t.$$.fragment,e),r=!0)},o(e){Ta(t.$$.fragment,e),r=!1},d(e){_a(t,e)}}}function ap(e,t,n){let r,{buttonLabel:o}=t,{buttonClass:i}=t,{buttonIcon:a}=t,{buttonHideLabel:l}=t,{buttonTitle:s}=t,{buttonLabelClass:c}=t,{root:u}=t,{ondestroy:d=x}=t,{onshow:p=x}=t,{onhide:h=x}=t,f=!1;return ea(d),e.$$set=e=>{"buttonLabel"in e&&n(0,o=e.buttonLabel),"buttonClass"in e&&n(1,i=e.buttonClass),"buttonIcon"in e&&n(2,a=e.buttonIcon),"buttonHideLabel"in e&&n(3,l=e.buttonHideLabel),"buttonTitle"in e&&n(4,s=e.buttonTitle),"buttonLabelClass"in e&&n(5,c=e.buttonLabelClass),"root"in e&&n(10,u=e.root),"ondestroy"in e&&n(11,d=e.ondestroy),"onshow"in e&&n(6,p=e.onshow),"onhide"in e&&n(7,h=e.onhide)},e.$$.update=()=>{1280&e.$$.dirty&&r&&u&&r.firstChild!==u&&(r.hasChildNodes()?r.replaceChild(u,r.firstChild):r.append(u))},[o,i,a,l,s,c,p,h,r,f,u,d,()=>n(9,f=!1),()=>n(9,f=!0),function(e){aa[e?"unshift":"push"]((()=>{r=e,n(8,r)}))},function(e){f=e,n(9,f)}]}class lp extends Na{constructor(e){super(),Ba(this,e,ap,ip,ai,{buttonLabel:0,buttonClass:1,buttonIcon:2,buttonHideLabel:3,buttonTitle:4,buttonLabelClass:5,root:10,ondestroy:11,onshow:6,onhide:7,hide:12,show:13})}get hide(){return this.$$.ctx[12]}get show(){return this.$$.ctx[13]}}var sp=(e,t,n)=>(e-t)/(n-t);const cp=e=>({}),up=e=>({});function dp(e){let t,n,r,o,i,a,l,s;return n=new Qc({props:{$$slots:{default:[pp]},$$scope:{ctx:e}}}),i=new Qc({props:{$$slots:{default:[hp]},$$scope:{ctx:e}}}),{c(){t=Ri("button"),Oa(n.$$.fragment),r=Li(),o=Ri("button"),Oa(i.$$.fragment),_i(t,"type","button"),_i(t,"aria-label","Increase"),_i(o,"type","button"),_i(o,"aria-label","Decrease")},m(c,u){Pi(c,t,u),Da(n,t,null),Pi(c,r,u),Pi(c,o,u),Da(i,o,null),a=!0,l||(s=[Fi(t,"pointerdown",e[20](1)),Fi(o,"pointerdown",e[20](-1))],l=!0)},p(e,t){const r={};128&t[1]&&(r.$$scope={dirty:t,ctx:e}),n.$set(r);const o={};128&t[1]&&(o.$$scope={dirty:t,ctx:e}),i.$set(o)},i(e){a||(Ca(n.$$.fragment,e),Ca(i.$$.fragment,e),a=!0)},o(e){Ta(n.$$.fragment,e),Ta(i.$$.fragment,e),a=!1},d(e){e&&Ei(t),_a(n),e&&Ei(r),e&&Ei(o),_a(i),l=!1,oi(s)}}}function pp(e){let t;return{c(){t=Ii("path"),_i(t,"d","M8 12 h8 M12 8 v8")},m(e,n){Pi(e,t,n)},p:Jo,d(e){e&&Ei(t)}}}function hp(e){let t;return{c(){t=Ii("path"),_i(t,"d","M9 12 h6")},m(e,n){Pi(e,t,n)},p:Jo,d(e){e&&Ei(t)}}}function fp(e){let t,n,r,o,i,a,l,s,c,u,d,p,h,f,m,g,y;const $=e[36].default,b=ui($,e,e[38],null),v=e[36].knob,x=ui(v,e,e[38],up);let w=e[9]&&dp(e);return{c(){t=Ri("div"),n=Ri("div"),r=Ri("input"),i=Li(),a=Ri("div"),b&&b.c(),s=Li(),c=Ri("div"),u=Ri("div"),x&&x.c(),h=Li(),w&&w.c(),_i(r,"type","range"),_i(r,"id",e[3]),_i(r,"min",e[0]),_i(r,"max",e[1]),_i(r,"step",e[2]),r.value=e[14],_i(r,"style",o=e[10]?"pointer-events:none":""),_i(a,"class",l=kc(["PinturaSliderTrack",e[5]])),_i(a,"style",e[4]),_i(u,"class",d=kc(["PinturaSliderKnob",e[7]])),_i(u,"style",e[6]),_i(c,"class","PinturaSliderKnobController"),_i(c,"style",e[17]),_i(n,"class","PinturaSliderControl"),_i(n,"style",p="--slider-position:"+Math.round(e[15])),_i(t,"class",f=kc(["PinturaSlider",e[12]])),_i(t,"data-direction",e[8])},m(o,l){Pi(o,t,l),Ci(t,n),Ci(n,r),e[37](r),Ci(n,i),Ci(n,a),b&&b.m(a,null),Ci(n,s),Ci(n,c),Ci(c,u),x&&x.m(u,null),Ci(t,h),w&&w.m(t,null),m=!0,g||(y=[Fi(r,"input",e[18]),Fi(r,"nudge",e[19]),$i(uu.call(null,r)),Fi(n,"pointerdown",(function(){ii(e[11]&&e[13])&&(e[11]&&e[13]).apply(this,arguments)}))],g=!0)},p(i,s){e=i,(!m||8&s[0])&&_i(r,"id",e[3]),(!m||1&s[0])&&_i(r,"min",e[0]),(!m||2&s[0])&&_i(r,"max",e[1]),(!m||4&s[0])&&_i(r,"step",e[2]),(!m||16384&s[0])&&(r.value=e[14]),(!m||1024&s[0]&&o!==(o=e[10]?"pointer-events:none":""))&&_i(r,"style",o),b&&b.p&&(!m||128&s[1])&&hi(b,$,e,e[38],m?pi($,e[38],s,null):fi(e[38]),null),(!m||32&s[0]&&l!==(l=kc(["PinturaSliderTrack",e[5]])))&&_i(a,"class",l),(!m||16&s[0])&&_i(a,"style",e[4]),x&&x.p&&(!m||128&s[1])&&hi(x,v,e,e[38],m?pi(v,e[38],s,cp):fi(e[38]),up),(!m||128&s[0]&&d!==(d=kc(["PinturaSliderKnob",e[7]])))&&_i(u,"class",d),(!m||64&s[0])&&_i(u,"style",e[6]),(!m||131072&s[0])&&_i(c,"style",e[17]),(!m||32768&s[0]&&p!==(p="--slider-position:"+Math.round(e[15])))&&_i(n,"style",p),e[9]?w?(w.p(e,s),512&s[0]&&Ca(w,1)):(w=dp(e),w.c(),Ca(w,1),w.m(t,null)):w&&(Sa(),Ta(w,1,1,(()=>{w=null})),ka()),(!m||4096&s[0]&&f!==(f=kc(["PinturaSlider",e[12]])))&&_i(t,"class",f),(!m||256&s[0])&&_i(t,"data-direction",e[8])},i(e){m||(Ca(b,e),Ca(x,e),Ca(w),m=!0)},o(e){Ta(b,e),Ta(x,e),Ta(w),m=!1},d(n){n&&Ei(t),e[37](null),b&&b.d(n),x&&x.d(n),w&&w.d(),g=!1,oi(y)}}}function mp(e,t,n){let r,o,i,a,l,s,c,u,d,p,h,f,m,g,y,{$$slots:$={},$$scope:b}=t,{min:v=0}=t,{max:w=100}=t,{step:S=1}=t,{id:k}=t,{value:C=0}=t,{valueMin:T}=t,{valueMax:M}=t,{trackStyle:P}=t,{trackClass:E}=t,{knobStyle:R}=t,{knobClass:I}=t,{ongrab:A=x}=t,{onchange:L=x}=t,{onrelease:z=x}=t,{onexceed:F=x}=t,{direction:O="x"}=t,{getValue:D=ae}=t,{setValue:_=ae}=t,{enableSpinButtons:B=!0}=t,{enableForceUseKnob:N=!1}=t,{enableStopPropagation:j=!0}=t,{enablePointerdownListener:W=!0}=t,{maxInteractionDistance:U=6}=t,{class:H}=t;const G=e=>_(((e,t)=>(t=1/t,Math.round(e*t)/t))(sl(e,v,w),S),C),Z=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{grabbed:i=!1,released:a=!1}=r,l=G(v+e/t*o),s=T||v,c=M||w;n(21,C=V(l)?l:sl(l,s,c)),y!==l&&(y=l,!V(l)&&(l<s||l>c)&&F(C,l),C!==g&&(g=C,i&&A(C),L(C),a&&z(C)))};let X;const Y=e=>{const t=e[u]-m;Z(f+t,h)},q=e=>{h=void 0,document.documentElement.removeEventListener("pointermove",Y),document.documentElement.removeEventListener("pointerup",q),L(C),z(C)},K=()=>{n(21,C=G(r+J*S)),L(C)};let Q,J=1,ee=!1;const te=e=>{clearTimeout(Q),ee||K(),z(C),document.removeEventListener("pointerup",te)};return e.$$set=e=>{"min"in e&&n(0,v=e.min),"max"in e&&n(1,w=e.max),"step"in e&&n(2,S=e.step),"id"in e&&n(3,k=e.id),"value"in e&&n(21,C=e.value),"valueMin"in e&&n(22,T=e.valueMin),"valueMax"in e&&n(23,M=e.valueMax),"trackStyle"in e&&n(4,P=e.trackStyle),"trackClass"in e&&n(5,E=e.trackClass),"knobStyle"in e&&n(6,R=e.knobStyle),"knobClass"in e&&n(7,I=e.knobClass),"ongrab"in e&&n(24,A=e.ongrab),"onchange"in e&&n(25,L=e.onchange),"onrelease"in e&&n(26,z=e.onrelease),"onexceed"in e&&n(27,F=e.onexceed),"direction"in e&&n(8,O=e.direction),"getValue"in e&&n(28,D=e.getValue),"setValue"in e&&n(29,_=e.setValue),"enableSpinButtons"in e&&n(9,B=e.enableSpinButtons),"enableForceUseKnob"in e&&n(10,N=e.enableForceUseKnob),"enableStopPropagation"in e&&n(30,j=e.enableStopPropagation),"enablePointerdownListener"in e&&n(11,W=e.enablePointerdownListener),"maxInteractionDistance"in e&&n(31,U=e.maxInteractionDistance),"class"in e&&n(12,H=e.class),"$$scope"in e&&n(38,b=e.$$scope)},e.$$.update=()=>{270532608&e.$$.dirty[0]&&n(14,r=void 0!==C?D(C):0),3&e.$$.dirty[0]&&(o=w-v),16387&e.$$.dirty[0]&&n(33,i=sp(r,v,w)),4&e.$$.dirty[1]&&n(15,a=100*i),256&e.$$.dirty[0]&&n(34,l=O.toUpperCase()),256&e.$$.dirty[0]&&n(35,s="x"===O?"Width":"Height"),16&e.$$.dirty[1]&&(c="offset"+s),e.$$.dirty[1],8&e.$$.dirty[1]&&(u="page"+l),32768&e.$$.dirty[0]|8&e.$$.dirty[1]&&n(17,d="transform: translate".concat(l,"(").concat(a,"%)"))},[v,w,S,k,P,E,R,I,O,B,N,W,H,e=>{let t=!1;j&&e.stopPropagation(),clearTimeout(X);const n=p.getBoundingClientRect();if(h=p[c],m=e[u],f=m-n[O],N){if(Math.abs(f-i*h)>U)return;t=!0,e.stopPropagation()}return document.activeElement!==p&&p.focus(),Z(f,h,{grabbed:!0}),document.documentElement.addEventListener("pointermove",Y),document.documentElement.addEventListener("pointerup",q),t},r,a,p,d,e=>{h||(n(21,C=_(parseFloat(e.target.value))),C!==g&&(g=C,L(C)))},e=>{const t=p[c];Z(r/o*t+e.detail[O],t),clearTimeout(X),X=setTimeout((()=>{z(C)}),250)},e=>t=>{clearTimeout(X),J=e,ee=!1,Q=setInterval((()=>{ee=!0,K()}),100),document.addEventListener("pointercancel",te),document.addEventListener("pointerup",te)},C,T,M,A,L,z,F,D,_,j,U,e=>{const t=p.getBoundingClientRect(),n=e[u]-t[O],r=p[c];return Math.abs(n-i*r)},i,l,s,$,function(e){aa[e?"unshift":"push"]((()=>{p=e,n(16,p)}))},b]}class gp extends Na{constructor(e){super(),Ba(this,e,mp,fp,ai,{min:0,max:1,step:2,id:3,value:21,valueMin:22,valueMax:23,trackStyle:4,trackClass:5,knobStyle:6,knobClass:7,ongrab:24,onchange:25,onrelease:26,onexceed:27,direction:8,getValue:28,setValue:29,enableSpinButtons:9,enableForceUseKnob:10,enableStopPropagation:30,enablePointerdownListener:11,maxInteractionDistance:31,class:12,eventDistanceToKnob:32,handlePointerDown:13},null,[-1,-1])}get eventDistanceToKnob(){return this.$$.ctx[32]}get handlePointerDown(){return this.$$.ctx[13]}}function yp(e){let t,n;return t=new Qc({props:{class:"PinturaButtonIcon",$$slots:{default:[$p]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};1048580&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function $p(e){let t;return{c(){t=Ii("g")},m(n,r){Pi(n,t,r),t.innerHTML=e[2]},p(e,n){4&n&&(t.innerHTML=e[2])},d(e){e&&Ei(t)}}}function bp(e){let t,n,r=ad(e[8],e[6])+"";return{c(){t=Ri("span"),n=Ai(r),_i(t,"class","PinturaButtonLabelPrefix")},m(e,r){Pi(e,t,r),Ci(t,n)},p(e,t){320&t&&r!==(r=ad(e[8],e[6])+"")&&ji(n,r)},d(e){e&&Ei(t)}}}function vp(e){let t,n,r,o,i,a,l,s,c,u=e[2]&&yp(e),d=e[8]&&bp(e);return{c(){t=Ri("span"),u&&u.c(),n=Li(),d&&d.c(),r=Li(),o=Ri("span"),i=Ai(e[9]),_i(o,"class",a=kc(["PinturaButtonLabel",e[3],e[5]&&"implicit"])),_i(t,"slot","label"),_i(t,"title",l=ad(e[1],e[6])),_i(t,"class",s=kc(["PinturaButtonInner",e[4]]))},m(e,a){Pi(e,t,a),u&&u.m(t,null),Ci(t,n),d&&d.m(t,null),Ci(t,r),Ci(t,o),Ci(o,i),c=!0},p(e,p){e[2]?u?(u.p(e,p),4&p&&Ca(u,1)):(u=yp(e),u.c(),Ca(u,1),u.m(t,n)):u&&(Sa(),Ta(u,1,1,(()=>{u=null})),ka()),e[8]?d?d.p(e,p):(d=bp(e),d.c(),d.m(t,r)):d&&(d.d(1),d=null),(!c||512&p)&&ji(i,e[9]),(!c||40&p&&a!==(a=kc(["PinturaButtonLabel",e[3],e[5]&&"implicit"])))&&_i(o,"class",a),(!c||66&p&&l!==(l=ad(e[1],e[6])))&&_i(t,"title",l),(!c||16&p&&s!==(s=kc(["PinturaButtonInner",e[4]])))&&_i(t,"class",s)},i(e){c||(Ca(u),c=!0)},o(e){Ta(u),c=!1},d(e){e&&Ei(t),u&&u.d(),d&&d.d()}}}function xp(e){let t,n,r,o,i;const a=[e[12],{value:e[7]},{onchange:e[11]}];let l={};for(let s=0;s<a.length;s+=1)l=ti(l,a[s]);return n=new gp({props:l}),{c(){t=Ri("div"),Oa(n.$$.fragment),_i(t,"slot","details")},m(a,l){Pi(a,t,l),Da(n,t,null),r=!0,o||(i=Fi(t,"keydown",e[10]),o=!0)},p(e,t){const r=6272&t?La(a,[4096&t&&za(e[12]),128&t&&{value:e[7]},2048&t&&{onchange:e[11]}]):{};n.$set(r)},i(e){r||(Ca(n.$$.fragment,e),r=!0)},o(e){Ta(n.$$.fragment,e),r=!1},d(e){e&&Ei(t),_a(n),o=!1,i()}}}function wp(e){let t,n;return t=new Ju({props:{panelClass:"PinturaSliderPanel",buttonClass:kc(["PinturaSliderButton",e[0],e[5]&&"PinturaSliderIconOnly"]),$$slots:{details:[xp],label:[vp]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){let[r]=n;const o={};33&r&&(o.buttonClass=kc(["PinturaSliderButton",e[0],e[5]&&"PinturaSliderIconOnly"])),1053694&r&&(o.$$scope={dirty:r,ctx:e}),t.$set(o)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function Sp(e,t,n){const r=["class","title","label","icon","labelClass","innerClass","hideLabel","locale","value","onchange","labelPrefix"];let o=gi(t,r),{class:i}=t,{title:a}=t,{label:l=Math.round}=t,{icon:s}=t,{labelClass:c}=t,{innerClass:u}=t,{hideLabel:d=!1}=t,{locale:p}=t,{value:h}=t,{onchange:f=x}=t,{labelPrefix:m}=t;const{min:g,max:y,getValue:$=ae}=o;let b;const v=e=>n(9,b=(e=>U(l)?l($(e),g,y,e):l)(e));return e.$$set=e=>{t=ti(ti({},t),mi(e)),n(12,o=gi(t,r)),"class"in e&&n(0,i=e.class),"title"in e&&n(1,a=e.title),"label"in e&&n(13,l=e.label),"icon"in e&&n(2,s=e.icon),"labelClass"in e&&n(3,c=e.labelClass),"innerClass"in e&&n(4,u=e.innerClass),"hideLabel"in e&&n(5,d=e.hideLabel),"locale"in e&&n(6,p=e.locale),"value"in e&&n(7,h=e.value),"onchange"in e&&n(14,f=e.onchange),"labelPrefix"in e&&n(8,m=e.labelPrefix)},e.$$.update=()=>{8320&e.$$.dirty&&v(h)},[i,a,s,c,u,d,p,h,m,b,e=>{/tab/i.test(e.key)&&e.preventDefault()},e=>{v(e),f(e)},o,l,f]}class kp extends Na{constructor(e){super(),Ba(this,e,Sp,wp,ai,{class:0,title:1,label:13,icon:2,labelClass:3,innerClass:4,hideLabel:5,locale:6,value:7,onchange:14,labelPrefix:8})}}function Cp(e){let t,n,r=ad(e[0],e[1])+"";return{c(){t=Ri("span"),n=Ai(r),_i(t,"class",e[3])},m(e,r){Pi(e,t,r),Ci(t,n)},p(e,o){3&o&&r!==(r=ad(e[0],e[1])+"")&&ji(n,r),8&o&&_i(t,"class",e[3])},d(e){e&&Ei(t)}}}function Tp(e){let t,n,r,o,i=e[0]&&Cp(e);return r=new ah({props:{items:e[2]}}),{c(){t=Ri("li"),i&&i.c(),n=Li(),Oa(r.$$.fragment),_i(t,"class","PinturaShapeStyle")},m(e,a){Pi(e,t,a),i&&i.m(t,null),Ci(t,n),Da(r,t,null),o=!0},p(e,o){let[a]=o;e[0]?i?i.p(e,a):(i=Cp(e),i.c(),i.m(t,n)):i&&(i.d(1),i=null);const l={};4&a&&(l.items=e[2]),r.$set(l)},i(e){o||(Ca(r.$$.fragment,e),o=!0)},o(e){Ta(r.$$.fragment,e),o=!1},d(e){e&&Ei(t),i&&i.d(),_a(r)}}}function Mp(e,t,n){let r,{title:o}=t,{locale:i}=t,{items:a}=t,{hideTitle:l=!1}=t;return e.$$set=e=>{"title"in e&&n(0,o=e.title),"locale"in e&&n(1,i=e.locale),"items"in e&&n(2,a=e.items),"hideTitle"in e&&n(4,l=e.hideTitle)},e.$$.update=()=>{16&e.$$.dirty&&n(3,r="PinturaShapeStyleLabel"+(l?" implicit":""))},[o,i,a,r,l]}class Pp extends Na{constructor(e){super(),Ba(this,e,Mp,Tp,ai,{title:0,locale:1,items:2,hideTitle:4})}}var Ep=(e,t,n)=>{let r,o,i;const a=Math.floor(6*e),l=6*e-a,s=n*(1-t),c=n*(1-l*t),u=n*(1-(1-l)*t);switch(a%6){case 0:r=n,o=u,i=s;break;case 1:r=c,o=n,i=s;break;case 2:r=s,o=n,i=u;break;case 3:r=s,o=c,i=n;break;case 4:r=u,o=s,i=n;break;case 5:r=n,o=s,i=c}return[r,o,i]};function Rp(e){let t,n,r;return{c(){t=Ri("div"),n=Ri("span"),_i(t,"class","PinturaColorPreview"),_i(t,"title",e[0]),_i(t,"style",r="--color:"+e[1])},m(e,r){Pi(e,t,r),Ci(t,n)},p(e,n){let[o]=n;1&o&&_i(t,"title",e[0]),2&o&&r!==(r="--color:"+e[1])&&_i(t,"style",r)},i:Jo,o:Jo,d(e){e&&Ei(t)}}}function Ip(e,t,n){let r,{color:o}=t,{title:i}=t;return e.$$set=e=>{"color"in e&&n(2,o=e.color),"title"in e&&n(0,i=e.title)},e.$$.update=()=>{4&e.$$.dirty&&n(1,r=o?Jn(o):"transparent")},[i,r,o]}class Ap extends Na{constructor(e){super(),Ba(this,e,Ip,Rp,ai,{color:2,title:0})}}var Lp=e=>(e=e.trim(),/^rgba/.test(e)?e.substr(5).split(",").map(parseFloat).map(((e,t)=>e/(3===t?1:255))):/^rgb/.test(e)?e.substr(4).split(",").map(parseFloat).map((e=>e/255)):/^#/.test(e)?(e=>{const[,t,n,r,o]=e.split("");e=e.length>=4&&e.length<=5?"#".concat(t).concat(t).concat(n).concat(n).concat(r).concat(r).concat(o?"".concat(o).concat(o):""):e;const[i,a,l,s,c]=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e)||[];if(i)return[a,l,s,c].filter((e=>void 0!==e)).map((e=>parseInt(e,16)/255))})(e):/[0-9]{1,3}\s?,\s?[0-9]{1,3}\s?,\s?[0-9]{1,3}/.test(e)?e.split(",").map((e=>parseInt(e,10))).map((e=>e/255)):void 0);function zp(e){let t,n;return{c(){t=Ri("span"),n=Ai(e[0])},m(e,r){Pi(e,t,r),Ci(t,n)},p(e,t){1&t[0]&&ji(n,e[0])},d(e){e&&Ei(t)}}}function Fp(e){let t,n,r,o;n=new Ap({props:{color:e[4],title:ad(e[8],e[10])}});let i=!e[9]&&zp(e);return{c(){t=Ri("span"),Oa(n.$$.fragment),r=Li(),i&&i.c(),_i(t,"slot","label"),_i(t,"class","PinturaButtonLabel")},m(e,a){Pi(e,t,a),Da(n,t,null),Ci(t,r),i&&i.m(t,null),o=!0},p(e,r){const o={};16&r[0]&&(o.color=e[4]),1280&r[0]&&(o.title=ad(e[8],e[10])),n.$set(o),e[9]?i&&(i.d(1),i=null):i?i.p(e,r):(i=zp(e),i.c(),i.m(t,null))},i(e){o||(Ca(n.$$.fragment,e),o=!0)},o(e){Ta(n.$$.fragment,e),o=!1},d(e){e&&Ei(t),_a(n),i&&i.d()}}}function Op(e){let t,n,r,o,i,a,l,s,c,u,d,p,h,f;c=new gp({props:{class:"PinturaHuePicker",knobStyle:"background-color:"+e[20],onchange:e[26],value:e[15],min:0,max:1,step:.01}});let m=e[11]&&Dp(e),g=e[14]&&_p(e);return{c(){t=Ri("div"),n=Ri("div"),r=Ri("div"),o=Ri("div"),s=Li(),Oa(c.$$.fragment),u=Li(),m&&m.c(),d=Li(),g&&g.c(),_i(o,"role","button"),_i(o,"aria-label","Saturation slider"),_i(o,"class","PinturaPickerKnob"),_i(o,"tabindex","0"),_i(o,"style",i="background-color:".concat(e[19],";")),_i(r,"class","PinturaPickerKnobController"),_i(r,"style",a="transform:translate(".concat(e[24],"%,").concat(e[23],"%)")),_i(n,"class","PinturaSaturationPicker"),_i(n,"style",l="background-color: "+e[20]),_i(t,"class","PinturaPicker")},m(i,a){Pi(i,t,a),Ci(t,n),Ci(n,r),Ci(r,o),e[37](n),Ci(t,s),Da(c,t,null),Ci(t,u),m&&m.m(t,null),Ci(t,d),g&&g.m(t,null),p=!0,h||(f=[Fi(o,"nudge",e[29]),$i(uu.call(null,o,{preventDefault:!0})),Fi(n,"pointerdown",e[28])],h=!0)},p(e,s){(!p||524288&s[0]&&i!==(i="background-color:".concat(e[19],";")))&&_i(o,"style",i),(!p||25165824&s[0]&&a!==(a="transform:translate(".concat(e[24],"%,").concat(e[23],"%)")))&&_i(r,"style",a),(!p||1048576&s[0]&&l!==(l="background-color: "+e[20]))&&_i(n,"style",l);const u={};1048576&s[0]&&(u.knobStyle="background-color:"+e[20]),32768&s[0]&&(u.value=e[15]),c.$set(u),e[11]?m?(m.p(e,s),2048&s[0]&&Ca(m,1)):(m=Dp(e),m.c(),Ca(m,1),m.m(t,d)):m&&(Sa(),Ta(m,1,1,(()=>{m=null})),ka()),e[14]?g?g.p(e,s):(g=_p(e),g.c(),g.m(t,null)):g&&(g.d(1),g=null)},i(e){p||(Ca(c.$$.fragment,e),Ca(m),p=!0)},o(e){Ta(c.$$.fragment,e),Ta(m),p=!1},d(n){n&&Ei(t),e[37](null),_a(c),m&&m.d(),g&&g.d(),h=!1,oi(f)}}}function Dp(e){let t,n;return t=new gp({props:{class:"PinturaOpacityPicker",knobStyle:"background-color:"+e[17],trackStyle:"background-image:linear-gradient(to right,".concat(e[18],",").concat(e[19],")"),onchange:e[27],value:e[16],min:0,max:1,step:.01}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};131072&n[0]&&(r.knobStyle="background-color:"+e[17]),786432&n[0]&&(r.trackStyle="background-image:linear-gradient(to right,".concat(e[18],",").concat(e[19],")")),65536&n[0]&&(r.value=e[16]),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function _p(e){let t,n,r;return{c(){t=Ri("input"),_i(t,"class","PinturaColorPickerInput"),_i(t,"type","text"),t.value=e[22]},m(o,i){Pi(o,t,i),n||(r=Fi(t,"input",e[30]),n=!0)},p(e,n){4194304&n[0]&&t.value!==e[22]&&(t.value=e[22])},d(e){e&&Ei(t),n=!1,r()}}}function Bp(e){let t,n;return t=new zd({props:{label:ad(e[10].labelColorPalette,e[10]),class:kc(["PinturaColorPresets",e[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"]),hideLabel:!1,name:e[1],value:e[4],optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:e[2].map(e[38]),selectedIndex:e[3],optionMapper:e[7],optionLabelClass:e[6],onchange:e[39],$$slots:{option:[Wp,e=>{let{option:t}=e;return{51:t}},e=>{let{option:t}=e;return[0,t?1048576:0]}],group:[Np,e=>{let{option:t}=e;return{51:t}},e=>{let{option:t}=e;return[0,t?1048576:0]}]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};1024&n[0]&&(r.label=ad(e[10].labelColorPalette,e[10])),512&n[0]&&(r.class=kc(["PinturaColorPresets",e[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"])),2&n[0]&&(r.name=e[1]),16&n[0]&&(r.value=e[4]),1028&n[0]&&(r.options=e[2].map(e[38])),8&n[0]&&(r.selectedIndex=e[3]),128&n[0]&&(r.optionMapper=e[7]),64&n[0]&&(r.optionLabelClass=e[6]),512&n[0]|3145728&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function Np(e){let t,n,r=e[51].label+"";return{c(){t=Ri("span"),n=Ai(r),_i(t,"slot","group")},m(e,r){Pi(e,t,r),Ci(t,n)},p(e,t){1048576&t[1]&&r!==(r=e[51].label+"")&&ji(n,r)},d(e){e&&Ei(t)}}}function jp(e){let t,n,r=e[51].label+"";return{c(){t=Ri("span"),n=Ai(r),_i(t,"class","PinturaButtonLabel")},m(e,r){Pi(e,t,r),Ci(t,n)},p(e,t){1048576&t[1]&&r!==(r=e[51].label+"")&&ji(n,r)},d(e){e&&Ei(t)}}}function Wp(e){let t,n,r,o;n=new Ap({props:{title:e[51].label,color:e[51].value}});let i=!e[9]&&jp(e);return{c(){t=Ri("span"),Oa(n.$$.fragment),r=Li(),i&&i.c(),_i(t,"slot","option")},m(e,a){Pi(e,t,a),Da(n,t,null),Ci(t,r),i&&i.m(t,null),o=!0},p(e,r){const o={};1048576&r[1]&&(o.title=e[51].label),1048576&r[1]&&(o.color=e[51].value),n.$set(o),e[9]?i&&(i.d(1),i=null):i?i.p(e,r):(i=jp(e),i.c(),i.m(t,null))},i(e){o||(Ca(n.$$.fragment,e),o=!0)},o(e){Ta(n.$$.fragment,e),o=!1},d(e){e&&Ei(t),_a(n),i&&i.d()}}}function Vp(e){let t,n,r,o=e[13]&&Op(e),i=e[12]&&Bp(e);return{c(){t=Ri("div"),o&&o.c(),n=Li(),i&&i.c(),_i(t,"slot","details"),_i(t,"class","PinturaColorPickerPanel")},m(e,a){Pi(e,t,a),o&&o.m(t,null),Ci(t,n),i&&i.m(t,null),r=!0},p(e,r){e[13]?o?(o.p(e,r),8192&r[0]&&Ca(o,1)):(o=Op(e),o.c(),Ca(o,1),o.m(t,n)):o&&(Sa(),Ta(o,1,1,(()=>{o=null})),ka()),e[12]?i?(i.p(e,r),4096&r[0]&&Ca(i,1)):(i=Bp(e),i.c(),Ca(i,1),i.m(t,null)):i&&(Sa(),Ta(i,1,1,(()=>{i=null})),ka())},i(e){r||(Ca(o),Ca(i),r=!0)},o(e){Ta(o),Ta(i),r=!1},d(e){e&&Ei(t),o&&o.d(),i&&i.d()}}}function Up(e){let t,n;return t=new Ju({props:{buttonClass:kc(["PinturaColorPickerButton",e[5]]),$$slots:{details:[Vp],label:[Fp]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};32&n[0]&&(r.buttonClass=kc(["PinturaColorPickerButton",e[5]])),33554399&n[0]|2097152&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function Hp(e,t,n){let r,o,i,a,l,s,c,u,d,p,h,f,m,g,{label:y}=t,{name:$}=t,{options:b=[]}=t,{selectedIndex:v=-1}=t,{value:x}=t,{buttonClass:w}=t,{optionLabelClass:S}=t,{optionMapper:k}=t,{onchange:C}=t,{title:T}=t,{hidePresetLabel:M=!0}=t,{locale:P}=t,{enableOpacity:E=!0}=t,{enablePresets:R=!0}=t,{enablePicker:I=!0}=t,{enableInput:A=!1}=t;const L=(e,t)=>{if(d=[e[0],e[1],e[2]],t){let t=((e,t,n)=>{let r=Math.max(e,t,n),o=r-Math.min(e,t,n),i=o&&(r==e?(t-n)/o:r==t?2+(n-e)/o:4+(e-t)/o);return[60*(i<0?i+6:i)/360,r&&o/r,r]})(...d);n(15,l=t[0]),n(32,s=t[1]),n(33,c=t[2]),n(16,u=Wn(e[3])?e[3]:1)}n(17,p=Jn(e)),n(18,h=Jn([...d,0])),n(19,f=Jn([...d,1])),n(20,m=Jn(Ep(l,1,1)))},z=()=>{const e=[...Ep(l,s,c),u];L(e),C(e)},F=e=>{const t=3===e.length?[...e,1]:e;L(t,!0),C(t)},O=(e,t)=>{const r=sl(e.x/t.width,0,1);var o;o=1-sl(e.y/t.height,0,1),n(32,s=r),n(33,c=o),0===u&&n(16,u=1),z()};let D,_,B,N;const j=e=>{const t=Oe(Te(e),N);O(Fe(Me(B),t),_)},W=e=>{_=void 0,document.documentElement.removeEventListener("pointermove",j),document.documentElement.removeEventListener("pointerup",W)};let V;return e.$$set=e=>{"label"in e&&n(0,y=e.label),"name"in e&&n(1,$=e.name),"options"in e&&n(2,b=e.options),"selectedIndex"in e&&n(3,v=e.selectedIndex),"value"in e&&n(4,x=e.value),"buttonClass"in e&&n(5,w=e.buttonClass),"optionLabelClass"in e&&n(6,S=e.optionLabelClass),"optionMapper"in e&&n(7,k=e.optionMapper),"onchange"in e&&n(31,C=e.onchange),"title"in e&&n(8,T=e.title),"hidePresetLabel"in e&&n(9,M=e.hidePresetLabel),"locale"in e&&n(10,P=e.locale),"enableOpacity"in e&&n(11,E=e.enableOpacity),"enablePresets"in e&&n(12,R=e.enablePresets),"enablePicker"in e&&n(13,I=e.enablePicker),"enableInput"in e&&n(14,A=e.enableInput)},e.$$.update=()=>{16&e.$$.dirty[0]|8&e.$$.dirty[1]&&(!x||g&&hl(x,g)||(n(34,g=[...x]),L(x,!0))),2&e.$$.dirty[1]&&n(24,r=100*s),4&e.$$.dirty[1]&&n(23,o=100-100*c),16&e.$$.dirty[1]&&n(36,i=!!V&&V.length>=4&&V.length<=5),18448&e.$$.dirty[0]|32&e.$$.dirty[1]&&n(22,a=A&&x?((e,t,n)=>{let r=e.map((e=>Math.round(255*e).toString(16).toLowerCase().padStart(2,"0")));return(!t&&r.length>3||"ff"===r[3])&&r.pop(),n&&(r=r.map((e=>e.substring(0,1)))),"#"+r.join("")})(x,E,i):void 0)},[y,$,b,v,x,w,S,k,T,M,P,E,R,I,A,l,u,p,h,f,m,D,a,o,r,F,e=>{n(15,l=e),0===u&&n(16,u=1),z()},e=>{n(16,u=e),z()},e=>{e.stopPropagation(),_=Qe(D.offsetWidth,D.offsetHeight),B=(e=>Ce(e.offsetX,e.offsetY))(e),N=Te(e),O(B,_),document.documentElement.addEventListener("pointermove",j),document.documentElement.addEventListener("pointerup",W)},e=>{_=Qe(D.offsetWidth,D.offsetHeight);const t=r/100*_.width,n=o/100*_.height;O({x:t+e.detail.x,y:n+e.detail.y},_)},e=>{const{value:t}=e.target,r=t.length;if(!t.startsWith("#")||r<4||6===r||8===r||r>9)return;if(!E&&r>7)return;const o=Lp(t);o&&(n(35,V=t),L(o),C(o))},C,s,c,g,V,i,function(e){aa[e?"unshift":"push"]((()=>{D=e,n(21,D)}))},e=>{let[t,n]=e;return[t,U(n)?n(P):n]},e=>F(e.value)]}class Gp extends Na{constructor(e){super(),Ba(this,e,Hp,Up,ai,{label:0,name:1,options:2,selectedIndex:3,value:4,buttonClass:5,optionLabelClass:6,optionMapper:7,onchange:31,title:8,hidePresetLabel:9,locale:10,enableOpacity:11,enablePresets:12,enablePicker:13,enableInput:14},null,[-1,-1])}}function Zp(e){let t,n,r;return n=new ah({props:{items:e[0]}}),{c(){t=Ri("div"),Oa(n.$$.fragment),_i(t,"class","PinturaShorthandControl PinturaShapeStyle")},m(e,o){Pi(e,t,o),Da(n,t,null),r=!0},p(e,t){let[r]=t;const o={};1&r&&(o.items=e[0]),n.$set(o)},i(e){r||(Ca(n.$$.fragment,e),r=!0)},o(e){Ta(n.$$.fragment,e),r=!1},d(e){e&&Ei(t),_a(n)}}}function Xp(e,t,n){let r,o,{value:i}=t,{onchange:a}=t,{controls:l=[]}=t;return e.$$set=e=>{n(6,t=ti(ti({},t),mi(e))),"value"in e&&n(1,i=e.value),"onchange"in e&&n(2,a=e.onchange),"controls"in e&&n(3,l=e.controls)},e.$$.update=()=>{n(4,r=(e=>{const{controls:t,...n}=e;return n})(t)),30&e.$$.dirty&&n(0,o=l.map(((e,t)=>{const[n,o,l]=e;return[n,o,{...r,...l,value:i[t],onchange:e=>{const n=[...i];n[t]=e,a(n)}}]})))},t=mi(t),[o,i,a,l,r]}class Yp extends Na{constructor(e){super(),Ba(this,e,Xp,Zp,ai,{value:1,onchange:2,controls:3})}}function qp(e,t,n){const r=e.slice();return r[9]=t[n][0],r[0]=t[n][1],r[10]=t[n][2],r[2]=t[n][3],r}function Kp(e){let t,n,r;const o=[e[10]];var i=e[3][e[9]]||e[9];function a(e){let t={};for(let n=0;n<o.length;n+=1)t=ti(t,o[n]);return{props:t}}return i&&(t=Hi(i,a())),{c(){t&&Oa(t.$$.fragment),n=zi()},m(e,o){t&&Da(t,e,o),Pi(e,n,o),r=!0},p(e,r){const l=4&r?La(o,[za(e[10])]):{};if(i!==(i=e[3][e[9]]||e[9])){if(t){Sa();const e=t;Ta(e.$$.fragment,1,0,(()=>{_a(e,1)})),ka()}i?(t=Hi(i,a()),Oa(t.$$.fragment),Ca(t.$$.fragment,1),Da(t,n.parentNode,n)):t=null}else i&&t.$set(l)},i(e){r||(t&&Ca(t.$$.fragment,e),r=!0)},o(e){t&&Ta(t.$$.fragment,e),r=!1},d(e){e&&Ei(n),t&&_a(t,e)}}}function Qp(e){let t,n=e[9],r=e[9]&&nh(e);return{c(){r&&r.c(),t=zi()},m(e,n){r&&r.m(e,n),Pi(e,t,n)},p(e,o){e[9]?n?ai(n,e[9])?(r.d(1),r=nh(e),r.c(),r.m(t.parentNode,t)):r.p(e,o):(r=nh(e),r.c(),r.m(t.parentNode,t)):n&&(r.d(1),r=null),n=e[9]},i:Jo,o(e){Ta(r)},d(e){e&&Ei(t),r&&r.d(e)}}}function Jp(e){let t,n,r=e[10].innerHTML+"";return{c(){t=new Ui(!1),n=zi(),t.a=n},m(e,o){t.m(r,e,o),Pi(e,n,o)},p(e,n){4&n&&r!==(r=e[10].innerHTML+"")&&t.p(r)},i:Jo,o:Jo,d(e){e&&Ei(n),e&&t.d()}}}function eh(e){let t,n=e[10].textContent+"";return{c(){t=Ai(n)},m(e,n){Pi(e,t,n)},p(e,r){4&r&&n!==(n=e[10].textContent+"")&&ji(t,n)},i:Jo,o:Jo,d(e){e&&Ei(t)}}}function th(e){let t,n;return t=new ah({props:{items:e[2],discardEmptyItems:!0}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};4&n&&(r.items=e[2]),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function nh(e){let t,n,r,o,i;const a=[th,eh,Jp],l=[];function s(e,t){return e[2]&&e[2].length?0:e[10].textContent?1:e[10].innerHTML?2:-1}~(n=s(e))&&(r=l[n]=a[n](e));let c=[e[4](e[10])],u={};for(let d=0;d<c.length;d+=1)u=ti(u,c[d]);return{c(){t=Ri(e[9]),r&&r.c(),o=Li(),/-/.test(e[9])?Ni(t,u):Bi(t,u)},m(e,r){Pi(e,t,r),~n&&l[n].m(t,null),Ci(t,o),i=!0},p(e,i){let d=n;n=s(e),n===d?~n&&l[n].p(e,i):(r&&(Sa(),Ta(l[d],1,1,(()=>{l[d]=null})),ka()),~n?(r=l[n],r?r.p(e,i):(r=l[n]=a[n](e),r.c()),Ca(r,1),r.m(t,o)):r=null),u=La(c,[4&i&&e[4](e[10])]),/-/.test(e[9])?Ni(t,u):Bi(t,u)},i(e){i||(Ca(r),i=!0)},o(e){Ta(r),i=!1},d(e){e&&Ei(t),~n&&l[n].d()}}}function rh(e,t){let n,r,o,i,a,l;const s=[Qp,Kp],c=[];function u(e,t){return 4&t&&(r=null),null==r&&(r=!e[5](e[9])),r?0:1}return o=u(t,-1),i=c[o]=s[o](t),{key:e,first:null,c(){n=zi(),i.c(),a=zi(),this.first=n},m(e,t){Pi(e,n,t),c[o].m(e,t),Pi(e,a,t),l=!0},p(e,n){let r=o;o=u(t=e,n),o===r?c[o].p(t,n):(Sa(),Ta(c[r],1,1,(()=>{c[r]=null})),ka(),i=c[o],i?i.p(t,n):(i=c[o]=s[o](t),i.c()),Ca(i,1),i.m(a.parentNode,a))},i(e){l||(Ca(i),l=!0)},o(e){Ta(i),l=!1},d(e){e&&Ei(n),c[o].d(e),e&&Ei(a)}}}function oh(e){let t,n,r=[],o=new Map,i=e[2];const a=e=>e[0]+e[1];for(let l=0;l<i.length;l+=1){let t=qp(e,i,l),n=a(t);o.set(n,r[l]=rh(n,t))}return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=zi()},m(e,o){for(let t=0;t<r.length;t+=1)r[t].m(e,o);Pi(e,t,o),n=!0},p(e,n){let[l]=n;62&l&&(i=e[2],Sa(),r=Aa(r,l,a,1,e,i,o,t.parentNode,Ia,rh,t,qp),ka())},i(e){if(!n){for(let e=0;e<i.length;e+=1)Ca(r[e]);n=!0}},o(e){for(let t=0;t<r.length;t+=1)Ta(r[t]);n=!1},d(e){for(let t=0;t<r.length;t+=1)r[t].d(e);e&&Ei(t)}}}function ih(e,t,n){let r,o,{items:i}=t,{discardEmptyItems:a=!0}=t,{key:l=""}=t;const s={Button:au,ImageButton:Iu,ImageButtonList:Ou,Dropdown:rp,RadioGroup:zd,Input:_d,Panel:lp,ProgressIndicator:ku,ShapeStyle:Pp,ToggleSlider:kp,ColorPicker:Gp,ShorthandControl:Yp},c=e=>!V(e)||!!s[e],u=e=>{if(!e)return!1;const[t,,n,r=[]]=e;return!!c(t)||r.some(u)||n.textContent||n.innerHTML};return e.$$set=e=>{"items"in e&&n(6,i=e.items),"discardEmptyItems"in e&&n(7,a=e.discardEmptyItems),"key"in e&&n(0,l=e.key)},e.$$.update=()=>{1&e.$$.dirty&&n(1,r=l),192&e.$$.dirty&&n(2,o=(i&&a?i.filter(u):i)||[])},[l,r,o,s,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{textContent:t,innerHTML:n,...r}=e;return r},c,i,a]}class ah extends Na{constructor(e){super(),Ba(this,e,ih,oh,ai,{items:6,discardEmptyItems:7,key:0})}}let lh=null;var sh=e=>{if(null===lh&&(lh=T()&&"visualViewport"in window),!lh)return!1;const t=visualViewport.height,n=()=>{e(visualViewport.height<t?"visible":"hidden")};return visualViewport.addEventListener("resize",n),()=>visualViewport.removeEventListener("resize",n)};function ch(e){let t,n;const r=[{onclick:e[1]},e[3]];let o={};for(let i=0;i<r.length;i+=1)o=ti(o,r[i]);return t=new au({props:o}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const o=10&n[0]?La(r,[2&n[0]&&{onclick:e[1]},8&n[0]&&za(e[3])]):{};t.$set(o)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function uh(e){let t,n;const r=[{onclick:e[0]},{class:"PinturaInputFormButtonConfirm"},e[2]];let o={};for(let i=0;i<r.length;i+=1)o=ti(o,r[i]);return t=new au({props:o}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const o=5&n[0]?La(r,[1&n[0]&&{onclick:e[0]},r[1],4&n[0]&&za(e[2])]):{};t.$set(o)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function dh(e){let t,n,r,o,i,a,l,s,c=e[3]&&ch(e);const u=e[24].default,d=ui(u,e,e[23],null);let p=e[2]&&uh(e);return{c(){t=Ri("div"),n=Ri("div"),c&&c.c(),r=Li(),o=Ri("div"),d&&d.c(),i=Li(),p&&p.c(),_i(o,"class","PinturaInputFormFields"),_i(n,"class","PinturaInputFormInner"),_i(t,"class","PinturaInputForm"),_i(t,"data-layout",e[4]),_i(t,"style",e[6])},m(u,h){Pi(u,t,h),Ci(t,n),c&&c.m(n,null),Ci(n,r),Ci(n,o),d&&d.m(o,null),Ci(n,i),p&&p.m(n,null),e[25](t),a=!0,l||(s=[Fi(o,"keydown",e[10]),Fi(t,"focusin",e[7]),Fi(t,"focusout",e[8]),Fi(t,"measure",e[9]),$i(hc.call(null,t))],l=!0)},p(e,o){e[3]?c?(c.p(e,o),8&o[0]&&Ca(c,1)):(c=ch(e),c.c(),Ca(c,1),c.m(n,r)):c&&(Sa(),Ta(c,1,1,(()=>{c=null})),ka()),d&&d.p&&(!a||8388608&o[0])&&hi(d,u,e,e[23],a?pi(u,e[23],o,null):fi(e[23]),null),e[2]?p?(p.p(e,o),4&o[0]&&Ca(p,1)):(p=uh(e),p.c(),Ca(p,1),p.m(n,null)):p&&(Sa(),Ta(p,1,1,(()=>{p=null})),ka()),(!a||16&o[0])&&_i(t,"data-layout",e[4]),(!a||64&o[0])&&_i(t,"style",e[6])},i(e){a||(Ca(c),Ca(d,e),Ca(p),a=!0)},o(e){Ta(c),Ta(d,e),Ta(p),a=!1},d(n){n&&Ei(t),c&&c.d(),d&&d.d(n),p&&p.d(),e[25](null),l=!1,oi(s)}}}function ph(e,t,n){let r,o,i,a,l,s,c,{$$slots:u={},$$scope:d}=t,{onconfirm:p}=t,{oncancel:h}=t,{autoFocus:f=!0}=t,{autoPositionCursor:m=!0}=t,{buttonConfirm:g}=t,{buttonCancel:y}=t,{layout:$="stack"}=t,{parentRect:b}=t,{align:v}=t,{justify:x}=t,{parentMargin:w=16}=t,{panelOffset:S=ke()}=t,k=!1,C="",T=0;const M=()=>{const e=l.querySelector("input, textarea");e.focus(),T>=1||e.select()},P=()=>{k=!0,R||!Tn()&&!O()||n(19,C="top:1em;bottom:auto;"),Tn()&&(e=>{let t;e.addEventListener("touchstart",(e=>t=e.touches[0].screenY)),e.addEventListener("touchmove",(e=>{const n=e.touches[0].screenY,r=e.target;/textarea/i.test(r.nodeName)?(n>t?0==r.scrollTop&&e.preventDefault():n<t?r.scrollTop+r.offsetHeight==r.scrollHeight&&e.preventDefault():e.preventDefault(),t=n):e.preventDefault()}))})(l),n(20,T=1)};let E;const R=sh((e=>{i?"hidden"!==e||k?(clearTimeout(c),c=void 0,n(19,C="top:".concat(visualViewport.height-s.height-S.y,"px")),"visible"===e?(n(5,l.dataset.stick=!0,l),M(),P()):(k=!1,n(20,T=0))):M():n(19,C="top: 4.5em; bottom: auto")}));return Qi((()=>{f&&M()})),ea((()=>{R&&R()})),e.$$set=e=>{"onconfirm"in e&&n(0,p=e.onconfirm),"oncancel"in e&&n(1,h=e.oncancel),"autoFocus"in e&&n(11,f=e.autoFocus),"autoPositionCursor"in e&&n(12,m=e.autoPositionCursor),"buttonConfirm"in e&&n(2,g=e.buttonConfirm),"buttonCancel"in e&&n(3,y=e.buttonCancel),"layout"in e&&n(4,$=e.layout),"parentRect"in e&&n(13,b=e.parentRect),"align"in e&&n(14,v=e.align),"justify"in e&&n(15,x=e.justify),"parentMargin"in e&&n(16,w=e.parentMargin),"panelOffset"in e&&n(17,S=e.panelOffset),"$$scope"in e&&n(23,d=e.$$scope)},e.$$.update=()=>{385024&e.$$.dirty[0]&&n(21,r=b&&s?((e,t,n,r,o)=>{let i,a;return i="center"===r?e.x+.5*e.width-.5*t.width:"right"===r?e.x+e.width-t.width-o:e.x+o,a="center"===n?e.y+.5*e.height-.5*t.height:"bottom"===n?e.y+e.height-t.height-o:e.y+o,"left:".concat(i,"px;top:").concat(a,"px;right:auto;bottom:auto;")})(b,s,v,x,w):void 0),32&e.$$.dirty[0]&&n(22,o=l&&getComputedStyle(l)),4194304&e.$$.dirty[0]&&(i=o&&"1"===o.getPropertyValue("--editor-modal")),3670016&e.$$.dirty[0]&&n(6,a="opacity:".concat(T,";").concat(r||C))},[p,h,g,y,$,l,a,e=>{var t;((e=>/textarea/i.test(e))(e.target)||ju(e.target))&&(E=Date.now(),m&&((t=e.target).selectionStart=t.selectionEnd=t.value.length),clearTimeout(c),c=setTimeout(P,200))},e=>{Date.now()-E>50||(e.stopPropagation(),M())},e=>{let{detail:t}=e;n(18,s={width:t.width,height:t.height})},e=>"Enter"===e.key?p():"Escape"===e.key?h():void 0,f,m,b,v,x,w,S,s,C,T,r,o,d,u,function(e){aa[e?"unshift":"push"]((()=>{l=e,n(5,l)}))}]}class hh extends Na{constructor(e){super(),Ba(this,e,ph,dh,ai,{onconfirm:0,oncancel:1,autoFocus:11,autoPositionCursor:12,buttonConfirm:2,buttonCancel:3,layout:4,parentRect:13,align:14,justify:15,parentMargin:16,panelOffset:17},null,[-1,-1])}}const fh=["aspectRatio","isRotatedSideways","flip","cropSize"],mh=yl.map((e=>{let[t]=e;return t})).filter((e=>!fh.includes(e)));var gh=(e,t)=>new CustomEvent("ping",{detail:{type:e,data:t},cancelable:!0,bubbles:!0}),yh=(e,t)=>(t?ds(e,t):e).replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase(),$h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae;const{subscribe:n,set:r}=Va(void 0);return{subscribe:n,destroy:((e,t)=>{const n=matchMedia(e);return n.addListener(t),t(n),{get matches(){return n.matches},destroy:()=>n.removeListener(t)}})(e,(e=>{let{matches:n}=e;return r(t(n))})).destroy}},bh=e=>/video/.test(e.type),vh=(e,t,n)=>new Promise(((r,o)=>{(async()=>{bh(e)&&r(await(e=>new Promise(((t,n)=>{const r=R("video");r.onseeked=()=>{const e=R("canvas");un(r).then((n=>{let{width:o,height:i}=n;e.width=o,e.height=i;const a=e.getContext("2d",{willReadFrequently:!0}),l=()=>{a.drawImage(r,0,0,e.width,e.height);const n=a.getImageData(0,0,e.width,e.height);A(e),URL.revokeObjectURL(r.src),t(n)};sn()?setTimeout(l,16):l()}))},r.onloadeddata=()=>{r.currentTime=0},r.onerror=e=>{console.error(e),n(r.error)},r.src=URL.createObjectURL(e),r.load()})))(e));const i=await t.read(e),a=e=>q(e,n).then((e=>t.apply(e,i))).then(r).catch(o);if(G(e)||!H()||sn()||Tn())return a(e);let l;try{l=await Y(((e,t)=>createImageBitmap(e).then((e=>t(null,e))).catch(t)),[e])}catch(e){}l&&l.width?await P()?zs()&&i>1?r(await(async e=>E(await _(e)))(l)):r(l):r(t.apply(l,i)):a(e)})()})),xh=(e,t)=>new Promise((async n=>{if(e.width<t.width&&e.height<t.height)return n(e);const r=Math.min(t.width/e.width,t.height/e.height),o=r*e.width,i=r*e.height,a=R("canvas",{width:o,height:i}),l=a.getContext("2d",{willReadFrequently:!0}),s=L(e)?await _(e):e;l.drawImage(s,0,0,o,i),n(E(a))}));let wh=null;var Sh=()=>{if(null===wh){let e=R("canvas");wh=!!Cs(e),A(e),e=void 0}return wh};const kh=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],Ch={precision:1e-4},Th={precision:.01*Ch.precision};var Mh=e=>e[0]<.25&&e[1]<.25&&e[2]<.25,Ph=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((t=>{const{accept:n="image/*"}=e,r=R("input",{style:"position:absolute;visibility:hidden;width:0;height:0;",type:"file",accept:n}),o=()=>{const[e]=r.files;r.parentNode&&r.remove(),r.removeEventListener("change",o),t(e)};r.addEventListener("change",o),Tn()&&document.body.append(r),r.click()}))},Eh=e=>{try{return e()}catch(e){console.error(e)}},Rh=e=>{let[t,n]=e;return t+.5*(n-t)},Ih=e=>Math.round(100*e),Ah=e=>Ce(e.clientX,e.clientY),Lh=(e,t,n)=>{const r=Ah(e);return Oe(Oe(r,t),n)};function zh(e,t,n){let r,o,i,a,l,s,c,u,d,p,h,f,m,g,y,$,b,v,x,w,{root:S}=t,{locale:k}=t,{stores:C}=t,{allowPan:T=!0}=t,{allowZoom:M=!0}=t,{enablePan:P=!0}=t,{enableZoom:E=!0}=t,{enableZoomControls:R=E}=t,{enableZoomInput:I=!0}=t,{enablePanInput:A=!0}=t,{enablePanLimit:L=!0}=t,{panLimitGutterScalar:z=0}=t,{zoomOptions:F=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=t,{zoomAdjustStep:O=.25}=t,{zoomAdjustFactor:D=.1}=t,{zoomAdjustWheelFactor:_=1}=t,{elasticity:B=5}=t,{imageSelectionRectCentered:N}=t,{imageSelectionRectScalar:j}=t,{zoomLevel:W=null}=t,{zoomControls:V}=t,{zoomMultiTouching:U=!1}=t;const{isAnimated:H,isInteracting:G,rootRect:Z,stageRect:X,stageScalar:Y,imageSelectionPan:q,imageSelectionZoom:K,imageSelectionStageFitScalar:Q,imageSelectionRect:J,imageSelectionStoredState:ee,imagePreviewUpscale:te}=C;ci(e,H,(e=>n(68,x=e))),ci(e,G,(e=>n(67,b=e))),ci(e,Z,(e=>n(65,y=e))),ci(e,X,(e=>n(64,g=e))),ci(e,Y,(e=>n(45,v=e))),ci(e,q,(e=>n(63,h=e))),ci(e,K,(e=>n(42,p=e))),ci(e,Q,(e=>n(43,f=e))),ci(e,J,(e=>n(66,$=e))),ci(e,ee,(e=>n(69,w=e))),ci(e,te,(e=>n(44,m=e)));let ne,re,oe,ie,ae=!1;const le=e=>{const t=S.querySelector(".PinturaMain > .PinturaUtilMain")||S.querySelector('div[tabindex="0"] .PinturaUtilMain');return!!t&&!!t.contains(e.target)&&!Wu(e.target)},se=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{pan:t=h,zoom:n=p}=e;yi(ee,w={translation:t,zoom:n},w)},ce=()=>h&&0===h.x&&0===h.y,ue=()=>{yi(K,p=void 0,p),ce()||yi(q,h=ke(),h),pe.set(void 0,{hard:!0})},de=()=>{ue(),se()},pe=Ks(void 0,{precision:.01});pe.subscribe((e=>{if(void 0===e)return yi(K,p=void 0,p),void(ce()||yi(q,h=ke(),h));const t=p;e<=1?ce()||yi(q,h=ke(),h):e<=t&&yi(q,h=_e(h,.8),h),yi(K,p=e,p)}));const he=e=>{pe.update((t=>{const n=e(t||f);return se({zoom:n}),n}))},fe=e=>{e?pe.set(e,{hard:!1===x}):(e=void 0,pe.set(void 0,{hard:!0})),yi(K,p=e,p),se({zoom:e})},me=(e,t)=>{const n=j*t,r={...N},o=1-sl(z,0,1);xt(r,n<o?n:o);const i={...N};xt(i,n),vt(i,e);const a={...i};return i.x>r.x&&(a.x=r.x),i.y>r.y&&(a.y=r.y),i.x+i.width<r.x+r.width&&(a.x=r.x+r.width-i.width),i.y+i.height<r.y+r.height&&(a.y=r.y+r.height-i.height),Oe(bt(a),bt(r))},ge=e=>{let{translation:t,zoom:n=1,elastify:r=!0}=e;if(!ne)return;let o=t;const i=Ce(ne.x+o.x,ne.y+o.y);if(!L)return i;const a=me(i,n);return r?((e,t,n)=>t&&n?Ce(e.x+du(t.x-e.x,n),e.y+du(t.y-e.y,n)):{...e})(a,i,B):a};let ye,$e;const be=()=>{$e=void 0,yi(G,b=!0,b),n(33,ae=A),ye=!1,oe=!1,ne={...h},re=m?p||f:i?p||1:p||f},ve=e=>{const{scalar:t,translation:o,isMultiTouching:i}=e.detail;if(!ne||!i&&!A)return;i&&_e(o,.5),(A||i)&&(ye=!0),U||n(12,U=i);const a=r?sl(re*t,l,s):1,c=ge({translation:o,zoom:a,elastify:!0}),u=Re(c);ie=Re(h),oe=u<ie,r&&K.set(a),q.set(c),$e=U&&{translation:e.detail.translation,scalar:t}},xe=e=>{yi(G,b=!1,b),n(33,ae=!1),n(12,U=!1),oe&&ie<50&&(ne=void 0,re=void 0,q.set(ke()))},we=e=>{yi(G,b=!1,b),n(33,ae=!1),n(12,U=!1),Promise.resolve().then((()=>{if(ye&&ne){const t=$e||e.detail,n=r?sl(re*t.scalar,l,s):1,o=ge({elastify:!1,translation:t.translation,zoom:n});q.set(o)}ne=void 0,re=void 0,A&&e.detail.isDoubleTap&&de(),se()}))};let Se,Te=Date.now(),Pe=0,Ee=!1,Ie=!1;const Ae=e=>{if(!le(e))return;if(e.preventDefault(),e.stopPropagation(),Ie)return;clearTimeout(Se);const t=fu(e),n=Date.now(),r=n-Te;Te=n;const o=Math.abs(t/r)>.2;Pe=o?Pe+1:0;const i=1+-1*t*_/(o?50:100),a=Lh(e,y,g);Le(a,i,{isZoomingFast:o})},Le=(e,t,n)=>{let{isZoomingFast:r}=n;const o=m?p||f:i?p||1:p||f,a=o*t,c=ke(),u=h,d=m?f:i?1:f,g=Math.abs(a-d),y=a<o,b=o>d&&y||o<d&&a>o,v=Pe>=5;if(r||(Ee=!1),Pe>0&&!Ee&&(Ee=b),v&&Ee)return de(),Ie=!0,void setTimeout((()=>{Ie=!1}),100);if(v)return;!r&&b&&g<=.05&&(Se=setTimeout((()=>{de()}),250)),yi(K,p=sl(a,l,s),p);const x=ut($);xt(x,o),vt(x,u);const w=bt(x),S=ut(x);xt(S,p-o+1,e);const k=bt(S),C=De(Oe(k,w),o);((e,t,n)=>{e.x=t,e.y=n})(c,u.x+C.x,u.y+C.y),yi(q,h=y&&r?_e(Me(h),.85):me(c,o),h),se()},ze=e=>(e?"add":"remove")+"EventListener";let Fe,Be,Ne,je;const We=e=>{e.preventDefault(),Be={...h},je=ut($),Ne=Lh(e,y,g),Fe=m?p||f:i?p||1:p||f},Ve=e=>{e.preventDefault(),yi(K,p=sl(e.scale*Fe,l,s),p);const t=ut(je);xt(t,Fe),vt(t,Be);const n=bt(t),r=ut(t);xt(r,p-Fe+1,Ne);const o=bt(r),i=De(Oe(o,n),Fe),a={x:Be.x+i.x,y:Be.y+i.y};yi(q,h=me(a,p),h)},Ue=e=>{e.preventDefault()},He=e=>{S[ze(e)]("wheel",Ae),Tn()||(S[ze(e)]("gesturestart",We),S[ze(e)]("gesturechange",Ve),S[ze(e)]("gestureend",Ue))},Ge=e=>{const t=ze(e);S[t]("interactionstart",be),S[t]("interactionupdate",ve),S[t]("interactionrelease",xe),S[t]("interactionend",we)};let Ze;return Qi((()=>{Ze=cu(S,{drag:!0,pinch:!0,inertia:!0,inertiaDurationMultiplier:10,shouldStartInteraction:le})})),ea((()=>{He(!1),Ge(!1),Ze.destroy(),Ze=void 0})),e.$$set=e=>{"root"in e&&n(13,S=e.root),"locale"in e&&n(14,k=e.locale),"stores"in e&&n(15,C=e.stores),"allowPan"in e&&n(16,T=e.allowPan),"allowZoom"in e&&n(17,M=e.allowZoom),"enablePan"in e&&n(18,P=e.enablePan),"enableZoom"in e&&n(19,E=e.enableZoom),"enableZoomControls"in e&&n(20,R=e.enableZoomControls),"enableZoomInput"in e&&n(21,I=e.enableZoomInput),"enablePanInput"in e&&n(22,A=e.enablePanInput),"enablePanLimit"in e&&n(23,L=e.enablePanLimit),"panLimitGutterScalar"in e&&n(24,z=e.panLimitGutterScalar),"zoomOptions"in e&&n(25,F=e.zoomOptions),"zoomAdjustStep"in e&&n(26,O=e.zoomAdjustStep),"zoomAdjustFactor"in e&&n(27,D=e.zoomAdjustFactor),"zoomAdjustWheelFactor"in e&&n(28,_=e.zoomAdjustWheelFactor),"elasticity"in e&&n(29,B=e.elasticity),"imageSelectionRectCentered"in e&&n(30,N=e.imageSelectionRectCentered),"imageSelectionRectScalar"in e&&n(31,j=e.imageSelectionRectScalar),"zoomLevel"in e&&n(32,W=e.zoomLevel),"zoomControls"in e&&n(11,V=e.zoomControls),"zoomMultiTouching"in e&&n(12,U=e.zoomMultiTouching)},e.$$.update=()=>{var t,g;2752512&e.$$.dirty[0]&&n(35,r=M&&E&&I),327680&e.$$.dirty[0]&&n(34,o=T&&P),196608&e.$$.dirty[0]&&(T||M?(yi(K,p=E?w.zoom:void 0,p),yi(q,h=P?Me(w.translation):ce()?h:ke(),h),pe.set(p)):ue()),16384&e.$$.dirty[1]&&(i=v>=1),33570816&e.$$.dirty[0]|28672&e.$$.dirty[1]&&n(39,a=[(m||v<1)&&[f,Ih(f)+"%",{sublabel:k.labelZoomFit}],...F.map((e=>[e,Ih(e)+"%"]))].filter(Boolean).map((e=>(1===e[0]&&(e[2]={sublabel:k.labelZoomActual}),e))).sort(((e,t)=>{const n=e[0]||f,r=t[0]||f;return n<r?-1:r<n?1:0}))),4352&e.$$.dirty[1]&&n(37,l=Math.min(a.reduce(((e,t)=>{let[n]=t;return n<e?n:e}),Number.MAX_SAFE_INTEGER),f)),256&e.$$.dirty[1]&&n(36,s=a.reduce(((e,t)=>{let[n]=t;return n>e?n:e}),Number.MIN_SAFE_INTEGER)),2&e.$$.dirty[1]&&null!==W&&fe(W),30720&e.$$.dirty[1]&&n(41,u=p||(m||v<1?f:1)),1280&e.$$.dirty[1]&&n(38,(t=a.map((e=>{let[t]=e;return t})),g=u,c=t.findIndex((e=>e===g)))),1024&e.$$.dirty[1]&&n(40,d=Ih(u)+"%"),202522624&e.$$.dirty[0]|3040&e.$$.dirty[1]&&n(11,V=(M||M)&&R?[["Button","zoom-out",{hideLabel:!0,label:k.labelZoomOut,icon:k.iconZoomOut,disabled:p===l,onclick:()=>he((e=>Math.max(l,e-O))),onhold:()=>he((e=>Math.max(l,e*(1-D))))}],["Dropdown","zoom-level",{label:d,labelClass:"PinturaFixedWidthCharacters",options:a,selectedIndex:c,onchange:e=>fe(e.value)}],["Button","zoom-in",{hideLabel:!0,label:k.labelZoomIn,icon:k.iconZoomIn,disabled:p===s,onclick:()=>he((e=>Math.min(s,e+O))),onhold:()=>he((e=>Math.min(s,e*(1+D))))}]]:[]),8192&e.$$.dirty[0]|16&e.$$.dirty[1]&&S&&He(r),8192&e.$$.dirty[0]|8&e.$$.dirty[1]&&S&&Ge(o),4202496&e.$$.dirty[0]|12&e.$$.dirty[1]&&S&&S.style.setProperty("--cursor",o&&A?ae?"grabbing":"grab":"")},[H,G,Z,X,Y,q,K,Q,J,ee,te,V,U,S,k,C,T,M,P,E,R,I,A,L,z,F,O,D,_,B,N,j,W,ae,o,r,s,l,c,a,d,u,p,f,m,v]}class Fh extends Na{constructor(e){super(),Ba(this,e,zh,null,ai,{root:13,locale:14,stores:15,allowPan:16,allowZoom:17,enablePan:18,enableZoom:19,enableZoomControls:20,enableZoomInput:21,enablePanInput:22,enablePanLimit:23,panLimitGutterScalar:24,zoomOptions:25,zoomAdjustStep:26,zoomAdjustFactor:27,zoomAdjustWheelFactor:28,elasticity:29,imageSelectionRectCentered:30,imageSelectionRectScalar:31,zoomLevel:32,zoomControls:11,zoomMultiTouching:12},null,[-1,-1,-1,-1])}}const Oh=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=[],r=t+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength);for(;t<r;){const r=e.getUint32(t);if(r<0)break;const o=e.getUint32(t+4);if(n.push({type:o,size:r,offset:t,bodyOffset:t+8,bodySize:r-8}),r<8)break;t+=r}return n},{window:Dh}=Ea;function _h(e){let t,n,r,o=e[42]&&Bh(e),i=e[39]&&Xh(e);return{c(){o&&o.c(),t=Li(),i&&i.c(),n=zi()},m(e,a){o&&o.m(e,a),Pi(e,t,a),i&&i.m(e,a),Pi(e,n,a),r=!0},p(e,r){e[42]?o?(o.p(e,r),2048&r[1]&&Ca(o,1)):(o=Bh(e),o.c(),Ca(o,1),o.m(t.parentNode,t)):o&&(Sa(),Ta(o,1,1,(()=>{o=null})),ka()),e[39]?i?(i.p(e,r),256&r[1]&&Ca(i,1)):(i=Xh(e),i.c(),Ca(i,1),i.m(n.parentNode,n)):i&&(Sa(),Ta(i,1,1,(()=>{i=null})),ka())},i(e){r||(Ca(o),Ca(i),r=!0)},o(e){Ta(o),Ta(i),r=!1},d(e){o&&o.d(e),e&&Ei(t),i&&i.d(e),e&&Ei(n)}}}function Bh(e){let t,n,r,o,i,a;const l=[jh,Nh],s=[];function c(e,t){return e[40]?0:e[35]?1:-1}return~(r=c(e))&&(o=s[r]=l[r](e)),{c(){t=Ri("div"),n=Ri("p"),o&&o.c(),_i(n,"style",e[73]),_i(t,"class","PinturaStatus"),_i(t,"style",i="opacity: "+e[55])},m(e,o){Pi(e,t,o),Ci(t,n),~r&&s[r].m(n,null),a=!0},p(e,u){let d=r;r=c(e),r===d?~r&&s[r].p(e,u):(o&&(Sa(),Ta(s[d],1,1,(()=>{s[d]=null})),ka()),~r?(o=s[r],o?o.p(e,u):(o=s[r]=l[r](e),o.c()),Ca(o,1),o.m(n,null)):o=null),(!a||2048&u[2])&&_i(n,"style",e[73]),(!a||16777216&u[1]&&i!==(i="opacity: "+e[55]))&&_i(t,"style",i)},i(e){a||(Ca(o),a=!0)},o(e){Ta(o),a=!1},d(e){e&&Ei(t),~r&&s[r].d()}}}function Nh(e){let t,n,r,o;t=new xu({props:{text:e[35].text||"",onmeasure:e[214]}});let i=e[35].aside&&Wh(e);return{c(){Oa(t.$$.fragment),n=Li(),i&&i.c(),r=zi()},m(e,a){Da(t,e,a),Pi(e,n,a),i&&i.m(e,a),Pi(e,r,a),o=!0},p(e,n){const o={};16&n[1]&&(o.text=e[35].text||""),t.$set(o),e[35].aside?i?(i.p(e,n),16&n[1]&&Ca(i,1)):(i=Wh(e),i.c(),Ca(i,1),i.m(r.parentNode,r)):i&&(Sa(),Ta(i,1,1,(()=>{i=null})),ka())},i(e){o||(Ca(t.$$.fragment,e),Ca(i),o=!0)},o(e){Ta(t.$$.fragment,e),Ta(i),o=!1},d(e){_a(t,e),e&&Ei(n),i&&i.d(e),e&&Ei(r)}}}function jh(e){let t,n,r,o;return t=new xu({props:{text:e[40],onmeasure:e[214]}}),r=new Mu({props:{class:"PinturaStatusIcon",offset:e[83],opacity:e[84],$$slots:{default:[Zh]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment),n=Li(),Oa(r.$$.fragment)},m(e,i){Da(t,e,i),Pi(e,n,i),Da(r,e,i),o=!0},p(e,n){const o={};512&n[1]&&(o.text=e[40]),t.$set(o);const i={};2097152&n[2]&&(i.offset=e[83]),4194304&n[2]&&(i.opacity=e[84]),8&n[0]|536870912&n[18]&&(i.$$scope={dirty:n,ctx:e}),r.$set(i)},i(e){o||(Ca(t.$$.fragment,e),Ca(r.$$.fragment,e),o=!0)},o(e){Ta(t.$$.fragment,e),Ta(r.$$.fragment,e),o=!1},d(e){_a(t,e),e&&Ei(n),_a(r,e)}}}function Wh(e){let t,n;return t=new Mu({props:{class:"PinturaStatusButton",offset:e[83],opacity:e[84],$$slots:{default:[Hh]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};2097152&n[2]&&(r.offset=e[83]),4194304&n[2]&&(r.opacity=e[84]),16&n[1]|536870912&n[18]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function Vh(e){let t,n;return t=new ku({props:{progress:e[35].progressIndicator.progress}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};16&n[1]&&(r.progress=e[35].progressIndicator.progress),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function Uh(e){let t,n;const r=[e[35].closeButton,{hideLabel:!0}];let o={};for(let i=0;i<r.length;i+=1)o=ti(o,r[i]);return t=new au({props:o}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const o=16&n[1]?La(r,[za(e[35].closeButton),r[1]]):{};t.$set(o)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function Hh(e){let t,n,r,o=e[35].progressIndicator.visible&&Vh(e),i=e[35].closeButton&&e[35].text&&Uh(e);return{c(){o&&o.c(),t=Li(),i&&i.c(),n=zi()},m(e,a){o&&o.m(e,a),Pi(e,t,a),i&&i.m(e,a),Pi(e,n,a),r=!0},p(e,r){e[35].progressIndicator.visible?o?(o.p(e,r),16&r[1]&&Ca(o,1)):(o=Vh(e),o.c(),Ca(o,1),o.m(t.parentNode,t)):o&&(Sa(),Ta(o,1,1,(()=>{o=null})),ka()),e[35].closeButton&&e[35].text?i?(i.p(e,r),16&r[1]&&Ca(i,1)):(i=Uh(e),i.c(),Ca(i,1),i.m(n.parentNode,n)):i&&(Sa(),Ta(i,1,1,(()=>{i=null})),ka())},i(e){r||(Ca(o),Ca(i),r=!0)},o(e){Ta(o),Ta(i),r=!1},d(e){o&&o.d(e),e&&Ei(t),i&&i.d(e),e&&Ei(n)}}}function Gh(e){let t,n=e[3].iconSupportError+"";return{c(){t=Ii("g")},m(e,r){Pi(e,t,r),t.innerHTML=n},p(e,r){8&r[0]&&n!==(n=e[3].iconSupportError+"")&&(t.innerHTML=n)},d(e){e&&Ei(t)}}}function Zh(e){let t,n;return t=new Qc({props:{$$slots:{default:[Gh]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};8&n[0]|536870912&n[18]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function Xh(e){let t,n,r,o,i,a,l,s,c,u,d,p,h,f,m=e[10]&&Yh(e),g=e[46]&&e[45]&&qh(e);const y=[tf,ef],$=[];function b(e,t){return e[46]?0:1}function v(t){e[427](t)}function x(t){e[428](t)}function w(t){e[429](t)}r=b(e),o=$[r]=y[r](e),a=new Sc({props:{isAnimated:e[54],isTransparent:e[20],pixelRatio:e[58],textPixelRatio:e[6],backgroundColor:e[57],maskRect:e[59],maskOpacity:e[74]?e[74].maskOpacity:1,maskMarkupOpacity:e[7],maskFrameOpacity:e[5],clipAnnotationsToImage:e[86],images:e[56],interfaceImages:e[87],loadImageData:e[28],enableGrid:e[11],gridSize:e[88],gridColors:[e[89],e[90]],gridOpacity:e[91],selectionColor:e[92],willRequest:e[82]||e[93],willRender:e[424],didRender:e[425]}});let S={root:e[2],locale:e[3],stores:e[200],allowPan:e[95],enablePan:e[17],enablePanLimit:e[21],panLimitGutterScalar:e[22],enablePanInput:e[96],allowZoom:e[97],enableZoom:e[18],enableZoomInput:void 0!==e[19]?e[19]:e[98],enableZoomControls:e[99],zoomOptions:e[13]||e[23],zoomAdjustStep:e[14]||e[24],zoomAdjustFactor:e[15]||e[25],zoomAdjustWheelFactor:e[16]||e[26],imageSelectionRectCentered:e[100],imageSelectionRectScalar:e[101],elasticity:sf*e[8]};return void 0!==e[0]&&(S.zoomLevel=e[0]),void 0!==e[33]&&(S.zoomControls=e[33]),void 0!==e[34]&&(S.zoomMultiTouching=e[34]),u=new Fh({props:S}),aa.push((()=>Fa(u,"zoomLevel",v))),aa.push((()=>Fa(u,"zoomControls",x))),aa.push((()=>Fa(u,"zoomMultiTouching",w))),{c(){m&&m.c(),t=Li(),g&&g.c(),n=Li(),o.c(),i=Li(),Oa(a.$$.fragment),l=Li(),s=Ri("div"),c=Li(),Oa(u.$$.fragment),_i(s,"class","PinturaRootPortal")},m(o,d){m&&m.m(o,d),Pi(o,t,d),g&&g.m(o,d),Pi(o,n,d),$[r].m(o,d),Pi(o,i,d),Da(a,o,d),Pi(o,l,d),Pi(o,s,d),e[426](s),Pi(o,c,d),Da(u,o,d),f=!0},p(e,l){e[10]?m?(m.p(e,l),1024&l[0]&&Ca(m,1)):(m=Yh(e),m.c(),Ca(m,1),m.m(t.parentNode,t)):m&&(Sa(),Ta(m,1,1,(()=>{m=null})),ka()),e[46]&&e[45]?g?(g.p(e,l),49152&l[1]&&Ca(g,1)):(g=qh(e),g.c(),Ca(g,1),g.m(n.parentNode,n)):g&&(Sa(),Ta(g,1,1,(()=>{g=null})),ka());let s=r;r=b(e),r===s?$[r].p(e,l):(Sa(),Ta($[s],1,1,(()=>{$[s]=null})),ka(),o=$[r],o?o.p(e,l):(o=$[r]=y[r](e),o.c()),Ca(o,1),o.m(i.parentNode,i));const c={};8388608&l[1]&&(c.isAnimated=e[54]),1048576&l[0]&&(c.isTransparent=e[20]),134217728&l[1]&&(c.pixelRatio=e[58]),64&l[0]&&(c.textPixelRatio=e[6]),67108864&l[1]&&(c.backgroundColor=e[57]),268435456&l[1]&&(c.maskRect=e[59]),4096&l[2]&&(c.maskOpacity=e[74]?e[74].maskOpacity:1),128&l[0]&&(c.maskMarkupOpacity=e[7]),32&l[0]&&(c.maskFrameOpacity=e[5]),16777216&l[2]&&(c.clipAnnotationsToImage=e[86]),33554432&l[1]&&(c.images=e[56]),33554432&l[2]&&(c.interfaceImages=e[87]),268435456&l[0]&&(c.loadImageData=e[28]),2048&l[0]&&(c.enableGrid=e[11]),67108864&l[2]&&(c.gridSize=e[88]),402653184&l[2]&&(c.gridColors=[e[89],e[90]]),536870912&l[2]&&(c.gridOpacity=e[91]),1073741824&l[2]&&(c.selectionColor=e[92]),1048576&l[2]|1&l[3]&&(c.willRequest=e[82]||e[93]),512&l[0]|541982784&l[1]|2&l[3]&&(c.willRender=e[424]),124&l[2]&&(c.didRender=e[425]),a.$set(c);const f={};4&l[0]&&(f.root=e[2]),8&l[0]&&(f.locale=e[3]),4&l[3]&&(f.allowPan=e[95]),131072&l[0]&&(f.enablePan=e[17]),2097152&l[0]&&(f.enablePanLimit=e[21]),4194304&l[0]&&(f.panLimitGutterScalar=e[22]),8&l[3]&&(f.enablePanInput=e[96]),16&l[3]&&(f.allowZoom=e[97]),262144&l[0]&&(f.enableZoom=e[18]),524288&l[0]|32&l[3]&&(f.enableZoomInput=void 0!==e[19]?e[19]:e[98]),64&l[3]&&(f.enableZoomControls=e[99]),8396800&l[0]&&(f.zoomOptions=e[13]||e[23]),16793600&l[0]&&(f.zoomAdjustStep=e[14]||e[24]),33587200&l[0]&&(f.zoomAdjustFactor=e[15]||e[25]),67174400&l[0]&&(f.zoomAdjustWheelFactor=e[16]||e[26]),128&l[3]&&(f.imageSelectionRectCentered=e[100]),256&l[3]&&(f.imageSelectionRectScalar=e[101]),256&l[0]&&(f.elasticity=sf*e[8]),!d&&1&l[0]&&(d=!0,f.zoomLevel=e[0],fa((()=>d=!1))),!p&&4&l[1]&&(p=!0,f.zoomControls=e[33],fa((()=>p=!1))),!h&&8&l[1]&&(h=!0,f.zoomMultiTouching=e[34],fa((()=>h=!1))),u.$set(f)},i(e){f||(Ca(m),Ca(g),Ca(o),Ca(a.$$.fragment,e),Ca(u.$$.fragment,e),f=!0)},o(e){Ta(m),Ta(g),Ta(o),Ta(a.$$.fragment,e),Ta(u.$$.fragment,e),f=!1},d(o){m&&m.d(o),o&&Ei(t),g&&g.d(o),o&&Ei(n),$[r].d(o),o&&Ei(i),_a(a,o),o&&Ei(l),o&&Ei(s),e[426](null),o&&Ei(c),_a(u,o)}}}function Yh(e){let t,n,r,o,i;return n=new ah({props:{items:e[70]}}),{c(){t=Ri("div"),Oa(n.$$.fragment),_i(t,"class","PinturaNav PinturaNavTools")},m(a,l){Pi(a,t,l),Da(n,t,null),r=!0,o||(i=[Fi(t,"measure",e[411]),$i(hc.call(null,t))],o=!0)},p(e,t){const r={};256&t[2]&&(r.items=e[70]),n.$set(r)},i(e){r||(Ca(n.$$.fragment,e),r=!0)},o(e){Ta(n.$$.fragment,e),r=!1},d(e){e&&Ei(t),_a(n),o=!1,oi(i)}}}function qh(e){let t,n,r;return n=new yu({props:{elasticity:e[8]*cf,scrollDirection:e[76]?"y":"x",$$slots:{default:[Jh]},$$scope:{ctx:e}}}),{c(){t=Ri("div"),Oa(n.$$.fragment),_i(t,"class","PinturaNav PinturaNavMain")},m(e,o){Pi(e,t,o),Da(n,t,null),r=!0},p(e,t){const r={};256&t[0]&&(r.elasticity=e[8]*cf),16384&t[2]&&(r.scrollDirection=e[76]?"y":"x"),8192&t[1]|393216&t[2]|536870912&t[18]&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){r||(Ca(n.$$.fragment,e),r=!0)},o(e){Ta(n.$$.fragment,e),r=!1},d(e){e&&Ei(t),_a(n)}}}function Kh(e){let t,n=e[586].icon+"";return{c(){t=Ii("g")},m(e,r){Pi(e,t,r),t.innerHTML=n},p(e,r){268435456&r[18]&&n!==(n=e[586].icon+"")&&(t.innerHTML=n)},d(e){e&&Ei(t)}}}function Qh(e){let t,n,r,o,i,a=e[586].label+"";return t=new Qc({props:{$$slots:{default:[Kh]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment),n=Li(),r=Ri("span"),o=Ai(a)},m(e,a){Da(t,e,a),Pi(e,n,a),Pi(e,r,a),Ci(r,o),i=!0},p(e,n){const r={};805306368&n[18]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r),(!i||268435456&n[18])&&a!==(a=e[586].label+"")&&ji(o,a)},i(e){i||(Ca(t.$$.fragment,e),i=!0)},o(e){Ta(t.$$.fragment,e),i=!1},d(e){_a(t,e),e&&Ei(n),e&&Ei(r)}}}function Jh(e){let t,n;const r=[e[80],{tabs:e[79]}];let o={$$slots:{default:[Qh,e=>{let{tab:t}=e;return{586:t}},e=>{let{tab:t}=e;return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t?268435456:0]}]},$$scope:{ctx:e}};for(let i=0;i<r.length;i+=1)o=ti(o,r[i]);return t=new Ac({props:o}),t.$on("select",e[412]),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const o=393216&n[2]?La(r,[262144&n[2]&&za(e[80]),131072&n[2]&&{tabs:e[79]}]):{};805306368&n[18]&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function ef(e){let t,n,r;function o(t){e[420](t)}let i={class:"PinturaMain",content:{...e[47].find(e[419]),props:e[27][e[44]]},locale:e[3],stores:e[200]};return void 0!==e[1][e[44]]&&(i.component=e[1][e[44]]),t=new Yc({props:i}),aa.push((()=>Fa(t,"component",o))),t.$on("measure",e[226]),t.$on("show",e[421]),t.$on("hide",e[422]),t.$on("fade",e[423]),{c(){Oa(t.$$.fragment)},m(e,n){Da(t,e,n),r=!0},p(e,r){const o={};134217728&r[0]|73728&r[1]&&(o.content={...e[47].find(e[419]),props:e[27][e[44]]}),8&r[0]&&(o.locale=e[3]),!n&&2&r[0]|8192&r[1]&&(n=!0,o.component=e[1][e[44]],fa((()=>n=!1))),t.$set(o)},i(e){r||(Ca(t.$$.fragment,e),r=!0)},o(e){Ta(t.$$.fragment,e),r=!1},d(e){_a(t,e)}}}function tf(e){let t,n;const r=[{class:"PinturaMain"},{visible:e[63]},e[80],{panels:e[78]}];let o={$$slots:{default:[nf,e=>{let{panel:t,panelIsActive:n}=e;return{584:t,585:n}},e=>{let{panel:t,panelIsActive:n}=e;return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(t?67108864:0)|(n?134217728:0)]}]},$$scope:{ctx:e}};for(let i=0;i<r.length;i+=1)o=ti(o,r[i]);return t=new Uc({props:o}),t.$on("measure",e[418]),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const o=327682&n[2]?La(r,[r[0],2&n[2]&&{visible:e[63]},262144&n[2]&&za(e[80]),65536&n[2]&&{panels:e[78]}]):{};134217738&n[0]|65664&n[1]|2&n[2]|738197504&n[18]&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function nf(e){let t,n,r;function o(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e[413](e[584],...n)}function i(t){e[414](t,e[584])}let a={content:{...e[47].find(o),props:e[27][e[584]]},locale:e[3],isActive:e[585],stores:e[200]};return void 0!==e[1][e[584]]&&(a.component=e[1][e[584]]),t=new Yc({props:a}),aa.push((()=>Fa(t,"component",i))),t.$on("measure",e[226]),t.$on("show",(function(){return e[415](e[584])})),t.$on("hide",(function(){return e[416](e[584])})),t.$on("fade",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e[417](e[584],...n)})),{c(){Oa(t.$$.fragment)},m(e,n){Da(t,e,n),r=!0},p(r,i){e=r;const a={};134217728&i[0]|65536&i[1]|67108864&i[18]&&(a.content={...e[47].find(o),props:e[27][e[584]]}),8&i[0]&&(a.locale=e[3]),134217728&i[18]&&(a.isActive=e[585]),!n&&2&i[0]|67108864&i[18]&&(n=!0,a.component=e[1][e[584]],fa((()=>n=!1))),t.$set(a)},i(e){r||(Ca(t.$$.fragment,e),r=!0)},o(e){Ta(t.$$.fragment,e),r=!1},d(e){_a(t,e)}}}function rf(e){let t,n;return{c(){t=Ri("span"),_i(t,"class","PinturaEditorOverlay"),_i(t,"style",n="opacity:"+e[102])},m(e,n){Pi(e,t,n)},p(e,r){512&r[3]&&n!==(n="opacity:"+e[102])&&_i(t,"style",n)},d(e){e&&Ei(t)}}}function of(e){let t,n;const r=[{layout:"row"},{parentRect:e[51]},e[61]];let o={$$slots:{default:[af]},$$scope:{ctx:e}};for(let i=0;i<r.length;i+=1)o=ti(o,r[i]);return t=new hh({props:o}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const o=1074790400&n[1]?La(r,[r[0],1048576&n[1]&&{parentRect:e[51]},1073741824&n[1]&&za(e[61])]):{};1073741824&n[1]|1&n[2]|536870912&n[18]&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function af(e){let t,n,r;return{c(){t=Ri("input"),t.value=n=e[61].text,_i(t,"placeholder",r=e[61].placeholder),_i(t,"type","text"),_i(t,"spellcheck","false"),_i(t,"autocorrect","off"),_i(t,"autocapitalize","off")},m(n,r){Pi(n,t,r),e[430](t)},p(e,o){1073741824&o[1]&&n!==(n=e[61].text)&&t.value!==n&&(t.value=n),1073741824&o[1]&&r!==(r=e[61].placeholder)&&_i(t,"placeholder",r)},d(n){n&&Ei(t),e[430](null)}}}function lf(e){let t,n,r,o,i,a;ha(e[410]);let l=e[41]&&_h(e),s=e[102]>0&&rf(e),c=e[61]&&of(e);return{c(){t=Ri("div"),l&&l.c(),n=Li(),s&&s.c(),r=Li(),c&&c.c(),_i(t,"id",e[4]),_i(t,"class",e[77]),_i(t,"data-env",e[75]),_i(t,"dir",e[12])},m(u,d){Pi(u,t,d),l&&l.m(t,null),Ci(t,n),s&&s.m(t,null),Ci(t,r),c&&c.m(t,null),e[431](t),o=!0,i||(a=[Fi(Dh,"keydown",e[217]),Fi(Dh,"keyup",e[218]),Fi(Dh,"blur",e[219]),Fi(Dh,"paste",e[223]),Fi(Dh,"resize",e[410]),Fi(t,"ping",(function(){ii(e[69])&&e[69].apply(this,arguments)})),Fi(t,"contextmenu",e[220]),Fi(t,"touchstart",e[215],{passive:!1}),Fi(t,"touchmove",(function(){ii(e[72])&&e[72].apply(this,arguments)})),Fi(t,"pointermove",(function(){ii(e[71])&&e[71].apply(this,arguments)})),Fi(t,"transitionend",e[205]),Fi(t,"dropfiles",e[221]),Fi(t,"measure",e[432]),Fi(t,"click",(function(){ii(e[43]?e[222]:x)&&(e[43]?e[222]:x).apply(this,arguments)})),$i(hc.call(null,t,{observeViewRect:!0,isMeasureRoot:!0})),$i(fc.call(null,t)),$i(gc.call(null,t))],i=!0)},p(i,a){(e=i)[41]?l?(l.p(e,a),1024&a[1]&&Ca(l,1)):(l=_h(e),l.c(),Ca(l,1),l.m(t,n)):l&&(Sa(),Ta(l,1,1,(()=>{l=null})),ka()),e[102]>0?s?s.p(e,a):(s=rf(e),s.c(),s.m(t,r)):s&&(s.d(1),s=null),e[61]?c?(c.p(e,a),1073741824&a[1]&&Ca(c,1)):(c=of(e),c.c(),Ca(c,1),c.m(t,null)):c&&(Sa(),Ta(c,1,1,(()=>{c=null})),ka()),(!o||16&a[0])&&_i(t,"id",e[4]),(!o||32768&a[2])&&_i(t,"class",e[77]),(!o||8192&a[2])&&_i(t,"data-env",e[75]),(!o||4096&a[0])&&_i(t,"dir",e[12])},i(e){o||(Ca(l),Ca(c),o=!0)},o(e){Ta(l),Ta(c),o=!1},d(n){n&&Ei(t),l&&l.d(),s&&s.d(),c&&c.d(),e[431](null),i=!1,oi(a)}}}const sf=1,cf=10;function uf(e,t,n){let r,o,i,a,l,s,c,u,d,p,h,f,m,g,y,$,b,v,w,S,k,C,T,M,P,R,I,L,z,F,_,B,N,j,W,U,H,G,X,Y,q,K,Q,J,ee,te,ne,re,oe,ie,le,se,ce,ue,de,pe,he,fe,me,ge,ye,$e,be,ve,we,Se,Te,Me,Pe,Ee,Re,Ie,Ae,Le,Fe,Oe,De,_e,Be,Ne,je,We,Ve,Ue,He,Ge,Ze,Xe,Ye,qe,Ke,Je,et,tt,nt,rt,ot,it,at,lt,st,ct,ht,ft,gt,yt,bt,wt,St,Mt,Pt,It,At,Ft,Dt,Bt,Nt,jt,Wt,Vt,Ut,Ht,Gt,Zt,Xt,Yt,qt,Kt,en,tn,nn,rn,on,an,ln,cn,un,dn,pn,hn,fn,mn,gn,yn,$n,bn,xn,wn,Sn,kn,Cn,Mn,Pn,En,Rn,In,An,Ln,zn,Fn,On,Dn,_n,Bn,Nn,jn,Vn,Un,Hn,Gn,Zn,Xn,Yn,qn,Qn,Jn,er,tr,nr,rr,ir,lr,sr,cr,ur,dr,pr,hr,fr,mr,gr,yr,$r,br,vr,xr,wr,Sr,kr,Tr,Mr,Pr,Er,Rr,Ir,zr,Fr,Or,_r=Jo,Br=Jo;ci(e,Qs,(e=>n(398,Zn=e))),e.$$.on_destroy.push((()=>_r())),e.$$.on_destroy.push((()=>Br()));const jr=or(),Wr=ta();let Vr,Ur,{class:Hr}=t,{layout:Gr}=t,{stores:Zr}=t,{locale:Xr}=t,{id:Yr}=t,{util:qr}=t,{utils:Kr}=t,{animations:Qr="auto"}=t,{disabled:Jr=!1}=t,{status:eo}=t,{previewUpscale:to=!1}=t,{previewPad:no=!1}=t,{previewMaskOpacity:ro=.95}=t,{previewImageDataMaxSize:oo}=t,{previewImageTextPixelRatio:io}=t,{markupMaskOpacity:ao=1}=t,{zoomMaskOpacity:lo=.85}=t,{elasticityMultiplier:so=10}=t,{willRevert:co=(()=>Promise.resolve(!0))}=t,{willProcessImage:uo=(()=>Promise.resolve(!0))}=t,{willRenderCanvas:po=ae}=t,{willRenderToolbar:ho=ae}=t,{willSetHistoryInitialState:fo=ae}=t,{enableButtonExport:mo=!0}=t,{enableButtonRevert:go=!0}=t,{enableNavigateHistory:yo=!0}=t,{enableToolbar:$o=!0}=t,{enableUtils:bo=!0}=t,{enableButtonClose:vo=!1}=t,{enableDropImage:wo=!1}=t,{enablePasteImage:So=!1}=t,{enableBrowseImage:ko=!1}=t,{enableTransparencyGrid:Co=!1}=t,{layoutDirectionPreference:Po="auto"}=t,{layoutHorizontalUtilsPreference:Eo="left"}=t,{layoutVerticalUtilsPreference:Ro="bottom"}=t,{layoutVerticalToolbarPreference:Ao="top"}=t,{layoutVerticalControlGroupsPreference:Lo="bottom"}=t,{layoutVerticalControlTabsPreference:zo="bottom"}=t,{textDirection:Fo}=t,{markupEditorZoomLevel:Oo=null}=t,{markupEditorZoomLevels:Do}=t,{markupEditorZoomAdjustStep:_o}=t,{markupEditorZoomAdjustFactor:Bo}=t,{markupEditorZoomAdjustWheelFactor:No}=t,{markupEditorInteractionMode:jo=!1}=t,{muteAudio:Wo=!0}=t,{willSetMediaInitialTimeOffset:Vo=((e,t)=>e*Rh(t[0]))}=t,{enablePan:Uo=!0}=t,{enableZoom:Ho=!0}=t,{enableZoomControls:Go=!0}=t,{enableZoomInput:Zo}=t,{enablePanInput:Xo}=t,{enableCanvasAlpha:Yo=!1}=t,{enablePanLimit:qo}=t,{panLimitGutterScalar:ei}=t,{zoomPresetOptions:ti=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=t,{zoomAdjustStep:ni=.25}=t,{zoomAdjustFactor:ri=.1}=t,{zoomAdjustWheelFactor:oi=1}=t,{zoomLevel:ii=null}=t,{imagePreviewSrc:ai}=t,{imageOrienter:ui={read:()=>1,apply:e=>e}}=t,{pluginComponents:di}=t,{pluginOptions:pi={}}=t;const hi=jr.sub,fi={};let{root:mi}=t;const gi=()=>{ot.setAttribute("data-redraw","true"),Ni.set({})},$i=Va(!0);ci(e,$i,(e=>n(464,Nt=e)));const bi=Va(void 0);ci(e,bi,(e=>n(406,ur=e)));const vi=Va(0);ci(e,vi,(e=>n(407,dr=e)));const xi=Va(0),wi=Va(!1),Si=e=>{wi.set("play"===e.type),jr.pub(e.type)};let ki,Ci,Ti,Mi,Pi=!1;const Ei=()=>{if(!o||!Ii())return;Mi=u,yi(bi,ur=void 0,ur);const e=ot;Pi=!1;const t=1/24,n=Di();(Math.abs(s*n-dr*n)<=t||n-n*dr<=t)&&yi(vi,dr=l,dr),Bi(Di()*dr),e.play().catch((()=>{}));const r=()=>{Ii()||(Ti=requestAnimationFrame(r),yi(vi,dr=_i()/Di(),dr),Mi>=0&&dr>=s&&(yi(vi,dr=s,dr),Ri()),u>-1&&(Pi=!0),Pi&&-1===u&&d>0&&(yi(vi,dr=a[d][0],dr),Bi(dr*Di())),gi())};r()},Ri=()=>{o&&!Ii()&&(yi(bi,ur=void 0,ur),Mi=void 0,ot.pause(),cancelAnimationFrame(Ti),gi())},Ii=()=>ot&&ot.paused,Ai=()=>{if(o)return Ii()?Ei():Ri()},Li=()=>{o&&(ot.muted=!0)},zi=()=>{o&&(ot.muted=!1)},Fi=()=>{o&&yi(Oi,cr=!cr,cr)},Oi=Va(Wo);ci(e,Oi,(e=>n(405,cr=e)));const Di=()=>{if(o)return ot.duration},_i=()=>{if(o)return ot.currentTime},Bi=e=>{o&&(ot.currentTime=e,xi.set(e))};na("previewcontrols",{play:Ei,pause:Ri,togglePlayPause:Ai,mute:Li,unmute:zi,toggleMute:Fi,setCurrentTime:Bi,getCurrentTime:_i,getDuration:Di,currentTime:xi,frameOffset:vi,framePeekOffset:bi,isPlaying:wi,isMuted:Oi});const Ni=Va({});ci(e,Ni,(e=>n(53,Vt=e))),na("redrawTrigger",Ni);const ji=Va(so);ci(e,ji,(e=>n(480,lr=e))),na("elasticityMultiplier",ji);let Wi=[];const Vi=Ks();ci(e,Vi,(e=>n(102,Or=e)));const Ui=Ls()||1024,Hi=Qe(Ui,Ui),Gi=Tl(),Zi=e=>Promise.resolve(ir&&ir(e,{resourceType:"image"})).then((t=>{if(!1===t)return;const{headers:n,credentials:r}=t||{};return fetch(e,{headers:n,credentials:r}).then((e=>{if(200!==e.status)throw"".concat(e.status," (").concat(e.statusText,")");return e.blob()})).then((e=>vh(e,ui,Gi))).then((e=>xh(e,f)))}));let{imageSourceToImageData:Xi=(e=>V(e)?Zi(e):Qt(e)?new Promise((t=>t(E(e)))):vn(e)||Jt(e)?vh(e,ui,Gi).then((e=>xh(e,f))):void 0)}=t;const Yi=(()=>{let e,t;const n=mh.reduce(((e,n)=>(e[n]=function(e,t,n){let r=[];return{set:t,update:n,publish:e=>{r.forEach((t=>t(e)))},subscribe:t=>(r.push(t),e(t),()=>{r=r.filter((e=>e!==t))})}}((e=>{if(!t)return e();t.stores[n].subscribe(e)()}),(e=>{t&&t.stores[n].set(e)}),(e=>{t&&t.stores[n].update(e)})),e)),{});return{update:r=>{if(t=r,e&&(e.forEach((e=>e())),e=void 0),!r)return n.file.publish(void 0),void n.loadState.publish(void 0);e=mh.map((e=>r.stores[e].subscribe((t=>{n[e].publish(t)}))))},stores:n,destroy:()=>{e&&e.forEach((e=>e()))}}})(),{file:qi,size:Ki,duration:Qi,trim:Ji,volume:ra,minDuration:oa,maxDuration:ia,loadState:la,processState:sa,cropAspectRatio:ca,cropLimitToImage:ua,crop:da,cropMinSize:pa,cropMaxSize:ha,cropRange:fa,cropOrigin:ma,cropRectAspectRatio:ga,rotation:ya,rotationRange:$a,targetSize:ba,flipX:va,flipY:xa,backgroundColor:wa,backgroundImage:Sa,colorMatrix:ka,convolutionMatrix:Ca,gamma:Ta,vignette:Ma,noise:Pa,decoration:Ea,annotation:Ra,manipulation:Ia,redaction:Aa,frame:La,selection:za,state:Fa}=Yi.stores;ci(e,qi,(e=>n(382,hn=e))),ci(e,Ki,(e=>n(355,lt=e))),ci(e,Qi,(e=>n(408,pr=e))),ci(e,Ji,(e=>n(403,rr=e))),ci(e,ra,(e=>n(404,sr=e))),ci(e,ia,(e=>n(409,hr=e))),ci(e,la,(e=>n(374,tn=e))),ci(e,sa,(e=>n(373,en=e))),ci(e,ca,(e=>n(477,Yn=e))),ci(e,ua,(e=>n(86,yr=e))),ci(e,da,(e=>n(393,Ln=e))),ci(e,ya,(e=>n(358,ht=e))),ci(e,va,(e=>n(357,ct=e))),ci(e,xa,(e=>n(356,st=e))),ci(e,wa,(e=>n(364,Ft=e))),ci(e,Ea,(e=>n(49,at=e))),ci(e,Ra,(e=>n(50,ft=e))),ci(e,Ia,(e=>n(361,Pt=e))),ci(e,Aa,(e=>n(362,It=e))),ci(e,La,(e=>n(48,it=e))),ci(e,za,(e=>n(60,er=e))),ci(e,Fa,(e=>n(466,gn=e)));const Oa=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise(((r,o)=>{if(bh(e))return void(ar()?(async e=>{const t=await(e=>new Promise((t=>{const n=new FileReader;n.onload=()=>t(n.result),n.readAsArrayBuffer(e)})))(e);return function(e){let{limit:t=1024}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0;if(n+=4,1718909296!==e.getUint32(n))return 0;n+=4;const r=e.getUint32(n);return 1836069938===r?((e,t,n)=>{let r=!1,o=-1;for(let c=t;c<n;c++)if(r||1953653099!==e.getUint32(c)||(r=!0,c+=4),r&&64==e.getUint8(c)){o=c;break}if(o<0)return 0;const i=e.getUint32(o-28),a=e.getUint32(o-20),l=e.getUint32(o-32),s=e.getUint32(o-16);return 65536===i&&4294901760===a?90:4294901760===l&&4294901760===s?180:4294901760===i&&65536===a?270:0})(e,n,t):1903435808===r?(e=>{const t=Oh(e).find((e=>1836019574===e.type));if(!t)return 0;const n=Oh(e,t.bodyOffset,t.bodySize);n.filter((e=>1953653099===e.type)).forEach((t=>{n.push(...Oh(e,t.bodyOffset,t.bodySize))}));const r=[1836476516,1953196132],o=n.filter((e=>r.includes(e.type)));for(const{type:i,bodyOffset:a}of o){let t=a+4;t+=1836476516===i?32:36,t+=1===e.getUint8(a)?12:0;const n=e.getInt32(t),r=e.getInt32(t+4);if(0===n&&r>0)return 90;if(n<0&&0===r)return 180;if(0===n&&r<0)return 270}return 0})(e):0}(new DataView(t))})(e):Promise.resolve()).then((t=>{const n=document.createElement("video");n.onerror=()=>console.error(n.error),n.playsInline=!0,n.preload="auto",n.onloadeddata=()=>{n.onloadeddata=void 0,n.dataset.rotation=t||"0",Pl(n).then((()=>{const e=Vo(n.duration,rr||[[0,1]]);e>0?(n.onseeked=()=>{n.onseeked=void 0,r(n)},n.currentTime=e):(n.currentTime=e,r(n))}))},n.src=URL.createObjectURL(e),n.load()}));let i,a=!1;t.cancel=()=>a=!0;const l=Date.now();Xi(e).then((e=>{const t=Date.now()-l;clearTimeout(i),i=setTimeout((()=>{a||r(e)}),Math.max(0,n-t))})).catch(o)}))},{images:Da,shapePreprocessor:_a,imageScrambler:Ba,imageRedactionRendering:Na,willRequest:ja,willRequestResource:Ha}=Zr;let Ga;ci(e,Da,(e=>n(402,nr=e))),ci(e,_a,(e=>n(401,tr=e))),ci(e,Ba,(e=>n(365,Dt=e))),ci(e,Na,(e=>n(363,At=e))),ci(e,ja,(e=>n(82,ir=e))),ci(e,Ha,(e=>n(93,kr=e)));const Za=Ua(Sa,((e,t)=>{if(!e)return t(void 0);Ga&&(Ga.cancel(),Ga=void 0),Ga={cancel:x},Oa(e,Ga).then(t).catch((e=>{}))})),Xa=Fa.subscribe((e=>jr.pub("update",e))),Ya=Va();na("ui",Va({})),na("selection",za);const qa=Va(!0);ci(e,qa,(e=>n(95,Mr=e)));const Ka=Va(!0);ci(e,Ka,(e=>n(97,Er=e)));const Qa=Va(!0);ci(e,Qa,(e=>n(400,Jn=e)));const Ja=Va(!0);ci(e,Ja,(e=>n(478,qn=e)));const el=Va(!0);ci(e,el,(e=>n(98,Rr=e)));const tl=Va();ci(e,tl,(e=>n(99,Ir=e)));const nl=Va();ci(e,nl,(e=>n(479,Qn=e)));const rl=Ua([nl,Ja],(()=>void 0!==Qn?Qn:qn));ci(e,rl,(e=>n(96,Pr=e)));const ol=Va([0,0,0]);ci(e,ol,(e=>n(57,wn=e)));const il=Va([1,1,1]);ci(e,il,(e=>n(462,Mt=e)));const al=Ks([1,1,1]);ci(e,al,(e=>n(461,St=e)));const ll=Va();ci(e,ll,(e=>n(92,Sr=e)));const cl=Va(),ul=Va();ci(e,ul,(e=>n(52,jt=e)));const dl=Va();ci(e,dl,(e=>n(359,yt=e)));const pl=Va(dt());ci(e,pl,(e=>n(81,yn=e)));const fl=Va(0);ci(e,fl,(e=>n(399,Xn=e)));const ml=Va(dt());ci(e,ml,(e=>n(85,gr=e)));const gl=Va();ci(e,gl,(e=>n(459,rt=e)));const yl=$h("(pointer: fine)",(e=>e?"pointer-fine":"pointer-coarse"));ci(e,yl,(e=>n(380,dn=e)));const $l=$h("(hover: hover)",(e=>e?"pointer-hover":"pointer-no-hover"));ci(e,$l,(e=>n(379,un=e)));const bl=Va(!1),vl=Va(!1);ci(e,vl,(e=>n(360,wt=e)));const xl=Wa(void 0,(e=>{const t=Ks(0),n=[vl.subscribe((e=>{t.set(e?1:0)})),t.subscribe(e)];return()=>n.forEach((e=>e()))}));ci(e,xl,(e=>n(460,bt=e)));const wl=Va();ci(e,wl,(e=>n(465,an=e)));const Sl=Va();let kl;ci(e,Sl,(e=>n(54,Ht=e))),na("isAnimated",Sl);const Cl=Va(to);ci(e,Cl,(e=>n(383,fn=e)));const Ml=Va(!1);ci(e,Ml,(e=>n(471,Dn=e))),na("imageIsStatic",Ml);const El=Va();ci(e,El,(e=>n(472,_n=e)));const Rl=Va();ci(e,Rl,(e=>n(469,Fn=e)));const Il=Wa(void 0,(e=>{const t=Va(void 0),n=[da.subscribe((()=>{if(!Ln)return;if(Dn)return t.set(ut(Ln));const e=pu(Ln,Fn,5*so);t.set(e)})),t.subscribe(e)];return()=>n.forEach((e=>e()))})),Al=Va();ci(e,Al,(e=>n(468,An=e)));const Ll=Va();ci(e,Ll,(e=>n(470,On=e)));const zl=Va(void 0);ci(e,zl,(e=>n(475,Un=e)));const Fl=Va(ke());ci(e,Fl,(e=>n(476,Hn=e)));const Ol=(e,t)=>{if(!t||!e)return{top:0,right:0,bottom:0,left:0};const n=Mo(t,e,m),r=To(n,e);return{top:Math.abs(r.top),right:Math.abs(r.right),bottom:Math.abs(r.bottom),left:Math.abs(r.left)}},Dl=Va({}),_l=Ua([gl,pl,ml,Dl],((e,t)=>{let[n,r,o,i]=e;if(!n)return t(void 0);let a=0;1!==L.length||p||"bottom"===Ao||(a=o.y+o.height),t($t(n.x+r.x,n.y+r.y+a,n.width,n.height))}));let Bl={left:0,right:0,top:0,bottom:0};const Nl=Va(!1),jl=Ua([Nl,La,_l,vl],((e,t)=>{let[n,r,o,i]=e;if(!o)return t({left:0,right:0,top:0,bottom:0});if(!n)return;const a=Math.min(o.width,o.height),l=Ol({width:a,height:a},r);xe(Bl.top,4)===xe(l.top,4)&&xe(Bl.bottom,4)===xe(l.bottom,4)&&xe(Bl.right,4)===xe(l.right,4)&&xe(Bl.left,4)===xe(l.left,4)||(Bl=l,t(l))}));ci(e,jl,(e=>n(391,En=e)));const Wl=Ua([Nl,jl],((e,t)=>{let[n,r]=e;if(!n)return t(!1);t(Object.values(r).some((e=>e>0)))}));ci(e,Wl,(e=>n(392,Rn=e)));const Vl=Ua([Nl,gl,Wl,jl],((e,t)=>{let[n,r,o,i]=e;if(r)return n&&o?void t($t(r.x+i.left,r.y+i.top,r.width-i.left-i.right,r.height-i.top-i.bottom)):t({...r})})),Ul=Ua([_l,Wl,jl],((e,t)=>{let[n,r,o]=e;return n?r?void t($t(n.x+o.left,n.y+o.top,n.width-o.left-o.right,n.height-o.top-o.bottom)):t(n):t(void 0)}));ci(e,Ul,(e=>n(51,gt=e)));const Hl=Ua([Ml,Ki,ya],((e,t)=>{let[n,r,o]=e;if(!n||!r)return t(void 0);const i=pt(r);t(Et(i,o))})),Gl=Ua([Hl],((e,t)=>{let[n]=e;if(!n)return t(void 0);const r=mt(n);t(_t(r))}));ci(e,Gl,(e=>n(394,zn=e)));const Zl=Ua([Ul,da,Gl,Cl],((e,t)=>{let[n,r,o,i]=e;if(!n||!r||_n||Fn)return;const{width:a,height:l}=o||r,s=Math.min(n.width/a,n.height/l);t(i?s:Math.min(1,s))}));ci(e,Zl,(e=>n(395,Nn=e))),na("imageStaticVisualCorners",Ua([Ml,Ki,ya,Ul,gl,Zl],((e,t)=>{let[n,r,o,i,a,l]=e;if(!(n&&i&&a&&r))return t(void 0);const s=pt(r),c=_t(xt(s,l)),u=Rt(i,c);c.x=u.x,c.y=u.y,t(Et(c,o))})));const Xl=Va(void 0);ci(e,Xl,(e=>n(397,Gn=e)));const Yl=Ua([da,Ul],(e=>{let[t,n]=e;if(n&&t)return Math.min(n.width/t.width,n.height/t.height)})),ql=Ua([da,Al],(e=>{let[t,n]=e;return t&&n?Math.min(t.width/n.width,t.height/n.height):1}));ci(e,ql,(e=>n(101,Fr=e)));const Kl=Ua([Xl,ql],(e=>{let[t,n]=e;return t&&n?n*t:1}));ci(e,Kl,(e=>n(474,jn=e)));const Ql=Va(ke());ci(e,Ql,(e=>n(396,Vn=e)));const Jl=Va({scalar:jn,translation:Vn}),es=()=>{Jl.set({scalar:void 0,translation:ke()})},ts=Wa(void 0,(e=>{const t=Ks(void 0,{precision:1e-4}),n=1===Du()?e=>Ot(e,Math.round):ae,r=()=>{if(!An)return;const e=wt||!an;if(Dn){const n=ut(An);return vt(n,Hn),vt(n,gt),t.set(n,{hard:e})}const r=pu(An,Un,sf*so);r.width<0&&(r.width=0,r.x=An.x),r.height<0&&(r.height=0,r.y=An.y),vt(r,gt),vt(r,Vn),xt(r,jn),!e&&n(r),t.set(r,{hard:e})},o=[Ul.subscribe(r),Al.subscribe(r),Kl.subscribe(r),Ql.subscribe(r),La.subscribe(r),t.subscribe(e)];return()=>o.forEach((e=>e()))}));ci(e,ts,(e=>n(59,Pn=e)));const ns=Va(1);ci(e,ns,(e=>n(467,In=e)));const rs=()=>{if(!Ln||!gt)return;let e=kt(ut(Ln),Nn||1);const t=Rt(gt,kt(ut(zn),Nn));vt(e,t);const n=rt.width/e.width,r=rt.height/e.height,o=Math.min(1,n,r);ns.set(o),xt(e,o),((e,t)=>{const[n,r,o,i]=zt(e);n<t.y&&(e.y=Math.max(t.y,e.y)),r>t.width&&(e.x=t.width-e.width),o>t.height&&(e.y=t.height-e.height),i<t.x&&(e.x=Math.max(t.x,e.x))})(e,{...rt,x:0,y:0}),Al.set(e)},os=Ua([Ul,Zl,da,Ki],((e,t)=>{let[n,r,o,i]=e;n&&(o||i)&&t(is(n,r||1,o||i))}));ci(e,os,(e=>n(100,zr=e)));const is=(e,t,n)=>n.width<=e.width&&n.height<=e.height?Rt(e,kt(ut(n),t)):Lt(e,Tt(n));let as,ss;const cs=e=>{if(p&&as&&Ct(as,e)&&ss===Nn)return;if(Dn)return rs();as=e,ss=Nn;const t=is(e,Nn,Ln||lt);Al.set(t)};let us=!1;const ps=Zl.subscribe((e=>{!us&&void 0!==e&&Ln&&(cs(gt),us=!0)})),hs=Ul.subscribe((e=>{e&&void 0!==Nn&&Ln&&cs(e)})),fs=Ml.subscribe((e=>{!e&&gt&&cs(gt)}));let ms;const gs=Ll.subscribe((e=>{if(!e)return ms=void 0,void yi(El,_n=void 0,_n);ms=Bn;const t=ut(Ln);El.set(t)})),ys=Al.subscribe((e=>{if(!e||!On)return;const t=(n=ut(e),r=On,n.x-=r.x,n.y-=r.y,n.width-=r.width,n.height-=r.height,n);var n,r;((e,t)=>{e.x/=t,e.y/=t,e.width/=t,e.height/=t})(t,ms);const o=((e,t)=>(e.x+=t.x,e.y+=t.y,e.width+=t.width,e.height+=t.height,e))(ut(_n),t);da.set(o)})),$s=da.subscribe((e=>{if(!e||!An)return;if(Dn)return void(On||rs());if(wt||On||Fn)return;const t=Tt(An),n=Tt(e);if(xe(t,6)===xe(n,6))return;const{width:r,height:o}=zn||Ln,i=Math.min(gt.width/r,gt.height/o),a=Qe(e.width*i,e.height*i),l=.5*(An.width-a.width),s=.5*(An.height-a.height),c=$t(An.x+l,An.y+s,a.width,a.height);Al.set(c)})),bs=Ua([Zl,da,Al,Ml],((e,t)=>{let[n,r,o,i]=e;if(!n||!r||!o)return;if(i)return t(In);const a=o.width/r.width,l=o.height/r.height;t(Math.max(a,l)/n)})),vs=Ua([Zl,bs],((e,t)=>{let[n,r]=e;r&&t(n*r)}));ci(e,vs,(e=>n(473,Bn=e)));let xs={left:0,right:0,top:0,bottom:0};const ws=Ua([La,Al],((e,t)=>{let[n,r]=e;if(!r)return t(xs);const o=Ol(r,n);xe(xs.top,4)===xe(o.top,4)&&xe(xs.bottom,4)===xe(o.bottom,4)&&xe(xs.right,4)===xe(o.right,4)&&xe(xs.left,4)===xe(o.left,4)||(xs=o,t(o))})),Ss=Ua([ws],((e,t)=>{let[n]=e;t(Object.values(n).some((e=>e>0)))})),ks=Ks(.075,{stiffness:.03,damping:.4,precision:.001}),Cs=Ua([al,ol,ks,ts,Kl,La,Ss,ws,Wl],((e,t)=>{let[n,r,o,i,a,l,s,c,u]=e;if(!i||p)return t([]);let{x:d,y:h,width:f,height:m}=i;d+=.5,h+=.5,f-=.5,m-=.5;const g=[];if(l){if(s){let{left:e,right:t,top:n,bottom:o}=c;e*=a,t*=a,n*=a,o*=a;const i=Mh(r)?[1,1,1,.125]:[0,0,0,.075];g.push({x:d-e-.5,y:h-n-.5,width:f+e+t+1,height:m+n+o+1,strokeWidth:1,strokeColor:i,opacity:u?1:.5})}const e=Mh(n);l&&l.frameColor&&Mh(l.frameColor)||e||(g.push({x:d-1,y:h-1,width:f+2,height:m+2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:o}),g.push({x:d+1,y:h+1,width:f-2,height:m-2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:o}))}t([...g,{x:d,y:h,width:f,height:m,strokeWidth:1,strokeColor:n,opacity:o}])})),Ts=Va([]);ci(e,Ts,(e=>n(385,$n=e)));const Ms=Ua([Cs,Ts],((e,t)=>{let[n,r]=e;t([...n,...r])}));ci(e,Ms,(e=>n(94,Tr=e)));const Ps=Ks(0,{precision:.001});ci(e,Ps,(e=>n(387,xn=e)));const Es=Ks();ci(e,Es,(e=>n(390,Cn=e)));const Rs=Ks();ci(e,Rs,(e=>n(389,kn=e)));const Is=Ks();ci(e,Is,(e=>n(388,Sn=e)));const As=Ks();ci(e,As,(e=>n(386,bn=e)));const Fs=Va(!1);ci(e,Fs,(e=>n(372,Kt=e)));const Os=Va();let Ds;ci(e,Os,(e=>n(375,nn=e)));const _s=Ua([Fs,Os],((e,t)=>{let[r,o]=e;if(!r||!o)return void t(void 0);if(Ds&&(Ds.cancel(),n(282,Ds=void 0)),Io(o))return t(D(o));const i=ac.length?0:Ht?250:0;n(282,Ds={cancel:x}),Oa(o,Ds,i).then(t).catch((e=>{yi(la,tn.error=e,tn)})).finally((()=>{n(282,Ds=void 0)}))}));_r(),_r=li(_s,(e=>n(354,ot=e)));let{imagePreviewCurrent:Bs}=t;const Ns=Va({});ci(e,Ns,(e=>n(377,ln=e)));const js=Va([]);ci(e,js,(e=>n(87,$r=e)));const Ws=Ua([Ul,dl,Ki,Il,Al,vs,ya,va,xa,Kl,Ql,bl],((e,t)=>{let[n,r,o,i,a,l,s,c,u,d,p,h]=e;if(!n||!a)return;const f=ls(n,r,o,i,a,d,p,l,s,c,u);!h&&P(f),t(f)}));ci(e,Ws,(e=>n(378,cn=e)));const Vs=Ua([ka,Ca,Ta,Ma,Pa],((e,t)=>{let[n,r,o,i,a]=e;const l=n&&Object.keys(n).map((e=>n[e])).filter(Boolean);t({gamma:o||void 0,vignette:i||void 0,noise:a||void 0,convolutionMatrix:r||void 0,colorMatrix:l&&l.length&&Ko(l)})}));let Us,Hs;const Gs=(()=>{if(!Tn())return!1;const e=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/i)||[],[,t,n]=e.map((e=>parseInt(e,10)||0));return t>13||13===t&&n>=4})(),Zs=Va({});ci(e,Zs,(e=>n(366,Wt=e))),na("env",Zs);const Xs=Du(),qs=Wa(Xs,(e=>{const t=()=>e(Du()),n=matchMedia("(resolution: ".concat(Xs,"dppx)"));return n.addListener(t),()=>n.removeListener(t)}));ci(e,qs,(e=>n(58,Mn=e)));const Js=((e,t)=>{const{sub:n,pub:r}=or(),o=[],i=Va(0),a=[],l=()=>a.forEach((e=>e({index:si(i),length:o.length}))),s={get index(){return si(i)},set index(e){e=Number.isInteger(e)?e:0,e=sl(e,0,o.length-1),i.set(e),t(o[s.index]),l()},get state(){return o[o.length-1]},length:()=>o.length,undo(){const e=s.index--;return r("undo",e),e},redo(){const e=s.index++;return r("redo",s.index),e},revert(){o.length=1,s.index=0,r("revert")},write(n){n&&t({...e(),...n});const a=e(),c=o[o.length-1];JSON.stringify(a)!==JSON.stringify(c)&&(o.length=s.index+1,o.push(a),i.set(o.length-1),l(),r("writehistory"))},set(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.length=0,s.index=0;const t=Array.isArray(e)?e:[e];o.push(...t),s.index=o.length-1},get:()=>[...o],subscribe:e=>(a.push(e),e({index:s.index,length:o.length}),()=>a.splice(a.indexOf(e),1)),on:n};return s})((()=>gn),(e=>{yi(Fa,gn=e,gn),pl.set(yn)}));Br(),Br=li(Js,(e=>n(384,mn=e)));const ec=()=>{const e={x:0,y:0,...lt},t=Ot(Lt(e,gn.cropAspectRatio),Math.round),n=fo({...gn,rotation:0,crop:t},gn),r=[n];JSON.stringify(n)!==JSON.stringify(gn)&&r.push({...gn}),Js.set(r)},tc=la.subscribe((e=>{e&&e.complete&&ec()})),nc=()=>co().then((e=>e&&Js.revert())),rc=Va(!1);ci(e,rc,(e=>n(367,Ut=e)));const oc=()=>{yi(rc,Ut=!0,Ut),uo().then((e=>{if(!e)return void yi(rc,Ut=!1,Ut);let t;t=Ac.subscribe((e=>{1===e&&(t&&t(),Wr("processImage"))}))}))},ic=sa.subscribe((e=>{if(!e)return void yi(rc,Ut=!1,Ut);yi(rc,Ut=!0,Ut);const{complete:t,abort:n}=e;(t||n)&&yi(rc,Ut=!1,Ut)})),ac=(()=>{const e=[],t=[],n=[],r=()=>{t.forEach((e=>e(n)))},o=t=>{t.unsub=t.subscribe((o=>((t,o)=>{const i=e.indexOf(t);i<0||(n[i]=o,r())})(t,o))),r()};return{get length(){return e.length},clear:()=>{e.forEach((e=>e.unsub())),e.length=0,n.length=0},unshift:t=>{e.unshift(t),o(t)},get:t=>e[t],push:t=>{e.push(t),o(t)},remove:t=>{t.unsub();const r=e.indexOf(t);e.splice(r,1),n.splice(r,1)},forEach:t=>e.forEach(t),filter:t=>e.filter(t),subscribe:e=>(t.push(e),e(n),()=>{t.splice(t.indexOf(e),1)})}})();ci(e,ac,(e=>n(56,rn=e)));const lc=Ua([ac],((e,t)=>{let[n]=e;if(!n.length)return t();const{origin:r,translation:o,rotation:i,scale:a}=n[0];t({origin:r,translation:o,rotation:i,scale:a})})),sc=Va();ci(e,sc,(e=>n(381,pn=e)));let cc,uc=[];const dc=Va(),pc=Va(),hc=Ua([Xl,pc,Zl,Yl],(e=>{let[t,n,r,o]=e;return t||(n||r<1?o:1)})),fc={...Zr,imageFile:qi,imageSize:Ki,mediaDuration:Qi,mediaMinDuration:oa,mediaMaxDuration:ia,mediaTrim:Ji,imageBackgroundColor:wa,imageBackgroundImage:Sa,imageCropAspectRatio:ca,imageCropMinSize:pa,imageCropMaxSize:ha,imageCropLimitToImage:ua,imageCropRect:da,imageCropRectOrigin:ma,imageCropRectSnapshot:El,imageCropRectAspectRatio:ga,imageCropRange:fa,imageRotation:ya,imageRotationRange:$a,imageFlipX:va,imageFlipY:xa,imageOutputSize:ba,imageColorMatrix:ka,imageConvolutionMatrix:Ca,imageGamma:Ta,imageVignette:Ma,imageNoise:Pa,imageManipulation:Ia,imageDecoration:Ea,imageAnnotation:Ra,imageRedaction:Aa,imageFrame:La,imagePreview:_s,imagePreviewSource:Os,imageTransforms:Ws,imagePreviewModifiers:Ns,history:Js,animation:wl,pixelRatio:qs,elasticityMultiplier:so,scrollElasticity:cf,rangeInputElasticity:5,redrawTrigger:Ni,pointerAccuracy:yl,pointerHoverable:$l,env:Zs,rootRect:dl,stageRect:Ul,stageRectBase:_l,stageRecenter:Dl,stageScalar:Zl,stagePadding:jl,stagePadded:Wl,presentationScalar:vs,imagePreviewUpscale:pc,utilRect:gl,utilRectPadded:Vl,allowPlayPause:$i,allowPan:qa,allowZoom:Ka,allowZoomControls:Qa,enableZoomInput:el,enablePanInput:Ja,enablePanInputStatus:rl,imageSelectionMultiTouching:dc,rootBackgroundColor:ol,rootForegroundColor:il,rootLineColor:al,rootColorSecondary:cl,imageOutlineOpacity:ks,utilTools:sc,imageSelectionPan:Ql,imageSelectionZoom:Xl,imageSelectionZoomCurrent:hc,imageSelectionStageFitScalar:Yl,imageSelectionStoredState:Jl,imageOverlayMarkup:Ts,interfaceImages:js,isInteracting:vl,isTransformingImage:bl,isInteractingFraction:xl,imageCropRectIntent:Rl,imageCropRectPresentation:Il,imageSelectionRect:Al,imageSelectionRectIntent:zl,imageSelectionRectPresentation:ts,imageSelectionRectSnapshot:Ll,imageScalar:bs,imageTransformsInterpolated:lc,imageEffects:Vs};delete fc.image;const mc="util-"+Z();let gc=[];const yc=e=>z.find((t=>{let[n]=t;return e===n}));let bc=[],vc=Tn();const xc=(e,t,n)=>{let r=me.getPropertyValue(e);r=n?n(r):/^[0-9]+$/.test(r)?parseFloat(r):void 0,t.set(r,{hard:!Ht})},wc=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=(e=>{const t=me.getPropertyValue(e);return Lp(t)})(e);r&&0!==r[3]&&(n||(r.length=3),t.set(r,{hard:!Ht}))},Sc=Va();ci(e,Sc,(e=>n(88,br=e)));const Cc=Va();ci(e,Cc,(e=>n(89,vr=e)));const Tc=Va();ci(e,Tc,(e=>n(90,xr=e)));const Mc=Ks(0,{damping:.9});ci(e,Mc,(e=>n(91,wr=e)));const Pc=()=>{wc("color",il),wc(Yo?"--color-background":"background-color",ol),wc("outline-color",al),wc("--color-primary",ll),wc("--color-secondary",cl),wc("--grid-color-even",Cc,!0),wc("--grid-color-odd",Tc,!0),xc("--grid-size",Sc),xc("--editor-inset-top",fl,(e=>parseInt(e,10)))},Ec=Ua([Ws,Vs,wa,Za],(e=>{let[t,n,r,o]=e;return t&&{...t,...n,backgroundColor:r,backgroundImage:o}}));ci(e,Ec,(e=>n(376,on=e)));const Rc=e=>{ac.forEach(((t,n)=>{const r=0===n?1:0;t.set({...e,opacity:r,resize:1},an)}))};let Ic;const Ac=Ys(void 0,{duration:500});let Lc;ci(e,Ac,(e=>n(55,Yt=e)));const zc=Va(!1);let Fc;ci(e,zc,(e=>n(371,qt=e)));const Oc=Ks(void 0,{stiffness:.1,damping:.7,precision:.25});ci(e,Oc,(e=>n(83,fr=e)));const Dc=Ks(0,{stiffness:.1,precision:.05});ci(e,Dc,(e=>n(84,mr=e)));const _c=Ks(0,{stiffness:.02,damping:.5,precision:.25});ci(e,_c,(e=>n(369,Zt=e)));const Bc=Ks(void 0,{stiffness:.02,damping:.5,precision:.25});ci(e,Bc,(e=>n(370,Xt=e)));const Nc=Ks(void 0,{stiffness:.02,damping:.5,precision:.25});let jc;ci(e,Nc,(e=>n(368,Gt=e)));const Wc=()=>{Wr("abortLoadImage")},Vc=()=>{Wr("abortProcessImage"),yi(rc,Ut=!1,Ut)},Uc=e=>{e.target&&"true"===e.target.dataset.touchScroll||e.preventDefault()},Hc=Gs?e=>{const t=e.touches?e.touches[0]:e;t.pageX>20&&t.pageX<window.innerWidth-20||Uc(e)}:x,Gc=Va([]);ci(e,Gc,(e=>n(463,Bt=e))),na("keysPressed",Gc);const Zc=e=>{!e||Kn(e)&&!(e=>/^image/.test(e.type)&&!/svg/.test(e.type))(e)||!Kn(e)&&!/^http/.test(e)||Wr("loadImage",e)},Xc=e=>{e&&Zc(e)};let Yc,qc,Kc=[];const Qc=Va();na("rootPortal",Qc),na("rootRect",dl);const Jc=()=>({foregroundColor:[...Mt],lineColor:[...St],utilVisibility:{...N},isInteracting:wt,isInteractingFraction:bt,rootRect:ut(yt),stageRect:ut(gt),manipulationShapesDirty:yu,annotationShapesDirty:hu,decorationShapesDirty:mu,frameShapesDirty:gu}),eu=(e,t,n)=>xo(e,Qe(t.width/n,t.height/n)),tu=(e,t,n)=>{var r;return e._translate=Ce((r=t).x,r.y),e._scale=n,e},nu=e=>{const t=[];return e.forEach((e=>t.push(ru(e)))),t.filter(Boolean)},ru=e=>Dr(e)?(e.points=[Ce(e.x1,e.y1),Ce(e.x2,e.y2)],e):(!(e=>Ar(e)&&!e.text.length)(e)||e.backgroundColor&&0!==e.backgroundColor[3]||(Lr(e)&&(e.width=5,e.height=e.lineHeight),e.strokeWidth=1,e.strokeColor=[1,1,1,.5],e.backgroundColor=[0,0,0,.1]),e);let ou,iu=[],au=[],lu=[],su=[],cu=[],uu={};const du=(e,t,n,r,o,i,a)=>{const{manipulationShapesDirty:l,annotationShapesDirty:s,decorationShapesDirty:c,frameShapesDirty:u,selectionRect:d,scale:p}=e,h=ou!==p,f=h||!Ct(uu,d);f&&(ou=p,uu=d),l&&(lu=t.filter(Nr).map(Cr).map((e=>xo(e,lt)))),(s||n!==ft)&&(iu=n.filter(Nr).map(Cr).sort(((e,t)=>e.alwaysOnTop?1:t.alwaysOnTop?-1:0)).map((e=>xo(e,lt)))),(h||fu||s||n!==ft)&&(au=nu(iu.map((e=>m(e,{flipX:ct,flipY:st,rotation:ht,scale:p,context:pt(lt)}))).flat())),(c||r!==at||f)&&(su=nu(r.filter(Nr).map(Cr).sort(((e,t)=>e.alwaysOnTop?1:t.alwaysOnTop?-1:0)).map((e=>eu(e,d,p))).map((e=>m(e,{context:d}))).flat().map((e=>tu(e,d,p))))),(u||i!==it||f)&&(cu=i?nu([i].map(Cr).map((e=>eu(e,d,p))).map(m).flat().map((e=>tu(e,d,p)))):[]);let g=nu(o.filter(Nr));return"undefined"!=typeof window&&(e=>{if(e&&e._7vysqoe)return;const[t]=[[85,110,108,105,99,101,110,115,101,100,32,80,105,110,116,117,114,97,32,105,110,115,116,97,110,99,101]].map((e=>e.map((e=>String.fromCharCode(e))).join("")));g=[...g,{x:d.x+.5*d.width-82,y:d.y+d.height-16-12,width:164,height:16,text:t,fontWeight:900,fontSize:12,color:[1,1,1,.25]}]})(window),{manipulationShapesDirty:l,manipulationShapes:lu,annotationShapesDirty:s,annotationShapes:au,decorationShapesDirty:c,decorationShapes:su,frameShapesDirty:u,frameShapes:cu,interfaceShapes:g,selectionShapes:a.map(Cr).map((e=>xo(e,lt)))}};let hu=!0,fu=!0,mu=!0,gu=!0,yu=!0;return ea((()=>{Ri(),ot&&V(ot.src)&&/^blob:/.test(ot.src)&&URL.revokeObjectURL(ot.src),Xa(),hs(),ps(),fs(),gs(),ys(),$s(),tc(),ic(),yl.destroy(),$l.destroy(),Yi.destroy(),ac.clear(),iu.length=0,au.length=0,lu.length=0,su.length=0,cu.length=0;try{n(228,Bs=void 0),n(283,Ic=void 0)}catch(e){}})),e.$$set=e=>{"class"in e&&n(229,Hr=e.class),"layout"in e&&n(230,Gr=e.layout),"stores"in e&&n(231,Zr=e.stores),"locale"in e&&n(3,Xr=e.locale),"id"in e&&n(4,Yr=e.id),"util"in e&&n(232,qr=e.util),"utils"in e&&n(233,Kr=e.utils),"animations"in e&&n(234,Qr=e.animations),"disabled"in e&&n(235,Jr=e.disabled),"status"in e&&n(227,eo=e.status),"previewUpscale"in e&&n(236,to=e.previewUpscale),"previewPad"in e&&n(237,no=e.previewPad),"previewMaskOpacity"in e&&n(5,ro=e.previewMaskOpacity),"previewImageDataMaxSize"in e&&n(238,oo=e.previewImageDataMaxSize),"previewImageTextPixelRatio"in e&&n(6,io=e.previewImageTextPixelRatio),"markupMaskOpacity"in e&&n(7,ao=e.markupMaskOpacity),"zoomMaskOpacity"in e&&n(239,lo=e.zoomMaskOpacity),"elasticityMultiplier"in e&&n(8,so=e.elasticityMultiplier),"willRevert"in e&&n(240,co=e.willRevert),"willProcessImage"in e&&n(241,uo=e.willProcessImage),"willRenderCanvas"in e&&n(9,po=e.willRenderCanvas),"willRenderToolbar"in e&&n(242,ho=e.willRenderToolbar),"willSetHistoryInitialState"in e&&n(243,fo=e.willSetHistoryInitialState),"enableButtonExport"in e&&n(244,mo=e.enableButtonExport),"enableButtonRevert"in e&&n(245,go=e.enableButtonRevert),"enableNavigateHistory"in e&&n(246,yo=e.enableNavigateHistory),"enableToolbar"in e&&n(10,$o=e.enableToolbar),"enableUtils"in e&&n(247,bo=e.enableUtils),"enableButtonClose"in e&&n(248,vo=e.enableButtonClose),"enableDropImage"in e&&n(249,wo=e.enableDropImage),"enablePasteImage"in e&&n(250,So=e.enablePasteImage),"enableBrowseImage"in e&&n(251,ko=e.enableBrowseImage),"enableTransparencyGrid"in e&&n(11,Co=e.enableTransparencyGrid),"layoutDirectionPreference"in e&&n(252,Po=e.layoutDirectionPreference),"layoutHorizontalUtilsPreference"in e&&n(253,Eo=e.layoutHorizontalUtilsPreference),"layoutVerticalUtilsPreference"in e&&n(254,Ro=e.layoutVerticalUtilsPreference),"layoutVerticalToolbarPreference"in e&&n(255,Ao=e.layoutVerticalToolbarPreference),"layoutVerticalControlGroupsPreference"in e&&n(256,Lo=e.layoutVerticalControlGroupsPreference),"layoutVerticalControlTabsPreference"in e&&n(257,zo=e.layoutVerticalControlTabsPreference),"textDirection"in e&&n(12,Fo=e.textDirection),"markupEditorZoomLevel"in e&&n(258,Oo=e.markupEditorZoomLevel),"markupEditorZoomLevels"in e&&n(13,Do=e.markupEditorZoomLevels),"markupEditorZoomAdjustStep"in e&&n(14,_o=e.markupEditorZoomAdjustStep),"markupEditorZoomAdjustFactor"in e&&n(15,Bo=e.markupEditorZoomAdjustFactor),"markupEditorZoomAdjustWheelFactor"in e&&n(16,No=e.markupEditorZoomAdjustWheelFactor),"markupEditorInteractionMode"in e&&n(259,jo=e.markupEditorInteractionMode),"muteAudio"in e&&n(260,Wo=e.muteAudio),"willSetMediaInitialTimeOffset"in e&&n(261,Vo=e.willSetMediaInitialTimeOffset),"enablePan"in e&&n(17,Uo=e.enablePan),"enableZoom"in e&&n(18,Ho=e.enableZoom),"enableZoomControls"in e&&n(262,Go=e.enableZoomControls),"enableZoomInput"in e&&n(19,Zo=e.enableZoomInput),"enablePanInput"in e&&n(263,Xo=e.enablePanInput),"enableCanvasAlpha"in e&&n(20,Yo=e.enableCanvasAlpha),"enablePanLimit"in e&&n(21,qo=e.enablePanLimit),"panLimitGutterScalar"in e&&n(22,ei=e.panLimitGutterScalar),"zoomPresetOptions"in e&&n(23,ti=e.zoomPresetOptions),"zoomAdjustStep"in e&&n(24,ni=e.zoomAdjustStep),"zoomAdjustFactor"in e&&n(25,ri=e.zoomAdjustFactor),"zoomAdjustWheelFactor"in e&&n(26,oi=e.zoomAdjustWheelFactor),"zoomLevel"in e&&n(0,ii=e.zoomLevel),"imagePreviewSrc"in e&&n(266,ai=e.imagePreviewSrc),"imageOrienter"in e&&n(267,ui=e.imageOrienter),"pluginComponents"in e&&n(268,di=e.pluginComponents),"pluginOptions"in e&&n(27,pi=e.pluginOptions),"root"in e&&n(2,mi=e.root),"imageSourceToImageData"in e&&n(28,Xi=e.imageSourceToImageData),"imagePreviewCurrent"in e&&n(228,Bs=e.imagePreviewCurrent)},e.$$.update=()=>{if(1&e.$$.dirty[0]|1024&e.$$.dirty[8]&&n(0,ii=null===ii?Oo:ii),2&e.$$.dirty[0]|1048576&e.$$.dirty[8]){let e=!1;di.forEach((t=>{let[r]=t;fi[r]||(n(1,fi[r]={},fi),e=!0)})),e&&n(280,Wi=[...di])}var t,P,E,O;if(8&e.$$.dirty[0]|65536&e.$$.dirty[7]|2&e.$$.dirty[9]&&n(335,L=Xr&&Wi.length?Kr||Wi.map((e=>{let[t]=e;return t})):[]),134217728&e.$$.dirty[0]|2&e.$$.dirty[9]|33554432&e.$$.dirty[10]|1024&e.$$.dirty[12]&&n(336,z=((e,t,n,r)=>{const o=t.filter((t=>{let[n]=t;return e.includes(n)})).filter((e=>{let[t,{isSupported:o}]=e;return o({...r,...n[t]})})).map((e=>{let[t,n]=e;return[t,n.Component]}));return hl(o,gc,((e,t)=>e[0]===t[0]&&e[1]===t[1]))?gc:(gc=o,o)})(L,Wi,pi,{src:hn})),67108864&e.$$.dirty[10]&&n(291,F=z.length),8&e.$$.dirty[0]|4096&e.$$.dirty[9]|33554432&e.$$.dirty[10]&&n(47,_=F&&L.map((e=>{const t=yc(e);if(t)return{id:e,view:t[1],tabIcon:Xr[e+"Icon"],tabLabel:Xr[e+"Label"]}})).filter(Boolean)||[]),65536&e.$$.dirty[1]&&n(353,r=!!_.find((e=>"trim"===e.id))),12288&e.$$.dirty[11]|32&e.$$.dirty[13]&&n(290,o=!!(pr&&ot&&r)),32768&e.$$.dirty[7]|4096&e.$$.dirty[9]&&n(44,B=F&&qr&&"string"==typeof qr&&yc(qr)?qr:F>0?z[0][0]:void 0),8192&e.$$.dirty[1]|2048&e.$$.dirty[9]&&o&&B&&Ri(),2048&e.$$.dirty[9]|8192&e.$$.dirty[11]&&(o?(ot.addEventListener("play",Si),ot.addEventListener("pause",Si)):ot&&"video"===ot.nodeName&&(ot.removeEventListener("play",Si),ot.removeEventListener("pause",Si))),2048&e.$$.dirty[9]&&o&&vi.set(_i()/Di()),24&e.$$.dirty[13]&&(e=>{if(!Ii())return;const t=Date.now();if(Ci&&t-Ci<16)return;Ci=t;const n=pr*e;if(n.toFixed(1)===ki)return;ki=n.toFixed(1);const r=ot,o=()=>{r.removeEventListener("seeked",o),gi()};r.addEventListener("seeked",o),((e,t)=>{e.fastSeek&&e.fastSeek(t),e.currentTime=t})(r,n)})(ur||dr),16&e.$$.dirty[13]&&n(351,i=dr&&xe(dr,6)),97&e.$$.dirty[13]&&n(349,a=rr||[[0,Math.min(pr,hr)/pr]]),256&e.$$.dirty[11]&&(l=a[0][0]),256&e.$$.dirty[11]&&(s=a[a.length-1][1]),256&e.$$.dirty[11]&&n(352,c=a.map((e=>{let[t,n]=e;return[xe(t,6),xe(n,6)]}))),3072&e.$$.dirty[11]&&n(350,u=c.findIndex((e=>{let[t,n]=e;return i>=t&&i<=n}))),3584&e.$$.dirty[11]&&(d=-1===u&&c.findIndex(((e,t,n)=>{const r=n[t-1];return r?i<=e[0]&&i>=r[1]:i<=e[0]}))),4096&e.$$.dirty[8]&&Oi.set(Wo),8192&e.$$.dirty[11]|4&e.$$.dirty[13]&&(ot&&cr?Li():zi()),8192&e.$$.dirty[11]|2&e.$$.dirty[13]&&ot&&(e=>{o&&(ot.volume=Math.min(1,e))})(sr),256&e.$$.dirty[0]&&yi(ji,lr=so,lr),8192&e.$$.dirty[7]&&n(345,p="overlay"===Gr),1073741824&e.$$.dirty[7]|16&e.$$.dirty[11]&&n(45,h=bo&&!p),134217730&e.$$.dirty[0]&&pi&&Object.entries(pi).forEach((e=>{let[t,r]=e;Object.entries(r).forEach((e=>{let[r,o]=e;fi[t]&&n(1,fi[t][r]=o,fi)}))})),262144&e.$$.dirty[7]&&Vi.set(Jr?1:0),2097152&e.$$.dirty[7]&&(f=oo?(t=oo,P=Hi,Qe(Math.min(t.width,P.width),Math.min(t.height,P.height))):Hi),1073741824&e.$$.dirty[12]&&Yi.update(nr[0]),536870912&e.$$.dirty[12]&&(m=tr?(e,t)=>tr(e,{flipX:void 0,flipY:void 0,rotation:void 0,...t,isPreview:!0}):ae),536870912&e.$$.dirty[1]&&Array.isArray(er)&&Wr("selectionchange",[...er]),16384&e.$$.dirty[8]|268435456&e.$$.dirty[12]&&tl.set(Jn&&Go),34816&e.$$.dirty[8]&&nl.set("pan"===jo||Xo),2097152&e.$$.dirty[1]&&jt&&dl.set($t(jt.x,jt.y,jt.width,jt.height)),262160&e.$$.dirty[11]|4&e.$$.dirty[12]&&yt&&p&&tn&&tn.complete&&(()=>{const e=Yn,t=Tt(yt);e&&e===t||(ca.set(Tt(yt)),ec())})(),33554432&e.$$.dirty[10]&&n(46,H=L.length>1),32768&e.$$.dirty[1]&&(H||pl.set(dt())),1024&e.$$.dirty[0]|134217728&e.$$.dirty[12]&&($o||ml.set($t(0,Xn,0,0))),524352&e.$$.dirty[11]&&n(348,y=!wt&&g),67108864&e.$$.dirty[12]&&n(346,$=!Zn),2097152&e.$$.dirty[1]&&n(292,Ye=jt&&jt.width>0&&jt.height>0),8&e.$$.dirty[0]|12288&e.$$.dirty[9]&&n(41,qe=Ye&&Xr&&!!F),1024&e.$$.dirty[1]&&setTimeout((()=>n(281,kl=qe)),1),131072&e.$$.dirty[7]|4&e.$$.dirty[9]|160&e.$$.dirty[11]&&yi(wl,an="always"===Qr?y:"never"!==Qr&&y&&kl&&$,an),131072&e.$$.dirty[7]|96&e.$$.dirty[11]&&yi(Sl,Ht="always"===Qr?g:"never"!==Qr&&g&&$,Ht),524288&e.$$.dirty[7]|16&e.$$.dirty[11]&&Cl.set(to||p),1048576&e.$$.dirty[7]&&Nl.set(no),4&e.$$.dirty[0]|41943040&e.$$.dirty[12]&&mi&&(mi.dispatchEvent(gh("markupzoom",Gn)),mi.dispatchEvent(gh("zoom",Wn(Gn)?Gn:Nn))),4&e.$$.dirty[0]|16777216&e.$$.dirty[12]&&mi&&(mi.dispatchEvent(gh("markuppan",Vn)),mi.dispatchEvent(gh("pan",Vn))),2097152&e.$$.dirty[12]&&Ln&&es(),4194304&e.$$.dirty[12]&&zn&&rs(),8396800&e.$$.dirty[1]&&B&&ks.set(.075,{hard:!Ht}),4194304&e.$$.dirty[7]&&n(343,b=lo),1572864&e.$$.dirty[12]&&n(344,v=Rn?-Math.max(...Object.values(En)):0),277872640&e.$$.dirty[1]|12&e.$$.dirty[11]&&Pn){let e=Pn.x-gt.x,t=gt.x+gt.width-(Pn.x+Pn.width),n=Pn.y-gt.y,r=gt.y+gt.height-(Pn.y+Pn.height),o=Math.min(e,n,t,r);Ps.set(o>v?0:Math.min(b,Math.abs(o/64)),{hard:!Ht})}if(134217728&e.$$.dirty[1]&&n(342,w=.55/Mn),9437184&e.$$.dirty[1]|2&e.$$.dirty[11]&&gt&&Es.set({x:0,y:gt.y,width:gt.x<64?0:gt.x,height:gt.height+w},{hard:!Ht}),9437184&e.$$.dirty[1]|262146&e.$$.dirty[11]&&gt&&Rs.set({x:0,y:0,width:yt.width,height:gt.y+w},{hard:!Ht}),9437184&e.$$.dirty[1]|262146&e.$$.dirty[11]&&gt){let e=gt.x+gt.width,t=yt.width-(gt.x+gt.width);t<64&&(e+=t,t=0),Is.set({x:e,y:gt.y,width:t,height:gt.height+w},{hard:!Ht})}if(9437184&e.$$.dirty[1]|262144&e.$$.dirty[11]&&gt&&As.set({x:0,y:gt.y+gt.height,width:yt.width,height:yt.height-(gt.y+gt.height)},{hard:!Ht}),67108864&e.$$.dirty[1]|294912&e.$$.dirty[12]&&n(338,S=Cn&&{id:"stage-overlay",backgroundColor:wn,opacity:xn,...Cn}),67108864&e.$$.dirty[1]|163840&e.$$.dirty[12]&&n(341,k=kn&&{id:"stage-overlay",backgroundColor:wn,opacity:xn,...kn}),67108864&e.$$.dirty[1]|98304&e.$$.dirty[12]&&n(340,C=Sn&&{id:"stage-overlay",backgroundColor:wn,opacity:xn,...Sn}),67108864&e.$$.dirty[1]|49152&e.$$.dirty[12]&&n(339,T=bn&&{id:"stage-overlay",backgroundColor:wn,opacity:xn,...bn}),1879048192&e.$$.dirty[10]|1&e.$$.dirty[11]&&n(337,M=[k,C,T,S].filter(Boolean)),134217728&e.$$.dirty[10]|8192&e.$$.dirty[12]&&M&&$n&&Ts.update((e=>[...e.filter((e=>"stage-overlay"!==e.id)),...M])),262144&e.$$.dirty[8]|1024&e.$$.dirty[12]&&Os.set(ai||hn||void 0),4&e.$$.dirty[0]|2048&e.$$.dirty[7]|8192&e.$$.dirty[11]&&(n(228,Bs=ot),ot&&mi.dispatchEvent(gh("loadpreview",Bs))),8&e.$$.dirty[12]&&nn&&(Ql.set(ke()),Xl.set(void 0),es(),js.set([])),4096&e.$$.dirty[12]&&n(296,R=mn.index>0),4096&e.$$.dirty[12]&&n(295,I=mn.index<mn.length-1),8&e.$$.dirty[1]&&dc.set(cc),2048&e.$$.dirty[12]&&pc.set(fn),8192&e.$$.dirty[1]&&Ya.set(B),65664&e.$$.dirty[1]&&n(38,N=_.reduce(((e,t)=>(e[t.id]=N&&N[t.id]||0,e)),{})),8192&e.$$.dirty[1]&&n(80,j={name:mc,selected:B}),65536&e.$$.dirty[1]&&n(79,W=_.map((e=>({id:e.id,icon:e.tabIcon,label:e.tabLabel})))),65536&e.$$.dirty[1]&&n(78,U=_.map((e=>e.id))),4096&e.$$.dirty[7]&&n(77,G=kc(["PinturaRoot","PinturaRootComponent",Hr])),262144&e.$$.dirty[11]&&n(331,X=yt&&(yt.width>1e3?"wide":yt.width<600?"narrow":void 0)),262144&e.$$.dirty[11]&&n(318,Y=yt&&(yt.width<=320||yt.height<=460)),262144&e.$$.dirty[11]&&n(330,q=yt&&(yt.height>1e3?"tall":yt.height<600?"short":void 0)),4&e.$$.dirty[0]&&n(298,K=mi&&mi.parentNode&&mi.parentNode.classList.contains("PinturaModal")),1&e.$$.dirty[1]|524288&e.$$.dirty[9]|262144&e.$$.dirty[11]&&n(323,Q=K&&yt&&Us>yt.width),2&e.$$.dirty[1]|524288&e.$$.dirty[9]|262144&e.$$.dirty[11]&&n(322,J=K&&yt&&Hs>yt.height),12288&e.$$.dirty[10]&&n(324,ee=Q&&J),1048576&e.$$.dirty[0]&&n(321,te=Yo),2097152&e.$$.dirty[10]&&n(293,ne="narrow"===X),16&e.$$.dirty[8]|262144&e.$$.dirty[11]&&n(332,(E=yt,O=Po,re=yt?"auto"===O?E.width>E.height?"landscape":"portrait":"horizontal"===O?E.width<500?"portrait":"landscape":"vertical"===O?E.height<400?"landscape":"portrait":void 0:"landscape")),4194304&e.$$.dirty[10]&&n(76,oe="landscape"===re),16384&e.$$.dirty[9]|1048576&e.$$.dirty[10]&&n(320,ie=ne||"short"===q),1&e.$$.dirty[1]|262144&e.$$.dirty[11]&&n(319,le=vc&&yt&&Us===yt.width&&!Gs),4&e.$$.dirty[1]|512&e.$$.dirty[12]&&n(294,se=[...pn||[],...uc].filter(Boolean)),32&e.$$.dirty[8]&&n(329,ce="has-navigation-preference-"+Eo),64&e.$$.dirty[8]&&n(328,ue="has-navigation-preference-"+Ro),128&e.$$.dirty[8]&&n(325,de="has-toolbar-preference-"+Ao),256&e.$$.dirty[8]&&n(327,pe="has-controlgroups-preference-"+Lo),512&e.$$.dirty[8]&&n(326,he="has-controltabs-preference-"+zo),262144&e.$$.dirty[11]&&n(334,fe=void 0!==yt&&yt.width>0&&yt.height>0),4&e.$$.dirty[0]|16777216&e.$$.dirty[10]&&n(333,me=fe&&mi&&getComputedStyle(mi)),8388608&e.$$.dirty[10]&&me&&Pc(),1024&e.$$.dirty[0]|8437760&e.$$.dirty[1]|270336&e.$$.dirty[7]|524288&e.$$.dirty[9]|8388352&e.$$.dirty[10]|33554432&e.$$.dirty[11]|384&e.$$.dirty[12]&&Zs.set({...Wt,layoutMode:Gr,orientation:re,horizontalSpace:X,verticalSpace:q,navigationHorizontalPreference:ce,navigationVerticalPreference:ue,controlGroupsVerticalPreference:pe,controlTabsVerticalpreference:he,toolbarVerticalPreference:de,isModal:K,isDisabled:Jr,isCentered:ee,isCenteredHorizontally:Q,isCenteredVertically:J,isAnimated:Ht,isTransparent:te,pointerAccuracy:dn,pointerHoverable:un,isCompact:ie,hasSwipeNavigation:le,hasLimitedSpace:Y,hasToolbar:$o,hasNavigation:H&&h,isIOS:vc,browserVersion:zs()?"chrome-"+(navigator.userAgent.match(/Chrome\/([0-9]+)/)||[])[1]:void 0}),33554432&e.$$.dirty[11]&&n(75,ge=Object.entries(Wt).map((e=>{let[t,n]=e;return/^is|has/.test(t)?n?yh(t):void 0:n})).filter(Boolean).join(" ")),8192&e.$$.dirty[1]&&B&&sc.set([]),96&e.$$.dirty[12]&&n(74,ye=cn&&Object.entries(ln).filter((e=>{let[,t]=e;return null!=t})).reduce(((e,t)=>{let[,n]=t;return{...e,...n}}),{})),4&e.$$.dirty[12]&&n(315,we=tn&&"any-to-file"===tn.task),32&e.$$.dirty[10]&&we&&ac&&ac.clear(),16&e.$$.dirty[12]&&n(317,$e=!!on&&!!on.translation),16&e.$$.dirty[9]|128&e.$$.dirty[10]|8192&e.$$.dirty[11]&&$e&&ot&&ot!==Ic&&(n(283,Ic=ot),(()=>{const e=ac.length?void 0:{resize:1.05},t=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{resize:r=1,opacity:o=0}=n,i={opacity:[Ks(o,{...Ch,stiffness:.1}),ae],resize:[Ks(r,{...Ch,stiffness:.1}),ae],translation:[Ks(void 0,Ch),ae],rotation:[Ks(void 0,Th),ae],origin:[Ks(void 0,Ch),ae],scale:[Ks(void 0,Th),ae],gamma:[Ks(void 0,Th),e=>e||1],vignette:[Ks(void 0,Th),e=>e||0],colorMatrix:[Ks([...kh],Ch),e=>e||[...kh]],convolutionMatrix:[Va(void 0),e=>e&&e.clarity||void 0],backgroundColor:[Ks(void 0,Ch),(e,t,n)=>{if(Array.isArray(e)){if(Array.isArray(t)){const r=[...e];0===t[3]?(r[3]=0,n(r)):0===r[3]&&((e=[...t])[3]=0)}return e}}],backgroundImage:[Va(void 0),ae]},a=Object.entries(i).map((e=>{let[t,n]=e;return[t,n[0]]})),l=a.map((e=>{let[,t]=e;return t})),s=Object.entries(i).reduce(((e,t)=>{let[n,r]=t;const[o,i]=r;return e[n]=(e,t)=>o.set(i(e,c[n],(e=>{o.set(e,{hard:!0})})),t),e}),{});let c;const u=Ua(l,(n=>(c=n.reduce(((e,t,n)=>(e[a[n][0]]=t,e)),{}),c.data=e,c.size=t,c.scale*=n[1],c)));return u.get=()=>c,u.set=(e,t)=>{const n={hard:!t};Object.entries(e).forEach((e=>{let[t,r]=e;s[t]&&s[t](r,n)}))},u}(ot,lt,e);ac.unshift(t),Rc(on)})()),128&e.$$.dirty[10]|16&e.$$.dirty[12]&&$e&&Rc(on),33554432&e.$$.dirty[1]&&rn&&rn.length>1){let e=[];ac.forEach(((t,n)=>{0!==n&&t.get().opacity<=0&&e.push(t)})),e.forEach((e=>ac.remove(e)))}if(8&e.$$.dirty[0]|64&e.$$.dirty[10]&&n(40,ve=Xr&&be.length&&Xr.labelSupportError(be)),4&e.$$.dirty[12]&&n(307,Se=tn&&!!tn.error),4&e.$$.dirty[12]&&n(43,Te=!tn||!tn.complete&&void 0===tn.task),4&e.$$.dirty[12]&&n(308,Me=tn&&(tn.taskLengthComputable?tn.taskProgress:1/0)),32&e.$$.dirty[10]&&we&&yi(Fs,Kt=!1,Kt),8388608&e.$$.dirty[1]|32&e.$$.dirty[9]|4&e.$$.dirty[12]&&tn&&tn.complete){const e=Ht?250:0;clearTimeout(Lc),n(284,Lc=setTimeout((()=>{yi(Fs,Kt=!0,Kt)}),e))}if(4096&e.$$.dirty[1]|268435456&e.$$.dirty[9]|5&e.$$.dirty[12]&&n(312,Pe=tn&&!Se&&!Te&&!Kt),8&e.$$.dirty[9]|8192&e.$$.dirty[11]|8&e.$$.dirty[12]&&n(311,Ee=!(!nn||ot&&!Ds)),8388608&e.$$.dirty[1]|1&e.$$.dirty[12]&&(Kt?setTimeout((()=>Mc.set(1)),Ht?500:0):Mc.set(0)),67108864&e.$$.dirty[11]|2&e.$$.dirty[12]&&n(306,Re=!!(Ut||en&&void 0!==en.progress&&!en.complete)),134217728&e.$$.dirty[9]&&Re&&Ri(),4096&e.$$.dirty[1]|4&e.$$.dirty[12]&&n(309,Ie=tn&&!(tn.error||Te)),8&e.$$.dirty[0]|4&e.$$.dirty[12]&&n(310,Ae=Xr&&(tn?!tn.complete||tn.error?ds(Xr.statusLabelLoadImage(tn),tn.error&&tn.error.metadata,"{","}"):Xr.statusLabelLoadImage({progress:1/0,task:"blob-to-bitmap"}):Xr.statusLabelLoadImage(tn))),8&e.$$.dirty[0]|2&e.$$.dirty[12]&&n(305,Le=en&&Xr&&Xr.statusLabelProcessImage(en)),2&e.$$.dirty[12]&&n(303,Fe=en&&(en.taskLengthComputable?en.taskProgress:1/0)),2&e.$$.dirty[12]&&n(304,Oe=en&&!en.error),2&e.$$.dirty[12]&&n(302,De=!(!en||!en.error)),8&e.$$.dirty[0]|4096&e.$$.dirty[1]|1024&e.$$.dirty[7]|2139095040&e.$$.dirty[9]|7&e.$$.dirty[10])if(eo){let e,t,r,o,i;V(eo)&&(e=eo),Wn(eo)?t=eo:Array.isArray(eo)&&([e,t,i]=eo,!1===t&&(o=!0),Wn(t)&&(r=!0)),n(35,Fc=(e||t)&&{text:e,aside:o||r,progressIndicator:{visible:r,progress:t},closeButton:o&&{label:Xr.statusLabelButtonClose,icon:Xr.statusIconButtonClose,onclick:i||(()=>n(227,eo=void 0))}})}else n(35,Fc=Xr&&Te||Se||Pe||Ee?{text:Ae,aside:Se||Ie,progressIndicator:{visible:Ie,progress:Me},closeButton:Se&&{label:Xr.statusLabelButtonClose,icon:Xr.statusIconButtonClose,onclick:Wc}}:Xr&&Re&&Le?{text:Le,aside:De||Oe,progressIndicator:{visible:Oe,progress:Fe},closeButton:De&&{label:Xr.statusLabelButtonClose,icon:Xr.statusIconButtonClose,onclick:Vc}}:void 0);if(1024&e.$$.dirty[7]&&n(314,_e=void 0!==eo),8388608&e.$$.dirty[1]|524288&e.$$.dirty[9]|2&e.$$.dirty[12]&&K&&en&&en.complete&&(zc.set(!0),setTimeout((()=>zc.set(!1)),Ht?100:0)),4&e.$$.dirty[0]|8192&e.$$.dirty[1]|1&e.$$.dirty[12]&&Kt&&mi&&mi.dispatchEvent(gh("selectutil",B)),4608&e.$$.dirty[1]|402653184&e.$$.dirty[9]|22&e.$$.dirty[10]|1073741824&e.$$.dirty[11]&&n(313,Be=qt||ve||Te||Se||Pe||Ee||Re||_e),8&e.$$.dirty[10]&&yi(Ac,Yt=Be?1:0,Yt),8388608&e.$$.dirty[1]|8&e.$$.dirty[10]&&Ac.set(Be?1:0,{duration:Ht?500:1}),16777216&e.$$.dirty[1]&&n(42,Ne=Yt>0),16&e.$$.dirty[1]&&n(301,je=!(!Fc||!Fc.aside)),8390672&e.$$.dirty[1]|4194368&e.$$.dirty[9]|536870912&e.$$.dirty[11]&&Ne&&Fc){clearTimeout(jc);const e={hard:!1===Ht};if(je){const t=!!Fc.error||!Ht;Dc.set(1,e),Oc.set(Xt,{hard:t}),n(285,jc=setTimeout((()=>{_c.set(16,e)}),1))}else Dc.set(0,e),n(285,jc=setTimeout((()=>{_c.set(0,e)}),1))}if(2048&e.$$.dirty[1]&&(Ne||(Nc.set(void 0,{hard:!0}),Oc.set(void 0,{hard:!0}),_c.set(0,{hard:!0}))),268435456&e.$$.dirty[11]&&n(300,We=.5*Zt),2097152&e.$$.dirty[9]|134217728&e.$$.dirty[11]&&n(73,Ve="transform: translateX(".concat(Gt-We,"px)")),512&e.$$.dirty[1]|8192&e.$$.dirty[11]&&n(39,nt=ot&&!ve),256&e.$$.dirty[1]|1572864&e.$$.dirty[9]&&n(297,He=Ue&&(nt||K)?Uc:x),262144&e.$$.dirty[9]&&n(72,Ge=He),262144&e.$$.dirty[9]&&n(71,Ze=He),8&e.$$.dirty[0]|4194304&e.$$.dirty[1]|973078528&e.$$.dirty[7]|1&e.$$.dirty[8]|245760&e.$$.dirty[9]|33554432&e.$$.dirty[11]&&n(70,Xe=Xr&&Vt&&Eh((()=>ho([["div","alpha",{class:"PinturaNavGroup"},[["div","alpha-set",{class:"PinturaNavSet"},[vo&&["Button","close",{label:Xr.labelClose,icon:Xr.iconButtonClose,onclick:()=>Wr("close"),hideLabel:!0}],go&&["Button","revert",{label:Xr.labelButtonRevert,icon:Xr.iconButtonRevert,disabled:!R,onclick:nc,hideLabel:!0}]]]]],["div","beta",{class:"PinturaNavGroup PinturaNavGroupFloat"},[yo&&["div","history",{class:"PinturaNavSet"},[["Button","undo",{label:Xr.labelButtonUndo,icon:Xr.iconButtonUndo,disabled:!R,onclick:Js.undo,hideLabel:!0}],["Button","redo",{label:Xr.labelButtonRedo,icon:Xr.iconButtonRedo,disabled:!I,onclick:Js.redo,hideLabel:!0}]]],se.length&&["div","plugin-tools",{class:"PinturaNavSet"},se.filter(Boolean).map((e=>{let[t,n,r]=e;return[t,n,{...r}]}))]]],["div","gamma",{class:"PinturaNavGroup"},[mo&&["Button","export",{label:Xr.labelButtonExport,icon:ne&&Xr.iconButtonExport,class:"PinturaButtonExport",onclick:oc,hideLabel:ne}]]]],{...Wt},(()=>Ni.set({})))))),2097152&e.$$.dirty[11]&&n(289,Ke=It&&!!It.length),1024&e.$$.dirty[9]|2113536&e.$$.dirty[11]&&n(288,Je=Ke&&Qo(lt,It)),1536&e.$$.dirty[9]|25174016&e.$$.dirty[11]&&Ke&&((e,t,r,o)=>{if(!t)return;const i={dataSizeScalar:r};o&&o[3]>0&&(i.backgroundColor=[...o]),t(e,i).then((e=>{Yc&&A(Yc),n(286,Yc=e)}))})(ot,Dt,Je,Ft),128&e.$$.dirty[9]|6307840&e.$$.dirty[11]&&It&&Yc&&lt){const{width:e,height:t}=lt,r=sn()?"pixelated":"auto"===At?"auto":"pixelated";n(287,Kc=It.map((n=>{const o=$t(n.x,n.y,n.width,n.height),i=Et(ut(o),n.rotation).map((n=>Ce(n.x/e,n.y/t)));return{...n,id:"redaction",flipX:!1,flipY:!1,cornerRadius:0,strokeWidth:0,strokeColor:void 0,backgroundColor:[0,0,0,0],backgroundImage:Yc,backgroundImageRendering:r,backgroundCorners:i}})))}256&e.$$.dirty[9]|1048576&e.$$.dirty[11]&&n(37,et=[...Kc,...Pt||[]]),32&e.$$.dirty[1]&&qc&&Qc.set(qc),4&e.$$.dirty[0]|256&e.$$.dirty[1]&&nt&&mi.dispatchEvent(gh("ready")),524288&e.$$.dirty[1]&&n(64,hu=!0),245760&e.$$.dirty[11]&&n(65,fu=!0),262144&e.$$.dirty[1]&&n(66,mu=!0),131072&e.$$.dirty[1]&&n(67,gu=!0),64&e.$$.dirty[1]&&n(68,yu=!0)},n(347,g=!$c()),P=1===Du()?e=>{e&&(ze(e.origin,Math.round),ze(e.translation,Math.round))}:ae,n(316,be=[!Sh()&&"WebGL"].filter(Boolean)),n(299,Ue=Tn()||O()&&ar()),n(69,tt=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n=>{"ping"===n.type&&(t&&n.stopPropagation(),e(n.detail.type,n.detail.data))}}(jr.pub)),[ii,fi,mi,Xr,Yr,ro,io,ao,so,po,$o,Co,Fo,Do,_o,Bo,No,Uo,Ho,Zo,Yo,qo,ei,ti,ni,ri,oi,pi,Xi,_s,Js,Us,Hs,uc,cc,Fc,qc,et,N,nt,ve,qe,Ne,Te,B,h,H,_,it,at,ft,gt,jt,Vt,Ht,Yt,rn,wn,Mn,Pn,er,Vr,Ur,bc,hu,fu,mu,gu,yu,tt,Xe,Ze,Ge,Ve,ye,ge,oe,G,U,W,j,yn,ir,fr,mr,gr,yr,$r,br,vr,xr,wr,Sr,kr,Tr,Mr,Pr,Er,Rr,Ir,zr,Fr,Or,$i,bi,vi,Oi,Ni,ji,Vi,qi,Ki,Qi,Ji,ra,ia,la,sa,ca,ua,da,ya,va,xa,wa,Ea,Ra,Ia,Aa,La,za,Fa,Da,_a,Ba,Na,ja,Ha,qa,Ka,Qa,Ja,el,tl,nl,rl,ol,il,al,ll,ul,dl,pl,fl,ml,gl,yl,$l,vl,xl,wl,Sl,Cl,Ml,El,Rl,Al,Ll,zl,Fl,jl,Wl,Ul,Gl,Zl,Xl,ql,Kl,Ql,ts,ns,os,vs,Ts,Ms,Ps,Es,Rs,Is,As,Fs,Os,Ns,js,Ws,Zs,qs,rc,ac,sc,fc,Sc,Cc,Tc,Mc,e=>{let{target:t,propertyName:n}=e;t===mi&&/background|outline/.test(n)&&me&&Pc()},Ec,Ac,zc,Oc,Dc,_c,Bc,Nc,e=>{const t=!(!Fc||!Fc.closeButton)||!Ht;Bc.set(e.detail.width,{hard:t}),Nc.set(Math.round(.5*-e.detail.width),{hard:t})},Hc,Gc,e=>{const{keyCode:t,metaKey:n,ctrlKey:r,shiftKey:i}=e;if(9===t&&Jr)return void e.preventDefault();if(e.target&&32===t&&mi.contains(e.target)&&!Wu(e.target)&&(Nt&&o&&Ai(),e.preventDefault()),90===t&&(n||r))return void(i&&n?Js.redo():Js.undo());if(89===t&&r)return void Js.redo();if(229===t)return;const a=new Set([...Bt,t]);Gc.set(Array.from(a))},e=>{let{key:t,keyCode:n}=e;if("Meta"===t)return Gc.set([]);Gc.set(Bt.filter((e=>e!==n)))},()=>{Gc.set([])},e=>{Wu(e.target)||e.preventDefault()},e=>{wo&&Zc(e.detail.resources[0])},()=>{ko&&Ph().then(Xc)},e=>{if(!So)return;const t=sl((window.innerWidth-Math.abs(yt.x))/yt.width,0,1),n=sl((window.innerHeight-Math.abs(yt.y))/yt.height,0,1);t<.75&&n<.75||Zc((e.clipboardData||window.clipboardData).files[0])},Jc,du,e=>{rt&&Ct(e.detail,rt)||yi(gl,rt=e.detail,rt)},eo,Bs,Hr,Gr,Zr,qr,Kr,Qr,Jr,to,no,oo,lo,co,uo,ho,fo,mo,go,yo,bo,vo,wo,So,ko,Po,Eo,Ro,Ao,Lo,zo,Oo,jo,Wo,Vo,Go,Xo,()=>n(61,Vr=void 0),(e,t,r)=>{const{text:o="",placeholder:i="",autoClose:a=!0,align:l="top",justify:s="center",buttonConfirm:c,buttonCancel:u}=r;n(61,Vr={align:l,justify:s,text:o,placeholder:i,buttonConfirm:c,buttonCancel:u,onconfirm:()=>{e(Ur.value),a&&n(61,Vr=void 0)},oncancel:()=>{t(void 0),n(61,Vr=void 0)}})},ai,ui,di,hi,Ei,Ri,Ii,Ai,Li,zi,Fi,Di,_i,Bi,Wi,kl,Ds,Ic,Lc,jc,Yc,Kc,Je,Ke,o,F,Ye,ne,se,I,R,He,K,Ue,We,je,De,Fe,Oe,Le,Re,Se,Me,Ie,Ae,Ee,Pe,Be,_e,we,be,$e,Y,le,ie,te,J,Q,ee,de,he,pe,ue,ce,q,X,re,me,fe,L,z,M,S,T,C,k,w,b,v,p,$,g,y,a,u,i,c,r,ot,lt,st,ct,ht,yt,wt,Pt,It,At,Ft,Dt,Wt,Ut,Gt,Zt,Xt,qt,Kt,en,tn,nn,on,ln,cn,un,dn,pn,hn,fn,mn,$n,bn,xn,Sn,kn,Cn,En,Rn,Ln,zn,Nn,Vn,Gn,Zn,Xn,Jn,tr,nr,rr,sr,cr,ur,dr,pr,hr,function(){n(31,Us=Dh.innerWidth),n(32,Hs=Dh.innerHeight)},e=>yi(ml,gr=e.detail,gr),e=>{let{detail:t}=e;return n(44,B=t)},(e,t)=>t.id===e,function(t,r){e.$$.not_equal(fi[r],t)&&(fi[r]=t,n(1,fi),n(268,di),n(27,pi))},e=>n(63,bc=bc.concat(e)),e=>n(63,bc=bc.filter((t=>t!==e))),(e,t)=>{let{detail:r}=t;return n(38,N[e]=r,N)},e=>yi(pl,yn=e.detail,yn),e=>e.id===B,function(t){e.$$.not_equal(fi[B],t)&&(fi[B]=t,n(1,fi),n(268,di),n(27,pi))},()=>n(63,bc=bc.concat(B)),()=>n(63,bc=bc.filter((e=>e!==B))),e=>{let{detail:t}=e;return n(38,N[B]=t,N)},e=>{const t={...e,...Jc()},{annotationShapes:n,decorationShapes:r,interfaceShapes:o,frameShapes:i,selectionShapes:a}=po({annotationShapes:ft,decorationShapes:at,interfaceShapes:Tr,frameShapes:it,selectionShapes:er},t);return du(t,et,n,r,o,i,a)},()=>{n(64,hu=!1),n(65,fu=!1),n(66,mu=!1),n(67,gu=!1),n(68,yu=!1)},function(e){aa[e?"unshift":"push"]((()=>{qc=e,n(36,qc)}))},function(e){ii=e,n(0,ii),n(258,Oo)},function(e){uc=e,n(33,uc)},function(e){cc=e,n(34,cc)},function(e){aa[e?"unshift":"push"]((()=>{Ur=e,n(62,Ur)}))},function(e){aa[e?"unshift":"push"]((()=>{mi=e,n(2,mi)}))},e=>yi(ul,jt=e.detail,jt)]}class df extends Na{constructor(e){super(),Ba(this,e,uf,lf,ai,{class:229,layout:230,stores:231,locale:3,id:4,util:232,utils:233,animations:234,disabled:235,status:227,previewUpscale:236,previewPad:237,previewMaskOpacity:5,previewImageDataMaxSize:238,previewImageTextPixelRatio:6,markupMaskOpacity:7,zoomMaskOpacity:239,elasticityMultiplier:8,willRevert:240,willProcessImage:241,willRenderCanvas:9,willRenderToolbar:242,willSetHistoryInitialState:243,enableButtonExport:244,enableButtonRevert:245,enableNavigateHistory:246,enableToolbar:10,enableUtils:247,enableButtonClose:248,enableDropImage:249,enablePasteImage:250,enableBrowseImage:251,enableTransparencyGrid:11,layoutDirectionPreference:252,layoutHorizontalUtilsPreference:253,layoutVerticalUtilsPreference:254,layoutVerticalToolbarPreference:255,layoutVerticalControlGroupsPreference:256,layoutVerticalControlTabsPreference:257,textDirection:12,markupEditorZoomLevel:258,markupEditorZoomLevels:13,markupEditorZoomAdjustStep:14,markupEditorZoomAdjustFactor:15,markupEditorZoomAdjustWheelFactor:16,markupEditorInteractionMode:259,muteAudio:260,willSetMediaInitialTimeOffset:261,enablePan:17,enableZoom:18,enableZoomControls:262,enableZoomInput:19,enablePanInput:263,enableCanvasAlpha:20,enablePanLimit:21,panLimitGutterScalar:22,zoomPresetOptions:23,zoomAdjustStep:24,zoomAdjustFactor:25,zoomAdjustWheelFactor:26,zoomLevel:0,hideTextInput:264,showTextInput:265,imagePreviewSrc:266,imageOrienter:267,pluginComponents:268,pluginOptions:27,sub:269,pluginInterface:1,root:2,play:270,pause:271,isPaused:272,togglePlayPause:273,mute:274,unmute:275,toggleMute:276,getDuration:277,getCurrentTime:278,setCurrentTime:279,imageSourceToImageData:28,imagePreview:29,imagePreviewCurrent:228,history:30},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}get class(){return this.$$.ctx[229]}set class(e){this.$$set({class:e}),$a()}get layout(){return this.$$.ctx[230]}set layout(e){this.$$set({layout:e}),$a()}get stores(){return this.$$.ctx[231]}set stores(e){this.$$set({stores:e}),$a()}get locale(){return this.$$.ctx[3]}set locale(e){this.$$set({locale:e}),$a()}get id(){return this.$$.ctx[4]}set id(e){this.$$set({id:e}),$a()}get util(){return this.$$.ctx[232]}set util(e){this.$$set({util:e}),$a()}get utils(){return this.$$.ctx[233]}set utils(e){this.$$set({utils:e}),$a()}get animations(){return this.$$.ctx[234]}set animations(e){this.$$set({animations:e}),$a()}get disabled(){return this.$$.ctx[235]}set disabled(e){this.$$set({disabled:e}),$a()}get status(){return this.$$.ctx[227]}set status(e){this.$$set({status:e}),$a()}get previewUpscale(){return this.$$.ctx[236]}set previewUpscale(e){this.$$set({previewUpscale:e}),$a()}get previewPad(){return this.$$.ctx[237]}set previewPad(e){this.$$set({previewPad:e}),$a()}get previewMaskOpacity(){return this.$$.ctx[5]}set previewMaskOpacity(e){this.$$set({previewMaskOpacity:e}),$a()}get previewImageDataMaxSize(){return this.$$.ctx[238]}set previewImageDataMaxSize(e){this.$$set({previewImageDataMaxSize:e}),$a()}get previewImageTextPixelRatio(){return this.$$.ctx[6]}set previewImageTextPixelRatio(e){this.$$set({previewImageTextPixelRatio:e}),$a()}get markupMaskOpacity(){return this.$$.ctx[7]}set markupMaskOpacity(e){this.$$set({markupMaskOpacity:e}),$a()}get zoomMaskOpacity(){return this.$$.ctx[239]}set zoomMaskOpacity(e){this.$$set({zoomMaskOpacity:e}),$a()}get elasticityMultiplier(){return this.$$.ctx[8]}set elasticityMultiplier(e){this.$$set({elasticityMultiplier:e}),$a()}get willRevert(){return this.$$.ctx[240]}set willRevert(e){this.$$set({willRevert:e}),$a()}get willProcessImage(){return this.$$.ctx[241]}set willProcessImage(e){this.$$set({willProcessImage:e}),$a()}get willRenderCanvas(){return this.$$.ctx[9]}set willRenderCanvas(e){this.$$set({willRenderCanvas:e}),$a()}get willRenderToolbar(){return this.$$.ctx[242]}set willRenderToolbar(e){this.$$set({willRenderToolbar:e}),$a()}get willSetHistoryInitialState(){return this.$$.ctx[243]}set willSetHistoryInitialState(e){this.$$set({willSetHistoryInitialState:e}),$a()}get enableButtonExport(){return this.$$.ctx[244]}set enableButtonExport(e){this.$$set({enableButtonExport:e}),$a()}get enableButtonRevert(){return this.$$.ctx[245]}set enableButtonRevert(e){this.$$set({enableButtonRevert:e}),$a()}get enableNavigateHistory(){return this.$$.ctx[246]}set enableNavigateHistory(e){this.$$set({enableNavigateHistory:e}),$a()}get enableToolbar(){return this.$$.ctx[10]}set enableToolbar(e){this.$$set({enableToolbar:e}),$a()}get enableUtils(){return this.$$.ctx[247]}set enableUtils(e){this.$$set({enableUtils:e}),$a()}get enableButtonClose(){return this.$$.ctx[248]}set enableButtonClose(e){this.$$set({enableButtonClose:e}),$a()}get enableDropImage(){return this.$$.ctx[249]}set enableDropImage(e){this.$$set({enableDropImage:e}),$a()}get enablePasteImage(){return this.$$.ctx[250]}set enablePasteImage(e){this.$$set({enablePasteImage:e}),$a()}get enableBrowseImage(){return this.$$.ctx[251]}set enableBrowseImage(e){this.$$set({enableBrowseImage:e}),$a()}get enableTransparencyGrid(){return this.$$.ctx[11]}set enableTransparencyGrid(e){this.$$set({enableTransparencyGrid:e}),$a()}get layoutDirectionPreference(){return this.$$.ctx[252]}set layoutDirectionPreference(e){this.$$set({layoutDirectionPreference:e}),$a()}get layoutHorizontalUtilsPreference(){return this.$$.ctx[253]}set layoutHorizontalUtilsPreference(e){this.$$set({layoutHorizontalUtilsPreference:e}),$a()}get layoutVerticalUtilsPreference(){return this.$$.ctx[254]}set layoutVerticalUtilsPreference(e){this.$$set({layoutVerticalUtilsPreference:e}),$a()}get layoutVerticalToolbarPreference(){return this.$$.ctx[255]}set layoutVerticalToolbarPreference(e){this.$$set({layoutVerticalToolbarPreference:e}),$a()}get layoutVerticalControlGroupsPreference(){return this.$$.ctx[256]}set layoutVerticalControlGroupsPreference(e){this.$$set({layoutVerticalControlGroupsPreference:e}),$a()}get layoutVerticalControlTabsPreference(){return this.$$.ctx[257]}set layoutVerticalControlTabsPreference(e){this.$$set({layoutVerticalControlTabsPreference:e}),$a()}get textDirection(){return this.$$.ctx[12]}set textDirection(e){this.$$set({textDirection:e}),$a()}get markupEditorZoomLevel(){return this.$$.ctx[258]}set markupEditorZoomLevel(e){this.$$set({markupEditorZoomLevel:e}),$a()}get markupEditorZoomLevels(){return this.$$.ctx[13]}set markupEditorZoomLevels(e){this.$$set({markupEditorZoomLevels:e}),$a()}get markupEditorZoomAdjustStep(){return this.$$.ctx[14]}set markupEditorZoomAdjustStep(e){this.$$set({markupEditorZoomAdjustStep:e}),$a()}get markupEditorZoomAdjustFactor(){return this.$$.ctx[15]}set markupEditorZoomAdjustFactor(e){this.$$set({markupEditorZoomAdjustFactor:e}),$a()}get markupEditorZoomAdjustWheelFactor(){return this.$$.ctx[16]}set markupEditorZoomAdjustWheelFactor(e){this.$$set({markupEditorZoomAdjustWheelFactor:e}),$a()}get markupEditorInteractionMode(){return this.$$.ctx[259]}set markupEditorInteractionMode(e){this.$$set({markupEditorInteractionMode:e}),$a()}get muteAudio(){return this.$$.ctx[260]}set muteAudio(e){this.$$set({muteAudio:e}),$a()}get willSetMediaInitialTimeOffset(){return this.$$.ctx[261]}set willSetMediaInitialTimeOffset(e){this.$$set({willSetMediaInitialTimeOffset:e}),$a()}get enablePan(){return this.$$.ctx[17]}set enablePan(e){this.$$set({enablePan:e}),$a()}get enableZoom(){return this.$$.ctx[18]}set enableZoom(e){this.$$set({enableZoom:e}),$a()}get enableZoomControls(){return this.$$.ctx[262]}set enableZoomControls(e){this.$$set({enableZoomControls:e}),$a()}get enableZoomInput(){return this.$$.ctx[19]}set enableZoomInput(e){this.$$set({enableZoomInput:e}),$a()}get enablePanInput(){return this.$$.ctx[263]}set enablePanInput(e){this.$$set({enablePanInput:e}),$a()}get enableCanvasAlpha(){return this.$$.ctx[20]}set enableCanvasAlpha(e){this.$$set({enableCanvasAlpha:e}),$a()}get enablePanLimit(){return this.$$.ctx[21]}set enablePanLimit(e){this.$$set({enablePanLimit:e}),$a()}get panLimitGutterScalar(){return this.$$.ctx[22]}set panLimitGutterScalar(e){this.$$set({panLimitGutterScalar:e}),$a()}get zoomPresetOptions(){return this.$$.ctx[23]}set zoomPresetOptions(e){this.$$set({zoomPresetOptions:e}),$a()}get zoomAdjustStep(){return this.$$.ctx[24]}set zoomAdjustStep(e){this.$$set({zoomAdjustStep:e}),$a()}get zoomAdjustFactor(){return this.$$.ctx[25]}set zoomAdjustFactor(e){this.$$set({zoomAdjustFactor:e}),$a()}get zoomAdjustWheelFactor(){return this.$$.ctx[26]}set zoomAdjustWheelFactor(e){this.$$set({zoomAdjustWheelFactor:e}),$a()}get zoomLevel(){return this.$$.ctx[0]}set zoomLevel(e){this.$$set({zoomLevel:e}),$a()}get hideTextInput(){return this.$$.ctx[264]}get showTextInput(){return this.$$.ctx[265]}get imagePreviewSrc(){return this.$$.ctx[266]}set imagePreviewSrc(e){this.$$set({imagePreviewSrc:e}),$a()}get imageOrienter(){return this.$$.ctx[267]}set imageOrienter(e){this.$$set({imageOrienter:e}),$a()}get pluginComponents(){return this.$$.ctx[268]}set pluginComponents(e){this.$$set({pluginComponents:e}),$a()}get pluginOptions(){return this.$$.ctx[27]}set pluginOptions(e){this.$$set({pluginOptions:e}),$a()}get sub(){return this.$$.ctx[269]}get pluginInterface(){return this.$$.ctx[1]}get root(){return this.$$.ctx[2]}set root(e){this.$$set({root:e}),$a()}get play(){return this.$$.ctx[270]}get pause(){return this.$$.ctx[271]}get isPaused(){return this.$$.ctx[272]}get togglePlayPause(){return this.$$.ctx[273]}get mute(){return this.$$.ctx[274]}get unmute(){return this.$$.ctx[275]}get toggleMute(){return this.$$.ctx[276]}get getDuration(){return this.$$.ctx[277]}get getCurrentTime(){return this.$$.ctx[278]}get setCurrentTime(){return this.$$.ctx[279]}get imageSourceToImageData(){return this.$$.ctx[28]}set imageSourceToImageData(e){this.$$set({imageSourceToImageData:e}),$a()}get imagePreview(){return this.$$.ctx[29]}get imagePreviewCurrent(){return this.$$.ctx[228]}set imagePreviewCurrent(e){this.$$set({imagePreviewCurrent:e}),$a()}get history(){return this.$$.ctx[30]}}"undefined"!=typeof window&&(e=>{if(e&&e._7vysqoe)return;const[t,n,r]=[[99,111,110,115,111,108,101],[108,111,103],[84,104,105,115,32,118,101,114,115,105,111,110,32,111,102,32,80,105,110,116,117,114,97,32,105,115,32,102,111,114,32,116,101,115,116,105,110,103,32,112,117,114,112,111,115,101,115,32,111,110,108,121,46,32,86,105,115,105,116,32,104,116,116,112,115,58,47,47,112,113,105,110,97,46,110,108,47,112,105,110,116,117,114,97,47,32,116,111,32,112,117,114,99,104,97,115,101,32,97,32,118,97,108,105,100,32,108,105,99,101,110,115,101,46]].map((e=>e.map((e=>String.fromCharCode(e))).join("")));e&&e[t]&&e[t][n](r)})(window);const pf=["klass","stores","isVisible","isActive","isActiveFraction","locale"],hf=["history","klass","stores","navButtons","pluginComponents","pluginInterface","pluginOptions","sub","imagePreviewSrc","imagePreview","imagePreviewCurrent"],ff=["locale"];let mf;const gf=new Set([]),yf={},$f=new Map,bf=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.filter((e=>!!e.util)).forEach((e=>{const[t,n,r=(()=>!0)]=e.util;$f.has(t)||($f.set(t,{Component:n,isSupported:r}),Hc(n).filter((e=>!pf.includes(e))).forEach((e=>{gf.add(e),yf[e]?yf[e].push(t):yf[e]=[t]})))}))};var vf=[...bl,"init","update","undo","redo","revert","writehistory","destroy","show","hide","close","ready","zoom","pan","loadpreview","selectshape","blurshape","updateshape","addshape","removeshape","selectstyle","markuptap","markupzoom","markuppan","selectutil","selectcontrol","selectiondown","selectionup","selectionchange"];const xf=e=>V(e[0]),wf=e=>!xf(e),Sf=e=>e[1],kf=e=>e[3]||[];const Cf=(e,t)=>{if(wf(t)){if(t.find((t=>Sf(t)===e)))return t;const n=t.find((t=>Cf(e,kf(t))));return n&&n[3]}return Cf(e,kf(t))},Tf={chrome:()=>[1.398,-.316,.065,-.273,.201,-.051,1.278,-.08,-.273,.201,-.051,.119,1.151,-.29,.215,0,0,0,1,0],fade:()=>[1.073,-.015,.092,-.115,-.017,.107,.859,.184,-.115,-.017,.015,.077,1.104,-.115,-.017,0,0,0,1,0],pastel:()=>[.75,.25,.25,0,0,.25,.75,.25,0,0,.25,.25,.75,0,0,0,0,0,1,0],cold:()=>[1.1,0,0,0,-.1,0,1.1,0,0,-.1,0,0,1.2,0,-.1,0,0,0,1,0],warm:()=>[1.06,0,0,0,0,0,1.01,0,0,0,0,0,.93,0,0,0,0,0,1,0],monoDefault:()=>[.212,.715,.114,0,0,.212,.715,.114,0,0,.212,.715,.114,0,0,0,0,0,1,0],monoWash:()=>[.163,.518,.084,-.01,.208,.163,.529,.082,-.02,.21,.171,.529,.084,0,.214,0,0,0,1,0],monoNoir:()=>[.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,0,0,0,1,0],monoStark:()=>[.338,.991,.117,.093,-.196,.302,1.049,.096,.078,-.196,.286,1.016,.146,.101,-.196,0,0,0,1,0],sepiaDefault:()=>[.393,.768,.188,0,0,.349,.685,.167,0,0,.272,.533,.13,0,0,0,0,0,1,0],sepiaRust:()=>[.269,.764,.172,.05,.1,.239,.527,.152,0,.176,.186,.4,.119,0,.159,0,0,0,1,0],sepiaBlues:()=>[.289,.62,.185,0,.077,.257,.566,.163,0,.115,.2,.43,.128,0,.188,0,0,0,1,0],sepiaColor:()=>[.547,.764,.134,0,-.147,.281,.925,.12,0,-.135,.225,.558,.33,0,-.113,0,0,0,1,0]};var Mf={filterFunctions:Tf,filterOptions:[["Default",[[void 0,e=>e.labelDefault]]],["Classic",[["chrome",e=>e.filterLabelChrome],["fade",e=>e.filterLabelFade],["cold",e=>e.filterLabelCold],["warm",e=>e.filterLabelWarm],["pastel",e=>e.filterLabelPastel]]],["Monochrome",[["monoDefault",e=>e.filterLabelMonoDefault],["monoNoir",e=>e.filterLabelMonoNoir],["monoStark",e=>e.filterLabelMonoStark],["monoWash",e=>e.filterLabelMonoWash]]],["Sepia",[["sepiaDefault",e=>e.filterLabelSepiaDefault],["sepiaRust",e=>e.filterLabelSepiaRust],["sepiaBlues",e=>e.filterLabelSepiaBlues],["sepiaColor",e=>e.filterLabelSepiaColor]]]]};const Pf={base:0,min:-.25,max:.25,getLabel:e=>Ih(e/.25),getStore:e=>{let{imageColorMatrix:t}=e;return t},getValue:e=>{if(e.brightness)return e.brightness[4]},setValue:(e,t)=>e.update((e=>({...e,brightness:[1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0]})))},Ef={base:1,min:.5,max:1.5,getLabel:e=>Ih(2*(e-.5)-1),getStore:e=>{let{imageColorMatrix:t}=e;return t},getValue:e=>{if(e.contrast)return e.contrast[0]},setValue:(e,t)=>e.update((e=>({...e,contrast:[t,0,0,0,.5*(1-t),0,t,0,0,.5*(1-t),0,0,t,0,.5*(1-t),0,0,0,1,0]})))},Rf={base:1,min:0,max:2,getLabel:e=>Ih(e-1),getStore:e=>{let{imageColorMatrix:t}=e;return t},getValue:e=>{if(e.saturation)return(e.saturation[0]-.213)/.787},setValue:(e,t)=>e.update((e=>({...e,saturation:[.213+.787*t,.715-.715*t,.072-.072*t,0,0,.213-.213*t,.715+.285*t,.072-.072*t,0,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,0,1,0]})))},If={base:1,min:.5,max:1.5,getLabel:e=>Ih(2*(e-.5)-1),getStore:e=>{let{imageColorMatrix:t}=e;return t},getValue:e=>{if(e.exposure)return e.exposure[0]},setValue:(e,t)=>e.update((e=>({...e,exposure:[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0]})))},Af={base:1,min:.15,max:4,getLabel:e=>Ih(e<1?(e-.15)/.85-1:(e-1)/3),getStore:e=>{let{imageGamma:t}=e;return t}};var Lf={finetuneControlConfiguration:{gamma:Af,brightness:Pf,contrast:Ef,saturation:Rf,exposure:If,temperature:{base:0,min:-1,max:1,getStore:e=>{let{imageColorMatrix:t}=e;return t},getValue:e=>{if(!e.temperature)return;const t=e.temperature[0];return t>=1?(t-1)/.1:(1-t)/-.15},setValue:(e,t)=>e.update((e=>({...e,temperature:t>0?[1+.1*t,0,0,0,0,0,1,0,0,0,0,0,1+.1*-t,0,0,0,0,0,1,0]:[1+.15*t,0,0,0,0,0,1+.05*t,0,0,0,0,0,1+.15*-t,0,0,0,0,0,1,0]})))},clarity:{base:0,min:-1,max:1,getStore:e=>{let{imageConvolutionMatrix:t}=e;return t},getValue:e=>{if(e.clarity)return 0===e.clarity[0]?e.clarity[1]/-1:e.clarity[1]/-2},setValue:(e,t)=>{e.update((e=>({...e,clarity:t>=0?[0,-1*t,0,-1*t,1+4*t,-1*t,0,-1*t,0]:[-1*t,-2*t,-1*t,-2*t,1+-3*t,-2*t,-1*t,-2*t,-1*t]})))}},vignette:{base:0,min:-1,max:1,getStore:e=>{let{imageVignette:t}=e;return t}}},finetuneOptions:[["brightness",e=>e.finetuneLabelBrightness],["contrast",e=>e.finetuneLabelContrast],["saturation",e=>e.finetuneLabelSaturation],["exposure",e=>e.finetuneLabelExposure],["temperature",e=>e.finetuneLabelTemperature],["gamma",e=>e.finetuneLabelGamma],!$c()&&["clarity",e=>e.finetuneLabelClarity],["vignette",e=>e.finetuneLabelVignette]].filter(Boolean)};var zf={frameStyles:{solidSharp:{shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%"},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%"/>'},solidRound:{shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%",frameRound:!0},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%" rx="12%"/>'},lineSingle:{shape:{frameColor:[1,1,1],frameStyle:"line",frameInset:"2.5%",frameSize:".3125%",frameRadius:0},thumb:'<div style="top:.5em;left:.5em;right:.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor"></div>'},lineMultiple:{shape:{frameColor:[1,1,1],frameStyle:"line",frameAmount:2,frameInset:"2.5%",frameSize:".3125%",frameOffset:"1.25%",frameRadius:0},thumb:'<div style="top:.75em;left:.75em;right:.75em;bottom:.75em; outline: 3px double"></div>'},edgeSeparate:{shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameOffset:"5%",frameSize:".3125%"},thumb:'<div style="top:.75em;left:.5em;bottom:.75em;border-left:1px solid"></div><div style="top:.75em;right:.5em;bottom:.75em;border-right:1px solid"></div><div style="top:.5em;left:.75em;right:.75em;border-top:1px solid"></div><div style="bottom:.5em;left:.75em;right:.75em;border-bottom:1px solid"></div>'},edgeCross:{shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameSize:".3125%"},thumb:'<div style="top:-.5em;left:.5em;right:.5em;bottom:-.5em; box-shadow: inset 0 0 0 1px currentColor"></div><div style="top:.5em;left:-.5em;right:-.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor"></div>'},edgeOverlap:{shape:{frameColor:[1,1,1],frameStyle:"edge",frameOffset:"1.5%",frameSize:".3125%"},thumb:'<div style="top:.3125em;left:.5em;bottom:.3125em;border-left:1px solid"></div><div style="top:.3125em;right:.5em;bottom:.3125em;border-right:1px solid"></div><div style="top:.5em;left:.3125em;right:.3125em;border-top:1px solid"></div><div style="bottom:.5em;left:.3125em;right:.3125em;border-bottom:1px solid"></div>'},hook:{shape:{frameColor:[1,1,1],frameStyle:"hook",frameInset:"2.5%",frameSize:".3125%",frameLength:"5%"},thumb:'<div style="top:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-top: 1px solid;"></div><div style="top:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-top: 1px solid;"></div><div style="bottom:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-bottom: 1px solid;"></div><div style="bottom:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-bottom: 1px solid;"></div>'},polaroid:{shape:{frameColor:[1,1,1],frameStyle:"polaroid"},thumb:'<rect stroke-width="20%" x="-5%" y="-5%" width="110%" height="96%"/>'}},frameOptions:[[void 0,e=>e.labelNone],["solidSharp",e=>e.frameLabelMatSharp],["solidRound",e=>e.frameLabelMatRound],["lineSingle",e=>e.frameLabelLineSingle],["lineMultiple",e=>e.frameLabelLineMultiple],["edgeCross",e=>e.frameLabelEdgeCross],["edgeSeparate",e=>e.frameLabelEdgeSeparate],["edgeOverlap",e=>e.frameLabelEdgeOverlap],["hook",e=>e.frameLabelCornerHooks],["polaroid",e=>e.frameLabelPolaroid]]},Ff=e=>e.charAt(0).toUpperCase()+e.slice(1);let Of=null;var Df=()=>{if(null===Of)if(T())try{Of=!1===document.fonts.check("16px TestNonExistingFont")}catch(y){Of=!1}else Of=!1;return Of};const _f=(e,t)=>n=>n[t?"".concat(t).concat(Ff(e)):e],Bf=e=>[e,""+e],Nf=(e,t)=>n=>[e[n],_f(n,t)],jf=e=>Array.isArray(e)&&e.every(Wn)?e.map(Bf):e,Wf=[1,.2549,.2118],Vf=[1,1,1,0],Uf={eraser:()=>({eraseRadius:8,cursorStyle:"ellipse",cursorSize:"eraseRadius"}),path:()=>({points:[]}),line:()=>({x1:0,y1:0,x2:0,y2:0,disableErase:!1}),rectangle:()=>({x:0,y:0,width:0,height:0}),ellipse:()=>({x:0,y:0,rx:0,ry:0}),text:()=>({x:0,y:0,text:"Text"})},Hf=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(!Uf[e])return;const{position:r="relative",inputMode:o="drag",isSelection:i=!1}=n||{};return[{...Uf[e](),...t},{position:r,inputMode:o,isSelection:i}]},Gf=e=>({sharpie:Hf("path",{bitmap:!0,strokeJoin:"round",strokeCap:"round",strokeWidth:"0.5%",strokeColor:[...Wf],cursorStyle:"ellipse",cursorSize:"strokeWidth",disableErase:!1,disableResize:!0,disableMove:!0}),eraser:Hf("eraser"),path:Hf("path",{pathClose:void 0,strokeWidth:"0.5%",strokeColor:[...Wf],backgroundColor:[0,0,0,0]},{inputMode:"step"}),line:Hf("line",{strokeColor:[...Wf],strokeWidth:"0.5%"}),arrow:Hf("line",{lineStart:"none",lineEnd:"arrow-solid",strokeColor:[...Wf],strokeWidth:"0.5%"}),rectangle:Hf("rectangle",{strokeColor:[...Vf],backgroundColor:[...Wf]}),ellipse:Hf("ellipse",{strokeColor:[...Vf],backgroundColor:[...Wf]}),text:Hf("text",{color:[...Wf],fontSize:"2%"}),...e}),Zf=(e,t,n)=>[e,t||_f(e,"shapeLabelTool"),{icon:_f(e,"shapeIconTool"),...n}],Xf=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:["move","view","sharpie","eraser","path","line","arrow","rectangle","ellipse","text","preset"]).map((e=>V(e)?Zf(e):Array.isArray(e)?N(e[1])?Zf(e[0],void 0,e[1]):Zf(e[0],e[1],e[2]):void 0)).filter(Boolean)},Yf=e=>Object.keys(e).map(Nf(e,"labelSize")),qf=(e,t)=>{const{defaultKey:n,defaultValue:r,defaultOptions:o}=t||{},i=[];return n&&(i[0]=[r,e=>e[n],{...o}]),[...i,...e]},Kf=e=>e.split(",").map((e=>e.trim())).some((e=>document.fonts.check("16px "+e))),Qf=function(){return["ToggleSlider",{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}]},Jf=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return["ColorPicker",{options:qf(e),...t}]},em=(e,t)=>{const{title:n,optionHideLabel:r=!1,layout:o,optionIcon:i=!1}=t||{},a=jf(e),l=e.map((e=>{let[t]=e;return V(t)?parseFloat(t):t})),s=Math.max(...l),c=Math.min(...l),u=s-c;return["radio"===o?"RadioGroup":"Dropdown",{title:!1===n?void 0:n||(e=>e.shapeTitleStrokeWidth),options:e=>{const n=t?a.map((e=>{const[t,n,o={}]=e,a=V(t)?parseFloat(t):t,l=(a-c)/u;let s;return"line"===i?s='<path stroke="currentColor" stroke-linecap="square" stroke-width="'.concat(.1+.875*l,'em" d="M3,12 H20"/>'):"dot"===i?s='<circle fill="currentColor" cx="12" cy="12" r="'.concat(2+8*l,'"/>'):V(i)?s=i:U(i)&&(s=i(a,l)),[t,n,{icon:s,hideLabel:r,...o}]})):a;return Un(e,"backgroundColor")?qf(n,{defaultKey:"shapeLabelStrokeNone"}):qf(n)},onchange:(e,t)=>{if(!e)return;const n=t.strokeColor||[];if(n[3])return;const r=[...n];r[3]=1,t.strokeColor=r}}]},tm=(e,t)=>{const{title:n,layout:r}=t||{};return["radio"===r?"RadioGroup":"Dropdown",{title:n,options:qf(e)}]},nm=(e,t,n)=>["Dropdown",{title:e=>e[t],options:qf(e,{defaultKey:"labelNone",defaultOptions:{icon:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H14"/></g>'}}),optionIconStyle:n}],rm=e=>["ShorthandControl",e],om=(e,t,n,r)=>{r||e.find((e=>{let[t]=e;return t===n}))||(r={defaultKey:"labelAuto",defaultValue:n});const o=jf(e);return["Dropdown",{title:t,options:qf(o,r),...r}]},im={colorOptions:()=>(e=>Object.keys(e).map(Nf(e,"shapeTitleColor")))({transparent:[1,1,1,0],white:[1,1,1],silver:[.8667,.8667,.8667],gray:[.6667,.6667,.6667],black:[0,0,0],navy:[0,.1216,.2471],blue:[0,.4549,.851],aqua:[.498,.8588,1],teal:[.2235,.8,.8],olive:[.2392,.6,.4392],green:[.1804,.8,.251],yellow:[1,.8627,0],orange:[1,.5216,.1059],red:[1,.2549,.2118],maroon:[.5216,.0784,.2941],fuchsia:[.9412,.0706,.7451],purple:[.6941,.051,.7882]}),lineEndStyleOptions:()=>(e=>e.map((e=>[yh(e),t=>t["shapeTitleLineDecoration"+Ff(e)],{icon:t=>t["shapeIconLineDecoration"+Ff(e)]}])))(["bar","arrow","arrowSolid","circle","circleSolid","square","squareSolid"]),fontFamilyOptions:()=>(e=>[...e])([["Helvetica, Arial, Verdana, 'Droid Sans', sans-serif","Sans Serif"],["'Arial Black', 'Avenir-Black', 'Arial Bold'","Black"],["'Arial Narrow', 'Futura-CondensedMedium'","Narrow"],["'Trebuchet MS'","Humanist"],["Georgia, 'Avenir-Black', 'Times New Roman', 'Droid Serif', serif","Serif"],["Palatino","Old-Style"],["'Times New Roman', 'TimesNewRomanPSMT'","Transitional"],["Menlo, Monaco, 'Lucida Console', monospace","Monospaced"],["'Courier New', monospace","Slab Serif"]]),fontStyleOptions:()=>(e=>e.map((e=>[e,t=>t["shapeLabelFontStyle"+e.filter((e=>"normal"!==e)).map(Ff).join("")]])))([["normal","bold"],["italic","normal"],["italic","bold"]]),textAlignOptions:()=>["left","center","right"].map((e=>[e,t=>t["shapeTitleTextAlign"+Ff(e)],{hideLabel:!0,icon:t=>t["shapeIconTextAlign"+Ff(e)]}])),strokeWidthOptions:()=>Yf({extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"}),brushSizeOptions:()=>Yf(Object.entries({extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"}).reduce(((e,t)=>{let[n,r]=t;return e[n]=2*parseFloat(r)+"%",e}),{})),fontSizeOptions:()=>(e=>Object.keys(e).map(Nf(e,"labelSize")))({extraSmall:"2%",small:"4%",mediumSmall:"8%",medium:"10%",mediumLarge:"15%",large:"20%",extraLarge:"25%"}),lineHeightOptions:()=>(e=>Object.keys(e).map(Nf(e,"labelSize")))({extraSmall:"40%",small:"60%",mediumSmall:"100%",medium:"120%",mediumLarge:"140%",large:"180%",extraLarge:"220%"})},am=new Intl.NumberFormat("default",{minimumFractionDigits:1,maximumFractionDigits:1}),lm=(e,t)=>V(t)?e+"%":e,sm=(e,t,n,r)=>V(r)?Math.round(e/n*100)+"%":""+am.format(e),cm={getValue:e=>parseFloat(e),setValue:lm,label:sm,step:.05,labelClass:"PinturaPercentageLabel"},um={factory:rm,options:{title:"Text shadow",controls:[["ToggleSlider","x",{...cm,min:-100,max:100,labelPrefix:"X"}],["ToggleSlider","y",{...cm,min:-100,max:100,labelPrefix:"Y"}],["ToggleSlider","blur",{...cm,min:0,max:25,labelPrefix:e=>e.shapeTitleTextShadowBlur}],["ColorPicker","color",{enablePresets:!1}]]}},dm={defaultColor:{factory:function(e){return Jf(e,{title:e=>e.labelColor,...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}})},items:"colorOptions"},defaultNumber:{factory:Qf},defaultPercentage:{factory:Qf,options:{getValue:e=>parseFloat(e),setValue:e=>e+"%",step:.05,label:(e,t,n)=>Math.round(e/n*100)+"%",labelClass:"PinturaPercentageLabel"}},backgroundColor:{items:"colorOptions",factory:function(e){return Jf(e,{title:e=>e.shapeTitleBackgroundColor,...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}})}},strokeColor:{items:"colorOptions",factory:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Jf(e,{title:e=>e.shapeTitleStrokeColor,options:qf(e),buttonClass:"PinturaColorPickerButtonStroke",onchange:(e,n)=>{const r=n.strokeWidth;(Wn(r)||V(r)?parseFloat(r):0)>0||(n.strokeWidth=t&&t.defaultStrokeWidth||"0.5%")},...t})}},strokeWidth:{items:"strokeWidthOptions",factory:em},brushSize:{items:"brushSizeOptions",factory:e=>em(e,{title:e=>e.shapeTitleBrushSize,layout:"radio",optionHideLabel:!0,optionIcon:(e,t)=>'<circle fill="currentColor" stroke-width=".05em" stroke="currentColor" fill-opacity=".25" cx="12" cy="12" r="'.concat(2+8*t,'"/>')})},drawMode:{factory:e=>{const{hideLabel:t=!0}=e||{};return tm(["new","add","subtract"].map((e=>[e,_f(e,"shapeLabelSelectionMode"),{icon:_f(e,"shapeIconSelectionMode"),hideLabel:t}])),{title:e=>e.shapeTitleSelectionMode,layout:"radio"})}},lineStart:{items:"lineEndStyleOptions",factory:e=>nm(e,"shapeTitleLineStart","transform: scaleX(-1)")},lineEnd:{items:"lineEndStyleOptions",factory:e=>nm(e,"shapeTitleLineEnd")},color:{items:"colorOptions",factory:e=>Jf(e,{title:e=>e.shapeTitleTextColor,options:qf(e)})},fontFamily:{items:"fontFamilyOptions",factory:function(e){return["Dropdown",{title:e=>e.shapeTitleFontFamily,onload:e=>{let{options:t=[]}=e;Df()&&t.map((e=>{let[t]=e;return t})).filter(Boolean).filter((e=>!Kf(e))).forEach((e=>{const t="PinturaFontTest-"+e.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase();document.getElementById(t)||document.body.append(R("span",{textContent:" ",id:t,class:"PinturaFontTest",style:"font-family:".concat(e,";font-size:0;color:transparent;")}))}))},ondestroy:()=>{Df()&&document.querySelectorAll(".PinturaFontTest").forEach((e=>e.remove()))},optionLabelStyle:e=>"font-family: "+e,options:qf(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{defaultKey:"labelDefault"}),optionFilter:e=>{if(!Df())return!0;const[t]=e;return!t||Kf(t)}}]}},fontStyle_fontWeight:{items:"fontStyleOptions",factory:e=>["Dropdown",{title:e=>e.shapeTitleFontStyle,optionLabelStyle:e=>e&&"font-style:".concat(e[0],";font-weight:").concat(e[1]),options:qf(e,{defaultKey:"shapeLabelFontStyleNormal"})}]},fontSize:{items:"fontSizeOptions",factory:(e,t)=>om(e,(e=>e.shapeTitleFontSize),"4%",t)},lineHeight:{items:"lineHeightOptions",factory:(e,t)=>om(e,(e=>e.shapeTitleLineHeight),"120%",t)},textAlign:{items:"textAlignOptions",factory:e=>["RadioGroup",{title:e=>e.shapeTitleTextAlign,options:qf(e)}]},textShadowX_textShadowY_textShadowBlur_textShadowColor:um,textOutlineWidth_textOutlineColor:{factory:rm,options:{title:"Text outline",controls:[["ToggleSlider","width",{getValue:e=>parseFloat(e),setValue:lm,label:sm,min:0,max:15,step:.05,labelClass:"PinturaPercentageLabel",labelPrefix:e=>e.shapeTitleTextOutlineWidth}],["ColorPicker","color",{enablePresets:!1}]]}},cornerRadius:{factory:"defaultPercentage",options:{min:0,max:50,title:e=>e.shapeTitleCornerRadius}},frameColor:{factory:"defaultColor"},frameSize:{factory:"defaultPercentage",options:{min:.2,max:10,title:e=>e.labelSize}},frameInset:{factory:"defaultPercentage",options:{min:.5,max:10,title:e=>e.labelOffset}},frameOffset:{factory:"defaultPercentage",options:{min:.5,max:10,title:e=>e.labelOffset}},frameRadius:{factory:"defaultPercentage",options:{min:.5,max:10,title:e=>e.labelRadius}},frameAmount:{factory:"defaultNumber",options:{min:1,max:5,step:1,title:e=>e.labelAmount}}},pm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={...dm,...e},n={};return Object.entries(t).forEach((e=>{let[r,o]=e;if(!/Options$/.test(r))if(dm[r]&&N(o)&&!Hn(o)){const{component:e,factory:o,items:i,options:a={}}=t[r];if(V(o))n[r]=[o,a];else{const l=dm[r].items;let s=V(l)?t[l]||im[l]():void 0;V(i)&&im[i]?s=t[i]?t[i].every((e=>!Array.isArray(e)))?t[i].map((e=>[e,e])):t[i]:im[i]():(i||a.items)&&(s=i||a.items);let c=o||dm[r].factory;U(c)?n[r]=s?c(s,a):c(a):e&&(n[r]=[e,{...a,items:i}])}}else n[r]=o})),n};function hm(e){let t,n,r,o,i;const a=e[7].default,l=ui(a,e,e[6],null);return{c(){t=Ri("div"),n=Ri("div"),l&&l.c(),_i(n,"class","PinturaToolbarInner"),_i(t,"class","PinturaToolbar"),_i(t,"data-layout",e[1]),_i(t,"data-overflow",e[0])},m(a,s){Pi(a,t,s),Ci(t,n),l&&l.m(n,null),r=!0,o||(i=[Fi(n,"measure",e[3]),$i(hc.call(null,n)),Fi(t,"measure",e[2]),$i(hc.call(null,t))],o=!0)},p(e,n){let[o]=n;l&&l.p&&(!r||64&o)&&hi(l,a,e,e[6],r?pi(a,e[6],o,null):fi(e[6]),null),(!r||2&o)&&_i(t,"data-layout",e[1]),(!r||1&o)&&_i(t,"data-overflow",e[0])},i(e){r||(Ca(l,e),r=!0)},o(e){Ta(l,e),r=!1},d(e){e&&Ei(t),l&&l.d(e),o=!1,oi(i)}}}function fm(e,t,n){let r,o,{$$slots:i={},$$scope:a}=t,l=0,s=0,c=0;const u=()=>{n(0,o="compact"===r&&l>c?"overflow":void 0)};return e.$$set=e=>{"$$scope"in e&&n(6,a=e.$$scope)},e.$$.update=()=>{48&e.$$.dirty&&n(1,r=s>c?"compact":"default")},[o,r,e=>{let{detail:t}=e;const{width:r}=t;n(5,c=r),u()},e=>{let{detail:t}=e;const{width:r}=t;r>s&&n(4,s=r),l=r,o||u()},s,c,a,i]}class mm extends Na{constructor(e){super(),Ba(this,e,fm,hm,ai,{})}}function gm(e){let t,n,r,o;const i=e[5].default,a=ui(i,e,e[4],null);return{c(){t=Ri("div"),a&&a.c(),_i(t,"class",e[0])},m(i,l){Pi(i,t,l),a&&a.m(t,null),n=!0,r||(o=[Fi(t,"measure",(function(){ii(e[1]&&e[3])&&(e[1]&&e[3]).apply(this,arguments)})),$i(e[2].call(null,t))],r=!0)},p(r,o){let[l]=o;e=r,a&&a.p&&(!n||16&l)&&hi(a,i,e,e[4],n?pi(i,e[4],l,null):fi(e[4]),null),(!n||1&l)&&_i(t,"class",e[0])},i(e){n||(Ca(a,e),n=!0)},o(e){Ta(a,e),n=!1},d(e){e&&Ei(t),a&&a.d(e),r=!1,oi(o)}}}function ym(e,t,n){let{$$slots:r={},$$scope:o}=t;const i=ta();let{class:a=null}=t;const l=ra("measurable");let s=!1;return Qi((()=>n(1,s=!0))),e.$$set=e=>{"class"in e&&n(0,a=e.class),"$$scope"in e&&n(4,o=e.$$scope)},[a,s,l,e=>{let{detail:t}=e;return i("measure",t)},o,r]}class $m extends Na{constructor(e){super(),Ba(this,e,ym,gm,ai,{class:0})}}const bm=e=>({}),vm=e=>({}),xm=e=>({}),wm=e=>({}),Sm=e=>({}),km=e=>({});function Cm(e){let t,n;const r=e[4].header,o=ui(r,e,e[3],km);return{c(){t=Ri("div"),o&&o.c(),_i(t,"class","PinturaUtilHeader")},m(e,r){Pi(e,t,r),o&&o.m(t,null),n=!0},p(e,t){o&&o.p&&(!n||8&t)&&hi(o,r,e,e[3],n?pi(r,e[3],t,Sm):fi(e[3]),km)},i(e){n||(Ca(o,e),n=!0)},o(e){Ta(o,e),n=!1},d(e){e&&Ei(t),o&&o.d(e)}}}function Tm(e){let t,n;const r=e[4].footer,o=ui(r,e,e[3],vm);return{c(){t=Ri("div"),o&&o.c(),_i(t,"class","PinturaUtilFooter")},m(e,r){Pi(e,t,r),o&&o.m(t,null),n=!0},p(e,t){o&&o.p&&(!n||8&t)&&hi(o,r,e,e[3],n?pi(r,e[3],t,bm):fi(e[3]),vm)},i(e){n||(Ca(o,e),n=!0)},o(e){Ta(o,e),n=!1},d(e){e&&Ei(t),o&&o.d(e)}}}function Mm(e){let t,n,r,o,i,a,l=e[1]&&Cm(e);const s=e[4].main,c=ui(s,e,e[3],wm),u=c||function(e){let t,n;return t=new $m({props:{class:"PinturaStage"}}),t.$on("measure",e[5]),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p:Jo,i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}(e);let d=e[2]&&Tm(e);return{c(){l&&l.c(),t=Li(),n=Ri("div"),u&&u.c(),r=Li(),d&&d.c(),o=Li(),i=zi(),_i(n,"class","PinturaUtilMain")},m(s,c){l&&l.m(s,c),Pi(s,t,c),Pi(s,n,c),u&&u.m(n,null),e[6](n),Pi(s,r,c),d&&d.m(s,c),Pi(s,o,c),Pi(s,i,c),a=!0},p(e,n){let[r]=n;e[1]?l?(l.p(e,r),2&r&&Ca(l,1)):(l=Cm(e),l.c(),Ca(l,1),l.m(t.parentNode,t)):l&&(Sa(),Ta(l,1,1,(()=>{l=null})),ka()),c&&c.p&&(!a||8&r)&&hi(c,s,e,e[3],a?pi(s,e[3],r,xm):fi(e[3]),wm),e[2]?d?(d.p(e,r),4&r&&Ca(d,1)):(d=Tm(e),d.c(),Ca(d,1),d.m(o.parentNode,o)):d&&(Sa(),Ta(d,1,1,(()=>{d=null})),ka())},i(e){a||(Ca(l),Ca(u,e),Ca(d),Ca(!1),a=!0)},o(e){Ta(l),Ta(u,e),Ta(d),Ta(!1),a=!1},d(a){l&&l.d(a),a&&Ei(t),a&&Ei(n),u&&u.d(a),e[6](null),a&&Ei(r),d&&d.d(a),a&&Ei(o),a&&Ei(i)}}}function Pm(e,t,n){let{$$slots:r={},$$scope:o}=t,{hasHeader:i=!!t.$$slots.header}=t,{hasFooter:a=!!t.$$slots.footer}=t,{root:l}=t;return e.$$set=e=>{n(7,t=ti(ti({},t),mi(e))),"hasHeader"in e&&n(1,i=e.hasHeader),"hasFooter"in e&&n(2,a=e.hasFooter),"root"in e&&n(0,l=e.root),"$$scope"in e&&n(3,o=e.$$scope)},t=mi(t),[l,i,a,o,r,function(t){oa.call(this,e,t)},function(e){aa[e?"unshift":"push"]((()=>{l=e,n(0,l)}))}]}class Em extends Na{constructor(e){super(),Ba(this,e,Pm,Mm,ai,{hasHeader:1,hasFooter:2,root:0})}}function Rm(e){let t,n;return{c(){t=Ri("div"),_i(t,"class","PinturaRangeInputMeter"),_i(t,"style",n="transform: translateX(".concat(e[9].x-e[11].x,"px) translateY(").concat(e[9].y-e[11].y,"px)"))},m(n,r){Pi(n,t,r),t.innerHTML=e[7]},p(e,r){128&r[0]&&(t.innerHTML=e[7]),512&r[0]&&n!==(n="transform: translateX(".concat(e[9].x-e[11].x,"px) translateY(").concat(e[9].y-e[11].y,"px)"))&&_i(t,"style",n)},d(e){e&&Ei(t)}}}function Im(e){let t,n,r,o,i,a,l,s,c,u,d,p=e[9]&&Rm(e);return{c(){t=Ri("div"),n=Ri("span"),r=Li(),o=Ri("button"),i=Ai(e[1]),l=Li(),s=Ri("div"),p&&p.c(),_i(n,"class","PinturaRangeInputValue"),_i(o,"class","PinturaRangeInputReset"),_i(o,"type","button"),o.disabled=a=e[0]===e[2],_i(s,"class","PinturaRangeInputInner"),_i(s,"style",e[8]),_i(s,"data-value-limited",e[5]),_i(t,"class","PinturaRangeInput"),_i(t,"tabindex","0")},m(a,h){Pi(a,t,h),Ci(t,n),n.innerHTML=e[3],Ci(t,r),Ci(t,o),Ci(o,i),Ci(t,l),Ci(t,s),p&&p.m(s,null),u||(d=[Fi(o,"click",e[16]),Fi(s,"interactionstart",e[12]),Fi(s,"interactionupdate",e[14]),Fi(s,"interactionend",e[15]),Fi(s,"interactionrelease",e[13]),$i(c=cu.call(null,s,{inertia:e[6]})),Fi(s,"measure",e[36]),$i(hc.call(null,s)),Fi(t,"wheel",e[18],{passive:!1}),Fi(t,"nudge",e[19]),$i(uu.call(null,t,{direction:"horizontal",preventDefault:!0}))],u=!0)},p(e,t){8&t[0]&&(n.innerHTML=e[3]),2&t[0]&&ji(i,e[1]),5&t[0]&&a!==(a=e[0]===e[2])&&(o.disabled=a),e[9]?p?p.p(e,t):(p=Rm(e),p.c(),p.m(s,null)):p&&(p.d(1),p=null),256&t[0]&&_i(s,"style",e[8]),32&t[0]&&_i(s,"data-value-limited",e[5]),c&&ii(c.update)&&64&t[0]&&c.update.call(null,{inertia:e[6]})},i:Jo,o:Jo,d(e){e&&Ei(t),p&&p.d(),u=!1,oi(d)}}}function Am(e,t,n){let r,o,i,a,l,s,c,u,d,{labelReset:p="Reset"}=t,{direction:h="x"}=t,{min:f=0}=t,{max:m=1}=t,{base:g=f}=t,{value:y=0}=t,{valueLabel:$=0}=t,{valueMin:b}=t,{valueMax:v}=t,{oninputstart:w=x}=t,{oninputmove:S=x}=t,{oninputend:k=x}=t,{elasticity:C=0}=t,{nudgeMultiplier:T}=t,{step:M=8}=t;const P=ra("isAnimated");ci(e,P,(e=>n(6,u=e)));const E=(e,t,n)=>Math.ceil((e-n)/t)*t+n;let R,I,A;const L={x:2,y:0},z=(e,t,n)=>"M ".concat(e-n," ").concat(t," a ").concat(n," ").concat(n," 0 1 0 0 -1");let F,O,D=!1,_={snap:!1,elastic:!1};const B=(e,t,n)=>{const r=e[h]+t[h],o=sl(r,F[1][h],F[0][h]),i=C?o+du(r-o,C):o,a=n.elastic?i:o,l=Ce(0,0);return l[h]=a,N.set(l,{hard:n.snap}),sl(W(l,h),f,m)},N=Ks();ci(e,N,(e=>n(9,d=e)));const j=(e,t)=>{const n=.5*(R[t]-a[t])-(sp(e,f,m)*a[t]-.5*a[t]);return{x:"x"===t?n:0,y:"y"===t?n:0}},W=(e,t)=>{const n=-(e[t]-.5*R[t])/a[t];return f+n*r},V=N.subscribe((e=>{e&&O&&S(sl(W(e,h),f,m))})),U=e=>{const t=[j(null!=b?b:f,h),j(null!=v?v:m,h)],n={x:"x"===h?d.x+e:0,y:"y"===h?d.y+e:0},r=sl(n[h],t[1][h],t[0][h]),o={...d,[h]:r};yi(N,d=o,d);const i=sl(W(o,h),f,m);w(),S(i),k(i)};return ea((()=>{V()})),e.$$set=e=>{"labelReset"in e&&n(1,p=e.labelReset),"direction"in e&&n(20,h=e.direction),"min"in e&&n(21,f=e.min),"max"in e&&n(22,m=e.max),"base"in e&&n(2,g=e.base),"value"in e&&n(0,y=e.value),"valueLabel"in e&&n(3,$=e.valueLabel),"valueMin"in e&&n(23,b=e.valueMin),"valueMax"in e&&n(24,v=e.valueMax),"oninputstart"in e&&n(25,w=e.oninputstart),"oninputmove"in e&&n(26,S=e.oninputmove),"oninputend"in e&&n(27,k=e.oninputend),"elasticity"in e&&n(28,C=e.elasticity),"nudgeMultiplier"in e&&n(29,T=e.nudgeMultiplier),"step"in e&&n(30,M=e.step)},e.$$.update=()=>{if(6291456&e.$$.dirty[0]&&n(32,r=m-f),10485760&e.$$.dirty[0]&&n(34,o=null!=b?Math.max(b,f):f),20971520&e.$$.dirty[0]&&n(33,i=null!=v?Math.min(v,m):m),6291460&e.$$.dirty[0]&&n(35,l=sp(g,f,m)),16&e.$$.dirty[0]|16&e.$$.dirty[1]&&R){const e=.5*R.y;let t,r=40*l,o="",i=R.y,a="";for(let n=0;n<=40;n++){const i=L.x+10*n,l=e;o+=z(i,l,n%5==0?2:.75)+" ",t=i+L.x,n===r&&(a='<path d="M'.concat(i," ").concat(l-4,' l2 3 l-2 -1 l-2 1 z"/>'))}n(7,I='<svg width="'.concat(t,'" height="').concat(i,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ').concat(t," ").concat(i,'" aria-hidden="true" focusable="false">\n        ').concat(a,'\n        <rect rx="4" ry="4" y="').concat(e-4,'"" height="8"/>\n        <path fill-rule="evenodd" d="').concat(o.trim(),'"/></svg>')),n(31,A={x:t-2*L.x,y:i})}16&e.$$.dirty[0]|1&e.$$.dirty[1]&&(a=R&&A),6291456&e.$$.dirty[0]|12&e.$$.dirty[1]&&n(5,s=o!==f||i!==m),32&e.$$.dirty[0]|12&e.$$.dirty[1]&&n(8,c=s?function(e,t){const n=sp(e,f,m),r=sp(t,f,m);return"--range-mask-from:".concat(100*xe(E(n,.025,0)-.0125),"%;--range-mask-to:").concat(100*xe(E(r,.025,0)-.0125),"%")}(o,i):""),1048657&e.$$.dirty[0]|2&e.$$.dirty[1]&&r&&R&&R.x&&R.y&&N.set(j(y,h),{hard:!1===u})},[y,p,g,$,R,s,u,I,c,d,P,L,()=>{D=!1,O=si(N),F=[j(null!=b?b:f,h),j(null!=v?v:m,h)],w()},()=>{D=!0},e=>{let{detail:t}=e;_.snap=!D,_.elastic=!D,B(O,t.translation,_)},e=>{let{detail:t}=e;_.snap=!1,_.elastic=!1;const n=B(O,t.translation,_);if(O=void 0,F=void 0,Math.abs(n-g)<.01)return k(g);k(n)},()=>{n(0,y=sl(g,o,i)),w(),k(y)},N,e=>{e.preventDefault(),e.stopPropagation();const t=fu(e)*M;U(t)},e=>{let{detail:t}=e;U(t[h]*Math.abs(T||8))},h,f,m,b,v,w,S,k,C,T,M,A,r,i,o,l,e=>n(4,R=(e=>Ce(e.width,e.height))(e.detail))]}class Lm extends Na{constructor(e){super(),Ba(this,e,Am,Im,ai,{labelReset:1,direction:20,min:21,max:22,base:2,value:0,valueLabel:3,valueMin:23,valueMax:24,oninputstart:25,oninputmove:26,oninputend:27,elasticity:28,nudgeMultiplier:29,step:30},null,[-1,-1])}}var zm={[pe]:e=>({x:e.x,y:e.y}),[ye]:e=>({x:e.x+e.width,y:e.y}),[he]:e=>({x:e.x+e.width,y:e.y}),[$e]:e=>({x:e.x+e.width,y:e.y+e.height}),[fe]:e=>({x:e.x,y:e.y+e.height}),[be]:e=>({x:e.x,y:e.y+e.height}),[me]:e=>({x:e.x,y:e.y}),[ge]:e=>({x:e.x,y:e.y})};function Fm(e,t,n){const r=e.slice();return r[14]=t[n].key,r[15]=t[n].translate,r[16]=t[n].scale,r[17]=t[n].type,r[18]=t[n].opacity,r}function Om(e,t){let n,r,o,i,a,l,s,c;return{key:e,first:null,c(){n=Ri("div"),_i(n,"role","button"),_i(n,"aria-label",r="Drag ".concat(t[17]," ").concat(t[14])),_i(n,"tabindex",o="edge"===t[17]?-1:0),_i(n,"class","PinturaRectManipulator"),_i(n,"data-direction",i=t[14]),_i(n,"data-shape",a="edge"===t[17]?"edge":""+t[0]),_i(n,"style",l="--tx:".concat(t[15].x,";--ty:").concat(t[15].y,";--sx:").concat(t[16].x,";--sy:").concat(t[16].y,";opacity:").concat(t[18])),this.first=n},m(e,r){Pi(e,n,r),s||(c=[Fi(n,"nudge",(function(){ii(t[6](t[14]))&&t[6](t[14]).apply(this,arguments)})),$i(uu.call(null,n,{preventDefault:!0})),Fi(n,"interactionstart",(function(){ii(t[5]("resizestart",t[14]))&&t[5]("resizestart",t[14]).apply(this,arguments)})),Fi(n,"interactionupdate",(function(){ii(t[5]("resizemove",t[14]))&&t[5]("resizemove",t[14]).apply(this,arguments)})),Fi(n,"interactionend",(function(){ii(t[5]("resizeend",t[14]))&&t[5]("resizeend",t[14]).apply(this,arguments)})),$i(cu.call(null,n))],s=!0)},p(e,s){t=e,2&s&&r!==(r="Drag ".concat(t[17]," ").concat(t[14]))&&_i(n,"aria-label",r),2&s&&o!==(o="edge"===t[17]?-1:0)&&_i(n,"tabindex",o),2&s&&i!==(i=t[14])&&_i(n,"data-direction",i),3&s&&a!==(a="edge"===t[17]?"edge":""+t[0])&&_i(n,"data-shape",a),2&s&&l!==(l="--tx:".concat(t[15].x,";--ty:").concat(t[15].y,";--sx:").concat(t[16].x,";--sy:").concat(t[16].y,";opacity:").concat(t[18]))&&_i(n,"style",l)},d(e){e&&Ei(n),s=!1,oi(c)}}}function Dm(e){let t,n=[],r=new Map,o=e[1];const i=e=>e[14];for(let a=0;a<o.length;a+=1){let t=Fm(e,o,a),l=i(t);r.set(l,n[a]=Om(l,t))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=zi()},m(e,r){for(let t=0;t<n.length;t+=1)n[t].m(e,r);Pi(e,t,r)},p(e,a){let[l]=a;99&l&&(o=e[1],n=Aa(n,l,i,1,e,o,r,t.parentNode,Ra,Om,t,Fm))},i:Jo,o:Jo,d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&Ei(t)}}}function _m(e,t,n){let r,o,i,a,{rect:l=null}=t,{visible:s=!1}=t,{style:c}=t;const u=ra("isAnimated");ci(e,u,(e=>n(11,a=e)));const d=Ks(void 0,{precision:1e-4,stiffness:.2,damping:.4});ci(e,d,(e=>n(10,i=e)));const p=Ks(0,{precision:.001});let h;ci(e,p,(e=>n(9,o=e)));const f=ta();return e.$$set=e=>{"rect"in e&&n(7,l=e.rect),"visible"in e&&n(8,s=e.visible),"style"in e&&n(0,c=e.style)},e.$$.update=()=>{2304&e.$$.dirty&&d.set(s?1:.5,{hard:!1===a}),2304&e.$$.dirty&&p.set(s?1:0,{hard:!1===a}),1664&e.$$.dirty&&n(1,r=Object.keys(de).map(((e,t)=>{const n=de[e],r=zm[n](l),a=1===n.length?"edge":"corner",s="corner"===a;return{key:n,type:a,scale:{x:/^(t|b)$/.test(n)?l.width:s?sl(i,.5,1.25):1,y:/^(r|l)$/.test(n)?l.height:s?sl(i,.5,1.25):1},translate:{x:r.x,y:r.y},opacity:o}})))},[c,r,u,d,p,(e,t)=>n=>{let{detail:r}=n;h&&t!==h||"resizestart"!==e&&void 0===h||("resizestart"===e&&(h=t),"resizeend"===e&&(h=void 0),f(e,{direction:t,translation:r&&r.translation}))},e=>t=>{let{detail:n}=t;f("resizestart",{direction:e,translation:{x:0,y:0}}),f("resizemove",{direction:e,translation:n}),f("resizeend",{direction:e,translation:{x:0,y:0}})},l,s,o,i,a]}class Bm extends Na{constructor(e){super(),Ba(this,e,_m,Dm,ai,{rect:7,visible:8,style:0})}}var Nm=e=>{function t(t,n){e.dispatchEvent(new CustomEvent(t,{detail:n}))}const n=n=>{n.preventDefault(),e.addEventListener("gesturechange",r),e.addEventListener("gestureend",o),t("gesturedown")},r=e=>{e.preventDefault(),t("gestureupdate",e.scale)},o=e=>{t("gestureup",e.scale),e.preventDefault(),i()},i=()=>{e.removeEventListener("gesturechange",r),e.removeEventListener("gestureend",o)};return e.addEventListener("gesturestart",n),{destroy:()=>{i(),e.removeEventListener("gesturestart",n)}}},jm={[pe]:fe,[he]:me,[fe]:pe,[me]:he,[ge]:$e,[ye]:be,[$e]:ge,[be]:ye},Wm=e=>{const t=e===me||e===he,n=e===pe||e===fe;return[e===he||e===ye||e===$e,e===me||e===be||e===ge,e===pe||e===ye||e===ge,e===fe||e===$e||e===be,t,n,t||n]},Vm=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{target:o,translate:i}=t,{aspectRatio:a,minSize:l,maxSize:s}=r,c=ve[jm[o]],u=Fe(Ce(e.x,e.y),Ce(c[0]*e.width,c[1]*e.height)),d=ve[o],p=Fe(ut(e),Ce(d[0]*e.width,d[1]*e.height)),[h,f,m,g,y,$,b]=Wm(o);let v=i.x,x=i.y;y?x=0:$&&(v=0);const{inner:w,outer:S}=Um(u,o,n,{aspectRatio:a,minSize:l,maxSize:s});let[k,C,T,M]=zt(e);if(h?M=u.x:f&&(C=u.x),g?k=u.y:m&&(T=u.y),h){const e=w.x+w.width,t=S.x+S.width;C=sl(p.x+v,e,t)}else if(f){const e=S.x,t=w.x;M=sl(p.x+v,e,t)}if(g){const e=w.y+w.height,t=S.y+S.height;T=sl(p.y+x,e,t)}else if(m){const e=S.y,t=w.y;k=sl(p.y+x,e,t)}if(M>w.x&&(M=w.x),C<w.x+w.width&&(C=w.x+w.width),k>w.y&&(k=w.y),T<w.y+w.height&&(T=w.y+w.height),M<S.x){const e=S.x-M;M=S.x,C+=e}if(C>S.x+S.width){const e=C-(S.x+S.width);C=S.x+S.width,M-=e}if(k<S.y){const e=S.y-k;k=S.y,T+=e}if(T>S.y+S.height){const e=T-(S.y+S.height);T=S.y+S.height,k-=e}if(a)if(b){let e=C-M,t=T-k;y?(t=e/a,k=u.y-.5*t,T=u.y+.5*t):$&&(e=t*a,M=u.x-.5*e,C=u.x+.5*e)}else{const e=Ce(p.x+v-u.x,p.y+x-u.y);o===ye?(e.x=Math.max(0,e.x),e.y=Math.min(0,e.y)):o===$e?(e.x=Math.max(0,e.x),e.y=Math.max(0,e.y)):o===be?(e.x=Math.min(0,e.x),e.y=Math.max(0,e.y)):o===ge&&(e.x=Math.min(0,e.x),e.y=Math.min(0,e.y));const t=Re(e),n=Re(Ce(w.width,w.height)),r=Re(Ce(S.width,S.height)),i=sl(t,n,r),l=Ce(a,1),s=_e(Ie(l),i);o===ye?(C=u.x+s.x,k=u.y-s.y):o===$e?(C=u.x+s.x,T=u.y+s.y):o===be?(M=u.x-s.x,T=u.y+s.y):o===ge&&(M=u.x-s.x,k=u.y-s.y)}return $t(M,k,C-M,T-k)};const Um=(e,t,n,r)=>{const{aspectRatio:o,minSize:i,maxSize:a}=r,l=t===he||t===ye||t===$e,s=t===me||t===be||t===ge,c=t===pe||t===ye||t===ge,u=t===fe||t===$e||t===be,d=t===me||t===he,p=t===pe||t===fe,h=ut(n);l?(h.x=e.x,h.width-=e.x):s&&(h.width=e.x),u?(h.y=e.y,h.height-=e.y):c&&(h.height=e.y);const f=((e,t)=>ct(0,0,e,t))(Math.min(h.width,a.width),Math.min(h.height,a.height));if(o)if(d){const t=Math.min(e.y,n.height-e.y);f.height=Math.min(2*t,f.height)}else if(p){const t=Math.min(e.x,n.width-e.x);f.width=Math.min(2*t,f.width)}const m=o?Ye(At(pt(i),o)):i,g=o?Ye(Lt(f,o)):f;let y,$,b,v;l?y=e.x:s&&($=e.x),u?b=e.y:c&&(v=e.y),l?$=y+m.width:s&&(y=$-m.width),u?v=b+m.height:c&&(b=v-m.height),d?(b=e.y-.5*m.height,v=e.y+.5*m.height):p&&(y=e.x-.5*m.width,$=e.x+.5*m.width);const x=mt([Ce(y,b),Ce($,v)]);return l?$=y+g.width:s&&(y=$-g.width),u?v=b+g.height:c&&(b=v-g.height),d?(b=e.y-.5*g.height,v=e.y+.5*g.height):p&&(y=e.x-.5*g.width,$=e.x+.5*g.width),y=Math.max(n.x,y),$=Math.min(n.x+n.width,$),b=Math.max(n.y,b),v=Math.min(n.y+n.height,v),{inner:x,outer:mt([Ce(y,b),Ce($,v)])}};var Hm=e=>180*e/Math.PI;function Gm(e){let t,n,r;return n=new Lm({props:{elasticity:e[5],min:e[9],max:e[10],value:e[11],valueMin:Math.max(e[9],e[0]),valueMax:Math.min(e[10],e[1]),labelReset:e[6],base:e[12],valueLabel:Math.round(Hm(e[11]))+"&deg;",oninputstart:e[2],oninputmove:e[17],oninputend:e[18]}}),{c(){t=Ri("div"),Oa(n.$$.fragment),_i(t,"class","PinturaImageRotator")},m(e,o){Pi(e,t,o),Da(n,t,null),r=!0},p(e,t){let[r]=t;const o={};32&r&&(o.elasticity=e[5]),512&r&&(o.min=e[9]),1024&r&&(o.max=e[10]),2048&r&&(o.value=e[11]),513&r&&(o.valueMin=Math.max(e[9],e[0])),1026&r&&(o.valueMax=Math.min(e[10],e[1])),64&r&&(o.labelReset=e[6]),4096&r&&(o.base=e[12]),2048&r&&(o.valueLabel=Math.round(Hm(e[11]))+"&deg;"),4&r&&(o.oninputstart=e[2]),392&r&&(o.oninputmove=e[17]),400&r&&(o.oninputend=e[18]),n.$set(o)},i(e){r||(Ca(n.$$.fragment,e),r=!0)},o(e){Ta(n.$$.fragment,e),r=!1},d(e){e&&Ei(t),_a(n)}}}function Zm(e,t,n){let r,o,i,a,l,s,c,{rotation:u}=t,{valueMin:d}=t,{valueMax:p}=t,{oninputstart:h=x}=t,{oninputmove:f=x}=t,{oninputend:m=x}=t,{elasticity:g=0}=t,{labelReset:y}=t,{rotationMin:$}=t,{rotationMax:b}=t;return e.$$set=e=>{"rotation"in e&&n(13,u=e.rotation),"valueMin"in e&&n(0,d=e.valueMin),"valueMax"in e&&n(1,p=e.valueMax),"oninputstart"in e&&n(2,h=e.oninputstart),"oninputmove"in e&&n(3,f=e.oninputmove),"oninputend"in e&&n(4,m=e.oninputend),"elasticity"in e&&n(5,g=e.elasticity),"labelReset"in e&&n(6,y=e.labelReset),"rotationMin"in e&&n(14,$=e.rotationMin),"rotationMax"in e&&n(15,b=e.rotationMax)},e.$$.update=()=>{16384&e.$$.dirty&&n(9,r=$+1e-9),32768&e.$$.dirty&&n(10,o=b-1e-9),1536&e.$$.dirty&&n(12,i=r+.5*(o-r)),32768&e.$$.dirty&&n(16,a=2*b),8192&e.$$.dirty&&n(8,l=Math.sign(u)),73728&e.$$.dirty&&n(7,s=Math.round(Math.abs(u)/a)*a),8576&e.$$.dirty&&n(11,c=u-l*s)},[d,p,h,f,m,g,y,s,l,r,o,c,i,u,$,b,a,e=>f(l*s+e),e=>m(l*s+e)]}class Xm extends Na{constructor(e){super(),Ba(this,e,Zm,Gm,ai,{rotation:13,valueMin:0,valueMax:1,oninputstart:2,oninputmove:3,oninputend:4,elasticity:5,labelReset:6,rotationMin:14,rotationMax:15})}}function Ym(e){let t,n,r,o,i;return{c(){t=Ri("div"),n=Ri("p"),r=Ai(e[0]),o=Ai(" \xd7 "),i=Ai(e[1]),_i(t,"class","PinturaImageInfo")},m(e,a){Pi(e,t,a),Ci(t,n),Ci(n,r),Ci(n,o),Ci(n,i)},p(e,t){let[n]=t;1&n&&ji(r,e[0]),2&n&&ji(i,e[1])},i:Jo,o:Jo,d(e){e&&Ei(t)}}}function qm(e,t,n){let{width:r}=t,{height:o}=t;return e.$$set=e=>{"width"in e&&n(0,r=e.width),"height"in e&&n(1,o=e.height)},[r,o]}class Km extends Na{constructor(e){super(),Ba(this,e,qm,Ym,ai,{width:0,height:1})}}function Qm(e){let t,n;return t=new zd({props:{class:"PinturaPresetListFilter",layout:"row",options:e[8],selectedIndex:e[7],onchange:e[10]}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};256&n&&(r.options=e[8]),128&n&&(r.selectedIndex=e[7]),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function Jm(e){let t,n;return t=new rp({props:{icon:e[0],label:e[1],labelClass:e[2],hideLabel:e[3],options:e[9],selectedIndex:e[4],onchange:e[5],optionMapper:e[6],$$slots:{controls:[Qm]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){let[r]=n;const o={};1&r&&(o.icon=e[0]),2&r&&(o.label=e[1]),4&r&&(o.labelClass=e[2]),8&r&&(o.hideLabel=e[3]),512&r&&(o.options=e[9]),16&r&&(o.selectedIndex=e[4]),32&r&&(o.onchange=e[5]),64&r&&(o.optionMapper=e[6]),262528&r&&(o.$$scope={dirty:r,ctx:e}),t.$set(o)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}const eg='fill="none" stroke="currentColor"';function tg(e,t,n){let r,o,i,{icon:a}=t,{label:l}=t,{labelClass:s}=t,{hideLabel:c}=t,{options:u}=t,{selectedIndex:d}=t,{onchange:p}=t,{optionMapper:h}=t,{filter:f="landscape"}=t,{onfilterchange:m=x}=t;const g=(e,t,n,r,o)=>"\n    <rect ".concat(eg,' x="').concat(e,'" y="').concat(t,'" width="').concat(n,'" height="').concat(r,'" rx="').concat(o,'"/>'),y=(e,t)=>"<path ".concat(eg,' d="M').concat(e," ").concat(t,' l2 2 l3 -4"/>');return e.$$set=e=>{"icon"in e&&n(0,a=e.icon),"label"in e&&n(1,l=e.label),"labelClass"in e&&n(2,s=e.labelClass),"hideLabel"in e&&n(3,c=e.hideLabel),"options"in e&&n(12,u=e.options),"selectedIndex"in e&&n(4,d=e.selectedIndex),"onchange"in e&&n(5,p=e.onchange),"optionMapper"in e&&n(6,h=e.optionMapper),"filter"in e&&n(11,f=e.filter),"onfilterchange"in e&&n(13,m=e.onfilterchange)},e.$$.update=()=>{6144&e.$$.dirty&&n(9,r=((e,t)=>(e||[]).map((e=>V(e[0])?(e[1]=e[1].map(t),e):t(e))))(u,(e=>t=>{const[n,r,o={}]=t;return Wn(n)&&(o.hidden="landscape"===e?n<1:n>1),[n,r,o]})(f))),2048&e.$$.dirty&&n(7,o="landscape"===f?0:1),128&e.$$.dirty&&n(8,i=[["landscape","Landscape",{hideLabel:!0,icon:g(2,6,19,12,2)+(0===o?y(9,12):"")}],["portrait","Portrait",{hideLabel:!0,icon:g(5,3,13,18,2)+(1===o?y(9,12):"")}]])},[a,l,s,c,d,p,h,o,i,r,e=>{n(11,f=e.value),m(e.value)},f,u,m]}class ng extends Na{constructor(e){super(),Ba(this,e,tg,Jm,ai,{icon:0,label:1,labelClass:2,hideLabel:3,options:12,selectedIndex:4,onchange:5,optionMapper:6,filter:11,onfilterchange:13})}}const rg=e=>ze(e,(e=>xe(e,6))),og=e=>Ot(e,(e=>xe(e,6))),ig=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-4;return Math.abs(e-t)<n};var ag=function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const{aspectRatio:i}=o;e=og(e),r=r.map(rg);const a=St(e,jm[n.target]),l=ze(a,(e=>xe(e,6))),s=i?At(o.minSize,i):o.minSize,c=i?Lt(o.maxSize,i):o.maxSize,u=St(t,n.target);if(We(u,a)<1){t=ut(e);const n=Math.min(s.width/e.width,s.height/e.height);xt(t,n,a)}t=wt(ut(t),s,c,a);let d=ut(t);t=og(t);const p=Ht(r,1),h=Ft(e),f=Ft(t),m=h.findIndex((e=>Le(ze(e,(e=>xe(e,6))),l))),g=e=>p.map((t=>Nt(t,e))).filter(Boolean).pop();if(i){const t=f.map(((e,t)=>{if(t===m)return;const n=Ce(a.x-e.x,a.y-e.y);Ie(n),_e(n,.5);const r=Ce(a.x-n.x,a.y-n.y),o=it(r,rg(e)),i=g(o);if(!i)return;const l=h[t];return{intersection:i,cornerDist:We(a,l),intersectionDist:We(a,i)}})).filter(Boolean);if(t.length){const n=t.reduce(((e,t)=>{const n=t.intersectionDist/t.cornerDist;return n<e?n:e}),Number.MAX_SAFE_INTEGER);d=ut(e),xt(d,n,a)}}else{const e=1===n.target.length,o=!(r[0].y===r[1].y||r[0].x===r[1].x),i=h.map(((t,n)=>{if(n===m)return;const r=f[n],i=!ig(r.x,l.x)&&!ig(r.y,l.y);if(!e&&!o&&i)return;if(e&&(ig(r.x,l.x)||ig(r.y,l.y)))return;const s=Me(e?t:a),c=Oe(Me(s),r);Ie(c),_e(c,.5),e?Fe(s,c):Oe(s,c);const u=it(s,r);return g(u)||void 0})).filter(Boolean);if(i.length){const[e,r,o,s]=Wm(n.target);let[c,u,p,h]=zt(t);i.forEach((t=>{let{x:n,y:i}=t;const a=xe(n,6),d=xe(i,6);o&&!ig(d,l.y)&&(c=Math.max(c,i)),e&&!ig(a,l.x)&&(u=Math.min(u,n)),s&&!ig(d,l.y)&&(p=Math.min(p,i)),r&&!ig(a,l.x)&&(h=Math.max(h,n))})),d=ht([c,u,p,h]),xt(d,.9999,a)}}return wt(d,s,c,a),d};function lg(e){let t,n;return t=new ah({props:{items:e[11]}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};2048&n[0]&&(r.items=e[11]),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function sg(e){let t,n,r;return n=new mm({props:{$$slots:{default:[lg]},$$scope:{ctx:e}}}),{c(){t=Ri("div"),Oa(n.$$.fragment),_i(t,"slot","header")},m(e,o){Pi(e,t,o),Da(n,t,null),r=!0},p(e,t){const r={};2048&t[0]|1&t[7]&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){r||(Ca(n.$$.fragment,e),r=!0)},o(e){Ta(n.$$.fragment,e),r=!1},d(e){e&&Ei(t),_a(n)}}}function cg(e){let t,n;return t=new au({props:{onclick:e[87],label:e[4].cropLabelButtonRecenter,icon:e[4].cropIconButtonRecenter,class:"PinturaButtonCenter",disabled:!e[9],hideLabel:!0,style:"opacity: ".concat(e[29],"; transform: translate3d(").concat(e[30].x,"px, ").concat(e[30].y,"px, 0)")}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};16&n[0]&&(r.label=e[4].cropLabelButtonRecenter),16&n[0]&&(r.icon=e[4].cropIconButtonRecenter),512&n[0]&&(r.disabled=!e[9]),1610612736&n[0]&&(r.style="opacity: ".concat(e[29],"; transform: translate3d(").concat(e[30].x,"px, ").concat(e[30].y,"px, 0)")),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function ug(e){let t,n;return t=new Bm({props:{rect:e[8],visible:e[12],style:e[1]}}),t.$on("resizestart",e[67]),t.$on("resizemove",e[68]),t.$on("resizeend",e[69]),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};256&n[0]&&(r.rect=e[8]),4096&n[0]&&(r.visible=e[12]),2&n[0]&&(r.style=e[1]),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function dg(e){let t,n;return t=new Km({props:{width:Math.round(e[13].width),height:Math.round(e[13].height)}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};8192&n[0]&&(r.width=Math.round(e[13].width)),8192&n[0]&&(r.height=Math.round(e[13].height)),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function pg(e){let t,n,r,o,i,a,l,s,c=e[21]&&e[10]&&cg(e),u=e[21]&&ug(e),d=e[22]&&dg(e);return{c(){t=Ri("div"),n=Ri("div"),c&&c.c(),r=Li(),u&&u.c(),i=Li(),d&&d.c(),_i(n,"class","PinturaStage"),_i(t,"slot","main")},m(p,h){Pi(p,t,h),Ci(t,n),c&&c.m(n,null),Ci(n,r),u&&u.m(n,null),e[161](n),Ci(t,i),d&&d.m(t,null),a=!0,l||(s=[$i(hc.call(null,n)),Fi(n,"measure",e[159]),Fi(n,"wheel",(function(){ii(e[2]&&e[86])&&(e[2]&&e[86]).apply(this,arguments)}),{passive:!1}),Fi(n,"interactionstart",e[73]),Fi(n,"interactionupdate",e[74]),Fi(n,"interactionrelease",e[76]),Fi(n,"interactionend",e[75]),$i(o=cu.call(null,n,{drag:!0,inertia:!0,pinch:e[2],shouldStartInteraction:wg,getEventPosition:e[162]})),Fi(n,"gesturedown",e[83]),Fi(n,"gestureupdate",e[84]),Fi(n,"gestureup",e[85]),$i(Nm.call(null,n))],l=!0)},p(i,a){(e=i)[21]&&e[10]?c?(c.p(e,a),2098176&a[0]&&Ca(c,1)):(c=cg(e),c.c(),Ca(c,1),c.m(n,r)):c&&(Sa(),Ta(c,1,1,(()=>{c=null})),ka()),e[21]?u?(u.p(e,a),2097152&a[0]&&Ca(u,1)):(u=ug(e),u.c(),Ca(u,1),u.m(n,null)):u&&(Sa(),Ta(u,1,1,(()=>{u=null})),ka()),o&&ii(o.update)&&16777220&a[0]&&o.update.call(null,{drag:!0,inertia:!0,pinch:e[2],shouldStartInteraction:wg,getEventPosition:e[162]}),e[22]?d?(d.p(e,a),4194304&a[0]&&Ca(d,1)):(d=dg(e),d.c(),Ca(d,1),d.m(t,null)):d&&(Sa(),Ta(d,1,1,(()=>{d=null})),ka())},i(e){a||(Ca(c),Ca(u),Ca(d),a=!0)},o(e){Ta(c),Ta(u),Ta(d),a=!1},d(n){n&&Ei(t),c&&c.d(),u&&u.d(),e[161](null),d&&d.d(),l=!1,oi(s)}}}function hg(e){let t,n,r,o;const i=[{class:"PinturaControlList"},{tabs:e[7]},e[18]];let a={$$slots:{default:[fg,e=>{let{tab:t}=e;return{216:t}},e=>{let{tab:t}=e;return[0,0,0,0,0,0,t?1073741824:0]}]},$$scope:{ctx:e}};for(let c=0;c<i.length;c+=1)a=ti(a,i[c]);t=new Ac({props:a}),t.$on("select",e[160]);const l=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:e[17]},e[18]];let s={$$slots:{default:[yg,e=>{let{panel:t}=e;return{215:t}},e=>{let{panel:t}=e;return[0,0,0,0,0,0,t?536870912:0]}]},$$scope:{ctx:e}};for(let c=0;c<l.length;c+=1)s=ti(s,l[c]);return r=new Uc({props:s}),{c(){Oa(t.$$.fragment),n=Li(),Oa(r.$$.fragment)},m(e,i){Da(t,e,i),Pi(e,n,i),Da(r,e,i),o=!0},p(e,n){const o=262272&n[0]?La(i,[i[0],128&n[0]&&{tabs:e[7]},262144&n[0]&&za(e[18])]):{};1073741824&n[6]|1&n[7]&&(o.$$scope={dirty:n,ctx:e}),t.$set(o);const a=393216&n[0]?La(l,[l[0],l[1],131072&n[0]&&{panels:e[17]},262144&n[0]&&za(e[18])]):{};511721496&n[0]|536870912&n[6]|1&n[7]&&(a.$$scope={dirty:n,ctx:e}),r.$set(a)},i(e){o||(Ca(t.$$.fragment,e),Ca(r.$$.fragment,e),o=!0)},o(e){Ta(t.$$.fragment,e),Ta(r.$$.fragment,e),o=!1},d(e){_a(t,e),e&&Ei(n),_a(r,e)}}}function fg(e){let t,n,r=e[216].label+"";return{c(){t=Ri("span"),n=Ai(r)},m(e,r){Pi(e,t,r),Ci(t,n)},p(e,t){1073741824&t[6]&&r!==(r=e[216].label+"")&&ji(n,r)},d(e){e&&Ei(t)}}}function mg(e){let t,n;return t=new Lm({props:{elasticity:e[25]*e[43],base:xg,min:e[23],max:vg,valueMin:e[27][0],valueMax:e[27][1],value:e[28],labelReset:e[4].labelReset,valueLabel:Math.round(100*e[28])+"%",oninputstart:e[80],oninputmove:e[81],oninputend:e[82]}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};33554432&n[0]&&(r.elasticity=e[25]*e[43]),8388608&n[0]&&(r.min=e[23]),134217728&n[0]&&(r.valueMin=e[27][0]),134217728&n[0]&&(r.valueMax=e[27][1]),268435456&n[0]&&(r.value=e[28]),16&n[0]&&(r.labelReset=e[4].labelReset),268435456&n[0]&&(r.valueLabel=Math.round(100*e[28])+"%"),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function gg(e){let t,n;return t=new Xm({props:{elasticity:e[25]*e[43],rotation:e[14],labelReset:e[4].labelReset,valueMin:e[26][0],valueMax:e[26][1],rotationMin:-e[3],rotationMax:e[3],oninputstart:e[70],oninputmove:e[71],oninputend:e[72]}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};33554432&n[0]&&(r.elasticity=e[25]*e[43]),16384&n[0]&&(r.rotation=e[14]),16&n[0]&&(r.labelReset=e[4].labelReset),67108864&n[0]&&(r.valueMin=e[26][0]),67108864&n[0]&&(r.valueMax=e[26][1]),8&n[0]&&(r.rotationMin=-e[3]),8&n[0]&&(r.rotationMax=e[3]),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function yg(e){let t,n,r,o;const i=[gg,mg],a=[];function l(e,t){return e[215]===e[92]+"-rotation"?0:e[215]===e[92]+"-zoom"?1:-1}return~(t=l(e))&&(n=a[t]=i[t](e)),{c(){n&&n.c(),r=zi()},m(e,n){~t&&a[t].m(e,n),Pi(e,r,n),o=!0},p(e,o){let s=t;t=l(e),t===s?~t&&a[t].p(e,o):(n&&(Sa(),Ta(a[s],1,1,(()=>{a[s]=null})),ka()),~t?(n=a[t],n?n.p(e,o):(n=a[t]=i[t](e),n.c()),Ca(n,1),n.m(r.parentNode,r)):n=null)},i(e){o||(Ca(n),o=!0)},o(e){Ta(n),o=!1},d(e){~t&&a[t].d(e),e&&Ei(r)}}}function $g(e){let t,n,r=e[19]&&hg(e);return{c(){t=Ri("div"),r&&r.c(),_i(t,"slot","footer"),_i(t,"style",e[16])},m(e,o){Pi(e,t,o),r&&r.m(t,null),n=!0},p(e,o){e[19]?r?(r.p(e,o),524288&o[0]&&Ca(r,1)):(r=hg(e),r.c(),Ca(r,1),r.m(t,null)):r&&(Sa(),Ta(r,1,1,(()=>{r=null})),ka()),(!n||65536&o[0])&&_i(t,"style",e[16])},i(e){n||(Ca(r),n=!0)},o(e){Ta(r),n=!1},d(e){e&&Ei(t),r&&r.d()}}}function bg(e){let t,n,r;function o(t){e[163](t)}let i={hasHeader:e[20],$$slots:{footer:[$g],main:[pg],header:[sg]},$$scope:{ctx:e}};return void 0!==e[15]&&(i.root=e[15]),t=new Em({props:i}),aa.push((()=>Fa(t,"root",o))),t.$on("measure",e[164]),{c(){Oa(t.$$.fragment)},m(e,n){Da(t,e,n),r=!0},p(e,r){const o={};1048576&r[0]&&(o.hasHeader=e[20]),2146402302&r[0]|1&r[7]&&(o.$$scope={dirty:r,ctx:e}),!n&&32768&r[0]&&(n=!0,o.root=e[15],fa((()=>n=!1))),t.$set(o)},i(e){r||(Ca(t.$$.fragment,e),r=!0)},o(e){Ta(t.$$.fragment,e),r=!1},d(e){_a(t,e)}}}const vg=1,xg=0,wg=(e,t)=>e.target===t;function Sg(e,t,n){let r,o,i,a,l,s,c,u,d,p,h,f,m,g,y,$,b,v,x,w,S,k,C,T,M,P,E,R,I,A,L,z,F,O,D,_,B,N,j,W,V,U,H,G,X,Y,q,K,Q,J,ee,te,ne,re,oe,le,se,de,pe,he,fe,me,we,Se,ke,Te,Ee,Ae,ze,De,Be,Ne=Jo,je=()=>(Ne(),Ne=li(We,(e=>n(12,I=e))),We);e.$$.on_destroy.push((()=>Ne()));let{isActive:We}=t;je();let{stores:Ve}=t,{cropImageSelectionCornerStyle:Ue="circle"}=t,{cropWillRenderImageSelectionGuides:He=((e,t)=>{const n="rotate"==e;return{rows:n?5:3,cols:n?5:3,opacity:.25*t}})}=t,{cropAutoCenterImageSelectionTimeout:Ge}=t,{cropEnableZoomMatchImageAspectRatio:Xe=!0}=t,{cropEnableRotateMatchImageAspectRatio:Ke="never"}=t,{cropEnableRotationInput:Je=!0}=t,{cropEnableZoom:it=!0}=t,{cropEnableZoomInput:at=!0}=t,{cropEnableZoomAutoHide:lt=!0}=t,{cropEnableImageSelection:st=!0}=t,{cropEnableInfoIndicator:ct=!1}=t,{cropEnableZoomTowardsWheelPosition:dt=!0}=t,{cropEnableLimitWheelInputToCropSelection:ht=!0}=t,{cropEnableCenterImageSelection:ft=!0}=t,{cropEnableButtonRotateLeft:mt=!0}=t,{cropEnableButtonRotateRight:gt=!1}=t,{cropEnableButtonFlipHorizontal:wt=!0}=t,{cropEnableButtonFlipVertical:St=!1}=t,{cropSelectPresetOptions:Mt}=t,{cropEnableSelectPreset:Pt=!0}=t,{cropEnableFilterMatchAspectRatio:Et=!0}=t,{cropSelectPresetFilter:Ft=!1}=t,{cropEnableButtonToggleCropLimit:Dt=!1}=t,{cropWillRenderTools:_t=ae}=t,{cropActiveTransformTool:Bt="rotation"}=t,{cropMinimizeToolbar:Nt="auto"}=t,{cropInteractionFocus:jt="image"}=t,{cropRotationRange:Wt=ce}=t,{cropMaskOpacity:Vt=.85}=t,{locale:Ut={}}=t;const Ht=ra("isAnimated");ci(e,Ht,(e=>n(138,A=e)));const Gt=ra("elasticityMultiplier");ci(e,Gt,(e=>n(25,Te=e)));const Zt=ra("redrawTrigger");ci(e,Zt,(e=>n(158,ke=e)));const Xt=ra("imageIsStatic");ci(e,Xt,(e=>n(144,B=e)));const Yt=ra("imageStaticVisualCorners");ci(e,Yt,(e=>n(179,se=e)));let qt="idle";const Kt=Va();ci(e,Kt,(e=>n(155,me=e)));const Qt=()=>void 0===oe,Jt=e=>1/e,en=e=>{Et&&Ft!==e&&(n(94,Ft=e),oe&&1!==oe&&tn()&&yi(_n,oe=Jt(oe),oe))},tn=()=>{if(1===oe||!r)return!1;const e=Jt(oe);return!!od(me).find((t=>{let[n]=t;return n===e}))},nn=(e,t,n)=>ue(n)?t.width===Math.round(e.height)||t.height===Math.round(e.width):t.width===Math.round(e.width)||t.height===Math.round(e.height),rn=e=>{if("never"!==Ke&&(Qt()||"always"===Ke&&tn())&&((e,t,n)=>{const r=ot(nt(Ze(t),n),(e=>Math.abs(Math.round(e)))),o=tt(r),i=bt(e);return Le(o,i)})(N,q,K)&&nn(N,q,K)){yi(Cn,K+=e,K);const t=ue(K),n=t?q.height:q.width,r=t?q.width:q.height;yi(zn,N=$t(0,0,n,r),N),Qt()||yi(_n,oe=ie(n,r),oe)}else yi(Cn,K+=e,K)},{history:on,env:an,isInteracting:ln,isInteractingFraction:sn,isTransformingImage:cn,rootRect:un,stageRect:dn,utilRect:pn,utilRectPadded:hn,rootLineColor:fn,allowPan:mn,allowZoom:gn,allowPlayPause:yn,rangeInputElasticity:$n,presentationScalar:bn,utilTools:vn,imagePreviewModifiers:xn,imageOutlineOpacity:wn,imageFlipX:Sn,imageFlipY:kn,imageRotation:Cn,imageRotationRange:Tn,imageOutputSize:Mn,imageSelectionRect:Pn,imageSelectionRectSnapshot:En,imageSelectionRectIntent:Rn,imageSelectionRectPresentation:In,imageCropRectIntent:An,imageCropRectOrigin:Ln,imageCropRect:zn,imageCropMinSize:Fn,imageCropMaxSize:On,imageCropRange:Dn,imageCropAspectRatio:_n,imageCropLimitToImage:Bn,imageSize:Nn,imageScalar:jn,imageOverlayMarkup:Wn,stagePadded:Vn,stageRecenter:Un}=Ve;let Gn;ci(e,an,(e=>n(139,L=e))),ci(e,ln,(e=>n(143,_=e))),ci(e,cn,(e=>n(172,X=e))),ci(e,un,(e=>n(24,ee=e))),ci(e,dn,(e=>n(150,G=e))),ci(e,hn,(e=>n(147,V=e))),ci(e,bn,(e=>n(146,W=e))),ci(e,vn,(e=>n(181,pe=e))),ci(e,xn,(e=>n(171,O=e))),ci(e,Sn,(e=>n(157,Se=e))),ci(e,kn,(e=>n(156,we=e))),ci(e,Cn,(e=>n(14,K=e))),ci(e,Tn,(e=>n(26,Ee=e))),ci(e,Mn,(e=>n(182,he=e))),ci(e,Pn,(e=>n(149,H=e))),ci(e,En,(e=>n(148,U=e))),ci(e,Rn,(e=>n(180,de=e))),ci(e,In,(e=>n(142,D=e))),ci(e,An,(e=>n(174,te=e))),ci(e,Ln,(e=>n(176,re=e))),ci(e,zn,(e=>n(13,N=e))),ci(e,Fn,(e=>n(153,J=e))),ci(e,On,(e=>n(178,le=e))),ci(e,Dn,(e=>n(175,ne=e))),ci(e,_n,(e=>n(177,oe=e))),ci(e,Bn,(e=>n(152,Q=e))),ci(e,Nn,(e=>n(151,q=e))),ci(e,jn,(e=>n(145,j=e))),ci(e,Vn,(e=>n(141,F=e)));const Zn=(e,t)=>{const n={target:e,translate:t},r=et(Ze(J),W),o=et(Ze(le),W);let i=Vm(U,n,{...V,x:0,y:0},{aspectRatio:oe,minSize:r,maxSize:o});if(i=((e,t,n)=>{const[r,o,i,a]=zt(e),l={...e};if(r<t.y&&(e.height=e.height-(t.y-r),e.y=t.y),o>t.x+t.width&&(e.width=t.x+t.width-e.x),i>t.y+t.height&&(e.height=t.y+t.height-e.y),a<t.x&&(e.width=e.width-(t.x-a),e.x=t.x),n){const t=Math.min(1,l.width/e.width,l.height/e.height);return kt(l,t)}return e})(i,{...V,x:0,y:0},oe),!Q)return{boundsLimited:i,boundsIntent:i};let a=ag(U,i,n,se,{aspectRatio:oe,minSize:r,maxSize:o});return{boundsLimited:a,boundsIntent:a}},Xn=(e,t)=>{const n={target:e,translate:t},r=et(Ze(J),W),o=et(Ze(le),W),i=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{target:r,translate:o}=t,{aspectRatio:i,minSize:a}=n,l=ve[jm[r]],s=Fe(ut(e),Ce(l[0]*e.width,l[1]*e.height)),c=ve[r],u=Fe(ut(e),Ce(c[0]*e.width,c[1]*e.height)),[d,p,h,f,m,g,y]=Wm(r);let $=o.x,b=o.y;m?b=0:g&&($=0);let[v,x,w,S]=zt(e);if(d?S=s.x:p&&(x=s.x),f?v=s.y:h&&(w=s.y),d?x=u.x+$:p&&(S=u.x+$),f?w=u.y+b:h&&(v=u.y+b),a&&m&&w-v<a.height){const e=a.height-(w-v);v-=.5*e,w+=.5*e}if(a&&g&&x-S<a.width){const e=a.width-(x-S);S-=.5*e,x+=.5*e}if(i)if(y){let e=x-S,t=w-v;m?(t=e/i,v=s.y-.5*t,w=s.y+.5*t):g&&(e=t*i,S=s.x-.5*e,x=s.x+.5*e)}else{const e=Ce(u.x+$-s.x,u.y+b-s.y);r===ye?(e.x=Math.max(0,e.x),e.y=Math.min(0,e.y)):r===$e?(e.x=Math.max(0,e.x),e.y=Math.max(0,e.y)):r===be?(e.x=Math.min(0,e.x),e.y=Math.max(0,e.y)):r===ge&&(e.x=Math.min(0,e.x),e.y=Math.min(0,e.y));const t=Re(e),n=Ce(i,1),o=_e(Ie(n),t);r===ye?(x=s.x+o.x,v=s.y-o.y):r===$e?(x=s.x+o.x,w=s.y+o.y):r===be?(S=s.x-o.x,w=s.y+o.y):r===ge&&(S=s.x-o.x,v=s.y-o.y)}return $t(S,v,x-S,w-v)}(U,n,{aspectRatio:oe,minSize:r});return{boundsLimited:Vm(U,n,{...V,x:0,y:0},{aspectRatio:oe,minSize:r,maxSize:o}),boundsIntent:i}};let Yn,qn;const Kn=e=>{let{translation:t,scalar:n}=e;B&&(n=1,t=Pe(Me(t)));const r=Math.min(H.width/N.width,H.height/N.height),o=_e(Me(t),1/r);let i;if(qn){const e=Oe(Me(qn),t);qn=t,i=vt(ut(N),e)}else i=vt(ut(Yn),Pe(Me(o))),void 0!==n&&xt(i,1/n);yi(An,te=i,te),yi(zn,N=i,N)},Qn=Ua([Dn,zn],((e,t)=>{let[n,r]=e;if(!r)return;const[o,i]=n,a=Tt(r);t([Ye(Ot(At(o,a),xe)),Ye(Ot(Lt(i,a),xe))])}));ci(e,Qn,(e=>n(173,Y=e)));const Jn=Ua([Nn,Bn,Fn,On,Dn,Cn],((e,t)=>{let[n,r,o,i,a,l]=e;if(!n)return;const s=a[0],c=a[1];let u,d;r?(u=((e,t,n)=>ue(n)?1-1/Math.min(e.height/t.width,e.width/t.height):1-1/Math.min(e.width/t.width,e.height/t.height))(n,c,l),d=Math.min(s.width/o.width,s.height/o.height)):(u=-1,d=1),t([u,d].map((e=>xe(e))))}));ci(e,Jn,(e=>n(27,Ae=e)));const er=Ua([Nn,zn,Dn,Cn],((e,t)=>{let n,[r,o,i,a]=e;if(!r||!o)return t(0);const l=i[0],s=i[1],c=o.width,u=o.height,d=Tt(o),p=ue(a)?Qe(r.height,r.width):r,h=Lt(p,d);if(c<=h.width||u<=h.height){const e=h.width-l.width,t=h.height-l.height;n=0===e||0===t?1:1-Math.min((c-l.width)/e,(u-l.height)/t)}else{const e=s.width-h.width,t=s.height-h.height,r=Lt({width:e,height:t},d);n=-Math.min((c-h.width)/r.width,(u-h.height)/r.height)}t(n)}));ci(e,er,(e=>n(28,ze=e)));const tr=e=>{const t=Tt(Yn);let n,r,o;const i=ue(K)?Qe(q.height,q.width):q,a=Lt(i,t);if(e>=0){const i=a.width-ne[0].width,l=a.height-ne[0].height;n=a.width-i*e,r=a.height-l*e,o=At({width:n,height:r},t)}else{const i=ne[1].width-a.width,l=ne[1].height-a.height;n=a.width+i*-e,r=a.height+l*-e,o=Lt({width:n,height:r},t)}n=o.width,r=o.height;const l=Yn.x+.5*Yn.width-.5*n,s=Yn.y+.5*Yn.height-.5*r;yi(zn,N={x:l,y:s,width:n,height:r},N)};let nr;const rr=e=>{const t=xt(ut(nr),1/e);yi(An,te=t,te),yi(zn,N=t,N)};let or;const ir=()=>{Un.set({})};let ar;const lr=Ks(0,{precision:1e-4});ci(e,lr,(e=>n(29,De=e)));const sr=Ks();ci(e,sr,(e=>n(30,Be=e)));const cr=Ua([_n,Mn,Kt],((e,t)=>{let[n,o,i]=e;if(!r)return;const a=od(i),l=[...a].map((e=>e[0])).sort(((e,t)=>Hn(e[0])&&!Hn(t[0])?1:-1)).find((e=>{if(Hn(e)&&o){const[t,r]=e,i=o.width===t&&o.height===r,a=n===ie(t,r);return i&&a}return e===n}));if(!l)return t(void 0);t(a.map((e=>e[0])).findIndex((e=>Hn(e)?hl(e,l):e===l)))}));ci(e,cr,(e=>n(154,fe=e)));const ur=(e,t)=>{if(!r||-1===e||void 0===e)return;const n=od(t)[e][0];return n?Hn(n)?ie(n[0],n[1]):n:void 0},dr=Ua([fn,In,sn],((e,t)=>{let[n,r,o]=e;const{rows:i,cols:a,opacity:l}=He(qt,o);if(!r||l<=0)return t([]);const{x:s,y:c,width:u,height:d}=r,p=u/a,h=d/i,f=[];for(let m=1;m<=i-1;m++){const e=c+h*m;f.push({id:"image-selection-guide-row-"+m,points:[Ce(s,e),Ce(s+u,e)],opacity:l,strokeWidth:1,strokeColor:n})}for(let m=1;m<=a-1;m++){const e=s+p*m;f.push({id:"image-selection-guide-col-"+m,points:[Ce(e,c),Ce(e,c+d)],opacity:l,strokeWidth:1,strokeColor:n})}t(f)}));ci(e,dr,(e=>n(140,z=e)));const pr="crop-"+Z();let hr,fr,mr=pr+"-"+(Je?Bt:"zoom"),gr=mr;const yr=Ks(A?20:0);return ci(e,yr,(e=>n(137,R=e))),e.$$set=e=>{"isActive"in e&&je(n(0,We=e.isActive)),"stores"in e&&n(96,Ve=e.stores),"cropImageSelectionCornerStyle"in e&&n(1,Ue=e.cropImageSelectionCornerStyle),"cropWillRenderImageSelectionGuides"in e&&n(97,He=e.cropWillRenderImageSelectionGuides),"cropAutoCenterImageSelectionTimeout"in e&&n(98,Ge=e.cropAutoCenterImageSelectionTimeout),"cropEnableZoomMatchImageAspectRatio"in e&&n(99,Xe=e.cropEnableZoomMatchImageAspectRatio),"cropEnableRotateMatchImageAspectRatio"in e&&n(100,Ke=e.cropEnableRotateMatchImageAspectRatio),"cropEnableRotationInput"in e&&n(101,Je=e.cropEnableRotationInput),"cropEnableZoom"in e&&n(2,it=e.cropEnableZoom),"cropEnableZoomInput"in e&&n(102,at=e.cropEnableZoomInput),"cropEnableZoomAutoHide"in e&&n(103,lt=e.cropEnableZoomAutoHide),"cropEnableImageSelection"in e&&n(104,st=e.cropEnableImageSelection),"cropEnableInfoIndicator"in e&&n(105,ct=e.cropEnableInfoIndicator),"cropEnableZoomTowardsWheelPosition"in e&&n(106,dt=e.cropEnableZoomTowardsWheelPosition),"cropEnableLimitWheelInputToCropSelection"in e&&n(107,ht=e.cropEnableLimitWheelInputToCropSelection),"cropEnableCenterImageSelection"in e&&n(108,ft=e.cropEnableCenterImageSelection),"cropEnableButtonRotateLeft"in e&&n(109,mt=e.cropEnableButtonRotateLeft),"cropEnableButtonRotateRight"in e&&n(110,gt=e.cropEnableButtonRotateRight),"cropEnableButtonFlipHorizontal"in e&&n(111,wt=e.cropEnableButtonFlipHorizontal),"cropEnableButtonFlipVertical"in e&&n(112,St=e.cropEnableButtonFlipVertical),"cropSelectPresetOptions"in e&&n(113,Mt=e.cropSelectPresetOptions),"cropEnableSelectPreset"in e&&n(114,Pt=e.cropEnableSelectPreset),"cropEnableFilterMatchAspectRatio"in e&&n(115,Et=e.cropEnableFilterMatchAspectRatio),"cropSelectPresetFilter"in e&&n(94,Ft=e.cropSelectPresetFilter),"cropEnableButtonToggleCropLimit"in e&&n(116,Dt=e.cropEnableButtonToggleCropLimit),"cropWillRenderTools"in e&&n(117,_t=e.cropWillRenderTools),"cropActiveTransformTool"in e&&n(118,Bt=e.cropActiveTransformTool),"cropMinimizeToolbar"in e&&n(119,Nt=e.cropMinimizeToolbar),"cropInteractionFocus"in e&&n(120,jt=e.cropInteractionFocus),"cropRotationRange"in e&&n(3,Wt=e.cropRotationRange),"cropMaskOpacity"in e&&n(121,Vt=e.cropMaskOpacity),"locale"in e&&n(4,Ut=e.locale)},e.$$.update=()=>{4096&e.$$.dirty[0]|134217728&e.$$.dirty[3]&&Xt.set("selection"===jt&&I),1048576&e.$$.dirty[3]&&n(128,r=Mt&&Array.isArray(Mt)&&Mt.length),1048576&e.$$.dirty[3]|16&e.$$.dirty[4]&&Kt.set(r?Mt:[]),4096&e.$$.dirty[0]&&I&&wn.set(1),4096&e.$$.dirty[0]&&mn.set(!I),4096&e.$$.dirty[0]&&gn.set(!I),4096&e.$$.dirty[0]&&I&&yn.set(!0),32768&e.$$.dirty[4]&&n(123,h="overlay"===L.layoutMode),1075838976&e.$$.dirty[3]&&n(127,x=Pt&&!h),41943040&e.$$.dirty[4]&&n(136,s=V&&H&&Rt(V,H)),33558528&e.$$.dirty[4]&&n(134,c=!(!H||!s)),33559552&e.$$.dirty[4]&&n(132,u=c&&Ct(H,s,(e=>xe(e,5)))),16400&e.$$.dirty[0]|26148866&e.$$.dirty[3]|2013298968&e.$$.dirty[4]|15&e.$$.dirty[5]&&n(11,o=ke&&_t([mt&&["Button","rotate-left",{label:Ut.cropLabelButtonRotateLeft,labelClass:"PinturaToolbarContentWide",icon:Ut.cropIconButtonRotateLeft,onclick:()=>{rn(-Math.PI/2),on.write()}}],gt&&["Button","rotate-right",{label:Ut.cropLabelButtonRotateRight,labelClass:"PinturaToolbarContentWide",icon:Ut.cropIconButtonRotateRight,onclick:()=>{rn(Math.PI/2),on.write()}}],wt&&["Button","flip-horizontal",{label:Ut.cropLabelButtonFlipHorizontal,labelClass:"PinturaToolbarContentWide",icon:Ut.cropIconButtonFlipHorizontal,onclick:()=>{ue(K)?yi(kn,we=!we,we):yi(Sn,Se=!Se,Se),on.write()}}],St&&["Button","flip-vertical",{label:Ut.cropLabelButtonFlipVertical,labelClass:"PinturaToolbarContentWide",icon:Ut.cropIconButtonFlipVertical,onclick:()=>{ue(K)?yi(Sn,Se=!Se,Se):yi(kn,we=!we,we),on.write()}}],x&&r&&[!1===Ft?"Dropdown":ng,"select-preset",{icon:ad(Ut.cropIconSelectPreset,Ut,ur(fe,me)),label:ad(Ut.cropLabelSelectPreset,Ut,ur(fe,me)),labelClass:"PinturaToolbarContentWide",options:me,filter:Ft,onfilterchange:en,selectedIndex:fe,onchange:e=>{let{value:t}=e;Hn(t)?(yi(_n,oe=ie(t[0],t[1]),oe),yi(Mn,he=qe(t),he)):yi(_n,oe=t,oe),u&&ir(),on.write()},optionMapper:e=>{let t=!1;const n=Hn(e.value)?e.value[0]/e.value[1]:e.value;if(n){const e=al(q,K,n);t=e.width<J.width||e.height<J.height}return e.icon=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{width:n=24,height:r=24,bounds:o=16,radius:i=3}=t;let a,l,s,c,u=Hn(e)?ie(e[0],e[1]):e,d=!!u;return u=d?u:1,s=u>1?o:u*o,c=s/u,a=Math.round(.5*(n-s)),l=Math.round(.5*(r-c)),'<rect fill="'.concat(d?"currentColor":"none",'" stroke="').concat(d?"none":"currentColor",'" stroke-width="').concat(n/16,'" stroke-dasharray="').concat([n/12,n/6].join(" "),'" x="').concat(a,'" y="').concat(l,'" width="').concat(s,'" height="').concat(c,'" rx="').concat(i,'"/>')}(e.value,{bounds:14}),{...e,disabled:t}}}],Dt&&["Dropdown","select-crop-limit",{icon:ad(Ut.cropIconCropBoundary,Ut,Q),label:Ut.cropLabelCropBoundary,labelClass:"PinturaToolbarContentWide",onchange:e=>{let{value:t}=e;yi(Bn,Q=t,Q),on.write()},options:[[!0,Ut.cropLabelCropBoundaryEdge,{icon:ad(Ut.cropIconCropBoundary,Ut,!0)}],[!1,Ut.cropLabelCropBoundaryNone,{icon:ad(Ut.cropIconCropBoundary,Ut,!1)}]]}]].filter(Boolean),L,(()=>Zt.set({}))).filter(Boolean)),6144&e.$$.dirty[0]|1140850688&e.$$.dirty[3]|32768&e.$$.dirty[4]&&yi(vn,pe=I&&"never"!==Nt&&("always"===Nt||"short"===L.verticalSpace||h)?o.map((e=>{let[t,n,r]=e;return Array.isArray(r)?[t,n,r]:[t,n,{...r,hideLabel:!0}]})):[],pe),268435456&e.$$.dirty[4]&&n(23,i=Q?0:-1),75497472&e.$$.dirty[4]&&n(129,a=V&&Ce(-(G.x-V.x),-(G.y-V.y))),262176&e.$$.dirty[4]&&n(130,l=D&&Ce(Bu(D.x+.5*D.width+a.x),Bu(D.y+.5*D.height+a.y))),16777216&e.$$.dirty[4]&&n(133,d=null!=U),8392704&e.$$.dirty[4]&&n(135,p=V&&s&&(s.height===V.height||s.width===V.width)),6293504&e.$$.dirty[4]&&n(131,f=!p&&W<1&&j<1),1920&e.$$.dirty[4]&&n(9,m=c&&!d&&(!u||f)),8192&e.$$.dirty[0]|1073745920&e.$$.dirty[3]&&n(22,g=ct&&!!N&&!h),262176&e.$$.dirty[4]&&n(8,b=D&&a&&{x:D.x+a.x,y:D.y+a.y,width:D.width,height:D.height}),256&e.$$.dirty[0]|1073743872&e.$$.dirty[3]&&n(21,y=st&&!!b&&!h),32800&e.$$.dirty[3]|1048640&e.$$.dirty[4]&&n(10,$=ft&&!!l&&!Ge&&!B),512&e.$$.dirty[0]|536870944&e.$$.dirty[3]|524288&e.$$.dirty[4]&&m&&Ge&&!_&&(clearTimeout(ar),n(122,ar=setTimeout(ir,Ge))),536870912&e.$$.dirty[3]|524288&e.$$.dirty[4]&&_&&clearTimeout(ar),1536&e.$$.dirty[0]|16384&e.$$.dirty[4]&&lr.set($&&m?1:0,{hard:!1===A}),16448&e.$$.dirty[4]&&sr.set(l,{hard:!1===A}),4096&e.$$.dirty[0]|131072&e.$$.dirty[4]&&(I&&!F?(yi(xn,O.crop={maskOpacity:Vt,maskMarkupOpacity:Vt},O),xn.set(O)):(delete O.crop,xn.set(O))),65536&e.$$.dirty[4]&&z&&Wn.update((e=>{const t=e.filter((e=>!/^image\-selection\-guide/.test(e.id)));return I?[...t,...z]:t})),32768&e.$$.dirty[4]&&n(126,v="short"!==L.verticalSpace),1140850688&e.$$.dirty[3]|4&e.$$.dirty[4]&&n(20,w="never"===Nt&&!h||v&&"always"!==Nt),4&e.$$.dirty[0]|512&e.$$.dirty[3]&&n(125,S=it&&at),1024&e.$$.dirty[3]|6&e.$$.dirty[4]&&n(124,k=lt?v&&S:S),256&e.$$.dirty[3]|1&e.$$.dirty[4]&&n(19,C=Je||k),1&e.$$.dirty[4]&&(k||n(5,gr=mr)),32&e.$$.dirty[0]&&n(18,T={name:pr,selected:gr}),16&e.$$.dirty[0]|256&e.$$.dirty[3]|1&e.$$.dirty[4]&&n(7,M=[Je&&{id:pr+"-rotation",label:Ut.cropLabelTabRotation},k&&{id:pr+"-zoom",label:Ut.cropLabelTabZoom}].filter(Boolean)),128&e.$$.dirty[0]&&n(17,P=M.map((e=>e.id))),64&e.$$.dirty[0]|1073741824&e.$$.dirty[3]&&hr&&!hr.children.length&&h&&hr.dispatchEvent(new CustomEvent("measure",{detail:hr.rect})),4096&e.$$.dirty[0]|16384&e.$$.dirty[4]&&A&&yr.set(I?0:20),8192&e.$$.dirty[4]&&n(16,E=R?"transform: translateY(".concat(R,"px)"):void 0)},[We,Ue,it,Wt,Ut,gr,hr,M,b,m,$,o,I,N,K,fr,E,P,T,C,w,y,g,i,ee,Te,Ee,Ae,ze,De,Be,Ht,Gt,Zt,Xt,Yt,Kt,an,ln,cn,un,dn,hn,$n,bn,vn,xn,Sn,kn,Cn,Tn,Mn,Pn,En,Rn,In,An,Ln,zn,Fn,On,Dn,_n,Bn,Nn,jn,Vn,()=>{qt="select",yi(ln,_=!0,_),yi(En,U=ut(H),U),Gn=B?Zn:Xn},e=>{let{detail:t}=e;const{boundsLimited:n,boundsIntent:r}=Gn(t.direction,t.translation);yi(cn,X=!0,X),yi(Rn,de=r,de),yi(Pn,H=n,H)},e=>{let{detail:t}=e;const{boundsLimited:n}=Gn(t.direction,t.translation);yi(cn,X=!1,X),yi(ln,_=!1,_),yi(Rn,de=void 0,de),Re(t.translation)&&(yi(Pn,H=n,H),on.write()),yi(En,U=void 0,U),qt=void 0},()=>{qt="rotate",yi(ln,_=!0,_),yi(Ln,re=ut(N),re)},e=>{yi(cn,X=!0,X),yi(Cn,K=e,K)},e=>{yi(cn,X=!1,X),yi(ln,_=!1,_),yi(Cn,K=e,K),on.write(),yi(Ln,re=void 0,re)},()=>{qt="pan",qn=void 0,yi(ln,_=!0,_),Yn=ut(N)},e=>{let{detail:t}=e;yi(cn,X=!0,X),Kn(t)},e=>{let{detail:t}=e;yi(cn,X=!1,X),yi(ln,_=!1,_),(Re(t.translation)>0||0!==t.scalar)&&(Kn(t),on.write()),yi(An,te=void 0,te),Yn=void 0},e=>{let{detail:{translation:t}}=e;B&&(t=Pe(Me(t))),qn=t,yi(ln,_=!1,_)},Qn,Jn,er,()=>{qt="zoom",yi(ln,_=!0,_),Yn=ut(N)},e=>{yi(cn,X=!1,X),tr(e)},e=>{tr(e),on.write(),yi(cn,X=!1,X),yi(ln,_=!1,_),Yn=void 0},()=>{qt="zoom",Yn||(nr=ut(N),yi(ln,_=!0,_))},e=>{let{detail:t}=e;nr&&(yi(cn,X=!0,X),rr(t))},e=>{let{detail:t}=e;nr&&(yi(cn,X=!1,X),yi(ln,_=!1,_),rr(t),yi(An,te=void 0,te),nr=void 0,on.write())},e=>{const t=Lh(e,ee,G);if(ht&&!It(H,t))return;qt="zoom",yi(ln,_=!0,_),yi(cn,X=!0,X),e.preventDefault(),e.stopPropagation();const n=fu(e),r=1+n/100,o=ut(N),i=1===Math.min(N.width/J.width,N.height/J.height);if(Xe&&Q){const e=nn(N,q,K);if(Qt()&&e&&n>0&&u){yi(ln,_=!1,_),yi(cn,X=!1,X);const e=ue(K)?pt({height:q.width,width:q.height}):pt(q);if(Ct(o,e))return;if(clearTimeout(or),Ct(on.state.crop,e))return;return yi(zn,N=e,N),void on.write()}}let a=bt(N);if(dt&&"selection"!==jt&&n<0&&!i){const e=Oe(Me(t),H),n=Math.min(H.width/N.width,H.height/N.height),r=xt(ut(H),1.1);a=It(r,t)?Fe(ut(N),_e(e,1/n)):a}let l=xt(ut(N),r,a);if(rt(Y[1],l)||(l=yt(bt(l),Y[1])),rt(l,Y[0])||(l=yt(bt(l),Y[0])),Ct(o,l,xe))return yi(ln,_=!1,_),void yi(cn,X=!1,X);yi(zn,N=Ot(l,(e=>xe(e,5))),N),yi(ln,_=!1,_),yi(cn,X=!1,X),clearTimeout(or),or=setTimeout((()=>{on.write()}),500)},ir,lr,sr,cr,dr,pr,yr,Ft,"crop",Ve,He,Ge,Xe,Ke,Je,at,lt,st,ct,dt,ht,ft,mt,gt,wt,St,Mt,Pt,Et,Dt,_t,Bt,Nt,jt,Vt,ar,h,k,S,v,x,r,a,l,f,u,d,c,p,s,R,A,L,z,F,D,_,B,j,W,V,U,H,G,q,Q,J,fe,me,we,Se,ke,function(t){oa.call(this,e,t)},e=>{let{detail:t}=e;return n(5,gr=t)},function(e){aa[e?"unshift":"push"]((()=>{hr=e,n(6,hr)}))},e=>Ah(e),function(e){fr=e,n(15,fr)},function(t){oa.call(this,e,t)}]}var kg={util:["crop",class extends Na{constructor(e){super(),Ba(this,e,Sg,bg,ai,{name:95,isActive:0,stores:96,cropImageSelectionCornerStyle:1,cropWillRenderImageSelectionGuides:97,cropAutoCenterImageSelectionTimeout:98,cropEnableZoomMatchImageAspectRatio:99,cropEnableRotateMatchImageAspectRatio:100,cropEnableRotationInput:101,cropEnableZoom:2,cropEnableZoomInput:102,cropEnableZoomAutoHide:103,cropEnableImageSelection:104,cropEnableInfoIndicator:105,cropEnableZoomTowardsWheelPosition:106,cropEnableLimitWheelInputToCropSelection:107,cropEnableCenterImageSelection:108,cropEnableButtonRotateLeft:109,cropEnableButtonRotateRight:110,cropEnableButtonFlipHorizontal:111,cropEnableButtonFlipVertical:112,cropSelectPresetOptions:113,cropEnableSelectPreset:114,cropEnableFilterMatchAspectRatio:115,cropSelectPresetFilter:94,cropEnableButtonToggleCropLimit:116,cropWillRenderTools:117,cropActiveTransformTool:118,cropMinimizeToolbar:119,cropInteractionFocus:120,cropRotationRange:3,cropMaskOpacity:121,locale:4},null,[-1,-1,-1,-1,-1,-1,-1,-1])}get name(){return this.$$.ctx[95]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),$a()}get stores(){return this.$$.ctx[96]}set stores(e){this.$$set({stores:e}),$a()}get cropImageSelectionCornerStyle(){return this.$$.ctx[1]}set cropImageSelectionCornerStyle(e){this.$$set({cropImageSelectionCornerStyle:e}),$a()}get cropWillRenderImageSelectionGuides(){return this.$$.ctx[97]}set cropWillRenderImageSelectionGuides(e){this.$$set({cropWillRenderImageSelectionGuides:e}),$a()}get cropAutoCenterImageSelectionTimeout(){return this.$$.ctx[98]}set cropAutoCenterImageSelectionTimeout(e){this.$$set({cropAutoCenterImageSelectionTimeout:e}),$a()}get cropEnableZoomMatchImageAspectRatio(){return this.$$.ctx[99]}set cropEnableZoomMatchImageAspectRatio(e){this.$$set({cropEnableZoomMatchImageAspectRatio:e}),$a()}get cropEnableRotateMatchImageAspectRatio(){return this.$$.ctx[100]}set cropEnableRotateMatchImageAspectRatio(e){this.$$set({cropEnableRotateMatchImageAspectRatio:e}),$a()}get cropEnableRotationInput(){return this.$$.ctx[101]}set cropEnableRotationInput(e){this.$$set({cropEnableRotationInput:e}),$a()}get cropEnableZoom(){return this.$$.ctx[2]}set cropEnableZoom(e){this.$$set({cropEnableZoom:e}),$a()}get cropEnableZoomInput(){return this.$$.ctx[102]}set cropEnableZoomInput(e){this.$$set({cropEnableZoomInput:e}),$a()}get cropEnableZoomAutoHide(){return this.$$.ctx[103]}set cropEnableZoomAutoHide(e){this.$$set({cropEnableZoomAutoHide:e}),$a()}get cropEnableImageSelection(){return this.$$.ctx[104]}set cropEnableImageSelection(e){this.$$set({cropEnableImageSelection:e}),$a()}get cropEnableInfoIndicator(){return this.$$.ctx[105]}set cropEnableInfoIndicator(e){this.$$set({cropEnableInfoIndicator:e}),$a()}get cropEnableZoomTowardsWheelPosition(){return this.$$.ctx[106]}set cropEnableZoomTowardsWheelPosition(e){this.$$set({cropEnableZoomTowardsWheelPosition:e}),$a()}get cropEnableLimitWheelInputToCropSelection(){return this.$$.ctx[107]}set cropEnableLimitWheelInputToCropSelection(e){this.$$set({cropEnableLimitWheelInputToCropSelection:e}),$a()}get cropEnableCenterImageSelection(){return this.$$.ctx[108]}set cropEnableCenterImageSelection(e){this.$$set({cropEnableCenterImageSelection:e}),$a()}get cropEnableButtonRotateLeft(){return this.$$.ctx[109]}set cropEnableButtonRotateLeft(e){this.$$set({cropEnableButtonRotateLeft:e}),$a()}get cropEnableButtonRotateRight(){return this.$$.ctx[110]}set cropEnableButtonRotateRight(e){this.$$set({cropEnableButtonRotateRight:e}),$a()}get cropEnableButtonFlipHorizontal(){return this.$$.ctx[111]}set cropEnableButtonFlipHorizontal(e){this.$$set({cropEnableButtonFlipHorizontal:e}),$a()}get cropEnableButtonFlipVertical(){return this.$$.ctx[112]}set cropEnableButtonFlipVertical(e){this.$$set({cropEnableButtonFlipVertical:e}),$a()}get cropSelectPresetOptions(){return this.$$.ctx[113]}set cropSelectPresetOptions(e){this.$$set({cropSelectPresetOptions:e}),$a()}get cropEnableSelectPreset(){return this.$$.ctx[114]}set cropEnableSelectPreset(e){this.$$set({cropEnableSelectPreset:e}),$a()}get cropEnableFilterMatchAspectRatio(){return this.$$.ctx[115]}set cropEnableFilterMatchAspectRatio(e){this.$$set({cropEnableFilterMatchAspectRatio:e}),$a()}get cropSelectPresetFilter(){return this.$$.ctx[94]}set cropSelectPresetFilter(e){this.$$set({cropSelectPresetFilter:e}),$a()}get cropEnableButtonToggleCropLimit(){return this.$$.ctx[116]}set cropEnableButtonToggleCropLimit(e){this.$$set({cropEnableButtonToggleCropLimit:e}),$a()}get cropWillRenderTools(){return this.$$.ctx[117]}set cropWillRenderTools(e){this.$$set({cropWillRenderTools:e}),$a()}get cropActiveTransformTool(){return this.$$.ctx[118]}set cropActiveTransformTool(e){this.$$set({cropActiveTransformTool:e}),$a()}get cropMinimizeToolbar(){return this.$$.ctx[119]}set cropMinimizeToolbar(e){this.$$set({cropMinimizeToolbar:e}),$a()}get cropInteractionFocus(){return this.$$.ctx[120]}set cropInteractionFocus(e){this.$$set({cropInteractionFocus:e}),$a()}get cropRotationRange(){return this.$$.ctx[3]}set cropRotationRange(e){this.$$set({cropRotationRange:e}),$a()}get cropMaskOpacity(){return this.$$.ctx[121]}set cropMaskOpacity(e){this.$$set({cropMaskOpacity:e}),$a()}get locale(){return this.$$.ctx[4]}set locale(e){this.$$set({locale:e}),$a()}}]};function Cg(e){let t,n,r,o,i,a,l,s=e[77],c=(U(e[77].label)?e[77].label(e[2]):e[77].label)+"";function u(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e[51](e[77],...n)}const d=()=>e[52](n,s),p=()=>e[52](null,s);return{c(){t=Ri("div"),n=Ri("div"),r=Li(),o=Ri("span"),i=Ai(c),_i(n,"class",Eg),_i(t,"slot","option"),_i(t,"class","PinturaFilterOption")},m(e,s){Pi(e,t,s),Ci(t,n),d(),Ci(t,r),Ci(t,o),Ci(o,i),a||(l=[Fi(n,"measure",u),$i(hc.call(null,n))],a=!0)},p(t,n){s!==(e=t)[77]&&(p(),s=e[77],d()),4&n[0]|32768&n[2]&&c!==(c=(U(e[77].label)?e[77].label(e[2]):e[77].label)+"")&&ji(i,c)},d(e){e&&Ei(t),p(),a=!1,oi(l)}}}function Tg(e){let t,n;return t=new zd({props:{locale:e[2],layout:"row",options:e[3],selectedIndex:e[12],onchange:e[32],$$slots:{option:[Cg,e=>{let{option:t}=e;return{77:t}},e=>{let{option:t}=e;return[0,0,t?32768:0]}]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};4&n[0]&&(r.locale=e[2]),8&n[0]&&(r.options=e[3]),4096&n[0]&&(r.selectedIndex=e[12]),1028&n[0]|98304&n[2]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function Mg(e){let t,n,r,o,i,a,l,s;function c(t){e[54](t)}function u(t){e[55](t)}function d(t){e[56](t)}let p={elasticity:e[13]*e[19],onscroll:e[53],$$slots:{default:[Tg]},$$scope:{ctx:e}};return void 0!==e[4]&&(p.maskFeatherStartOpacity=e[4]),void 0!==e[5]&&(p.maskFeatherEndOpacity=e[5]),void 0!==e[6]&&(p.maskFeatherSize=e[6]),n=new yu({props:p}),aa.push((()=>Fa(n,"maskFeatherStartOpacity",c))),aa.push((()=>Fa(n,"maskFeatherEndOpacity",u))),aa.push((()=>Fa(n,"maskFeatherSize",d))),n.$on("measure",e[57]),{c(){t=Ri("div"),Oa(n.$$.fragment),_i(t,"slot","footer"),_i(t,"style",e[11])},m(r,o){Pi(r,t,o),Da(n,t,null),a=!0,l||(s=[Fi(t,"transitionend",e[30]),Fi(t,"measure",e[58]),$i(hc.call(null,t,{observePosition:!0}))],l=!0)},p(e,l){const s={};8192&l[0]&&(s.elasticity=e[13]*e[19]),128&l[0]&&(s.onscroll=e[53]),5132&l[0]|65536&l[2]&&(s.$$scope={dirty:l,ctx:e}),!r&&16&l[0]&&(r=!0,s.maskFeatherStartOpacity=e[4],fa((()=>r=!1))),!o&&32&l[0]&&(o=!0,s.maskFeatherEndOpacity=e[5],fa((()=>o=!1))),!i&&64&l[0]&&(i=!0,s.maskFeatherSize=e[6],fa((()=>i=!1))),n.$set(s),(!a||2048&l[0])&&_i(t,"style",e[11])},i(e){a||(Ca(n.$$.fragment,e),a=!0)},o(e){Ta(n.$$.fragment,e),a=!1},d(e){e&&Ei(t),_a(n),l=!1,oi(s)}}}function Pg(e){let t,n;return t=new Em({props:{$$slots:{footer:[Mg]},$$scope:{ctx:e}}}),t.$on("measure",e[59]),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};16380&n[0]|65536&n[2]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}let Eg="PinturaFilterPreview";function Rg(e,t,n){let r,o,i,a,l,s,c,u,d,p,h,f,m,g,y,$,b,v,x,w,S=Jo,k=()=>(S(),S=li(P,(e=>n(43,u=e))),P),C=Jo,T=()=>(C(),C=li(M,(e=>n(49,b=e))),M);e.$$.on_destroy.push((()=>S())),e.$$.on_destroy.push((()=>C()));let{isActive:M}=t;T();let{isActiveFraction:P}=t;k();let{stores:E}=t,{locale:R}=t,{filterFunctions:I}=t,{filterOptions:A}=t;const L=ra("elasticityMultiplier");ci(e,L,(e=>n(13,w=e)));const{history:z,interfaceImages:F,stageRectBase:O,utilRect:D,animation:_,scrollElasticity:B,imageSize:N,imagePreview:j,imageCropRect:W,imageRotation:V,imageFlipX:H,imageFlipY:G,imageBackgroundColor:Z,imageGamma:X,imageColorMatrix:Y,allowPan:q,allowZoom:K,allowZoomControls:Q,allowPlayPause:J}=E;ci(e,F,(e=>n(60,d=e))),ci(e,O,(e=>n(48,$=e))),ci(e,D,(e=>n(47,y=e))),ci(e,_,(e=>n(50,v=e))),ci(e,N,(e=>n(62,h=e))),ci(e,j,(e=>n(42,c=e))),ci(e,Z,(e=>n(61,p=e))),ci(e,X,(e=>n(44,f=e))),ci(e,Y,(e=>n(40,l=e)));const ee=Va({});ci(e,ee,(e=>n(46,g=e)));const te=(e,t)=>yi(ee,g[e.value]=t,g),ne=Ua(ee,(e=>{if(!e[void 0])return;const t=e[void 0];return x&&Je(x,t)?x:Ze(t)}));ci(e,ne,(e=>n(63,x=e)));const re=Ua([M,ne,W,N,V,H,G],((e,t)=>{let[n,r,o,i,a,l,s]=e;if(!n||!r||!i)return m;const c=pt(i),u=bt(c),d=ll(i,o,a),p=bt(d),h=Oe(Me(u),p),f=Pe(Me(h)),g=Math.max(r.width/o.width,r.height/o.height);t({origin:f,translation:h,rotation:{x:s?Math.PI:0,y:l?Math.PI:0,z:a},scale:g})}));ci(e,re,(e=>n(45,m=e)));const oe=Ks(v?20:0);let ie;ci(e,oe,(e=>n(39,a=e)));const ae={};let le,se,ce,ue,de,pe,he={x:0,y:0};const fe=Va([]);ci(e,fe,(e=>n(41,s=e)));const me=e=>{const t={...e,data:c,size:h,offset:{...e.offset},mask:{...e.mask},backgroundColor:p};return t.opacity=u,t.offset.y+=a,t.mask.y+=a,t.id="filter",t},ge=()=>d.filter((e=>"filter"!==e.id));return ea((()=>{F.set([])})),e.$$set=e=>{"isActive"in e&&T(n(0,M=e.isActive)),"isActiveFraction"in e&&k(n(1,P=e.isActiveFraction)),"stores"in e&&n(34,E=e.stores),"locale"in e&&n(2,R=e.locale),"filterFunctions"in e&&n(35,I=e.filterFunctions),"filterOptions"in e&&n(3,A=e.filterOptions)},e.$$.update=()=>{if(262144&e.$$.dirty[1]&&q.set(b),262144&e.$$.dirty[1]&&K.set(b),262144&e.$$.dirty[1]&&Q.set(b),262144&e.$$.dirty[1]&&b&&J.set(!1),8&e.$$.dirty[0]&&n(38,r=od(A)),640&e.$$.dirty[1]&&n(12,o=((e,t)=>{if(!e||!e.filter||!t)return 0;const n=e.filter;return t.findIndex((e=>{let[t]=e;if(!I[t])return!1;const r=I[t]();return hl(r,n)}))})(l,r)),786432&e.$$.dirty[1]&&v&&oe.set(b?0:20),512&e.$$.dirty[0]|458752&e.$$.dirty[1]&&b&&y&&$&&pe&&n(37,de={x:$.x-y.x,y:$.y-y.y+pe.y}),496&e.$$.dirty[0]|58096&e.$$.dirty[1]&&m&&de&&he&&ue&&ie){const e=de.x+ue.x+he.x,t=de.y,n=ue.x+de.x,o=n+ue.width;fe.set(r.map(((r,i)=>{let[a]=r;const s=g[a],c=he.x+s.x,u=c+s.width;if(u<0||c>ue.width)return!1;const d=e+s.x,p=t+s.y,h=(e=>({origin:Me(e.origin),translation:Me(e.translation),rotation:{...e.rotation},scale:e.scale}))(m);h.offset=Ce(.5*s.width+d,.5*s.height+p),h.maskOpacity=1,h.mask=$t(d+0,p,s.width+0,s.height),h.maskFeather=[1,0,1,0,1,o,1,o],c<ce&&le<1&&(h.maskFeather[0]=le,h.maskFeather[1]=n,h.maskFeather[2]=1,h.maskFeather[3]=n+ce),u>ue.width-ce&&se<1&&(h.maskFeather[4]=se,h.maskFeather[5]=o-ce,h.maskFeather[6]=1,h.maskFeather[7]=o),h.maskCornerRadius=ie[a];let y=l&&Object.keys(l).filter((e=>"filter"!=e)).map((e=>l[e]))||[];return U(I[a])&&y.push(I[a]()),h.colorMatrix=y.length?Ko(y):void 0,h.gamma=f,h})).filter(Boolean))}if(7424&e.$$.dirty[1])if(u>0&&s){const e=[...ge(),...s.map(me)];F.set(e)}else F.set(ge());256&e.$$.dirty[1]&&n(11,i=a?"transform: translateY(".concat(a,"px)"):void 0)},[M,P,R,A,le,se,ce,he,ue,pe,ae,i,o,w,L,F,O,D,_,B,N,j,Z,X,Y,ee,te,ne,re,oe,e=>{e.target.className===Eg&&n(36,ie=Object.keys(ae).reduce(((e,t)=>{const n=ae[t],r=getComputedStyle(n),o=["top-left","top-right","bottom-left","bottom-right"].map((e=>r.getPropertyValue("border-".concat(e,"-radius")))).map(hu).map((e=>1.25*e));return e[t]=o,e}),{}))},fe,e=>{let{value:t}=e;yi(Y,l={...l,filter:U(I[t])?I[t]():void 0},l),z.write()},"filter",E,I,ie,de,r,a,l,s,c,u,f,m,g,y,$,b,v,(e,t)=>te(e,t.detail),function(e,t){aa[e?"unshift":"push"]((()=>{ae[t.value]=e,n(10,ae)}))},e=>n(7,he=e),function(e){le=e,n(4,le)},function(e){se=e,n(5,se)},function(e){ce=e,n(6,ce)},e=>n(8,ue=e.detail),e=>n(9,pe=e.detail),function(t){oa.call(this,e,t)}]}var Ig={util:["filter",class extends Na{constructor(e){super(),Ba(this,e,Rg,Pg,ai,{name:33,isActive:0,isActiveFraction:1,stores:34,locale:2,filterFunctions:35,filterOptions:3},null,[-1,-1,-1])}get name(){return this.$$.ctx[33]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),$a()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),$a()}get stores(){return this.$$.ctx[34]}set stores(e){this.$$set({stores:e}),$a()}get locale(){return this.$$.ctx[2]}set locale(e){this.$$set({locale:e}),$a()}get filterFunctions(){return this.$$.ctx[35]}set filterFunctions(e){this.$$set({filterFunctions:e}),$a()}get filterOptions(){return this.$$.ctx[3]}set filterOptions(e){this.$$set({filterOptions:e}),$a()}}]};function Ag(e){let t,n,r=e[43].label+"";return{c(){t=Ri("span"),n=Ai(r)},m(e,r){Pi(e,t,r),Ci(t,n)},p(e,t){4096&t[1]&&r!==(r=e[43].label+"")&&ji(n,r)},d(e){e&&Ei(t)}}}function Lg(e){let t,n;const r=[{class:"PinturaControlList"},{tabs:e[1]},e[5]];let o={$$slots:{default:[Ag,e=>{let{tab:t}=e;return{43:t}},e=>{let{tab:t}=e;return[0,t?4096:0]}]},$$scope:{ctx:e}};for(let i=0;i<r.length;i+=1)o=ti(o,r[i]);return t=new Ac({props:o}),t.$on("select",e[24]),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const o=34&n[0]?La(r,[r[0],2&n[0]&&{tabs:e[1]},32&n[0]&&za(e[5])]):{};12288&n[1]&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function zg(e){let t,n;const r=[e[7][e[42]]];let o={};for(let i=0;i<r.length;i+=1)o=ti(o,r[i]);return t=new Lm({props:o}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const o=128&n[0]|2048&n[1]?La(r,[za(e[7][e[42]])]):{};t.$set(o)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function Fg(e){let t,n,r,o,i;n=new yu({props:{elasticity:e[6]*e[9],class:"PinturaControlListScroller",$$slots:{default:[Lg]},$$scope:{ctx:e}}});const a=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:e[4]},e[5]];let l={$$slots:{default:[zg,e=>{let{panel:t}=e;return{42:t}},e=>{let{panel:t}=e;return[0,t?2048:0]}]},$$scope:{ctx:e}};for(let s=0;s<a.length;s+=1)l=ti(l,a[s]);return o=new Uc({props:l}),{c(){t=Ri("div"),Oa(n.$$.fragment),r=Li(),Oa(o.$$.fragment),_i(t,"slot","footer"),_i(t,"style",e[3])},m(e,a){Pi(e,t,a),Da(n,t,null),Ci(t,r),Da(o,t,null),i=!0},p(e,r){const l={};64&r[0]&&(l.elasticity=e[6]*e[9]),38&r[0]|8192&r[1]&&(l.$$scope={dirty:r,ctx:e}),n.$set(l);const s=48&r[0]?La(a,[a[0],a[1],16&r[0]&&{panels:e[4]},32&r[0]&&za(e[5])]):{};128&r[0]|10240&r[1]&&(s.$$scope={dirty:r,ctx:e}),o.$set(s),(!i||8&r[0])&&_i(t,"style",e[3])},i(e){i||(Ca(n.$$.fragment,e),Ca(o.$$.fragment,e),i=!0)},o(e){Ta(n.$$.fragment,e),Ta(o.$$.fragment,e),i=!1},d(e){e&&Ei(t),_a(n),_a(o)}}}function Og(e){let t,n;return t=new Em({props:{$$slots:{footer:[Fg]},$$scope:{ctx:e}}}),t.$on("measure",e[25]),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};254&n[0]|8192&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function Dg(e,t,n){let r,o,i,a,l,s,c,u,d,p,h,f=Jo,m=()=>(f(),f=li(y,(e=>n(21,c=e))),y);e.$$.on_destroy.push((()=>f()));let{stores:g}=t,{isActive:y}=t;m();let{locale:$={}}=t,{finetuneControlConfiguration:b}=t,{finetuneOptions:v}=t,{finetuneNudgePrecision:x}=t;const{history:w,animation:S,scrollElasticity:k,rangeInputElasticity:C,imageColorMatrix:T,imageConvolutionMatrix:M,imageGamma:P,imageVignette:E,imageNoise:R,allowPan:I,allowZoom:A,allowZoomControls:L,allowPlayPause:z}=g;ci(e,S,(e=>n(22,u=e)));const F={imageColorMatrix:T,imageConvolutionMatrix:M,imageGamma:P,imageVignette:E,imageNoise:R},O=ra("elasticityMultiplier");ci(e,O,(e=>n(6,p=e)));const D="finetune-"+Z(),_=Va({});ci(e,_,(e=>n(23,d=e)));const B=Va({});ci(e,B,(e=>n(7,h=e)));let N=[];const j=Ks(u?20:0);return ci(e,j,(e=>n(20,s=e))),e.$$set=e=>{"stores"in e&&n(15,g=e.stores),"isActive"in e&&m(n(0,y=e.isActive)),"locale"in e&&n(16,$=e.locale),"finetuneControlConfiguration"in e&&n(17,b=e.finetuneControlConfiguration),"finetuneOptions"in e&&n(18,v=e.finetuneOptions),"finetuneNudgePrecision"in e&&n(19,x=e.finetuneNudgePrecision)},e.$$.update=()=>{var t;2097152&e.$$.dirty[0]&&I.set(c),2097152&e.$$.dirty[0]&&A.set(c),2097152&e.$$.dirty[0]&&L.set(c),2097152&e.$$.dirty[0]&&c&&z.set(!0),327680&e.$$.dirty[0]&&n(1,r=v?v.map((e=>{let[t,n]=e;return{id:t,label:U(n)?n($):n}})):[]),2&e.$$.dirty[0]&&n(2,o=r.length&&r[0].id),4&e.$$.dirty[0]&&n(5,i={name:D,selected:o}),2&e.$$.dirty[0]&&n(4,a=r.map((e=>e.id))),131072&e.$$.dirty[0]&&b&&(t=b,N&&N.forEach((e=>e())),N=a.map((e=>{const{getStore:n,getValue:r=ae}=t[e];return n(F).subscribe((t=>{const n=null!=t?r(t):t;yi(_,d={...d,[e]:n},d)}))}))),8519680&e.$$.dirty[0]&&b&&d&&yi(B,h=Object.keys(d).reduce(((e,t)=>{const{base:n,min:r,max:o,getLabel:i,getStore:a,setValue:l=((e,t)=>e.set(t))}=b[t],s=a(F),c=null!=d[t]?d[t]:n;return e[t]={base:n,min:r,max:o,value:c,valueLabel:i?i(c,r,o,o-r):Math.round(100*c),oninputmove:e=>{l(s,e)},oninputend:e=>{l(s,e),w.write()},elasticity:p*C,labelReset:$.labelReset,nudgeMultiplier:x},e}),{}),h),6291456&e.$$.dirty[0]&&u&&j.set(c?0:20),1048576&e.$$.dirty[0]&&n(3,l=s?"transform: translateY(".concat(s,"px)"):void 0)},[y,r,o,l,a,i,p,h,S,k,O,_,B,j,"finetune",g,$,b,v,x,s,c,u,d,e=>{let{detail:t}=e;return n(2,o=t)},function(t){oa.call(this,e,t)}]}var _g={util:["finetune",class extends Na{constructor(e){super(),Ba(this,e,Dg,Og,ai,{name:14,stores:15,isActive:0,locale:16,finetuneControlConfiguration:17,finetuneOptions:18,finetuneNudgePrecision:19},null,[-1,-1])}get name(){return this.$$.ctx[14]}get stores(){return this.$$.ctx[15]}set stores(e){this.$$set({stores:e}),$a()}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),$a()}get locale(){return this.$$.ctx[16]}set locale(e){this.$$set({locale:e}),$a()}get finetuneControlConfiguration(){return this.$$.ctx[17]}set finetuneControlConfiguration(e){this.$$set({finetuneControlConfiguration:e}),$a()}get finetuneOptions(){return this.$$.ctx[18]}set finetuneOptions(e){this.$$set({finetuneOptions:e}),$a()}get finetuneNudgePrecision(){return this.$$.ctx[19]}set finetuneNudgePrecision(e){this.$$set({finetuneNudgePrecision:e}),$a()}}]},Bg=(e,t)=>{const n=t.length;return e<0?e%n+n:e>=n?e%n:e};function Ng(e,t,n){const r=e.slice();return r[45]=t[n].key,r[46]=t[n].index,r[47]=t[n].translate,r[48]=t[n].scale,r[12]=t[n].rotate,r[49]=t[n].dir,r[50]=t[n].center,r[51]=t[n].type,r[2]=t[n].visible,r}function jg(e){let t,n;return{c(){t=Ri("div"),_i(t,"class","PinturaShapeManipulator"),_i(t,"data-control","point"),_i(t,"style",n="pointer-events:none;transform: translate3d(".concat(e[50].x,"px, ").concat(e[50].y,"px, 0) scale(").concat(e[5],", ").concat(e[5],"); opacity: ").concat(e[4]))},m(e,n){Pi(e,t,n)},p(e,r){56&r[0]&&n!==(n="pointer-events:none;transform: translate3d(".concat(e[50].x,"px, ").concat(e[50].y,"px, 0) scale(").concat(e[5],", ").concat(e[5],"); opacity: ").concat(e[4]))&&_i(t,"style",n)},d(e){e&&Ei(t)}}}function Wg(e,t){let n,r,o,i,a,l,s,c,u;function d(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t[17](t[46],...n)}let p="edge"===t[51]&&t[2]&&jg(t);return{key:e,first:null,c(){n=Ri("div"),l=Li(),p&&p.c(),s=zi(),_i(n,"role","button"),_i(n,"aria-label",r="Drag ".concat(t[51]," ").concat(t[45])),_i(n,"tabindex",o="edge"===t[51]?-1:0),_i(n,"class","PinturaShapeManipulator"),_i(n,"data-control",i=t[51]),_i(n,"style",a="cursor:".concat(t[49]?t[49]+"-resize":"move",";opacity:").concat(t[4],";--tx:").concat(t[47].x,";--ty:").concat(t[47].y,";--r:").concat("edge"===t[51]?t[12]:0,"rad;--sx:").concat("point"===t[51]?t[5]:t[48].x,";--sy:").concat("point"===t[51]?t[5]:t[48].y,";")),this.first=n},m(e,r){Pi(e,n,r),Pi(e,l,r),p&&p.m(e,r),Pi(e,s,r),c||(u=[Fi(n,"nudge",d),$i(uu.call(null,n,{preventDefault:!0})),Fi(n,"interactionstart",(function(){ii(t[9]("start",t[46]))&&t[9]("start",t[46]).apply(this,arguments)})),Fi(n,"interactionupdate",(function(){ii(t[9]("move",t[46]))&&t[9]("move",t[46]).apply(this,arguments)})),Fi(n,"interactionend",(function(){ii(t[9]("end",t[46]))&&t[9]("end",t[46]).apply(this,arguments)})),$i(cu.call(null,n,{observeKeys:!0}))],c=!0)},p(e,l){t=e,8&l[0]&&r!==(r="Drag ".concat(t[51]," ").concat(t[45]))&&_i(n,"aria-label",r),8&l[0]&&o!==(o="edge"===t[51]?-1:0)&&_i(n,"tabindex",o),8&l[0]&&i!==(i=t[51])&&_i(n,"data-control",i),56&l[0]&&a!==(a="cursor:".concat(t[49]?t[49]+"-resize":"move",";opacity:").concat(t[4],";--tx:").concat(t[47].x,";--ty:").concat(t[47].y,";--r:").concat("edge"===t[51]?t[12]:0,"rad;--sx:").concat("point"===t[51]?t[5]:t[48].x,";--sy:").concat("point"===t[51]?t[5]:t[48].y,";"))&&_i(n,"style",a),"edge"===t[51]&&t[2]?p?p.p(t,l):(p=jg(t),p.c(),p.m(s.parentNode,s)):p&&(p.d(1),p=null)},d(e){e&&Ei(n),e&&Ei(l),p&&p.d(e),e&&Ei(s),c=!1,oi(u)}}}function Vg(e){let t,n,r,o;return{c(){t=Ri("div"),_i(t,"role","button"),_i(t,"aria-label","Drag rotator"),_i(t,"tabindex","0"),_i(t,"class","PinturaShapeManipulator"),_i(t,"data-control","rotate"),_i(t,"style",n="transform: translate3d(".concat(e[0].x,"px, ").concat(e[0].y,"px, 0) scale(").concat(e[5],", ").concat(e[5],"); opacity: ").concat(e[4]))},m(n,i){Pi(n,t,i),r||(o=[Fi(t,"nudge",e[11]),$i(uu.call(null,t,{preventDefault:!0})),Fi(t,"interactionstart",e[12]("start")),Fi(t,"interactionupdate",e[12]("move")),Fi(t,"interactionend",e[12]("end")),$i(cu.call(null,t,{observeKeys:!0}))],r=!0)},p(e,r){49&r[0]&&n!==(n="transform: translate3d(".concat(e[0].x,"px, ").concat(e[0].y,"px, 0) scale(").concat(e[5],", ").concat(e[5],"); opacity: ").concat(e[4]))&&_i(t,"style",n)},d(e){e&&Ei(t),r=!1,oi(o)}}}function Ug(e){let t,n,r=[],o=new Map,i=e[3];const a=e=>e[45];for(let s=0;s<i.length;s+=1){let t=Ng(e,i,s),n=a(t);o.set(n,r[s]=Wg(n,t))}let l=e[1]&&Vg(e);return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=Li(),l&&l.c(),n=zi()},m(e,o){for(let t=0;t<r.length;t+=1)r[t].m(e,o);Pi(e,t,o),l&&l.m(e,o),Pi(e,n,o)},p(e,s){1592&s[0]&&(i=e[3],r=Aa(r,s,a,1,e,i,o,t.parentNode,Ra,Wg,t,Ng)),e[1]?l?l.p(e,s):(l=Vg(e),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:Jo,o:Jo,d(e){for(let t=0;t<r.length;t+=1)r[t].d(e);e&&Ei(t),l&&l.d(e),e&&Ei(n)}}}function Hg(e,t,n){let r,o,i,a;const l=ta(),s=.5*ce,c=se-s,u=se+s,d=-se,p=d-s,h=d+s,f=le-s,m=-le+s,g=s,y=-s,$=se-ce,b=$-s,v=$+s,x=le-ce,w=x-s,S=x+s,k=d-ce,C=k+s,T=k-s,M=d+ce,P=M+s,E=M-s;let{visible:R=!1}=t,{points:I=[]}=t,{rotatorPoint:A}=t,{enableDragEdges:L=!0}=t,{enableDragPoints:z=!0}=t,{enableRotatePoints:F=!0}=t;const O=ra("isAnimated");ci(e,O,(e=>n(16,o=e)));const D=Ks(.5,{precision:1e-4,stiffness:.3,damping:.7});ci(e,D,(e=>n(5,a=e)));const _=Ks(0,{precision:.001,stiffness:.3,damping:.7});ci(e,_,(e=>n(4,i=e)));const B=e=>{let t="";return(e<=u&&e>=c||e>=p&&e<=h)&&(t="ns"),(e<=m||e>=f||e>=y&&e<=g)&&(t="ew"),(e>=w&&e<=S||e<=P&&e>=E)&&(t="nesw"),(e>=b&&e<=v||e<=C&&e>=T)&&(t="nwse"),t},N=(e,t)=>{l("resizestart",{indexes:e,translation:ke()}),l("resizemove",{indexes:e,translation:t}),l("resizeend",{indexes:e,translation:ke()})};return e.$$set=e=>{"visible"in e&&n(2,R=e.visible),"points"in e&&n(13,I=e.points),"rotatorPoint"in e&&n(0,A=e.rotatorPoint),"enableDragEdges"in e&&n(14,L=e.enableDragEdges),"enableDragPoints"in e&&n(15,z=e.enableDragPoints),"enableRotatePoints"in e&&n(1,F=e.enableRotatePoints)},e.$$.update=()=>{65540&e.$$.dirty[0]&&D.set(R?1:.5,{hard:!1===o}),65540&e.$$.dirty[0]&&_.set(R?1:0,{hard:!1===o}),8192&e.$$.dirty[0]&&n(3,r=((e,t)=>{let n=0;const r=Ve(e),o=[],i=e.length;for(;n<i;n++){const t=Bg(n-1,e),i=Bg(n+1,e),a=e[t],l=e[n],s=e[i],c=Math.atan2(s.y-l.y,s.x-l.x);if(z){const e=Ie(Ce(a.x-l.x,a.y-l.y)),t=Ie(Ce(s.x-l.x,s.y-l.y)),r=Ce(e.x+t.x,e.y+t.y),i=L?z&&B(Math.atan2(r.y,r.x)):void 0;o.push({index:[n],key:"point-"+n,type:"point",scale:{x:1,y:1},translate:{x:l.x,y:l.y},angle:void 0,rotate:F,center:l,dir:i})}if(!L)continue;if(Array.isArray(L)&&!L.some((e=>{let[t,r]=e;return n===t&&i===r})))continue;const u=Ce(l.x+.5*(s.x-l.x),l.y+.5*(s.y-l.y));o.push({index:[n,i],key:"edge-"+n,type:"edge",scale:{x:We(l,s),y:1},translate:{x:l.x,y:l.y},angle:c,rotate:c,center:u,visible:Array.isArray(L),dir:B(Math.atan2(r.y-u.y,r.x-u.x))})}return o})(I))},[A,F,R,r,i,a,O,D,_,(e,t)=>n=>{let{detail:r}=n;const o=r&&r.translation?r.translation:Ce(0,0);l("resize"+e,{...r,indexes:t,translation:o})},N,e=>{let{detail:t}=e;l("rotatestart",{translation:ke()}),l("rotatemove",{translation:t}),l("rotateend",{translation:ke()})},e=>t=>{let{detail:n}=t;const r=n&&n.translation?n.translation:Ce(0,0);l("rotate"+e,{...n,translation:r})},I,L,z,o,(e,t)=>{let{detail:n}=t;return N(e,n)}]}class Gg extends Na{constructor(e){super(),Ba(this,e,Hg,Ug,ai,{visible:2,points:13,rotatorPoint:0,enableDragEdges:14,enableDragPoints:15,enableRotatePoints:1},null,[-1,-1])}}var Zg=(e,t)=>{const n=Ah(e);return Oe(n,t)},Xg=e=>document.createTextNode(e),Yg=e=>(sn()&&e.endsWith("<div><br></div>")?e.replace(/<div><br><\/div>$/,"<br><br>"):e).replace(/<div><br><\/div>/g,"<br>").replace(/<\/div>/g,"").replace(/<div>/g,"<br>");function qg(e){let t,n;return{c(){t=Ri("pre"),_i(t,"class","PinturaContentEditable"),_i(t,"style",n=e[7]+";position:absolute;z-index:-1;pointer-events:none;")},m(n,r){Pi(n,t,r),t.innerHTML=e[0]},p(e,r){1&r[0]&&(t.innerHTML=e[0]),128&r[0]&&n!==(n=e[7]+";position:absolute;z-index:-1;pointer-events:none;")&&_i(t,"style",n)},d(e){e&&Ei(t)}}}function Kg(e){let t,n,r,o,i,a,l=e[8]&&qg(e);return{c(){l&&l.c(),t=Li(),n=Ri("pre"),_i(n,"class","PinturaContentEditable"),_i(n,"data-wrap-content",r=e[4]||e[5]?"wrap":"nowrap"),_i(n,"contenteditable",""),_i(n,"spellcheck",e[1]),_i(n,"autocorrect",e[2]),_i(n,"autocapitalize",e[3]),_i(n,"style",o=e[8]?e[15](e[7]):e[7])},m(r,o){l&&l.m(r,o),Pi(r,t,o),Pi(r,n,o),e[26](n),i||(a=[Fi(n,"input",e[13]),Fi(n,"compositionend",e[12]),Fi(n,"paste",e[14]),Fi(n,"keydown",e[10]),Fi(n,"keyup",e[11]),Fi(n,"blur",e[9])],i=!0)},p(e,i){e[8]?l?l.p(e,i):(l=qg(e),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null),48&i[0]&&r!==(r=e[4]||e[5]?"wrap":"nowrap")&&_i(n,"data-wrap-content",r),2&i[0]&&_i(n,"spellcheck",e[1]),4&i[0]&&_i(n,"autocorrect",e[2]),8&i[0]&&_i(n,"autocapitalize",e[3]),384&i[0]&&o!==(o=e[8]?e[15](e[7]):e[7])&&_i(n,"style",o)},i:Jo,o:Jo,d(r){l&&l.d(r),r&&Ei(t),r&&Ei(n),e[26](null),i=!1,oi(a)}}}function Qg(e,t,n){let r,o,{spellcheck:i="false"}=t,{autocorrect:a="off"}=t,{autocapitalize:l="off"}=t,{wrapLines:s=!0}=t,{allowNewline:c=!0}=t,{textFormat:u="text"}=t,{formatInput:d=ae}=t,{formatPaste:p=ae}=t,{style:h}=t,{innerHTML:f}=t,{oninput:m=x}=t,{enableTextStyleShortcuts:g=!1}=t;const y=()=>{if(!b)return;const e=document.createRange();e.selectNodeContents(b);const t=M();t.removeAllRanges(),t.addRange(e)},$=ta();let b;document.execCommand("defaultParagraphSeparator",!1,"br");const v=e=>e.replace(/<\/?(?:i|b|em|u|s|strike|strong|font)>/,"").replace(/style=".*?"/g,"").replace(/\n/gim,"<br>"),w=()=>{n(0,f=b.innerHTML);const e=Yg(f);$("input",e),m(e),requestAnimationFrame((()=>b&&b.scrollTo(0,0)))},S=()=>{P(b);const e="html"===u?b.innerHTML:v(b.innerHTML);n(6,b.innerHTML=d(e),b),E(b),w()},k={b:"bold",i:"italic",u:"underline",s:"strikethrough"},C=e=>{const t=R("span");return t.dataset.bookmark=e,t},T=(e,t,n)=>{const r=C(n);if(e.nodeType===Node.TEXT_NODE){const o=e.textContent;if("start"===n){const n=Xg(o.substr(0,t)),i=Xg(o.substr(t));e.replaceWith(n,r,i)}else{const n=Xg(o.substr(0,t)),i=Xg(o.substr(t));e.replaceWith(n,r,i)}}else e.nodeType===Node.ELEMENT_NODE&&e.insertBefore(r,e.childNodes[t])},M=()=>{const e=b.getRootNode();return"getSelection"in e?e.getSelection():document.getSelection()},P=e=>{const t=M();if(!t.getRangeAt||!t.rangeCount)return;const n=t.getRangeAt(0),{startOffset:r,endOffset:o,startContainer:i,endContainer:a}=n;if(e.contains(n.startContainer)&&e.contains(n.endContainer))if(i.nodeType===Node.TEXT_NODE&&i===a){const e=i.textContent,t=e.substr(0,r),n=C("start"),a=o-r>0?e.substr(r,o):"",l=C("end"),s=e.substr(o);i.replaceWith(t,n,a,l,s)}else T(i,r,"start"),T(a,o+(i===a?1:0),"end")},E=e=>{const t=I(e,"start"),n=I(e,"end");if(!t||!n)return;const r=document.createRange();r.setStart(t,0),r.setEnd(n,0);const o=M();o.removeAllRanges(),o.addRange(r),t.remove(),n.remove()},I=(e,t)=>{const n=e.children;for(let r=0;r<n.length;r++){const e=n[r];if(e.dataset.bookmark===t)return e;if(e.children.length){const n=I(e,t);if(n)return n}}};let A;return e.$$set=e=>{"spellcheck"in e&&n(1,i=e.spellcheck),"autocorrect"in e&&n(2,a=e.autocorrect),"autocapitalize"in e&&n(3,l=e.autocapitalize),"wrapLines"in e&&n(4,s=e.wrapLines),"allowNewline"in e&&n(5,c=e.allowNewline),"textFormat"in e&&n(16,u=e.textFormat),"formatInput"in e&&n(17,d=e.formatInput),"formatPaste"in e&&n(18,p=e.formatPaste),"style"in e&&n(19,h=e.style),"innerHTML"in e&&n(0,f=e.innerHTML),"oninput"in e&&n(20,m=e.oninput),"enableTextStyleShortcuts"in e&&n(21,g=e.enableTextStyleShortcuts)},e.$$.update=()=>{var t;if(64&e.$$.dirty[0]&&n(25,r=!!b),33554433&e.$$.dirty[0]&&r&&f&&(t=f)!==b.innerHTML&&(n(6,b.innerHTML=t,b),b===document.activeElement&&y()),524336&e.$$.dirty[0])if(!s&&c){const e=h.includes(":right")?"text-indent:-100px!important":h.includes(":center")?"":"min-width:calc(100% + 100px)!important";n(7,A=h+";overflow:visible;"+e)}else n(7,A=h);524288&e.$$.dirty[0]&&n(8,o=h.includes("text-stroke"))},[f,i,a,l,s,c,b,A,o,()=>{$("blur")},e=>{if(/escape/i.test(e.code))return e.stopPropagation(),void $("cancel");const t=e.ctrlKey||e.metaKey;if("html"===u&&t&&/b|i|u|s/.test(e.key))return g&&(e=>{const t=k[e];t&&document.execCommand(t)})(e.key),void e.preventDefault();/enter/i.test(e.code)&&(e.stopPropagation(),e.isComposing||(t?$("confirm"):(c||e.preventDefault(),document.execCommand("insertLineBreak"),e.preventDefault())))},()=>{},e=>{""!==e.data&&S()},e=>{const{inputType:t}=e;"insertCompositionText"!==t&&"deleteCompositionText"!==t&&S()},e=>{e.preventDefault();const t=e.clipboardData.getData("text/plain"),n="html"===u?t:v(t),r=p(n);if(!r.length)return;const o=M().getRangeAt(0);o.deleteContents(),o.insertNode(document.createTextNode(r)),w()},e=>e.replace("-webkit-text-stroke","--text-stroke").replace("text-shadow","--text-shadow"),u,d,p,h,m,g,()=>S(),()=>b&&b.focus(),y,r,function(e){aa[e?"unshift":"push"]((()=>{b=e,n(6,b)}))}]}class Jg extends Na{constructor(e){super(),Ba(this,e,Qg,Kg,ai,{spellcheck:1,autocorrect:2,autocapitalize:3,wrapLines:4,allowNewline:5,textFormat:16,formatInput:17,formatPaste:18,style:19,innerHTML:0,oninput:20,enableTextStyleShortcuts:21,confirm:22,focus:23,select:24},null,[-1,-1])}get spellcheck(){return this.$$.ctx[1]}set spellcheck(e){this.$$set({spellcheck:e}),$a()}get autocorrect(){return this.$$.ctx[2]}set autocorrect(e){this.$$set({autocorrect:e}),$a()}get autocapitalize(){return this.$$.ctx[3]}set autocapitalize(e){this.$$set({autocapitalize:e}),$a()}get wrapLines(){return this.$$.ctx[4]}set wrapLines(e){this.$$set({wrapLines:e}),$a()}get allowNewline(){return this.$$.ctx[5]}set allowNewline(e){this.$$set({allowNewline:e}),$a()}get textFormat(){return this.$$.ctx[16]}set textFormat(e){this.$$set({textFormat:e}),$a()}get formatInput(){return this.$$.ctx[17]}set formatInput(e){this.$$set({formatInput:e}),$a()}get formatPaste(){return this.$$.ctx[18]}set formatPaste(e){this.$$set({formatPaste:e}),$a()}get style(){return this.$$.ctx[19]}set style(e){this.$$set({style:e}),$a()}get innerHTML(){return this.$$.ctx[0]}set innerHTML(e){this.$$set({innerHTML:e}),$a()}get oninput(){return this.$$.ctx[20]}set oninput(e){this.$$set({oninput:e}),$a()}get enableTextStyleShortcuts(){return this.$$.ctx[21]}set enableTextStyleShortcuts(e){this.$$set({enableTextStyleShortcuts:e}),$a()}get confirm(){return this.$$.ctx[22]}get focus(){return this.$$.ctx[23]}get select(){return this.$$.ctx[24]}}const ey=["i","b","u","strike"].map((e=>({tag:e,tagOpen:new RegExp("<".concat(e,">"),"g"),tagClose:new RegExp("</".concat(e,">"),"g"),placeholderOpen:new RegExp("___".concat(e,"O___"),"g"),placeholderClose:new RegExp("___".concat(e,"C___"),"g")})));var ty=(e,t)=>V(e)?parseFloat(e)/100*t:e,ny=(e,t)=>({x:Qn(e.x,t.width),y:Qn(e.y,t.height)});function ry(e,t,n){const r=e.slice();return r[276]=t[n],r[278]=n,r}function oy(e,t){let n,r,o,i,a,l,s,c,u,d,p,h=t[276].name+"";function f(){return t[180](t[278])}return o=new Ap({props:{color:t[276].color}}),{key:e,first:null,c(){n=Ri("li"),r=Ri("button"),Oa(o.$$.fragment),i=Li(),a=Ri("span"),l=Ai(h),c=Li(),_i(r,"class","PinturaShapeListItem"),_i(r,"type","button"),_i(r,"aria-label",s="Select shape "+t[276].name),this.first=n},m(e,t){Pi(e,n,t),Ci(n,r),Da(o,r,null),Ci(r,i),Ci(r,a),Ci(a,l),Ci(n,c),u=!0,d||(p=Fi(r,"click",f),d=!0)},p(e,n){t=e;const i={};1048576&n[0]&&(i.color=t[276].color),o.$set(i),(!u||1048576&n[0])&&h!==(h=t[276].name+"")&&ji(l,h),(!u||1048576&n[0]&&s!==(s="Select shape "+t[276].name))&&_i(r,"aria-label",s)},i(e){u||(Ca(o.$$.fragment,e),u=!0)},o(e){Ta(o.$$.fragment,e),u=!1},d(e){e&&Ei(n),_a(o),d=!1,p()}}}function iy(e){let t,n;return t=new Gg({props:{visible:!0,points:e[12],rotatorPoint:e[26],enableDragEdges:e[16],enableDragPoints:e[28],enableRotatePoints:e[14]}}),t.$on("resizestart",e[37]),t.$on("resizemove",e[38]),t.$on("resizeend",e[39]),t.$on("rotatestart",e[40]),t.$on("rotatemove",e[41]),t.$on("rotateend",e[42]),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};4096&n[0]&&(r.points=e[12]),67108864&n[0]&&(r.rotatorPoint=e[26]),65536&n[0]&&(r.enableDragEdges=e[16]),268435456&n[0]&&(r.enableDragPoints=e[28]),16384&n[0]&&(r.enableRotatePoints=e[14]),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function ay(e){let t,n,r,o;const i=[sy,ly],a=[];function l(e,t){return"modal"===e[4]?0:"inline"===e[4]?1:-1}return~(t=l(e))&&(n=a[t]=i[t](e)),{c(){n&&n.c(),r=zi()},m(e,n){~t&&a[t].m(e,n),Pi(e,r,n),o=!0},p(e,o){let s=t;t=l(e),t===s?~t&&a[t].p(e,o):(n&&(Sa(),Ta(a[s],1,1,(()=>{a[s]=null})),ka()),~t?(n=a[t],n?n.p(e,o):(n=a[t]=i[t](e),n.c()),Ca(n,1),n.m(r.parentNode,r)):n=null)},i(e){o||(Ca(n),o=!0)},o(e){Ta(n),o=!1},d(e){~t&&a[t].d(e),e&&Ei(r)}}}function ly(e){let t,n,r,o,i,a={formatInput:e[44],wrapLines:!!e[13].width,textFormat:e[13].format,enableTextStyleShortcuts:e[5],allowNewline:e[27],style:e[25]};return n=new Jg({props:a}),e[183](n),n.$on("input",e[45]),n.$on("keyup",e[48]),n.$on("cancel",e[50]),n.$on("confirm",e[49]),{c(){t=Ri("div"),Oa(n.$$.fragment),_i(t,"class","PinturaInlineInput"),_i(t,"style",e[24])},m(a,l){Pi(a,t,l),Da(n,t,null),r=!0,o||(i=Fi(t,"focusout",e[184]),o=!0)},p(e,o){const i={};8192&o[0]&&(i.wrapLines=!!e[13].width),8192&o[0]&&(i.textFormat=e[13].format),32&o[0]&&(i.enableTextStyleShortcuts=e[5]),134217728&o[0]&&(i.allowNewline=e[27]),33554432&o[0]&&(i.style=e[25]),n.$set(i),(!r||16777216&o[0])&&_i(t,"style",e[24])},i(e){r||(Ca(n.$$.fragment,e),r=!0)},o(e){Ta(n.$$.fragment,e),r=!1},d(r){r&&Ei(t),e[183](null),_a(n),o=!1,i()}}}function sy(e){let t,n;return t=new hh({props:{panelOffset:e[2],onconfirm:e[49],oncancel:e[50],buttonCancel:{icon:e[6].shapeIconInputCancel,label:e[6].shapeLabelInputCancel},buttonConfirm:{icon:e[6].shapeLabelInputConfirm,label:e[6].shapeIconInputConfirm,hideLabel:!0},$$slots:{default:[cy]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};4&n[0]&&(r.panelOffset=e[2]),64&n[0]&&(r.buttonCancel={icon:e[6].shapeIconInputCancel,label:e[6].shapeLabelInputCancel}),64&n[0]&&(r.buttonConfirm={icon:e[6].shapeLabelInputConfirm,label:e[6].shapeIconInputConfirm,hideLabel:!0}),41943296&n[0]|1&n[9]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function cy(e){let t,n,r;return{c(){t=Ri("textarea"),_i(t,"spellcheck","false"),_i(t,"autocorrect","off"),_i(t,"autocapitalize","off"),_i(t,"style",e[25])},m(o,i){Pi(o,t,i),e[181](t),Wi(t,e[23]),n||(r=[Fi(t,"keydown",e[47]),Fi(t,"keypress",e[46]),Fi(t,"keyup",e[48]),Fi(t,"input",e[45]),Fi(t,"input",e[182])],n=!0)},p(e,n){33554432&n[0]&&_i(t,"style",e[25]),8388608&n[0]&&Wi(t,e[23])},d(o){o&&Ei(t),e[181](null),n=!1,oi(r)}}}function uy(e){let t,n,r,o,i;return n=new ah({props:{items:e[21],key:e[10]}}),{c(){t=Ri("div"),Oa(n.$$.fragment),_i(t,"class","PinturaShapeControls"),_i(t,"style",e[22])},m(a,l){Pi(a,t,l),Da(n,t,null),r=!0,o||(i=[Fi(t,"measure",e[185]),$i(hc.call(null,t))],o=!0)},p(e,o){const i={};2097152&o[0]&&(i.items=e[21]),1024&o[0]&&(i.key=e[10]),n.$set(i),(!r||4194304&o[0])&&_i(t,"style",e[22])},i(e){r||(Ca(n.$$.fragment,e),r=!0)},o(e){Ta(n.$$.fragment,e),r=!1},d(e){e&&Ei(t),_a(n),o=!1,oi(i)}}}function dy(e){let t,n,r,o,i,a,l,s,c,u,d=[],p=new Map,h=e[20];const f=e=>e[276].id;for(let $=0;$<h.length;$+=1){let t=ry(e,h,$),n=f(t);p.set(n,d[$]=oy(n,t))}let m=e[15]&&iy(e),g=e[11]&&ay(e),y=e[17]>0&&uy(e);return{c(){t=Ri("div"),n=Ri("nav"),r=Ri("ul");for(let e=0;e<d.length;e+=1)d[e].c();o=Li(),m&&m.c(),i=Li(),g&&g.c(),a=Li(),y&&y.c(),_i(n,"class","PinturaShapeList"),_i(n,"data-visible",e[18]),_i(t,"class","PinturaShapeEditor"),_i(t,"tabindex","0")},m(p,h){Pi(p,t,h),Ci(t,n),Ci(n,r);for(let e=0;e<d.length;e+=1)d[e].m(r,null);Ci(t,o),m&&m.m(t,null),Ci(t,i),g&&g.m(t,null),Ci(t,a),y&&y.m(t,null),e[186](t),s=!0,c||(u=[Fi(n,"focusin",e[53]),Fi(n,"focusout",e[54]),Fi(t,"keydown",(function(){ii(e[0]?x:e[43])&&(e[0]?x:e[43]).apply(this,arguments)})),Fi(t,"nudge",(function(){ii(e[0]?x:e[52])&&(e[0]?x:e[52]).apply(this,arguments)})),Fi(t,"measure",e[179]),Fi(t,"pointermove",(function(){ii(e[0]?x:e[55])&&(e[0]?x:e[55]).apply(this,arguments)})),Fi(t,"pointerleave",(function(){ii(e[0]?x:e[56])&&(e[0]?x:e[56]).apply(this,arguments)})),Fi(t,"interactionstart",(function(){ii(e[0]?x:e[31])&&(e[0]?x:e[31]).apply(this,arguments)})),Fi(t,"interactionupdate",(function(){ii(e[0]?x:e[33])&&(e[0]?x:e[33]).apply(this,arguments)})),Fi(t,"interactioncancel",(function(){ii(e[0]?x:e[32])&&(e[0]?x:e[32]).apply(this,arguments)})),Fi(t,"interactionrelease",(function(){ii(e[0]?x:e[34])&&(e[0]?x:e[34]).apply(this,arguments)})),Fi(t,"interactionend",(function(){ii(e[0]?x:e[35])&&(e[0]?x:e[35]).apply(this,arguments)})),$i(hc.call(null,t)),$i(uu.call(null,t)),$i(l=cu.call(null,t,{drag:!0,inertia:!0,multiTouch:!1,observeKeys:!0,shouldStartInteraction:py,getEventPosition:e[187]}))],c=!0)},p(o,c){e=o,1048706&c[0]&&(h=e[20],Sa(),d=Aa(d,c,f,1,e,h,p,r,Ia,oy,null,ry),ka()),(!s||262144&c[0])&&_i(n,"data-visible",e[18]),e[15]?m?(m.p(e,c),32768&c[0]&&Ca(m,1)):(m=iy(e),m.c(),Ca(m,1),m.m(t,i)):m&&(Sa(),Ta(m,1,1,(()=>{m=null})),ka()),e[11]?g?(g.p(e,c),2048&c[0]&&Ca(g,1)):(g=ay(e),g.c(),Ca(g,1),g.m(t,a)):g&&(Sa(),Ta(g,1,1,(()=>{g=null})),ka()),e[17]>0?y?(y.p(e,c),131072&c[0]&&Ca(y,1)):(y=uy(e),y.c(),Ca(y,1),y.m(t,null)):y&&(Sa(),Ta(y,1,1,(()=>{y=null})),ka()),l&&ii(l.update)&&8&c[0]&&l.update.call(null,{drag:!0,inertia:!0,multiTouch:!1,observeKeys:!0,shouldStartInteraction:py,getEventPosition:e[187]})},i(e){if(!s){for(let e=0;e<h.length;e+=1)Ca(d[e]);Ca(m),Ca(g),Ca(y),s=!0}},o(e){for(let t=0;t<d.length;t+=1)Ta(d[t]);Ta(m),Ta(g),Ta(y),s=!1},d(n){n&&Ei(t);for(let e=0;e<d.length;e+=1)d[e].d();m&&m.d(),g&&g.d(),y&&y.d(),e[186](null),c=!1,oi(u)}}}const py=(e,t)=>e.target===t;function hy(e,t,n){let r,o,i,a,l,s,c,u,d,p,h,f,m,g,y,$,b,v,w,S,k,C,T,M,P,E,R,I,A,L,z,F,O,D,_,B,N,j,W,U,H,G,X,Y,q,K,Q,J,ee,te,ne,re,oe,ie,le=Jo,se=()=>(le(),le=li(pe,(e=>n(175,te=e))),pe);e.$$.on_destroy.push((()=>le()));let{uid:ce=Z()}=t,{ui:ue}=t,{disabled:de=!1}=t,{shapes:pe}=t;se();let{selection:he}=t,{offset:fe}=t,{contextRotation:me=0}=t,{contextFlipX:ge=!1}=t,{contextFlipY:ye=!1}=t,{contextZoom:$e=1}=t,{active:be=!1}=t,{opacity:ve=1}=t,{parentRect:we}=t,{rootRect:Te}=t,{utilRect:Pe}=t,{hoverColor:Re}=t,{caretColor:De}=t,{gridColor:Be}=t,{snapColor:Ne}=t,{textInputMode:Ge="inline"}=t,{oninteractionstart:Ze=x}=t,{oninteractionupdate:Ye=x}=t,{oninteractionrelease:qe=x}=t,{oninteractionend:Ke=x}=t,{oninteractioncancel:Je=x}=t,{onaddshape:et=x}=t,{onupdateshape:tt=x}=t,{onselectshape:nt=x}=t,{onblurshape:rt=x}=t,{onremoveshape:at=x}=t,{ontapshape:st=x}=t,{onhovershape:ct=x}=t,{onhovercanvas:ut=x}=t,{ontapcanvas:dt=x}=t,{onleavecanvas:pt=x}=t,{beforeSelectShape:ht=(()=>!0)}=t,{beforeDeselectShape:yt=(()=>!0)}=t,{beforeRemoveShape:vt=(()=>!0)}=t,{beforeUpdateShape:xt=((e,t)=>t)}=t,{willRenderShapeControls:wt=ae}=t,{willRenderShapeTextControls:St=ae}=t,{willStartInteraction:kt=((e,t)=>!0)}=t,{mapEditorPointToImagePoint:Ct}=t,{mapImagePointToEditorPoint:Tt}=t,{eraseRadius:Mt}=t,{selectRadius:Pt}=t,{enableButtonFlipVertical:Rt=!1}=t,{enableTapToAddText:It=!0}=t,{enableTextStyleControls:At=!0}=t,{locale:Ot}=t,{snapThreshold:Dt=0}=t,{snapPointer:_t=!0}=t,{enableSnapToContext:Bt=!0}=t,{gridSize:Nt=0}=t;const jt=e=>{if(0===Dt)return[];let t;return Bt&&(t={...we,x:0,y:0}),[...te.filter((t=>t!==e)).filter((e=>!Vr(e))).map((e=>xo({...e},we))),t].filter(Boolean)},Ut=(e,t,n,r)=>0===e?{snapTargets:[]}:{snapThreshold:e,gridSize:t,gridRect:n,snapTargets:jt(r)},Ht=ra("isAnimated");ci(e,Ht,(e=>n(176,re=e)));const Kt=e=>e.set(si(e)),Qt=e=>si(e).find(Vr),Jt=(e,t)=>{if(!Qt(t))return Xr(e),rn(e,t)},en=e=>{Qt(e)&&e.update((e=>e.filter((e=>!Vr(e)))))},tn=e=>{const t=Qt(e);if(t)return Yr(t),Kt(e),t},nn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>({...e,...t});Qt(t)&&t.update((t=>t.map((t=>Vr(t)?n(t,e):t))))},rn=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:pe).update((t=>[...t,e])),e},on=(e,t,n)=>{const r=xt({...e},t,{...n});return Co(e,r,n),e},an=(e,t)=>{const n=We(e,t),r=Ae(e,t),o=Math.PI/8,i=o*Math.round(r/o)-me%o;t.x=e.x+n*Math.cos(i),t.y=e.y+n*Math.sin(i)},ln=ra("keysPressed");ci(e,ln,(e=>n(177,oe=e)));const sn=(e,t,n)=>0===e||t&&n?e:t||n?-e:e,cn=e=>{if(null===e.x&&null===e.y)return un();e.x&&n(138,dn=Ct({x:e.x,y:0}).x),e.y&&n(139,pn=Ct({x:0,y:e.y}).y)},un=()=>{n(138,dn=null),n(139,pn=null)};let dn=null,pn=null;const hn=(e,t)=>{const n=Tt(e);return Ct(Fe(n,t))},fn=(e,t,n)=>{const r=(n-t)/e+1;return Array.from({length:r},((n,r)=>t+r*e))},mn=e=>{let t=[],n=[],r=e.points;if(void 0!==e.x1&&(r=[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2}]),r){const e=r.map(Tt),o=mt(e),i=e[0],a=e[e.length-1];t=[o.x,o.x+.5*o.width,o.x+o.width,i.x,a.x],n=[o.y,o.y+.5*o.height,o.y+o.height,i.y,a.y]}else if(e.text||void 0!==e.width||void 0!==e.rx){let r;if(e.text&&void 0===e.height){const t=mr(e.text,e);r=$t(e.x,e.y,t.width,t.height)}else r=void 0!==e.width?ft(e):ft({x:e.x-e.rx,y:e.y-e.ry,width:2*e.rx,height:2*e.ry});const o=Ft(r).map(Tt),i=Math.abs(e.rotation)>0?Et(r,e.rotation).map(Tt):o,a=mt(i),l=bt(a),s=.5*a.width,c=.5*a.height;t=[l.x-s,l.x,l.x+s],n=[l.y-c,l.y,l.y+c]}else if(void 0!==e.x){const r=Tt(e);t=[r.x],n=[r.y]}return{x:t,y:n}},gn=(e,t,n)=>{let r,o,i,a=Number.Infinity,l=null,s=null;for(let c=0;c<e.length;c++){o=e[c];for(let e=0;e<t.length;e++)i=t[e],r=Math.abs(o-i),r<n&&(null===s||r<a)&&(a=r,l=o,s=i)}return{origin:l,target:s}},yn=(e,t,n,r,o)=>{const i={x:null,y:null},a={x:null,y:null},l=t.map(mn);if(r>0){const e=Tt({x:0,y:0}),t=Tt({x:r,y:r}),n=Tt({x:o.width,y:o.height}),i=t.x-e.x,a=fn(i,e.x,n.x),s=fn(i,e.y,n.y);l.push({x:a,y:s})}return l.forEach((t=>{const{snapTranslation:r,snapLine:o}=((e,t,n)=>{const r={x:null,y:null},o={x:null,y:null},i=gn(e.x,t.x,n);null!==i.target&&(r.x=i.target,o.x=i.target-i.origin);const a=gn(e.y,t.y,n);return null!==a.target&&(r.y=a.target,o.y=a.target-a.origin),{snapTranslation:o,snapLine:r}})(e,t,n);null!==r.x&&(null===a.x||Math.abs(r.x)<Math.abs(a.x))&&(a.x=r.x||0,i.x=o.x),null!==r.y&&(null===a.y||Math.abs(r.y)<Math.abs(a.y))&&(a.y=r.y||0,i.y=o.y)})),{snapTranslation:a,snapLines:i}},$n=(e,t)=>(null!==t.x&&(e.x+=t.x),null!==t.y&&(e.y+=t.y),e),bn=(e,t,n,r)=>{const{snapThreshold:o=0,gridSize:i=0,gridRect:a,snapTargets:l=[]}=r||{};let s=null;if(Dr(e)){if(o){const r=xo({...e},we),s=hn(Rr(t),n),c=hn(Ir(t),n),u=mn({...r,x1:s.x,y1:s.y,x2:c.x,y2:c.y}),{snapTranslation:d,snapLines:p}=yn(u,l,o,i,a);$n(n,d),cn(p)}const r=hn(Rr(t),n),c=hn(Ir(t),n);s={x1:r.x,y1:r.y,x2:c.x,y2:c.y}}else if(e.points){if(o){const r=xo({...e},we),s=mn({...r,points:t.points.map((e=>hn(e,n)))}),{snapTranslation:c,snapLines:u}=yn(s,l,o,i,a);$n(n,c),cn(u)}s={points:t.points.map((e=>hn(e,n)))}}else if(Fr(e)||Ar(e)||Or(e)){if(o){const r=xo({...e},we),s=hn(t,n),c=mn({...r,...s}),{snapTranslation:u,snapLines:d}=yn(c,l,o,i,a);$n(n,u),cn(d)}s=hn(t,n)}s&&(on(e,s,we),Mn())},vn={0:1,1:0,2:3,3:2},xn={0:3,1:2,2:1,3:0};let wn;const Sn=()=>{if(te.length)return te.find(Vr)},kn=()=>{if(te.length)return te.findIndex(Vr)},Cn=()=>{const e=Sn();if(e)return Yr(e),Mn(),e},Tn=()=>{if(!Sn())return;const e=[...te];e.splice(kn(),1),pe.set(e)},Mn=()=>{pe.set(te)},Pn=function(e){let t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).filter(Boolean).forEach((t=>delete e[t])),t&&Mn()},En=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e=Object.assign(e,t),n&&Mn()},Rn=function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e[t]=n,r&&Mn()},In=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];te.forEach((t=>En(t,e,!1))),t&&Mn()},An=()=>[...te].reverse().find(jr),Ln=()=>!!An(),zn=e=>{if(!vt(e))return!1;pe.set(te.filter((t=>t!==e))),at(e)},Fn=()=>{const e=An();if(!e)return;const t=te.filter((e=>Qr(e)&&Kr(e))),n=t.findIndex((t=>t===e));if(!1===zn(e))return;if(On=e,t.length-1<=0)return Dn();const r=n-1<0?t.length-1:n-1;Bn(t[r])};let On;const Dn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{storePrevious:t=!0}=e;Object.keys(co).forEach((e=>co[e]={}));const n=_n();t&&(On=n),In({isSelected:!1,isEditing:!1,_prerender:!1}),n&&rt(n)},_n=()=>te.find(jr),Bn=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Vr(e))return;const n=_n()||On,r=jr(e);On=void 0,ht(n,e)&&(Dn(),(e=>{e.isSelected=!0})(e),!r&&nt(e),t&&Mn())},Nn=e=>{Gr&&Gr.confirm&&e.isEditing&&Gr.confirm(),En(e,{isSelected:!1,isEditing:!1,_prerender:!1}),rt(e)},jn=e=>{En(e,{isSelected:!0,isEditing:!0,_prerender:"inline"===Ge})},Vn=e=>{En(e,{isSelected:!0,isEditing:!1,_prerender:!1})},Hn=e=>{if(!e.length)return[];const t=e.filter(vt);return pe.set(te.filter((e=>!t.includes(e)))),t},Gn=e=>{const t=mr(e.text,e);return $t(e.x,e.y,e.width?Math.min(e.width,t.width):t.width,e.height?Math.min(e.height,t.height):t.height)},Zn=e=>{if(Ur(e))return ft(e);if(Or(e))return gt(e);const t=Gn(e);return t.width=Math.max(10,e.width||t.width),t},Xn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>!0;return[...e].reverse().filter(r).map((e=>({shape:e,priority:1}))).filter((e=>{const{shape:r}=e,o=xo(Cr(r),we),i=n+.5*(o.strokeWidth||0);if(Fr(o))return qt(t,i,o,r.rotation);if(Ar(o)){const n=Zn(o),a=qt(t,i,n,r.rotation);let l=!1;if(a&&!jr(r)){const a=Gn(o);"right"!==r.textAlign||r.flipX||(a.x=n.x+n.width-a.width),"center"===r.textAlign&&(a.x=n.x+.5*n.width-.5*a.width),l=qt(t,i,a,r.rotation,bt(n)),l||(e.priority=-1)}return a}return Or(o)?((e,t,n,r,o,i)=>{const a=Gt(Ce(n.x,n.y),n.rx,n.ry,r,o,i,12);return Yt(e,t,a)})(t,i,o,r.rotation,r.flipX,r.flipY):Dr(o)?Zt(t,Math.max(16,i),Rr(o),Ir(o)):_r(o)&&o.pathClose?Yt(t,i,o.points):!!_r(o)&&(1===o.points.length?je(t,o.points[0])<i*i:Xt(t,Math.max(16,i),o.points))})).sort(((e,t)=>e.priority<t.priority?1:e.priority>t.priority?-1:0)).map((e=>e.shape))},Yn=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o=Math.abs(r),i=it(t,n),a=lt(i,o),l=((e,t)=>{let{start:n,end:r}=e;if(0===t)return[Ce(n.x,n.y),Ce(n.x,n.y),Ce(r.x,r.y),Ce(r.x,r.y)];const o=Math.atan2(r.y-n.y,r.x-n.x),i=Math.sin(o)*t,a=Math.cos(o)*t;return[Ce(i+n.x,-a+n.y),Ce(-i+n.x,a+n.y),Ce(-i+r.x,a+r.y),Ce(i+r.x,-a+r.y)]})(a,o);return e.filter((e=>{const t=xo(Cr(e),we);if(Dr(t)||_r(t)){const e=t.points?[...t.points]:[Rr(t),Ir(t)];return!!Wt(a,e)}return((e,t)=>!!e.find((e=>Vt(e,t)))||!!t.find((t=>Vt(t,e))))(l,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;if(Fr(e))return Et(e,e.rotation,bt(e));if(Ar(e)){const t=Zn(e);return Et(t,e.rotation,bt(t))}return Or(e)?Gt(Ce(e.x,e.y),e.rx,e.ry,e.rotation,e.flipX,e.flipY,t):[]}(t))}))};let qn,Kn,er,tr,nr,rr,or=!1,ir=!1,lr=!1;const sr=()=>{clearTimeout(Kn),Kn=void 0,n(141,lr=!1),un()};let cr=null;const ur=e=>{const t=Wn(e.rotation)&&0!==e.rotation;if(Fr(e)){if(e.width<1&&e.height<1)return;const n=bt(e),r=Ft(e);return(e.flipX||e.flipY)&&Ue(r,e.flipX,e.flipY,n.x,n.y),t?He(r,e.rotation,n.x,n.y):r}if(Or(e)){if(e.rx<1&&e.ry<1)return;const n=e,r=Ft(gt(e));return(e.flipX||e.flipY)&&Ue(r,e.flipX,e.flipY,n.x,n.y),t?He(r,e.rotation,n.x,n.y):r}if(Dr(e))return[Rr(e),Ir(e)];if(_r(e)){if(e.bitmap&&!e.pathClose){const t=mt(e.points);return t.x-=.5*e.strokeWidth,t.y-=.5*e.strokeWidth,t.width+=e.strokeWidth,t.height+=e.strokeWidth,ur({...e,...t})}return[...e.points]}if(Ar(e)){if(e.width<5&&e.height<5)return;const n=Zn(e);n.width=Math.max(10,n.width);const r=bt(n),o=Ft(n);return(e.flipX||e.flipY)&&Ue(o,e.flipX,e.flipY,r.x,r.y),t?He(o,e.rotation,r.x,r.y):o}return[]},dr=e=>{const t=ur(e);let n,r;return e.flipY?(n=Ve([t[0],t[1]]),r=Ie(Ce(t[1].x-t[2].x,t[1].y-t[2].y))):(n=Ve([t[2],t[3]]),r=Ie(Ce(t[2].x-t[1].x,t[2].y-t[1].y))),_e(r,20/$e),{origin:n,dir:r}},pr=e=>t=>t.id===e,hr=e=>{const t=pr(e);return e=>e.filter((e=>t=>!e(t))(t))},fr=e=>{const t=pr(e),n=hr(e);return()=>ue.update((e=>e.some(t)?n(e):e))},gr=e=>{const t=hr(e);return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];ue.update((e=>[...t(e),...n.filter(Boolean)]))}},yr=fr("markup-hover"),$r=gr("markup-hover");let br;const vr="markup-manipulator-segment-"+ce,xr=(e,t)=>{const n=e[t],r=t-1<0?e[e.length-1]:e[t-1],o=t+1<e.length?e[t+1]:e[0],i=Oe(Me(r),n);Ie(i);const a=Fe(_e(i,10),n),l=Oe(Me(o),n);return Ie(l),[a,n,Fe(_e(l,10),n)]},wr=fr(vr),Sr=gr(vr),kr=(e,t)=>{if(Dt<=0)return e;if(t)return un(),e;const n=Ct(e),o=jt(),{snapTranslation:i,snapLines:a}=yn(mn(n),o,Dt,Nt,r);return cn(a),$n(e,i),e},Tr=Ks(0);ci(e,Tr,(e=>n(178,ie=e)));const Mr="markup-grid-line-"+ce,Pr=fr(Mr),Er=gr(Mr),Nr="markup-snap-line",Wr=fr(Nr),Hr=gr(Nr);let Gr;const Zr=e=>{n(8,Gr.innerHTML=(e=>function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:ey).forEach((t=>{let{tag:n,placeholderOpen:r,placeholderClose:o}=t;e=e.replace(r,"<".concat(n,">")).replace(o,"</".concat(n,">"))})),e}(e=(e=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:ey).forEach((t=>{let{tag:n,tagOpen:r,tagClose:o}=t;e=e.replace(r,"___".concat(n,"O___")).replace(o,"___".concat(n,"C___"))})),e}(e)).replace(/ {2,}/g," ").replace(/\u00a0/g,"&nbsp;").split("\n").join("<br>")))(e),Gr)},oo=()=>{const e=(e=>{const t=void 0===e.value?e.innerHTML:e.value,n="text"===o.format?Yg(t).split(/<br>|<br\/>/g).join("\n").replace(/&nbsp;/g,String.fromCharCode(160)).replace(/&amp;/g,"&"):t;return Lr(o)&&!1!==o.disableNewline?(e=>{const t=e.split(/[\n\r]/g);return t.length>1?t.map((e=>e.trim())).filter((e=>e.length)).join(" "):t[0]})(n):n})(Gr),t=eo(o,e),n=!0===t?e:t;let r=E.x,i=E.y;if(!o.height){const e=Et({...I},o.rotation),t=mr(n,s),a=Et({x:r,y:i,...t},o.rotation),[l,,c]=e,[u,,d]=a;let p=l,h=u;o.flipX&&(p=c,h=d);const f=Oe(Me(p),h);r+=f.x,i+=f.y}En(o,{x:V(P.x)?Qn(r,we.width):r,y:V(P.y)?Qn(i,we.height):i,text:n})},io=()=>{let e=a;a&&Cn(),Gr&&Gr.confirm&&Gr.confirm(),oo(),Vn(o),e?et(o):tt(o)},ao=()=>{a?Tn():(En(o,{text:P.text,x:P.x,y:P.y}),Vn(o))},lo=function(e,t,n){let r,o,{flipX:i,flipY:a,rotation:l}=n,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"top left";const[c,u,d,p]=Et(e,l),[h,f,m,g]=Et(t,l);return"top center"===s?(r=Ve(a?[p,d]:[c,u]),o=Ve(a?[g,m]:[h,f])):"top right"===s&&!i||"top left"===s&&i?(r=a?d:u,o=a?m:f):(r=a?p:c,o=a?g:h),Oe(Me(r),o)},so=(e,t,n)=>Ce(V(e.x)?Qn(t.x+n.x,we.width):t.x+n.x,V(e.y)?Qn(t.y+n.y,we.height):t.y+n.y),co={},uo=()=>jn(o),po=()=>{const e=ot(mr(o.text,s),(e=>Math.ceil(e))),t=Un(o,"height"),n=!t&&Un(o,"width"),r=o.id;let i=co[r];i||(co[r]={},i=co[r]);const a=e=>{const{width:t,...n}=s,r=mr(o.text,n),i=lo($t(s.x,s.y,e.width,e.height),$t(s.x,s.y,r.width,r.height),s,"top "+o.textAlign),a=!1!==s.disableNewline;Pn(o,["width","height",a&&"textAlign"]),En(o,{...so(o,s,i)})},l=t=>{const n=Qe(i.width||s.width||e.width,e.height),r=i.textAlign||"left",a=lo($t(s.x,s.y,t.width,t.height),$t(s.x,s.y,n.width,n.height),s,"top "+r);Pn(o,["height"]),En(o,{...so(o,s,a),width:V(o.width)?Qn(n.width,we.width):n.width,textAlign:r})},c=t=>{const n=Qe(i.width||e.width,i.height||e.height),r=i.textAlign||"left",a=lo($t(s.x,s.y,t.width,t.height),$t(s.x,s.y,n.width,n.height),s,"top "+r);En(o,{...so(o,s,a),width:V(o.width)?Qn(n.width,we.width):n.width,height:V(o.width)?Qn(n.height,we.height):n.height,textAlign:r})};if(t){i.textAlign=o.textAlign,i.width=s.width,i.height=s.height;const e=Qe(s.width,s.height);to(o,"auto-height")?l(e):to(o,"auto-width")&&a(e)}else if(n){i.textAlign=o.textAlign,i.width=s.width;const t=Qe(s.width,e.height);to(o,"auto-width")?a(t):to(o,"fixed-size")&&c(t)}else{i.textAlign=o.textAlign;const t=Qe(Math.ceil(e.width),Math.ceil(e.height));to(o,"fixed-size")?c(t):to(o,"auto-height")&&l(t)}},fo=e=>{e.stopPropagation();const t=o.flipX||!1;Rn(o,"flipX",!t),tt(o)},mo=e=>{e.stopPropagation();const t=o.flipY||!1;Rn(o,"flipY",!t),tt(o)},go=e=>{Rn(o,"opacity",e)},yo=e=>{go(e),tt(o)},$o=e=>{e.stopPropagation(),e.target.blur(),Fn()},bo=e=>{e.stopPropagation(),te.findIndex((e=>e===o))!==te.length-1&&(pe.set(te.filter((e=>e!==o)).concat([o])),tt(o))},vo=e=>{e.stopPropagation(),wo()},wo=()=>{const e=Cr(o);e.id=Z();const t=Ce(50,-50);if(Un(e,"points")){const n=ko(e,["points"],we);n.points.forEach((e=>{e.x+=t.x,e.y+=t.y})),Co(e,n,we)}else if(Dr(e)){const n=ko(e,["x1","y1","x2","y2"],we);n.x1+=t.x,n.y1+=t.y,n.x2+=t.x,n.y2+=t.y,Co(e,n,we)}else{const t=ko(e,["x","y"],we);t.x+=50,t.y-=50,Co(e,t,we)}pe.set([...te,e]),et(e),Bn(e)},So=Ks(0,{stiffness:.2,damping:.7});let To;ci(e,So,(e=>n(17,ne=e)));const Mo=(e,t)=>{const{disableTextLayout:n=[]}=t;return"height"in t?n.includes("auto-height")?e.shapeIconButtonTextLayoutAutoWidth:e.shapeIconButtonTextLayoutAutoHeight:"width"in t?n.includes("auto-width")?e.shapeIconButtonTextLayoutFixedSize:e.shapeIconButtonTextLayoutAutoWidth:n.includes("fixed-size")?e.shapeIconButtonTextLayoutAutoHeight:e.shapeIconButtonTextLayoutFixedSize},Po=(e,t)=>{const{disableTextLayout:n=[]}=t;return"height"in t?n.includes("auto-height")?e.shapeTitleButtonTextLayoutAutoWidth:e.shapeTitleButtonTextLayoutAutoHeight:"width"in t?n.includes("auto-width")?e.shapeTitleButtonTextLayoutFixedSize:e.shapeTitleButtonTextLayoutAutoWidth:n.includes("fixed-size")?e.shapeTitleButtonTextLayoutAutoHeight:e.shapeTitleButtonTextLayoutFixedSize};let Eo,Ro=!1,Io=ke();const Ao=e=>{ct(e),n(142,br=e)};let Lo;return ea((()=>{Wr(),Pr(),wr(),yr()})),e.$$set=e=>{"uid"in e&&n(57,ce=e.uid),"ui"in e&&n(58,ue=e.ui),"disabled"in e&&n(0,de=e.disabled),"shapes"in e&&se(n(1,pe=e.shapes)),"selection"in e&&n(59,he=e.selection),"offset"in e&&n(2,fe=e.offset),"contextRotation"in e&&n(60,me=e.contextRotation),"contextFlipX"in e&&n(61,ge=e.contextFlipX),"contextFlipY"in e&&n(62,ye=e.contextFlipY),"contextZoom"in e&&n(63,$e=e.contextZoom),"active"in e&&n(64,be=e.active),"opacity"in e&&n(65,ve=e.opacity),"parentRect"in e&&n(66,we=e.parentRect),"rootRect"in e&&n(3,Te=e.rootRect),"utilRect"in e&&n(67,Pe=e.utilRect),"hoverColor"in e&&n(68,Re=e.hoverColor),"caretColor"in e&&n(69,De=e.caretColor),"gridColor"in e&&n(70,Be=e.gridColor),"snapColor"in e&&n(71,Ne=e.snapColor),"textInputMode"in e&&n(4,Ge=e.textInputMode),"oninteractionstart"in e&&n(72,Ze=e.oninteractionstart),"oninteractionupdate"in e&&n(73,Ye=e.oninteractionupdate),"oninteractionrelease"in e&&n(74,qe=e.oninteractionrelease),"oninteractionend"in e&&n(75,Ke=e.oninteractionend),"oninteractioncancel"in e&&n(76,Je=e.oninteractioncancel),"onaddshape"in e&&n(77,et=e.onaddshape),"onupdateshape"in e&&n(78,tt=e.onupdateshape),"onselectshape"in e&&n(79,nt=e.onselectshape),"onblurshape"in e&&n(80,rt=e.onblurshape),"onremoveshape"in e&&n(81,at=e.onremoveshape),"ontapshape"in e&&n(82,st=e.ontapshape),"onhovershape"in e&&n(83,ct=e.onhovershape),"onhovercanvas"in e&&n(84,ut=e.onhovercanvas),"ontapcanvas"in e&&n(85,dt=e.ontapcanvas),"onleavecanvas"in e&&n(86,pt=e.onleavecanvas),"beforeSelectShape"in e&&n(87,ht=e.beforeSelectShape),"beforeDeselectShape"in e&&n(88,yt=e.beforeDeselectShape),"beforeRemoveShape"in e&&n(89,vt=e.beforeRemoveShape),"beforeUpdateShape"in e&&n(90,xt=e.beforeUpdateShape),"willRenderShapeControls"in e&&n(91,wt=e.willRenderShapeControls),"willRenderShapeTextControls"in e&&n(92,St=e.willRenderShapeTextControls),"willStartInteraction"in e&&n(93,kt=e.willStartInteraction),"mapEditorPointToImagePoint"in e&&n(94,Ct=e.mapEditorPointToImagePoint),"mapImagePointToEditorPoint"in e&&n(95,Tt=e.mapImagePointToEditorPoint),"eraseRadius"in e&&n(96,Mt=e.eraseRadius),"selectRadius"in e&&n(97,Pt=e.selectRadius),"enableButtonFlipVertical"in e&&n(98,Rt=e.enableButtonFlipVertical),"enableTapToAddText"in e&&n(99,It=e.enableTapToAddText),"enableTextStyleControls"in e&&n(5,At=e.enableTextStyleControls),"locale"in e&&n(6,Ot=e.locale),"snapThreshold"in e&&n(100,Dt=e.snapThreshold),"snapPointer"in e&&n(101,_t=e.snapPointer),"enableSnapToContext"in e&&n(102,Bt=e.enableSnapToContext),"gridSize"in e&&n(103,Nt=e.gridSize)},e.$$.update=()=>{var t,x;16&e.$$.dirty[2]|1024&e.$$.dirty[3]&&n(166,r=Nt>0?{x:0,y:0,...we}:void 0),1&e.$$.dirty[0]|1048576&e.$$.dirty[5]&&n(146,o=!de&&te&&(Sn()||An())),4194304&e.$$.dirty[4]&&n(173,i=!!o),4194304&e.$$.dirty[4]&&n(160,a=o&&Vr(o)),4194304&e.$$.dirty[4]|32&e.$$.dirty[5]&&n(10,l=o&&!a?o.id:void 0),8&e.$$.dirty[0]|16&e.$$.dirty[2]|4194304&e.$$.dirty[4]&&n(13,s=Te&&o&&xo(Cr(o),we)),4194304&e.$$.dirty[4]|32&e.$$.dirty[5]&&n(144,c=!(!o||!a)),8192&e.$$.dirty[0]|8&e.$$.dirty[2]|4194304&e.$$.dirty[4]&&n(172,u=o&&ve&&ur(s)||[]),4194304&e.$$.dirty[4]&&n(174,d=o&&no(t=o)&&ro(t)&&!0!==t.disableResize&&(Ur(t)||zr(t)||Or(t)||Dr(t)||_r(t)&&Un(t,"pathClose"))&&!Br(o)),4194304&e.$$.dirty[4]&&n(14,p=o&&(e=>no(e)&&!0!==e.disableRotate&&(Ur(e)||Un(e,"text")||Or(e)))(o)&&!Br(o)),4194304&e.$$.dirty[4]|524288&e.$$.dirty[5]&&n(16,h=d&&Un(o,"text")&&!o.height?[[1,2],[3,0]]:(!o||!Dr(o)&&!_r(o))&&d),65536&e.$$.dirty[0]|4194304&e.$$.dirty[4]|524288&e.$$.dirty[5]&&n(28,f=!!o&&!Array.isArray(h)&&d),4194304&e.$$.dirty[4]|131072&e.$$.dirty[5]&&n(15,m=o&&u.length>1),4&e.$$.dirty[3]|131072&e.$$.dirty[5]&&n(170,g=u.map(Tt)),4&e.$$.dirty[0]|32768&e.$$.dirty[5]&&n(12,y=g.map((e=>Ce(e.x-fe.x,e.y-fe.y)))),4194304&e.$$.dirty[4]|262144&e.$$.dirty[5]&&n(27,$=i&&(zr(o)?!Un(o,"disableNewline")||!o.disableNewline:!1===o.disableNewline)),4&e.$$.dirty[3]|262144&e.$$.dirty[4]&&(br&&Tt&&!jr(br)&&Kr(br)?(e=>{const t=ur(xo(Cr(e),we));if(!t)return;const n=t.map(Tt),r=!!e.pathClose||!(!e.bitmap&&(_r(e)||Dr(e))),o="hook"===e.selectionStyle,i=o?n.map(((e,t,n)=>({id:"markup-hover",points:xr(n,t),strokeColor:[0,0,0,.1],strokeWidth:2}))):[{id:"markup-hover",points:n.map((e=>Ce(e.x+1,e.y+1))),strokeColor:[0,0,0,.1],strokeWidth:2,pathClose:r}],a=o?n.map(((e,t,n)=>({id:"markup-hover",points:xr(n,t),strokeColor:Re,strokeWidth:2}))):[{id:"markup-hover",points:n,strokeColor:Re,strokeWidth:2,pathClose:r}];$r(...i,...a)})(br):yr()),61440&e.$$.dirty[0]|8&e.$$.dirty[2]&&n(171,b=m&&p&&ve&&y&&(e=>{const t=dr(e),n=Tt({x:t.origin.x+t.dir.x,y:t.origin.y+t.dir.y});return{origin:Tt(t.origin),position:n}})(s)),4&e.$$.dirty[0]|65536&e.$$.dirty[5]&&n(26,v=b&&Ce(b.position.x-fe.x,b.position.y-fe.y)),4194304&e.$$.dirty[5]&&n(165,C=!!(oe||[]).find((e=>[91,93,17].includes(e)))),256&e.$$.dirty[3]|1024&e.$$.dirty[5]&&n(167,w=!(C||!_t)),8&e.$$.dirty[2]|4718592&e.$$.dirty[4]|36896&e.$$.dirty[5]&&o&&g&&ve>0&&((e,t,n)=>{if(!Kr(t))return;const r=_r(t),o=r&&Un(t,"pathClose"),i=o&&(e=>e.strokeWidth&&((e,t)=>{const n=e.strokeColor;return!!n&&(3===n.length||n[3]>0)})(e))(t),a=Vr(t),l=Br(t),s="hook"===t.selectionStyle,{selectionOpacity:c=1}=t;if(a&&r&&!o)return;const d=[],p=[...g],h=p[p.length-1],f=p[0],m=(l?.05:.1)*e*c,y=m>0,$=(l?.5:1)*e*c,v=$>0,x=[0,0,0],w=[1,1,1],S=l?1:1.5;oe.includes(16)&&h&&n&&an(h,n);const k=(p.length&&o&&a&&n?je(f,n):1/0)<=256,C=(p.length&&o&&a&&n?je(h,n):1/0)<=256;!k&&n&&p.push(n);const T=p.length>1,M=!!t.pathClose||!(!t.bitmap&&(_r(t)||Dr(t)))||p.length>2&&k;T&&y&&(s?d.push(...p.map(((e,t,n)=>({id:vr,points:xr(n,t),strokeColor:x,strokeWidth:2,opacity:m})))):d.push({id:vr,points:p.map((e=>Ce(e.x+1,e.y+1))),pathClose:M,strokeColor:x,strokeWidth:2,opacity:m})),o&&y&&d.push(...p.map((e=>({id:vr,...e,rx:2*S,ry:2*S,backgroundColor:x,opacity:m})))),b&&y&&d.push({id:vr,points:[Ce(b.origin.x+1,b.origin.y+1),Ce(b.position.x+1,b.position.y+1)],strokeColor:x,strokeWidth:2,opacity:m}),T&&v&&(s?d.push(...p.map(((e,t,n)=>({id:vr,points:xr(n,t),strokeColor:w,strokeWidth:S,opacity:$})))):d.push({id:vr,points:p,pathClose:M,strokeColor:w,strokeWidth:S,backgroundColor:a&&o&&t.backgroundColor&&t.backgroundColor[3]>0?t.backgroundColor:[0,0,0,0],opacity:$})),o&&d.push(...p.map((e=>({id:vr,...e,rx:3*S,ry:3*S,backgroundColor:[.5,.5,.5],strokeWidth:S,strokeColor:w})))),o&&a&&g.length>=3&&d.push({...f,id:vr,rx:S*(k?5:4),ry:S*(k?5:4),backgroundColor:k?Re:[.5,.5,.5],strokeWidth:S,strokeColor:w}),o&&a&&i&&!k&&u.length>=2&&d.push({...h,id:vr,rx:S*(C?5:4),ry:S*(C?5:4),backgroundColor:C?Re:[.5,.5,.5],strokeWidth:S,strokeColor:w}),b&&v&&!s&&d.push({id:vr,points:[{x:b.origin.x,y:b.origin.y},{x:b.position.x,y:b.position.y}],strokeColor:w,strokeWidth:S,opacity:$}),Sr(...d)})(ve,o,a&&_r(o)?kr({...Eo},!w):void 0),4194304&e.$$.dirty[4]&&(o||wr()),262144&e.$$.dirty[4]&&n(168,S=!!br),65536&e.$$.dirty[4]&&n(169,k=!!tr),524288&e.$$.dirty[4]|28672&e.$$.dirty[5]&&(!Eo||k||S||kr({...Eo},!w)),256&e.$$.dirty[2]|1028&e.$$.dirty[3]|8390656&e.$$.dirty[5]&&Nt>0&&r&&Tt&&((e,t,n,r)=>{const o=Tt({x:0,y:0}),i=Tt({x:e,y:e}),a=Tt({x:t.width,y:t.height}),l=i.x-o.x;if(Tr.set(l>6?1:0),r<=0)return Pr();const s=fn(l,o.x,a.x).map((e=>({id:Mr,opacity:r,points:[{x:e,y:o.y},{x:e,y:a.y}],strokeWidth:1,strokeColor:n}))),c=fn(l,o.y,a.y).map((e=>({id:Mr,opacity:r,points:[{x:o.x,y:e},{x:a.x,y:e}],strokeWidth:1,strokeColor:n})));Er(...c,...s)})(Nt,r,Be,ie),512&e.$$.dirty[2]|4&e.$$.dirty[3]|49152&e.$$.dirty[4]|1024&e.$$.dirty[5]&&Tt&&(C?Wr():((e,t,n)=>{if(null===e&&null===t)return Wr();let r,o;null!==e&&(r={id:Nr,strokeColor:n,strokeWidth:1.5,points:[Tt({x:e,y:0}),Tt({x:e,y:we.height})]}),null!==t&&(o={id:Nr,strokeColor:n,strokeWidth:1.5,points:[Tt({x:0,y:t}),Tt({x:we.width,y:t})]}),Hr(r,o)})(dn,pn,Ne)),4&e.$$.dirty[2]&&(e=>{if(!e)return In({_prerender:!1});const t=te.find((e=>e.isEditing));t&&En(t,{_prerender:"inline"===Ge})})(be),4194304&e.$$.dirty[5]&&oe&&oe.length&&(()=>{const[e]=oe;8!==e&&46!==e||Ln()&&(o.isEditing||setTimeout((()=>Fn()),0))})(),272&e.$$.dirty[0]&&Gr&&"inline"===Ge&&Gr.focus(),4194304&e.$$.dirty[4]&&n(164,T=o&&Ar(o)),4194304&e.$$.dirty[4]|512&e.$$.dirty[5]&&n(11,M=T&&!1!==eo(o)&&Br(o)),2048&e.$$.dirty[0]&&n(159,P=M?{...o}:void 0),16&e.$$.dirty[2]|16&e.$$.dirty[5]&&n(161,E=P&&xo({...P},we)),64&e.$$.dirty[5]&&n(163,R=E&&mr(E.text,E)),320&e.$$.dirty[5]&&(I=E&&$t(E.x,E.y,R.width,R.height)),2048&e.$$.dirty[0]|4194304&e.$$.dirty[4]&&n(23,A=M?o.text:""),2056&e.$$.dirty[0]|16&e.$$.dirty[2]|4194304&e.$$.dirty[4]&&n(162,L=Te&&o&&M&&xo({...Cr(o),width:Wn(o.width)?Math.floor(o.width):void 0,height:Wn(o.height)?Math.floor(o.height):void 0},we)),2064&e.$$.dirty[0]|128&e.$$.dirty[5]&&n(25,z=M&&((e,t)=>{const{textAlign:n="left",fontFamily:r="sans-serif",fontWeight:o="normal",fontStyle:i="normal",letterSpacing:a="normal",textShadowX:l=0,textShadowY:s=0,textShadowBlur:c=0,textShadowColor:u,textOutlineWidth:d=0,textOutlineColor:p}=e,h="!important",f="caret-color:".concat(O,";text-align:").concat(n).concat(h,";font-family:").concat(r).concat(h,";font-weight:").concat(o).concat(h,";font-style:").concat(i).concat(h,";letter-spacing:").concat(Wn(a)?a+"px":"normal").concat(h);if("modal"===t)return f;const m=d?";-webkit-text-stroke:".concat(2*d,"px ").concat(Jn(p)," ").concat(h):"",g=c||l||s?";text-shadow:".concat(l,"px ").concat(s,"px ").concat(c,"px ").concat(Jn(u)," ").concat(h):"";let y=e.fontSize,$=1,b="";y>1e3&&ar()&&($=y/1e3,b="transform-origin:0 0;transform:scale(".concat($,")"),y=1e3);let v=e.lineHeight/$;const x=Jn(e.color),w=.5*Math.max(0,y-v);return"--font-scalar:".concat($,";--bottom-inset:").concat(w,"px;padding:").concat(w,"px 0 0").concat(h,";color:").concat(x).concat(h,";font-size:").concat(y,"px").concat(h,";line-height:").concat(v,"px").concat(h,";").concat(f,";").concat(b).concat(m).concat(g)})(L,Ge)),2052&e.$$.dirty[0]|536870912&e.$$.dirty[1]|2&e.$$.dirty[2]|128&e.$$.dirty[5]&&n(24,F=M&&((e,t,n,r)=>{let i,a;e.width&&e.height?(i=bt(e),a=Xe(e)):(a=mr(o.text,s),a.width=s.width||a.width,i=Ce(e.x+.5*a.width,e.y+.5*a.height));const l=Math.max(0,e.fontSize-e.lineHeight)+e.lineHeight,c=Tt(i);let u=c.x-t.x-.5*a.width,d=c.y-t.y-.5*a.height,p=e.flipX,h=e.flipY,f=e.rotation;ge&&ye?(p=!p,h=!h):ge?(p=!p,f=-f):ye&&(h=!h,f=-f),f+=r;const m=n*(p?-1:1),g=n*(h?-1:1);return"--line-height:".concat(l,"px;width:").concat(a.width,"px;height:").concat(a.height,"px;transform:translate(").concat(u,"px,").concat(d,"px) rotate(").concat(f,"rad) scale(").concat(m,", ").concat(g,")")})(L,fe,$e,me)),128&e.$$.dirty[2]&&(O=Jn(De)),2320&e.$$.dirty[0]&&M&&Gr&&"inline"===Ge&&Zr(A),72351744&e.$$.dirty[4]&&n(150,D=o&&!c?o:D),67108864&e.$$.dirty[4]&&n(152,_=D&&Jr(D)),67108864&e.$$.dirty[4]&&n(147,B=D&&to(D)),67108864&e.$$.dirty[4]&&n(149,N=D&&(e=>!0!==e.disableDuplicate&&ro(e))(D)),67108864&e.$$.dirty[4]&&n(148,j=D&&Qr(D)),67108864&e.$$.dirty[4]&&n(151,W=D&&(e=>!0!==e.disableReorder)(D)),67108864&e.$$.dirty[4]&&n(145,U=D&&!1!==eo(D)),67108864&e.$$.dirty[4]&&n(153,H=D&&Un(D,"backgroundImage")&&qr(D,"opacity")),4194304&e.$$.dirty[4]&&n(155,G=o&&"html"===o.format),5242880&e.$$.dirty[4]|1&e.$$.dirty[5]&&n(158,X=o&&(!c||G)),131072&e.$$.dirty[4]|2097160&e.$$.dirty[5]&&So.set(X&&!lr?1:0,{hard:!1===re}),4096&e.$$.dirty[0]|12&e.$$.dirty[5]&&n(157,Y=X&&y.length?(x=mt(y),ze(Ce(x.x+.5*x.width,x.y),Bu)):Y),512&e.$$.dirty[0]|32&e.$$.dirty[2]|4&e.$$.dirty[5]&&n(156,q=Y&&To&&Pe&&(e=>{const t=Pe.x,n=Pe.y,r=t+Pe.width;let o=Math.max(e.x-.5*To.width,t),i=Math.max(e.y-To.height-16,n);return o+To.width>r&&(o=r-To.width),Ce(o,i)})(Y)),131072&e.$$.dirty[0]|2&e.$$.dirty[5]&&n(22,K=q&&"transform: translate(".concat(q.x,"px, ").concat(q.y,"px);opacity:").concat(ne)),2048&e.$$.dirty[0]&&n(154,Q=M?"text":"shape"),1088&e.$$.dirty[0]|1610612736&e.$$.dirty[2]|32&e.$$.dirty[3]|2145386496&e.$$.dirty[4]|1048577&e.$$.dirty[5]&&n(21,J="text"===Q&&St&&G?Eh((()=>St([["div","text-styles",{class:"PinturaShapeControlsGroup"},[...[["bold",{label:"B",style:"font-weight:900;",title:"Bold",shortcut:["CMD","B"]}],["italic",{label:"I",style:"font-family:Times New Roman;font-style:italic;",title:"Italic",shortcut:["CMD","I"]}],["underline",{label:"U",style:"text-decoration:underline;",title:"Underline",shortcut:["CMD","U"]}],["strikeThrough",{label:"S",style:"text-decoration:line-through;",title:"Strikethrough",shortcut:["CMD","S"]}]].map((e=>{let[t,n]=e;return["Button","style-"+t,{onclick:()=>document.execCommand(t),...n,style:"font-size:1.25em;text-underline-offset:1px;text-decoration-thickness:1.5px;font-weight:400;"+n.style}]}))]],["div","text-reset",{class:"PinturaShapeControlsGroup"},[["Button","style-reset",{onclick:()=>document.execCommand("removeFormat"),style:"font-weight:400;",label:'<span style="font-size:1.25em;font-style:italic;font-family:Times New Roman;text-decoration:underline;">T</span><span style="position:relative;top:.175rem;">&times;</span>',title:"Remove styles"}]]]],l))):"shape"===Q&&wt&&l?Eh((()=>wt([H&&["div","alpha",{class:"PinturaShapeControlsGroup"},[["ToggleSlider","adjust-opacity",{onrelease:yo,onchange:go,step:.01,value:Un(o,"opacity")?o.opacity:1,label:(e,t,n)=>Math.round(e/n*100)+"%",min:0,max:1,direction:"x"}]]],["div","beta",{class:"PinturaShapeControlsGroup"},[_&&["Button","flip-horizontal",{onclick:fo,label:Ot.shapeTitleButtonFlipHorizontal,icon:Ot.shapeIconButtonFlipHorizontal,hideLabel:!0}],_&&Rt&&["Button","flip-vertical",{onclick:mo,label:Ot.shapeTitleButtonFlipVertical,icon:Ot.shapeIconButtonFlipVertical,hideLabel:!0}],W&&["Button","to-front",{onclick:bo,label:Ot.shapeTitleButtonMoveToFront,icon:Ot.shapeIconButtonMoveToFront,hideLabel:!0,disabled:te[te.length-1]===D}],N&&["Button","duplicate",{onclick:vo,label:Ot.shapeTitleButtonDuplicate,icon:Ot.shapeIconButtonDuplicate,shortcut:["CMD","D"],hideLabel:!0}],j&&["Button","remove",{onclick:$o,label:Ot.shapeTitleButtonRemove,icon:Ot.shapeIconButtonRemove,shortcut:["Backspace"],hideLabel:!0}]].filter(Boolean)],U&&B&&["div","gamma",{class:"PinturaShapeControlsGroup"},[["Button","text-layout",{onclick:po,label:ad(Po,Ot,o),icon:ad(Mo,Ot,o),hideLabel:!0}]]],U&&["div","delta",{class:"PinturaShapeControlsGroup"},[["Button","edit-text",{label:Ot.shapeLabelInputText,onclick:uo}]]]].filter(Boolean),l))):[]),64&e.$$.dirty[0]|1048576&e.$$.dirty[5]&&n(20,ee=te.filter(Kr).filter((e=>e.id)).filter((e=>!Vr(e))).map((e=>({id:e.id,color:Ar(e)?e.color:Dr(e)?e.strokeColor:e.backgroundColor,name:e.name||Ot["shapeLabelTool"+el(ho(e))]}))))},[de,pe,fe,Te,Ge,At,Ot,Bn,Gr,To,l,M,y,s,p,m,h,ne,Ro,Lo,ee,J,K,A,F,z,v,$,f,Ht,ln,e=>{const{origin:t}=e.detail;n(140,tr=void 0),nr=void 0,rr=void 0,or=!1,er=void 0,ir=!1,un(),clearTimeout(Kn),Kn=setTimeout((()=>n(141,lr=!0)),250);const r=Sn();if(!r||_r(r)&&Un(r,"pathClose")||Cn(),qn=Ct(Me(t)),r&&_r(r)&&Un(r,"pathClose"))return Ze(e);const i=Xn(te,qn,Pt,(e=>Kr(e))),a=i.length&&i.shift();if(o&&Br(o)&&(io(),It&&(ir=!0)),!a&&o&&Br(o)&&Nn(o),kt(t)){if(a&&jr(a))return or=!0,n(140,tr=a),nr=Cr(tr),void(rr=xo(Cr(tr),we));er=a||void 0,!Ze(e)&&a&&(Bn(a),n(140,tr=a),nr=Cr(tr),rr=xo(Cr(tr),we))}},e=>{sr(),Je(e)},e=>{const{translation:t,ctrlKey:n,metaKey:o,shiftKey:i,position:a}=e.detail;if(tr){if(!ro(tr))return;if(Br(tr))return;if(i){let e=Math.abs(t.x),n=Math.abs(t.y);"x"===cr&&(n-=64),"y"===cr&&(e-=64),e>n?(t.y=0,cr="x"):n>e&&(t.x=0,cr="y")}else cr=null;return bn(tr,rr,t,{...Ut(n||o?0:Dt,Nt,r,tr)})}Ye(e)},e=>{sr(),tr?Br(tr)?ao():e.detail.isTap&&or&&Ar(tr)&&!1!==eo(tr)&&jn(tr):qe(e)},e=>{const t=er&&e.detail.isTap;if(e.detail.isTap&&setTimeout((()=>{dt({target:tr||er,position:qn},0)})),tr)return st(tr),r=tr,o=nr,JSON.stringify(r)!==JSON.stringify(o)&&tt(tr),void n(140,tr=void 0);var r,o;const i=_n(),a=!i||yt(i,er||void 0);a&&Dn({storePrevious:!1}),Ke(e),a&&t&&Bn(er)},Tr,e=>{n(141,lr=!0),n(140,tr=o),rr=s},e=>{if(!tr)return void n(141,lr=!1);const{translation:t,indexes:o,shiftKey:i,ctrlKey:a,metaKey:l}=e.detail;((e,t,n,r,o)=>{const{snapThreshold:i=0,gridSize:a=0,gridRect:l,snapTargets:s=[]}=o||{},c=i?(e,t,n)=>{const{snapTranslation:r,snapLines:o}=yn(mn(e),s,i,a,l);$n(t,r),cn(o);const c=hn(n(),t);e.x=c.x,e.y=c.y}:x;if(Dr(e)||_r(e)&&Un(e,"pathClose")){const[o]=n,i=oe.includes(16)?an:(e,t)=>t;let a,l,s;if(Dr(e))0===o?(a=()=>Rr(t),l=e=>i(Ir(t),e),s=(e,t)=>{e.x1=t.x,e.y1=t.y}):1===o&&(a=()=>Ir(t),l=e=>i(Rr(t),e),s=(e,t)=>{e.x2=t.x,e.y2=t.y});else{const e=t.points;a=()=>({...e[o]}),l=t=>{const n=e[Bg(o-1,e)],r=e[Bg(o+1,e)];i(n,t),i(r,t)},s=(e,t)=>e.points[o]=t}const u=hn(a(),r);c(u,r,a),l(u),s(e,u)}else if(Ur(e)||Or(e)||zr(e)){let i,a,l=!1;if(Or(e))i=gt(t);else if(Ur(e))i=ft(t);else{l=!0,i=ft(t);const e=mr(t.text,t);i.height=e.height}e.aspectRatio?a=e.aspectRatio:o.shiftKey&&!l&&(a=i.width/i.height);const s=ft(i),u=bt(s),d=e.rotation,p=Ft(s),h=Et(s,d);if(1===n.length){let t=n[0];e.flipX&&(t=vn[t]),e.flipY&&(t=xn[t]);const[o,i,l,s]=p,f=Tt(h[t]),m=Fe({...f},r),g=Ct(m);c(g,r,(()=>Ct(f)));const y=Ce(g.x-h[t].x,g.y-h[t].y),$=Ee(Me(y),-d),b=Ce(p[t].x+$.x,p[t].y+$.y);let v;0===t&&(v=l),1===t&&(v=s),2===t&&(v=o),3===t&&(v=i);const x=mt([v,b]);if(a){const{width:e,height:t}=Lt(x,a),[n,r,o,i]=zt(x);x.width=e,x.height=t,b.y<v.y&&(x.y=o-t),b.x<v.x&&(x.x=r-e)}const w=Et(x,d,u),S=Ve(w),k=Ee(w[0],-d,S),C=Ee(w[2],-d,S),T=mt([k,C]);on(e,Or(e)?Se(T):T,we)}else{n=n.map((t=>(e.flipX&&(t=vn[t]),e.flipY&&(t=xn[t]),t)));const[t,o]=n.map((e=>h[e])),i={x:t.x+.5*(o.x-t.x),y:t.y+.5*(o.y-t.y)},[s,f]=n.map((e=>p[e])),[m,g]=n.map((e=>{const t=e+2;return t<4?p[t]:p[t-4]})),y={x:m.x+.5*(g.x-m.x),y:m.y+.5*(g.y-m.y)},$=Tt(i),b=Fe({...$},r),v=Ct(b);c(v,r,(()=>Ct($)));const x=Ce(v.x-i.x,v.y-i.y),w=Ee(Me(x),-d),S=Oe(Me(s),f),k=ze(S,(e=>1-Math.abs(Math.sign(e)))),C=Ce(w.x*k.x,w.y*k.y);Fe(s,C),Fe(f,C);const T=mt(p);if(a){let e=T.width,t=T.height;0===k.y?t=e/a:e=t*a,T.width=e,T.height=t,0===k.y?T.y=y.y-.5*t:T.x=y.x-.5*e}const M=Et(T,d,u),P=Ve(M),E=Ee(M[0],-d,P),R=Ee(M[2],-d,P),I=mt([E,R]);let A;Or(e)?A=Se(I):Ur(e)?A=I:l&&(A={x:I.x,y:I.y,width:I.width}),on(e,A,we)}}Mn()})(tr,rr,o,t,{shiftKey:i,...Ut(a||l?0:Dt,Nt,r,tr)})},e=>{if(!tr)return void n(141,lr=!1);Bn(tr);const{isTap:t}=e.detail;t&&st(tr),n(140,tr=void 0),n(141,lr=!1),tt(o)},e=>{wn=dr(s).origin,n(141,lr=!0),n(140,tr=o),rr=s},e=>{if(!tr)return void n(141,lr=!1);const{translation:t,shiftKey:r}=e.detail;((e,t,n,r)=>{const o=Zn(xo(Cr(e),we)),i=bt(o),a=hn(wn,n);let l=Ae(a,i)+Math.PI/2;if(r.shiftKey){const e=Math.PI/16;l=e*Math.round(l/e)-me%e}on(e,{rotation:l},we),Mn()})(tr,0,t,{shiftKey:r})},()=>{tr?(Bn(tr),n(140,tr=void 0),n(141,lr=!1),tt(o)):n(141,lr=!1)},e=>{const{key:t}=e,n=/escape/i.test(t);if(Ln())return n?(e.preventDefault(),e.stopPropagation(),Nn(o)):void(N&&"d"===t&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),e.stopPropagation(),wo()))},e=>{const t=eo(o,e);return!0===t?e:t},oo,e=>{const{target:t,key:n}=e,r=t.value||t.innerText,i=t.selectionStart||0,a=t.selectionEnd||r.length,l=r.substring(0,i)+n+r.substring(a);if(eo(o,l)!==l)return e.preventDefault()},e=>Lr(o)&&/enter/i.test(e.code)&&!1!==o.disableNewline?e.preventDefault():/arrow/i.test(e.code)?e.stopPropagation():/escape/i.test(e.key)?ao():void 0,e=>{const{key:t,ctrlKey:n,altKey:r}=e;if(/enter/i.test(t)&&(n||r))return io()},io,ao,So,e=>{const t=An();t&&(Br(t)||ro(t)&&(n(140,tr=t),rr=xo(Cr(tr),we),bn(tr,rr,e.detail)))},e=>{n(18,Ro=!0)},e=>{let{relatedTarget:t}=e;t&&t.classList.contains("shape-selector__button")||n(18,Ro=!1)},e=>{if("touch"===e.pointerType||"PinturaShapeEditor"!==e.target.className)return void pt();(lr||Kn)&&Ao(void 0);const t=Zg(e,Te);n(143,Eo=Me(t));const r=ze(Ct(t),(e=>Math.round(e)));if(Le(r,Io))return;if(Io=Me(r),ut(lr,t,r),lr||Kn)return;if(c)return;const[o]=Xn(te,r,0,Kr);o&&Vr(o)||Ao(o)},e=>{"touch"!==e.pointerType&&pt()},ce,ue,he,me,ge,ye,$e,be,ve,we,Pe,Re,De,Be,Ne,Ze,Ye,qe,Ke,Je,et,tt,nt,rt,at,st,ct,ut,dt,pt,ht,yt,vt,xt,wt,St,kt,Ct,Tt,Mt,Pt,Rt,It,Dt,_t,Bt,Nt,Kt,Qt,Jt,en,tn,nn,rn,function(e){let t,n,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Or(e),l=Ar(e),s="relative"===i.position;const c=jt(),u=e=>{if(!Dt)return e;const t=Ct(e),{snapTranslation:n,snapLines:o}=yn(mn(t),c,Dt,Nt,r);return $n(e,n),cn(o),e},d=!!_n(),p=i.isSelection?he:pe,h="step"===i.inputMode;if(_r(e)){if(h){let r=!1;const i=(e,t)=>{const n=Qt(p),o=e&&Ce(ty(e.x,we.width),ty(e.y,we.height)),i=o&&Tt(o);oe.includes(16)&&i&&an(i,t);const a=Ct(t),l=n.points.length?n.points[0]:a,c=Ce(ty(l.x,we.width),ty(l.y,we.height)),u=Tt(c),d=je(u,t);if(!r&&1===n.points.length&&d<36)return en(p);if(n.points.length>2&&d<=256){n.pathClose=!0,Kr(n)&&Bn(n);const e=tn(p);return void et(e)}const h=n.strokeWidth&&n.strokeColor&&(void 0===n.strokeColor[3]||n.strokeColor[3]>0),f=je(i,t);if(h&&n.points.length>1&&f<256){n.pathClose=!1,n.backgroundColor=[0,0,0,0],Kr(n)&&Bn(n);const e=tn(p);et(e)}else if(!(n.points.length>0&&f<100))return s?ny(a,we):a};return{start:e=>{const a=Qt(p),{origin:l}=e.detail;if(n=4,t=u(Me(l)),o=Me(t),a){const e=a.points[a.points.length-1],n=i(e,t);return n&&(a.points=[...a.points,n]),void nn({points:a.points},p)}r=!0},update:e=>{if(!r)return;const n=Qt(p);if(!n)return;const o=n.points[0],a=i(o,Ce(t.x+e.detail.translation.x,t.y+e.detail.translation.y));a&&(n.points[1]=a,nn({points:n.points},p))},release:e=>e.detail.preventInertia(),end:n=>{if(!r)return;const o=Ct(t),i=s?ny(o,we):o,{isTap:a}=n.detail;if(a&&Xn(te,o,0,Kr).length)return en(p);Jt({...e,points:[i]},p)}}}return{start:r=>{const{origin:i}=r.detail;n=4,t=Me(i),o=Me(t);const a=Ct(t),l=s?ny(a,we):a;Jt({...e,points:[l]},p)},update:e=>{const r=Qt(p),{translation:i}=e.detail,a=Ce(t.x+i.x,t.y+i.y),l=We(o,a);if(xe(l,5)<=n)return;const c=Ae(a,o),u=n-l;o.x+=u*Math.cos(c),o.y+=u*Math.sin(c);const d=Ct(o),h=s?ny(d,we):d;nn({points:r.points.concat(h)},p)},release:e=>e.detail.preventInertia(),cancel:()=>{en(p)},end:e=>{const t=Qt(p);if(e.detail.isTap){let e=!1;if(t.bitmap?(er&&(e=!0),d&&(e=!0)):e=!0,e)return en(p)}const n=tn(p);et(n)}}}return a||l||Fr(e)?{start:n=>{const{origin:r}=n.detail;t=u(Me(r));const o=Ct(t),i=s?ny(o,we):o,l=-1*sn(me,ge,ye),c={...e,rotation:l,...i};c.flipX=ge,c.flipY=ye,delete c.position,c.opacity=0,(a?["rx","ry"]:["width","height"]).forEach((e=>{c[e]=s?"0%":0})),Jt(c,p)},update:e=>{const n=Qt(p);n.opacity=1;let{aspectRatio:r}=n,{translation:o,shiftKey:i,ctrlKey:l}=e.detail;!r&&i&&(r=1);const s=u(Ce(t.x+o.x,t.y+o.y)),c=Ct(t),d=Ct(s);if(r){const e=mt([c,d]),t=Lt(e,r);d.x=c.x+t.width,d.y=c.y+t.height}const h={x:c.x+.5*(d.x-c.x),y:c.y+.5*(d.y-c.y)},f=sn(me,ge,ye);Ee(c,f,h),Ee(d,f,h);const m=Math.min(c.x,d.x),g=Math.min(c.y,d.y);let y=Math.max(c.x,d.x)-m,$=Math.max(c.y,d.y)-g,b={};a?(l?(b.x=c.x,b.y=c.y):(b.x=m+.5*y,b.y=g+.5*$),b.rx=.5*y,b.ry=.5*$):(l?(b.x=c.x-.5*y,b.y=c.y-.5*$):(b.x=m,b.y=g),b.width=y,b.height=$),nn(b,p,((e,t)=>on(e,t,we)))},release:e=>{e.detail.preventInertia()},cancel:e=>{en(p)},end:e=>{const n=Qt(p);if(e.detail.isTap){if(Ar(n)&&It&&ir)return en(p);if(!Ar(n)||!It||er)return en(p);delete n.width,delete n.height,!1!==n.disableNewline&&delete n.textAlign;const e=xo({...n},we),r=mr(n.text,e),o=Ct({x:t.x,y:t.y-.5*r.height}),i=Ct({x:t.x+r.width,y:t.y+.5*r.height}),a={x:o.x+.5*(i.x-o.x),y:o.y+.5*(i.y-o.y)},l=sn(me,ge,ye);Ee(o,l,a),Ee(i,l,a);let s=Math.min(o.x,i.x),c=Math.min(o.y,i.y);s<0&&(s=0),c<0&&(c=0),s+r.width>we.width&&(s=we.width-r.width),c+r.height>we.height&&(c=we.height-r.height),n.x=V(n.x)?Qn(s,we.width):s,n.y=V(n.y)?Qn(c,we.height):c}if(n.opacity=1,!Ar(n)){const e=tn(p);et(e)}Kr(n)&&Bn(n),Ar(n)&&jn(n)}}:Dr(e)?{start:n=>{const{origin:r}=n.detail,o=Ct(u(r)),i=ze(o,Bu);t=Me(r),Jt({...e,x1:s?Qn(i.x,we.width):i.x,y1:s?Qn(i.y,we.height):i.y,x2:s?Qn(i.x,we.width):i.x,y2:s?Qn(i.y,we.height):i.y,opacity:0},p)},update:e=>{const{translation:n}=e.detail,r=u(Fe(Me(t),n));if(oe.includes(16)){const e=We(t,r),n=Ae(t,r),o=Math.PI/4,i=o*Math.round(n/o);r.x=t.x+e*Math.cos(i),r.y=t.y+e*Math.sin(i)}const o=Ct(r);nn({x2:s?Qn(o.x,we.width):o.x,y2:s?Qn(o.y,we.height):o.y,opacity:1},p)},release:e=>e.detail.preventInertia(),cancel:e=>{en(p)},end:e=>{const t=Qt(p);if(e.detail.isTap)return en(p);t.opacity=1;const n=tn(p);et(n),Kr(t)&&Bn(n)}}:void 0},()=>{let e,t;const n=Mt*Mt,r=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=je(e,t);if(!r&&o<2)return!1;const i=te.filter((e=>!e.disableErase));let a;return a=o<n?Xn(te,Ct(t),Mt):Yn(i,Ct(e),Ct(t),Mt),Hn(a).forEach(at),!0};return{start:n=>{e=Ce(Math.round(n.detail.origin.x),Math.round(n.detail.origin.y)),r(e,e,!0),t=e},update:n=>{const{translation:o}=n.detail,i=Ce(Math.round(e.x+o.x),Math.round(e.y+o.y));r(t,i)&&(t=Me(i))},release:e=>e.detail.preventInertia(),end:()=>{}}},Sn,kn,e=>{if(!Sn())return Xr(e),rn(e)},Cn,Tn,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:Z(),...e}},Mn,Pn,En,Rn,function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];te.forEach((n=>Rn(n,e,t,!1))),n&&Mn()},In,An,Ln,zn,Fn,Dn,Nn,jn,Vn,Hn,Gn,Zn,Xn,Yn,dn,pn,tr,lr,br,Eo,c,U,o,B,j,N,D,W,_,H,Q,G,q,Y,X,P,a,E,L,R,T,C,r,w,S,k,g,b,u,i,d,te,re,oe,ie,function(t){oa.call(this,e,t)},e=>Bn(pe[e]),function(e){aa[e?"unshift":"push"]((()=>{Gr=e,n(8,Gr)}))},function(){A=this.value,n(23,A),n(11,M),n(146,o),n(164,T),n(0,de),n(175,te)},function(e){aa[e?"unshift":"push"]((()=>{Gr=e,n(8,Gr)}))},()=>{Lo&&Lo.focus()},e=>n(9,To=e.detail),function(e){aa[e?"unshift":"push"]((()=>{Lo=e,n(19,Lo)}))},e=>Zg(e,Te)]}class fy extends Na{constructor(e){super(),Ba(this,e,hy,dy,ai,{uid:57,ui:58,disabled:0,shapes:1,selection:59,offset:2,contextRotation:60,contextFlipX:61,contextFlipY:62,contextZoom:63,active:64,opacity:65,parentRect:66,rootRect:3,utilRect:67,hoverColor:68,caretColor:69,gridColor:70,snapColor:71,textInputMode:4,oninteractionstart:72,oninteractionupdate:73,oninteractionrelease:74,oninteractionend:75,oninteractioncancel:76,onaddshape:77,onupdateshape:78,onselectshape:79,onblurshape:80,onremoveshape:81,ontapshape:82,onhovershape:83,onhovercanvas:84,ontapcanvas:85,onleavecanvas:86,beforeSelectShape:87,beforeDeselectShape:88,beforeRemoveShape:89,beforeUpdateShape:90,willRenderShapeControls:91,willRenderShapeTextControls:92,willStartInteraction:93,mapEditorPointToImagePoint:94,mapImagePointToEditorPoint:95,eraseRadius:96,selectRadius:97,enableButtonFlipVertical:98,enableTapToAddText:99,enableTextStyleControls:5,locale:6,snapThreshold:100,snapPointer:101,enableSnapToContext:102,gridSize:103,syncShapeCollection:104,getShapeDraft:105,addShapeDraft:106,discardShapeDraft:107,confirmShapeDraft:108,updateShapeDraft:109,addShape:110,createShape:111,eraseShape:112,getMarkupItemDraft:113,getMarkupItemDraftIndex:114,addMarkupItemDraft:115,confirmMarkupItemDraft:116,discardMarkupItemDraft:117,createMarkupItem:118,syncShapes:119,removeMarkupShapeProps:120,updateMarkupShape:121,updateMarkupShapeProperty:122,updateMarkupItemsShapeProperty:123,updateMarkupShapeItems:124,getActiveMarkupItem:125,hasActiveMarkupItem:126,removeShape:127,removeActiveMarkupItem:128,blurShapes:129,selectShape:7,deselectMarkupItem:130,editMarkupItem:131,finishEditMarkupItem:132,removeMarkupItems:133,getTextShapeRect:134,getMarkupShapeRect:135,getShapesNearPosition:136,getShapesBetweenPoints:137},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}get syncShapeCollection(){return this.$$.ctx[104]}get getShapeDraft(){return this.$$.ctx[105]}get addShapeDraft(){return this.$$.ctx[106]}get discardShapeDraft(){return this.$$.ctx[107]}get confirmShapeDraft(){return this.$$.ctx[108]}get updateShapeDraft(){return this.$$.ctx[109]}get addShape(){return this.$$.ctx[110]}get createShape(){return this.$$.ctx[111]}get eraseShape(){return this.$$.ctx[112]}get getMarkupItemDraft(){return this.$$.ctx[113]}get getMarkupItemDraftIndex(){return this.$$.ctx[114]}get addMarkupItemDraft(){return this.$$.ctx[115]}get confirmMarkupItemDraft(){return this.$$.ctx[116]}get discardMarkupItemDraft(){return this.$$.ctx[117]}get createMarkupItem(){return this.$$.ctx[118]}get syncShapes(){return this.$$.ctx[119]}get removeMarkupShapeProps(){return this.$$.ctx[120]}get updateMarkupShape(){return this.$$.ctx[121]}get updateMarkupShapeProperty(){return this.$$.ctx[122]}get updateMarkupItemsShapeProperty(){return this.$$.ctx[123]}get updateMarkupShapeItems(){return this.$$.ctx[124]}get getActiveMarkupItem(){return this.$$.ctx[125]}get hasActiveMarkupItem(){return this.$$.ctx[126]}get removeShape(){return this.$$.ctx[127]}get removeActiveMarkupItem(){return this.$$.ctx[128]}get blurShapes(){return this.$$.ctx[129]}get selectShape(){return this.$$.ctx[7]}get deselectMarkupItem(){return this.$$.ctx[130]}get editMarkupItem(){return this.$$.ctx[131]}get finishEditMarkupItem(){return this.$$.ctx[132]}get removeMarkupItems(){return this.$$.ctx[133]}get getTextShapeRect(){return this.$$.ctx[134]}get getMarkupShapeRect(){return this.$$.ctx[135]}get getShapesNearPosition(){return this.$$.ctx[136]}get getShapesBetweenPoints(){return this.$$.ctx[137]}}function my(e){let t,n,r;return n=new ah({props:{items:e[2]}}),{c(){t=Ri("ul"),Oa(n.$$.fragment),_i(t,"class","PinturaShapeStyleList")},m(e,o){Pi(e,t,o),Da(n,t,null),r=!0},p(e,t){const r={};4&t&&(r.items=e[2]),n.$set(r)},i(e){r||(Ca(n.$$.fragment,e),r=!0)},o(e){Ta(n.$$.fragment,e),r=!1},d(e){e&&Ei(t),_a(n)}}}function gy(e){let t,n;return t=new yu({props:{class:"PinturaShapeStyles",elasticity:e[0],$$slots:{default:[yy]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.elasticity=e[0]),131076&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function yy(e){let t,n,r;return n=new ah({props:{items:e[2]}}),{c(){t=Ri("ul"),Oa(n.$$.fragment),_i(t,"class","PinturaShapeStyleList")},m(e,o){Pi(e,t,o),Da(n,t,null),r=!0},p(e,t){const r={};4&t&&(r.items=e[2]),n.$set(r)},i(e){r||(Ca(n.$$.fragment,e),r=!0)},o(e){Ta(n.$$.fragment,e),r=!1},d(e){e&&Ei(t),_a(n)}}}function $y(e){let t,n,r,o;const i=[gy,my],a=[];function l(e,t){return e[1]?0:1}return n=l(e),r=a[n]=i[n](e),{c(){t=Ri("div"),r.c(),_i(t,"style",e[3])},m(e,r){Pi(e,t,r),a[n].m(t,null),o=!0},p(e,s){let[c]=s,u=n;n=l(e),n===u?a[n].p(e,c):(Sa(),Ta(a[u],1,1,(()=>{a[u]=null})),ka(),r=a[n],r?r.p(e,c):(r=a[n]=i[n](e),r.c()),Ca(r,1),r.m(t,null)),(!o||8&c)&&_i(t,"style",e[3])},i(e){o||(Ca(r),o=!0)},o(e){Ta(r),o=!1},d(e){e&&Ei(t),a[n].d()}}}function by(e,t,n){let r,o,i,a,l,s,{isActive:c=!1}=t,{controls:u=[]}=t,{locale:d}=t,{scrollElasticity:p}=t,{scrollEnable:h=!0}=t,{hideTitles:f=!1}=t,{willRenderControls:m=ae}=t;const g=ra("redrawTrigger");ci(e,g,(e=>n(14,a=e)));const y=ra("env");ci(e,y,(e=>n(13,i=e)));const $=ra("isAnimated");ci(e,$,(e=>n(16,s=e)));const b=Ks(0,{stiffness:.25,damping:.9});return ci(e,b,(e=>n(15,l=e))),e.$$set=e=>{"isActive"in e&&n(8,c=e.isActive),"controls"in e&&n(9,u=e.controls),"locale"in e&&n(10,d=e.locale),"scrollElasticity"in e&&n(0,p=e.scrollElasticity),"scrollEnable"in e&&n(1,h=e.scrollEnable),"hideTitles"in e&&n(11,f=e.hideTitles),"willRenderControls"in e&&n(12,m=e.willRenderControls)},e.$$.update=()=>{65792&e.$$.dirty&&b.set(c?1:0,{hard:!1===s}),33024&e.$$.dirty&&n(3,r="opacity:".concat(l,";").concat(c?"":"pointer-events:none;").concat(l<=0?"visibility:hidden":"")),32256&e.$$.dirty&&n(2,o=a&&m(u.map((e=>["ShapeStyle",e.id,{title:e.componentProps.title,locale:d,hideTitle:f,items:[[e.component,e.id,e.componentProps]]}])),i,(()=>g.set({}))))},[p,h,o,r,g,y,$,b,c,u,d,f,m,i,a,l,s]}class vy extends Na{constructor(e){super(),Ba(this,e,by,$y,ai,{isActive:8,controls:9,locale:10,scrollElasticity:0,scrollEnable:1,hideTitles:11,willRenderControls:12})}}function xy(e,t,n){const r=e.slice();return r[15]=t[n].key,r[6]=t[n].controls,r[16]=t[n].isActive,r}function wy(e,t){let n,r,o;return r=new vy({props:{isActive:t[16],controls:t[6],locale:t[1],scrollElasticity:t[2],scrollEnable:t[3],hideTitles:t[4],willRenderControls:t[5]}}),{key:e,first:null,c(){n=zi(),Oa(r.$$.fragment),this.first=n},m(e,t){Pi(e,n,t),Da(r,e,t),o=!0},p(e,n){t=e;const o={};128&n&&(o.isActive=t[16]),128&n&&(o.controls=t[6]),2&n&&(o.locale=t[1]),4&n&&(o.scrollElasticity=t[2]),8&n&&(o.scrollEnable=t[3]),16&n&&(o.hideTitles=t[4]),32&n&&(o.willRenderControls=t[5]),r.$set(o)},i(e){o||(Ca(r.$$.fragment,e),o=!0)},o(e){Ta(r.$$.fragment,e),o=!1},d(e){e&&Ei(n),_a(r,e)}}}function Sy(e){let t,n,r,o=[],i=new Map,a=e[7];const l=e=>e[15];for(let s=0;s<a.length;s+=1){let t=xy(e,a,s),n=l(t);i.set(n,o[s]=wy(n,t))}return{c(){t=Ri("div");for(let e=0;e<o.length;e+=1)o[e].c();_i(t,"class",n=kc(["PinturaShapeStyleEditor",!e[3]&&"PinturaShapeStyleEditorOverflow",e[0]]))},m(e,n){Pi(e,t,n);for(let r=0;r<o.length;r+=1)o[r].m(t,null);r=!0},p(e,s){let[c]=s;190&c&&(a=e[7],Sa(),o=Aa(o,c,l,1,e,a,i,t,Ia,wy,null,xy),ka()),(!r||9&c&&n!==(n=kc(["PinturaShapeStyleEditor",!e[3]&&"PinturaShapeStyleEditorOverflow",e[0]])))&&_i(t,"class",n)},i(e){if(!r){for(let e=0;e<a.length;e+=1)Ca(o[e]);r=!0}},o(e){for(let t=0;t<o.length;t+=1)Ta(o[t]);r=!1},d(e){e&&Ei(t);for(let t=0;t<o.length;t+=1)o[t].d()}}}function ky(e,t,n){let r,o,i,{class:a}=t,{controls:l={}}=t,{shape:s}=t,{onchange:c}=t,{locale:u}=t,{scrollElasticity:d}=t,{scrollEnable:p=!0}=t,{hideTitles:h=!1}=t,{willRenderControls:f}=t;const m=[];return e.$$set=e=>{"class"in e&&n(0,a=e.class),"controls"in e&&n(6,l=e.controls),"shape"in e&&n(8,s=e.shape),"onchange"in e&&n(9,c=e.onchange),"locale"in e&&n(1,u=e.locale),"scrollElasticity"in e&&n(2,d=e.scrollElasticity),"scrollEnable"in e&&n(3,p=e.scrollEnable),"hideTitles"in e&&n(4,h=e.hideTitles),"willRenderControls"in e&&n(5,f=e.willRenderControls)},e.$$.update=()=>{64&e.$$.dirty&&n(11,r=Object.keys(l).filter((e=>l[e]))),2304&e.$$.dirty&&n(10,o=s&&Object.keys(s).length&&r&&qr(s)?(e=>r.filter((t=>t.split("_").every((t=>Un(e,t)&&qr(e,t))))).map((t=>{const n=(e.settings&&e.settings[t]||{}).control||t,r=t.split("_"),o=r.length>1?r.map((t=>e[t])):e[t];if(U(l[n])){const{title:r,component:i}=l[n](o,(e=>{c({[t]:e})}),{selectedShapeId:e.id});return{id:n,component:ah,componentProps:{title:r,items:i}}}let[i,a]=l[n];if(V(i)&&l[i]){const e={...a};[i,a]=l[i],a={...a,...e}}const s=U(a.options)?a.options(e):a.options;return{id:n,component:i,componentProps:{...a,options:s,locale:u,value:o,optionLabelClass:"PinturaButtonLabel",onchange:n=>{const o=N(n)&&!Hn(n)?n.value:n;a.onchange&&a.onchange(o,e);const i=r.length>1?r.reduce(((e,t,n)=>({...e,[t]:Array.isArray(o)?o[n]:o})),{}):{[t]:o};c(i)}}}})).filter(Boolean))(s):[]),1280&e.$$.dirty&&n(7,i=((e,t)=>{let n=m.find((t=>t.key===e));return n||(n={key:e,controls:t},m.push(n)),m.forEach((e=>e.isActive=!1)),n.controls=t,n.isActive=!0,m})(s&&Object.keys(s).length?Object.keys(s).join("_"):"none",o||[]))},[a,u,d,p,h,f,l,i,s,c,o,r]}class Cy extends Na{constructor(e){super(),Ba(this,e,ky,Sy,ai,{class:0,controls:6,shape:8,onchange:9,locale:1,scrollElasticity:2,scrollEnable:3,hideTitles:4,willRenderControls:5})}}var Ty=e=>/<svg /.test(e);function My(e){let t,n;return t=new ah({props:{items:e[10]}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};1024&n&&(r.items=e[10]),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function Py(e){let t,n,r,o;const i=[Ry,Ey],a=[];function l(e,t){return e[8]?0:1}return t=l(e),n=a[t]=i[t](e),{c(){n.c(),r=zi()},m(e,n){a[t].m(e,n),Pi(e,r,n),o=!0},p(e,o){let s=t;t=l(e),t===s?a[t].p(e,o):(Sa(),Ta(a[s],1,1,(()=>{a[s]=null})),ka(),n=a[t],n?n.p(e,o):(n=a[t]=i[t](e),n.c()),Ca(n,1),n.m(r.parentNode,r))},i(e){o||(Ca(n),o=!0)},o(e){Ta(n),o=!1},d(e){a[t].d(e),e&&Ei(r)}}}function Ey(e){let t,n,r,o,i=e[10]&&Iy(e);return r=new yu({props:{scrollAutoCancel:e[9],elasticity:e[0],$$slots:{default:[Ay]},$$scope:{ctx:e}}}),{c(){t=Ri("div"),i&&i.c(),n=Li(),Oa(r.$$.fragment),_i(t,"class","PinturaShapePresetsFlat")},m(e,a){Pi(e,t,a),i&&i.m(t,null),Ci(t,n),Da(r,t,null),o=!0},p(e,o){e[10]?i?(i.p(e,o),1024&o&&Ca(i,1)):(i=Iy(e),i.c(),Ca(i,1),i.m(t,n)):i&&(Sa(),Ta(i,1,1,(()=>{i=null})),ka());const a={};512&o&&(a.scrollAutoCancel=e[9]),1&o&&(a.elasticity=e[0]),536871070&o&&(a.$$scope={dirty:o,ctx:e}),r.$set(a)},i(e){o||(Ca(i),Ca(r.$$.fragment,e),o=!0)},o(e){Ta(i),Ta(r.$$.fragment,e),o=!1},d(e){e&&Ei(t),i&&i.d(),_a(r)}}}function Ry(e){let t,n,r,o,i;n=new yu({props:{elasticity:e[0],class:"PinturaShapePresetsGroups",$$slots:{default:[_y]},$$scope:{ctx:e}}});const a=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:e[11]},e[12]];let l={$$slots:{default:[Ny,e=>{let{panel:t,panelIsActive:n}=e;return{26:t,27:n}},e=>{let{panel:t,panelIsActive:n}=e;return(t?67108864:0)|(n?134217728:0)}]},$$scope:{ctx:e}};for(let s=0;s<a.length;s+=1)l=ti(l,a[s]);return o=new Uc({props:l}),{c(){t=Ri("div"),Oa(n.$$.fragment),r=Li(),Oa(o.$$.fragment),_i(t,"class","PinturaShapePresetsGrouped")},m(e,a){Pi(e,t,a),Da(n,t,null),Ci(t,r),Da(o,t,null),i=!0},p(e,t){const r={};1&t&&(r.elasticity=e[0]),536876128&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r);const i=6144&t?La(a,[a[0],a[1],2048&t&&{panels:e[11]},4096&t&&za(e[12])]):{};738206239&t&&(i.$$scope={dirty:t,ctx:e}),o.$set(i)},i(e){i||(Ca(n.$$.fragment,e),Ca(o.$$.fragment,e),i=!0)},o(e){Ta(n.$$.fragment,e),Ta(o.$$.fragment,e),i=!1},d(e){e&&Ei(t),_a(n),_a(o)}}}function Iy(e){let t,n;return t=new ah({props:{items:e[10]}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};1024&n&&(r.items=e[10]),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function Ay(e){let t,n;return t=new Ou({props:{items:e[7],onclickitem:e[1],ongrabitem:e[2],ondragitem:e[3],ondropitem:e[4]}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};128&n&&(r.items=e[7]),2&n&&(r.onclickitem=e[1]),4&n&&(r.ongrabitem=e[2]),8&n&&(r.ondragitem=e[3]),16&n&&(r.ondropitem=e[4]),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function Ly(e){let t,n;return t=new ah({props:{items:e[10]}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};1024&n&&(r.items=e[10]),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function zy(e){let t,n;return t=new Qc({props:{$$slots:{default:[Fy]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};805306368&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function Fy(e){let t,n=e[28].icon+"";return{c(){t=Ii("g")},m(e,r){Pi(e,t,r),t.innerHTML=n},p(e,r){268435456&r&&n!==(n=e[28].icon+"")&&(t.innerHTML=n)},d(e){e&&Ei(t)}}}function Oy(e){let t,n,r=e[28].label+"";return{c(){t=Ri("span"),n=Ai(r)},m(e,r){Pi(e,t,r),Ci(t,n)},p(e,t){268435456&t&&r!==(r=e[28].label+"")&&ji(n,r)},d(e){e&&Ei(t)}}}function Dy(e){let t,n,r,o=e[28].icon&&zy(e),i=!e[28].hideLabel&&Oy(e);return{c(){o&&o.c(),t=Li(),i&&i.c(),n=zi()},m(e,a){o&&o.m(e,a),Pi(e,t,a),i&&i.m(e,a),Pi(e,n,a),r=!0},p(e,r){e[28].icon?o?(o.p(e,r),268435456&r&&Ca(o,1)):(o=zy(e),o.c(),Ca(o,1),o.m(t.parentNode,t)):o&&(Sa(),Ta(o,1,1,(()=>{o=null})),ka()),e[28].hideLabel?i&&(i.d(1),i=null):i?i.p(e,r):(i=Oy(e),i.c(),i.m(n.parentNode,n))},i(e){r||(Ca(o),r=!0)},o(e){Ta(o),r=!1},d(e){o&&o.d(e),e&&Ei(t),i&&i.d(e),e&&Ei(n)}}}function _y(e){let t,n,r,o=e[10]&&Ly(e);const i=[{class:"PinturaControlList"},{tabs:e[5]},e[12],{layout:"compact"}];let a={$$slots:{default:[Dy,e=>{let{tab:t}=e;return{28:t}},e=>{let{tab:t}=e;return t?268435456:0}]},$$scope:{ctx:e}};for(let l=0;l<i.length;l+=1)a=ti(a,i[l]);return n=new Ac({props:a}),n.$on("select",e[18]),{c(){o&&o.c(),t=Li(),Oa(n.$$.fragment)},m(e,i){o&&o.m(e,i),Pi(e,t,i),Da(n,e,i),r=!0},p(e,r){e[10]?o?(o.p(e,r),1024&r&&Ca(o,1)):(o=Ly(e),o.c(),Ca(o,1),o.m(t.parentNode,t)):o&&(Sa(),Ta(o,1,1,(()=>{o=null})),ka());const a=4128&r?La(i,[i[0],32&r&&{tabs:e[5]},4096&r&&za(e[12]),i[3]]):{};805306368&r&&(a.$$scope={dirty:r,ctx:e}),n.$set(a)},i(e){r||(Ca(o),Ca(n.$$.fragment,e),r=!0)},o(e){Ta(o),Ta(n.$$.fragment,e),r=!1},d(e){o&&o.d(e),e&&Ei(t),_a(n,e)}}}function By(e){let t,n;return t=new Ou({props:{items:e[13][e[26]].items,disabled:e[13][e[26]].disabled,onclickitem:e[1],ongrabitem:e[2],ondragitem:e[3],ondropitem:e[4]}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};67117056&n&&(r.items=e[13][e[26]].items),67117056&n&&(r.disabled=e[13][e[26]].disabled),2&n&&(r.onclickitem=e[1]),4&n&&(r.ongrabitem=e[2]),8&n&&(r.ondragitem=e[3]),16&n&&(r.ondropitem=e[4]),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function Ny(e){let t,n;return t=new yu({props:{scroll:e[27]?{scrollOffset:0,animate:!1}:void 0,scrollAutoCancel:e[9],elasticity:e[0],$$slots:{default:[By]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};134217728&n&&(r.scroll=e[27]?{scrollOffset:0,animate:!1}:void 0),512&n&&(r.scrollAutoCancel=e[9]),1&n&&(r.elasticity=e[0]),603987998&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function jy(e){let t,n,r,o;const i=[Py,My],a=[];function l(e,t){return e[9]?0:e[10]?1:-1}return~(n=l(e))&&(r=a[n]=i[n](e)),{c(){t=Ri("div"),r&&r.c(),_i(t,"class","PinturaShapePresetsPalette")},m(e,r){Pi(e,t,r),~n&&a[n].m(t,null),o=!0},p(e,o){let[s]=o,c=n;n=l(e),n===c?~n&&a[n].p(e,s):(r&&(Sa(),Ta(a[c],1,1,(()=>{a[c]=null})),ka()),~n?(r=a[n],r?r.p(e,s):(r=a[n]=i[n](e),r.c()),Ca(r,1),r.m(t,null)):r=null)},i(e){o||(Ca(r),o=!0)},o(e){Ta(r),o=!1},d(e){e&&Ei(t),~n&&a[n].d()}}}function Wy(e,t,n){let r,o,i,a,l,s,c,u,d,{locale:p}=t,{presets:h}=t,{scrollElasticity:f}=t,{enableSelectImage:m=!0}=t,{willRenderPresetToolbar:g=ae}=t,{onaddpreset:y=x}=t,{ongrabpreset:$}=t,{ondragpreset:b}=t,{ondroppreset:v}=t;const w="presets-"+Z(),S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Ty(e)?e:Vn(e)?qn(e,t):'<img src="'.concat(e,'" alt="').concat(t,'"/>')},k=e=>te(tn(e)),C=["src","alt","thumb","shape","id","mount","disabled"],T=e=>e.map((e=>(e=>Hn(e)&&V(e[0])&&Hn(e[1]))(e)?{...e[2],id:"".concat(w,"-").concat(e[0].toLowerCase()),label:e[0],items:T(e[1])}:(e=>{let t,n,r,o,i,a,l,s=e;return V(e)?Vn(e)?(t=e,i=e,o=S(t,i)):(t=e,i=k(t),o=S(t,i)):(t=e.src,i=e.alt||(V(t)?k(t):V(e.thumb)?k(e.thumb):void 0),o=S(e.thumb||t,i),n=e.shape,a=e.mount,l=e.disabled,r=Object.keys(e).reduce(((t,n)=>(C.includes(n)||(t[n]=e[n]),t)),{})),{id:s,src:t,thumb:o,shape:n,shapeProps:r,alt:i,title:i,mount:a,disabled:l}})(e)));return e.$$set=e=>{"locale"in e&&n(14,p=e.locale),"presets"in e&&n(15,h=e.presets),"scrollElasticity"in e&&n(0,f=e.scrollElasticity),"enableSelectImage"in e&&n(16,m=e.enableSelectImage),"willRenderPresetToolbar"in e&&n(17,g=e.willRenderPresetToolbar),"onaddpreset"in e&&n(1,y=e.onaddpreset),"ongrabpreset"in e&&n(2,$=e.ongrabpreset),"ondragpreset"in e&&n(3,b=e.ondragpreset),"ondroppreset"in e&&n(4,v=e.ondroppreset)},e.$$.update=()=>{32768&e.$$.dirty&&n(7,r=T(h)),128&e.$$.dirty&&n(9,o=r.length),640&e.$$.dirty&&n(8,i=o&&r.some((e=>!!e.items))),384&e.$$.dirty&&n(5,a=i&&r),384&e.$$.dirty&&n(13,l=i&&r.reduce(((e,t)=>(e[t.id]=t,e)),{})),96&e.$$.dirty&&n(6,s=s||a&&(a.find((e=>!e.disabled))||{}).id),64&e.$$.dirty&&n(12,c={name:w,selected:s}),32&e.$$.dirty&&n(11,u=a&&a.map((e=>e.id))),212994&e.$$.dirty&&n(10,d=p&&g([m&&["Button","browse",{label:p.shapeLabelButtonSelectSticker,icon:p.shapeIconButtonSelectSticker,onclick:()=>{Ph().then((e=>{e&&y(e)}))}}]]))},[f,y,$,b,v,a,s,r,i,o,d,u,c,l,p,h,m,g,e=>{let{detail:t}=e;return n(6,s=t)}]}class Vy extends Na{constructor(e){super(),Ba(this,e,Wy,jy,ai,{locale:14,presets:15,scrollElasticity:0,enableSelectImage:16,willRenderPresetToolbar:17,onaddpreset:1,ongrabpreset:2,ondragpreset:3,ondroppreset:4})}}function Uy(e){let t,n,r,o;return t=new ah({props:{items:e[29]}}),r=new Cy({props:{locale:e[4],shape:e[31]||e[49],onchange:e[86],controls:e[9],scrollEnable:!1,hideTitles:!0,willRenderControls:e[163]}}),{c(){Oa(t.$$.fragment),n=Li(),Oa(r.$$.fragment)},m(e,i){Da(t,e,i),Pi(e,n,i),Da(r,e,i),o=!0},p(e,n){const o={};536870912&n[0]&&(o.items=e[29]),t.$set(o);const i={};16&n[0]&&(i.locale=e[4]),262145&n[1]&&(i.shape=e[31]||e[49]),512&n[0]&&(i.controls=e[9]),r.$set(i)},i(e){o||(Ca(t.$$.fragment,e),Ca(r.$$.fragment,e),o=!0)},o(e){Ta(t.$$.fragment,e),Ta(r.$$.fragment,e),o=!1},d(e){_a(t,e),e&&Ei(n),_a(r,e)}}}function Hy(e){let t,n,r;return n=new mm({props:{$$slots:{default:[Uy]},$$scope:{ctx:e}}}),{c(){t=Ri("div"),Oa(n.$$.fragment),_i(t,"slot","header")},m(e,o){Pi(e,t,o),Da(n,t,null),r=!0},p(e,t){const r={};536871440&t[0]|262145&t[1]|262144&t[6]&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){r||(Ca(n.$$.fragment,e),r=!0)},o(e){Ta(n.$$.fragment,e),r=!1},d(e){e&&Ei(t),_a(n)}}}function Gy(e){let t,n;const r=[{locale:e[4]},{ui:e[69]},{shapes:e[5]},{selection:e[58]},{uid:e[19]},{parentRect:e[37]},{rootRect:e[55]},{utilRect:e[39]},{offset:e[50]},{disabled:e[38]},{contextRotation:e[22]},{contextFlipX:e[23]},{contextFlipY:e[24]},{contextZoom:e[36].scale},{active:e[35]},{opacity:e[56]},{hoverColor:e[57]},{caretColor:e[57]},{gridColor:[1,1,1,.125]},{snapColor:e[57]},{eraseRadius:e[47]},{selectRadius:e[6]},{enableButtonFlipVertical:e[10]},{mapEditorPointToImagePoint:e[20]},{mapImagePointToEditorPoint:e[21]},{enableTapToAddText:e[13]},{textInputMode:e[8]},{snapThreshold:e[15]},{snapPointer:!e[48]},{enableSnapToContext:e[16]},{gridSize:e[14]},{willStartInteraction:e[96]},{oninteractionstart:e[80]},{oninteractionupdate:e[81]},{oninteractionrelease:e[82]},{oninteractionend:e[84]},{oninteractioncancel:e[83]},{onleavecanvas:e[88]},{onhovercanvas:e[87]},{onhovershape:e[90]},{ontapcanvas:e[89]},{onaddshape:e[155]},{onselectshape:e[156]},{onblurshape:e[157]},{ontapshape:e[158]},{onupdateshape:e[159]},{onremoveshape:e[160]},e[42]];let o={};for(let i=0;i<r.length;i+=1)o=ti(o,r[i]);return t=new fy({props:o}),e[161](t),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const o=1106896240&n[0]|252381680&n[1]|511443072&n[2]|24&n[3]?La(r,[16&n[0]&&{locale:e[4]},128&n[2]&&{ui:e[69]},32&n[0]&&{shapes:e[5]},134217728&n[1]&&{selection:e[58]},524288&n[0]&&{uid:e[19]},64&n[1]&&{parentRect:e[37]},16777216&n[1]&&{rootRect:e[55]},256&n[1]&&{utilRect:e[39]},524288&n[1]&&{offset:e[50]},128&n[1]&&{disabled:e[38]},4194304&n[0]&&{contextRotation:e[22]},8388608&n[0]&&{contextFlipX:e[23]},16777216&n[0]&&{contextFlipY:e[24]},32&n[1]&&{contextZoom:e[36].scale},16&n[1]&&{active:e[35]},33554432&n[1]&&{opacity:e[56]},67108864&n[1]&&{hoverColor:e[57]},67108864&n[1]&&{caretColor:e[57]},r[18],67108864&n[1]&&{snapColor:e[57]},65536&n[1]&&{eraseRadius:e[47]},64&n[0]&&{selectRadius:e[6]},1024&n[0]&&{enableButtonFlipVertical:e[10]},1048576&n[0]&&{mapEditorPointToImagePoint:e[20]},2097152&n[0]&&{mapImagePointToEditorPoint:e[21]},8192&n[0]&&{enableTapToAddText:e[13]},256&n[0]&&{textInputMode:e[8]},32768&n[0]&&{snapThreshold:e[15]},131072&n[1]&&{snapPointer:!e[48]},65536&n[0]&&{enableSnapToContext:e[16]},16384&n[0]&&{gridSize:e[14]},8&n[3]&&{willStartInteraction:e[96]},262144&n[2]&&{oninteractionstart:e[80]},524288&n[2]&&{oninteractionupdate:e[81]},1048576&n[2]&&{oninteractionrelease:e[82]},4194304&n[2]&&{oninteractionend:e[84]},2097152&n[2]&&{oninteractioncancel:e[83]},67108864&n[2]&&{onleavecanvas:e[88]},33554432&n[2]&&{onhovercanvas:e[87]},268435456&n[2]&&{onhovershape:e[90]},134217728&n[2]&&{ontapcanvas:e[89]},1073741824&n[0]|16&n[3]&&{onaddshape:e[155]},1073741824&n[0]&&{onselectshape:e[156]},1073741824&n[0]&&{onblurshape:e[157]},1073741824&n[0]&&{ontapshape:e[158]},1073741824&n[0]|16&n[3]&&{onupdateshape:e[159]},1073741824&n[0]|16&n[3]&&{onremoveshape:e[160]},2048&n[1]&&za(e[42])]):{};t.$set(o)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(n){e[161](null),_a(t,n)}}}function Zy(e){let t,n,r,o,i,a=e[51]&&Gy(e);return{c(){t=Ri("div"),a&&a.c(),_i(t,"slot","main"),_i(t,"style",n="cursor:"+e[46])},m(n,l){Pi(n,t,l),a&&a.m(t,null),e[162](t),r=!0,o||(i=[Fi(t,"keydown",e[85]),$i(gc.call(null,t)),Fi(t,"dropfiles",(function(){ii(e[12]?e[95]:x)&&(e[12]?e[95]:x).apply(this,arguments)})),$i(hc.call(null,t)),Fi(t,"measure",e[151])],o=!0)},p(o,i){(e=o)[51]?a?(a.p(e,i),1048576&i[1]&&Ca(a,1)):(a=Gy(e),a.c(),Ca(a,1),a.m(t,null)):a&&(Sa(),Ta(a,1,1,(()=>{a=null})),ka()),(!r||32768&i[1]&&n!==(n="cursor:"+e[46]))&&_i(t,"style",n)},i(e){r||(Ca(a),r=!0)},o(e){Ta(a),r=!1},d(n){n&&Ei(t),a&&a.d(),e[162](null),o=!1,oi(i)}}}function Xy(e){let t,n;return t=new Vy({props:{locale:e[4],presets:e[18],enableSelectImage:e[11],willRenderPresetToolbar:e[43],onaddpreset:e[94],ongrabpreset:e[91],ondragpreset:e[92],ondroppreset:e[93],scrollElasticity:e[44]}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};16&n[0]&&(r.locale=e[4]),262144&n[0]&&(r.presets=e[18]),2048&n[0]&&(r.enableSelectImage=e[11]),4096&n[1]&&(r.willRenderPresetToolbar=e[43]),8192&n[1]&&(r.scrollElasticity=e[44]),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function Yy(e){let t,n,r,o="stack"===e[7]&&qy(e),i=(e[53]&&e[34]||"row"===e[7])&&Jy(e);return{c(){o&&o.c(),t=Li(),i&&i.c(),n=zi()},m(e,a){o&&o.m(e,a),Pi(e,t,a),i&&i.m(e,a),Pi(e,n,a),r=!0},p(e,r){"stack"===e[7]?o?(o.p(e,r),128&r[0]&&Ca(o,1)):(o=qy(e),o.c(),Ca(o,1),o.m(t.parentNode,t)):o&&(Sa(),Ta(o,1,1,(()=>{o=null})),ka()),e[53]&&e[34]||"row"===e[7]?i?(i.p(e,r),128&r[0]|4194312&r[1]&&Ca(i,1)):(i=Jy(e),i.c(),Ca(i,1),i.m(n.parentNode,n)):i&&(Sa(),Ta(i,1,1,(()=>{i=null})),ka())},i(e){r||(Ca(o),Ca(i),r=!0)},o(e){Ta(o),Ta(i),r=!1},d(e){o&&o.d(e),e&&Ei(t),i&&i.d(e),e&&Ei(n)}}}function qy(e){let t,n,r,o;const i=[Qy,Ky],a=[];function l(e,t){return e[45]?0:1}return n=l(e),r=a[n]=i[n](e),{c(){t=Ri("div"),r.c(),_i(t,"class","PinturaControlPanels")},m(e,r){Pi(e,t,r),a[n].m(t,null),o=!0},p(e,o){let s=n;n=l(e),n===s?a[n].p(e,o):(Sa(),Ta(a[s],1,1,(()=>{a[s]=null})),ka(),r=a[n],r?r.p(e,o):(r=a[n]=i[n](e),r.c()),Ca(r,1),r.m(t,null))},i(e){o||(Ca(r),o=!0)},o(e){Ta(r),o=!1},d(e){e&&Ei(t),a[n].d()}}}function Ky(e){let t,n,r;return n=new Cy({props:{locale:e[4],shape:e[31]||e[49],onchange:e[86],controls:e[9],scrollElasticity:e[44],willRenderControls:e[17]}}),{c(){t=Ri("div"),Oa(n.$$.fragment),_i(t,"class","PinturaControlPanel")},m(e,o){Pi(e,t,o),Da(n,t,null),r=!0},p(e,t){const r={};16&t[0]&&(r.locale=e[4]),262145&t[1]&&(r.shape=e[31]||e[49]),512&t[0]&&(r.controls=e[9]),8192&t[1]&&(r.scrollElasticity=e[44]),131072&t[0]&&(r.willRenderControls=e[17]),n.$set(r)},i(e){r||(Ca(n.$$.fragment,e),r=!0)},o(e){Ta(n.$$.fragment,e),r=!1},d(e){e&&Ei(t),_a(n)}}}function Qy(e){let t,n,r;return n=new Vy({props:{locale:e[4],presets:e[18],enableSelectImage:e[11],willRenderPresetToolbar:e[43],onaddpreset:e[94],ongrabpreset:e[91],ondragpreset:e[92],ondroppreset:e[93],scrollElasticity:e[44]}}),{c(){t=Ri("div"),Oa(n.$$.fragment),_i(t,"class","PinturaControlPanel")},m(e,o){Pi(e,t,o),Da(n,t,null),r=!0},p(e,t){const r={};16&t[0]&&(r.locale=e[4]),262144&t[0]&&(r.presets=e[18]),2048&t[0]&&(r.enableSelectImage=e[11]),4096&t[1]&&(r.willRenderPresetToolbar=e[43]),8192&t[1]&&(r.scrollElasticity=e[44]),n.$set(r)},i(e){r||(Ca(n.$$.fragment,e),r=!0)},o(e){Ta(n.$$.fragment,e),r=!1},d(e){e&&Ei(t),_a(n)}}}function Jy(e){let t,n;return t=new yu({props:{class:"PinturaControlListScroller",elasticity:e[44],$$slots:{default:[a$]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};8192&n[1]&&(r.elasticity=e[44]),131729&n[0]|262155&n[1]|262144&n[6]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function e$(e){let t,n;return t=new zd({props:{locale:e[4],class:"PinturaControlList",optionClass:"PinturaControlListOption",layout:"row",options:e[32],selectedIndex:e[32].findIndex(e[152]),onchange:e[79],$$slots:{option:[o$,e=>{let{option:t}=e;return{203:t}},e=>{let{option:t}=e;return[0,0,0,0,0,0,t?131072:0]}]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};16&n[0]&&(r.locale=e[4]),2&n[1]&&(r.options=e[32]),1&n[0]|2&n[1]&&(r.selectedIndex=e[32].findIndex(e[152])),16&n[0]|393216&n[6]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function t$(e){let t,n;return t=new Qc({props:{$$slots:{default:[n$]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};16&n[0]|393216&n[6]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function n$(e){let t,n=(U(e[203].icon)?e[203].icon(e[4]):e[203].icon)+"";return{c(){t=Ii("g")},m(e,r){Pi(e,t,r),t.innerHTML=n},p(e,r){16&r[0]|131072&r[6]&&n!==(n=(U(e[203].icon)?e[203].icon(e[4]):e[203].icon)+"")&&(t.innerHTML=n)},d(e){e&&Ei(t)}}}function r$(e){let t,n,r=(U(e[203].label)?e[203].label(e[4]):e[203].label)+"";return{c(){t=Ri("span"),n=Ai(r)},m(e,r){Pi(e,t,r),Ci(t,n)},p(e,t){16&t[0]|131072&t[6]&&r!==(r=(U(e[203].label)?e[203].label(e[4]):e[203].label)+"")&&ji(n,r)},d(e){e&&Ei(t)}}}function o$(e){let t,n,r,o=e[203].icon&&t$(e),i=!e[203].hideLabel&&r$(e);return{c(){t=Ri("div"),o&&o.c(),n=Li(),i&&i.c(),_i(t,"slot","option")},m(e,a){Pi(e,t,a),o&&o.m(t,null),Ci(t,n),i&&i.m(t,null),r=!0},p(e,r){e[203].icon?o?(o.p(e,r),131072&r[6]&&Ca(o,1)):(o=t$(e),o.c(),Ca(o,1),o.m(t,n)):o&&(Sa(),Ta(o,1,1,(()=>{o=null})),ka()),e[203].hideLabel?i&&(i.d(1),i=null):i?i.p(e,r):(i=r$(e),i.c(),i.m(t,null))},i(e){r||(Ca(o),r=!0)},o(e){Ta(o),r=!1},d(e){e&&Ei(t),o&&o.d(),i&&i.d()}}}function i$(e){let t,n;return t=new Cy({props:{locale:e[4],shape:e[31]||e[49],onchange:e[86],controls:e[9],scrollEnable:!1,hideTitles:!0,willRenderControls:e[153]}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};16&n[0]&&(r.locale=e[4]),262145&n[1]&&(r.shape=e[31]||e[49]),512&n[0]&&(r.controls=e[9]),131072&n[0]&&(r.willRenderControls=e[153]),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function a$(e){let t,n,r,o=e[34]&&e$(e),i="row"===e[7]&&i$(e);return{c(){o&&o.c(),t=Li(),i&&i.c(),n=zi()},m(e,a){o&&o.m(e,a),Pi(e,t,a),i&&i.m(e,a),Pi(e,n,a),r=!0},p(e,r){e[34]?o?(o.p(e,r),8&r[1]&&Ca(o,1)):(o=e$(e),o.c(),Ca(o,1),o.m(t.parentNode,t)):o&&(Sa(),Ta(o,1,1,(()=>{o=null})),ka()),"row"===e[7]?i?(i.p(e,r),128&r[0]&&Ca(i,1)):(i=i$(e),i.c(),Ca(i,1),i.m(n.parentNode,n)):i&&(Sa(),Ta(i,1,1,(()=>{i=null})),ka())},i(e){r||(Ca(o),Ca(i),r=!0)},o(e){Ta(o),Ta(i),r=!1},d(e){o&&o.d(e),e&&Ei(t),i&&i.d(e),e&&Ei(n)}}}function l$(e){let t,n;return t=new yu({props:{class:"PinturaControlListScroller",elasticity:e[44],$$slots:{default:[d$]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};8192&n[1]&&(r.elasticity=e[44]),67108880&n[0]|8388608&n[1]|262144&n[6]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function s$(e){let t,n;return t=new Qc({props:{$$slots:{default:[c$]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};16&n[0]|393216&n[6]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function c$(e){let t,n=(U(e[203].icon)?e[203].icon(e[4]):e[203].icon)+"";return{c(){t=Ii("g")},m(e,r){Pi(e,t,r),t.innerHTML=n},p(e,r){16&r[0]|131072&r[6]&&n!==(n=(U(e[203].icon)?e[203].icon(e[4]):e[203].icon)+"")&&(t.innerHTML=n)},d(e){e&&Ei(t)}}}function u$(e){let t,n,r,o,i,a=(U(e[203].label)?e[203].label(e[4]):e[203].label)+"",l=e[203].icon&&s$(e);return{c(){t=Ri("div"),l&&l.c(),n=Li(),r=Ri("span"),o=Ai(a),_i(t,"slot","option")},m(e,a){Pi(e,t,a),l&&l.m(t,null),Ci(t,n),Ci(t,r),Ci(r,o),i=!0},p(e,r){e[203].icon?l?(l.p(e,r),131072&r[6]&&Ca(l,1)):(l=s$(e),l.c(),Ca(l,1),l.m(t,n)):l&&(Sa(),Ta(l,1,1,(()=>{l=null})),ka()),(!i||16&r[0]|131072&r[6])&&a!==(a=(U(e[203].label)?e[203].label(e[4]):e[203].label)+"")&&ji(o,a)},i(e){i||(Ca(l),i=!0)},o(e){Ta(l),i=!1},d(e){e&&Ei(t),l&&l.d()}}}function d$(e){let t,n;return t=new zd({props:{locale:e[4],class:"PinturaControlList",optionClass:"PinturaControlListOption",layout:"row",options:e[54],selectedIndex:e[54].findIndex(e[154]),onchange:e[78],$$slots:{option:[u$,e=>{let{option:t}=e;return{203:t}},e=>{let{option:t}=e;return[0,0,0,0,0,0,t?131072:0]}]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};16&n[0]&&(r.locale=e[4]),8388608&n[1]&&(r.options=e[54]),67108864&n[0]|8388608&n[1]&&(r.selectedIndex=e[54].findIndex(e[154])),16&n[0]|393216&n[6]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function p$(e){let t,n,r,o,i;const a=[Yy,Xy],l=[];function s(e,t){return e[52]?0:e[45]?1:-1}~(n=s(e))&&(r=l[n]=a[n](e));let c=e[33]&&l$(e);return{c(){t=Ri("div"),r&&r.c(),o=Li(),c&&c.c(),_i(t,"slot","footer"),_i(t,"style",e[40])},m(e,r){Pi(e,t,r),~n&&l[n].m(t,null),Ci(t,o),c&&c.m(t,null),i=!0},p(e,u){let d=n;n=s(e),n===d?~n&&l[n].p(e,u):(r&&(Sa(),Ta(l[d],1,1,(()=>{l[d]=null})),ka()),~n?(r=l[n],r?r.p(e,u):(r=l[n]=a[n](e),r.c()),Ca(r,1),r.m(t,o)):r=null),e[33]?c?(c.p(e,u),4&u[1]&&Ca(c,1)):(c=l$(e),c.c(),Ca(c,1),c.m(t,null)):c&&(Sa(),Ta(c,1,1,(()=>{c=null})),ka()),(!i||512&u[1])&&_i(t,"style",e[40])},i(e){i||(Ca(r),Ca(c),i=!0)},o(e){Ta(r),Ta(c),i=!1},d(e){e&&Ei(t),~n&&l[n].d(),c&&c.d()}}}function h$(e){let t,n;return t=new Em({props:{hasHeader:e[41],$$slots:{footer:[p$],main:[Zy],header:[Hy]},$$scope:{ctx:e}}}),t.$on("measure",e[164]),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};1024&n[1]&&(r.hasHeader=e[41]),2113929201&n[0]|134216703&n[1]|262144&n[6]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function f$(e,t,n){let r,o,i,a,l,s,c,u,d,p,h,f,m,g,y,$,b,v,x,w,S,k,C,T,M,P,E,R,I,A,L,z,F,O,D,_,B,N,j,W,U,H,G,Z,X,Y,q,K,Q,J,ee,te,ne,re,oe,ie,le,se,ce,ue,de,pe,he,fe,me,ge,ye=Jo,$e=()=>(ye(),ye=li(Pe,(e=>n(35,H=e))),Pe),be=Jo,ve=()=>(be(),be=li(Le,(e=>n(142,Y=e))),Le),xe=Jo,we=()=>(xe(),xe=li(ht,(e=>n(37,ne=e))),ht),Se=Jo,ke=()=>(Se(),Se=li(Re,(e=>n(149,pe=e))),Re),Te=Jo,Me=()=>(Te(),Te=li(Ee,(e=>n(56,me=e))),Ee);e.$$.on_destroy.push((()=>ye())),e.$$.on_destroy.push((()=>be())),e.$$.on_destroy.push((()=>xe())),e.$$.on_destroy.push((()=>Se())),e.$$.on_destroy.push((()=>Te()));let{isActive:Pe}=t;$e();let{isActiveFraction:Ee}=t;Me();let{isVisible:Re}=t;ke();let{stores:Ie}=t,{locale:Ae={}}=t,{shapes:Le}=t;ve();let{toolbar:ze=[]}=t,{toolShapes:Fe={}}=t,{toolActive:Oe}=t,{toolSelectRadius:De}=t,{toolRetainStyles:_e=!1}=t,{toolbarLayout:Be="stack"}=t,{textInputMode:Ne}=t,{shapeControls:je={}}=t,{enableButtonFlipVertical:Ue=!1}=t,{enablePresetSelectImage:He=!0}=t,{enablePresetDropImage:Ge=!0}=t,{enableSelectToolToAddShape:Ze=!1}=t,{enableAutoSelectMoveTool:Xe=["line","arrow","path","rectangle","ellipse","text"]}=t,{enableTapToAddText:Ye=!1}=t,{enableMoveTool:qe=!1}=t,{enableViewTool:Ke=!1}=t,{enableToolShareStyles:Qe=!0}=t,{gridSize:Je=0}=t,{snapThreshold:et=0}=t,{enableSnapToContext:tt=!0}=t,{willRenderHeaderTools:nt=ae}=t,{willRenderPresetToolbar:rt}=t,{willRenderShapeStyleControls:ot}=t,{willStartInteraction:it}=t,{shapePresets:at=[]}=t,{utilKey:lt}=t,{mapScreenPointToImagePoint:st}=t,{mapImagePointToScreenPoint:ct}=t,{imageRotation:ut=0}=t,{imageFlipX:dt=!1}=t,{imageFlipY:pt=!1}=t,{parentRect:ht}=t;we();let{hooks:ft={}}=t;const mt=ra("selection");ci(e,mt,(e=>n(148,ce=e)));const gt=ra("isAnimated");ci(e,gt,(e=>n(139,G=e)));const yt=ra("elasticityMultiplier");ci(e,yt,(e=>n(143,q=e)));const $t=ra("ui");ci(e,$t,(e=>n(174,ue=e)));const vt=ra("keysPressed");let xt;ci(e,vt,(e=>n(146,le=e)));const{env:wt,history:St,rootRect:kt,rootColorSecondary:Ct,enablePanInput:Tt,enablePanInputStatus:Mt,enableZoomInput:Pt,stageRect:Et,utilRectPadded:Rt,scrollElasticity:At,imageOverlayMarkup:Lt,imagePreviewModifiers:zt,imageCropRect:Ft,shapePreprocessor:Ot,stageScalar:Dt,imageSelectionRect:_t,imageTransformsInterpolated:Bt,imageSelectionPan:Nt,imageSize:jt,allowPan:Wt,allowZoom:Vt,allowZoomControls:Ut,allowPlayPause:Ht}=Ie;ci(e,wt,(e=>n(140,Z=e))),ci(e,kt,(e=>n(55,fe=e))),ci(e,Ct,(e=>n(57,ge=e))),ci(e,Mt,(e=>n(38,oe=e))),ci(e,Et,(e=>n(144,K=e))),ci(e,Rt,(e=>n(39,de=e))),ci(e,zt,(e=>n(150,he=e))),ci(e,Ft,(e=>n(173,re=e))),ci(e,Ot,(e=>n(147,se=e))),ci(e,Dt,(e=>n(171,ee=e))),ci(e,_t,(e=>n(172,te=e))),ci(e,Bt,(e=>n(36,Q=e))),ci(e,Nt,(e=>n(170,J=e))),ci(e,jt,(e=>n(145,ie=e)));let Gt=0,Zt={};const Xt=e=>st(Zg(e,fe));let Yt,qt,Kt,Qt={};const Jt=e=>{if(!_r(e)||!Un(e,"pathClose"))return;const t=[...e.strokeColor];t[3]=1,Yt.updateMarkupShape(e,{pathClose:!1,strokeColor:t},!1),Yt.removeMarkupShapeProps(e,["backgroundColor"],!1),Yt.confirmMarkupItemDraft(),Yt.selectShape(e)};let en;const tn=(e,t)=>Wn(e)?e:e.endsWith("%")?parseFloat(e)/100*t.width:void 0;let nn,rn,on;const an=(e,t,n)=>{let r=!1;t||(r=!0,t=F?st(bt(K)):bt(re)),t.x-=ne.x||0,t.y-=ne.y||0,(dt||pt)&&(e.flipX=dt,e.flipY=pt);const o=Yt.getShapesNearPosition(Y,t);if(r&&o.length){const e=.1*Math.min(re.width,re.height);t.x+=Math.round(-e+Math.random()*e*2),t.y+=Math.round(-e+Math.random()*e*2)}if(0!==ut&&(e.rotation=dt&&pt?-ut:dt||pt?ut:-ut),Un(e,"width")&&Un(e,"height")){const{width:n,height:r}=ko(e,["width","height"],ne);Co(e,{x:t.x-.5*n,y:t.y-.5*r},ne)}else if(Or(e))Co(e,{x:t.x,y:t.y},ne);else if(Dr(e)){const{x1:r,y1:o,x2:i,y2:a}=ko(e,["x1","y1","x2","y2"],ne),l=We(Ce(r,o),Ce(i,a)),s=V(n)?fo(n,ne.width):l;Co(e,{x1:t.x-s,y1:t.y+s,x2:t.x+s,y2:t.y-s},ne)}else if(_r(e)){const{points:n}=ko(e,["points"],ne),r=Ve(n);Co(e,{points:n.map((e=>({x:e.x+t.x-r.x,y:e.y+t.y-r.y})))},ne)}return e},ln=(e,t)=>{const n=an(Er(e,re),t);return e.shape&&(Un(e.shape,"x")&&(n.x=e.shape.x),Un(e.shape,"y")&&(n.y=e.shape.y)),sn(n)},sn=e=>{const{beforeAddShape:t=(()=>!0)}=ft;if(t(e))return Yt.addShape(e),Yt.selectShape(e),O("addshape",e),St.write(),e};let cn=!1;const un=()=>{St.write()};let dn;const pn=ra("redrawTrigger");ci(e,pn,(e=>n(141,X=e)));const hn=[],fn=Ks(G?20:0);return ci(e,fn,(e=>n(138,U=e))),e.$$set=e=>{"isActive"in e&&$e(n(1,Pe=e.isActive)),"isActiveFraction"in e&&Me(n(2,Ee=e.isActiveFraction)),"isVisible"in e&&ke(n(3,Re=e.isVisible)),"stores"in e&&n(101,Ie=e.stores),"locale"in e&&n(4,Ae=e.locale),"shapes"in e&&ve(n(5,Le=e.shapes)),"toolbar"in e&&n(102,ze=e.toolbar),"toolShapes"in e&&n(103,Fe=e.toolShapes),"toolActive"in e&&n(0,Oe=e.toolActive),"toolSelectRadius"in e&&n(6,De=e.toolSelectRadius),"toolRetainStyles"in e&&n(104,_e=e.toolRetainStyles),"toolbarLayout"in e&&n(7,Be=e.toolbarLayout),"textInputMode"in e&&n(8,Ne=e.textInputMode),"shapeControls"in e&&n(9,je=e.shapeControls),"enableButtonFlipVertical"in e&&n(10,Ue=e.enableButtonFlipVertical),"enablePresetSelectImage"in e&&n(11,He=e.enablePresetSelectImage),"enablePresetDropImage"in e&&n(12,Ge=e.enablePresetDropImage),"enableSelectToolToAddShape"in e&&n(105,Ze=e.enableSelectToolToAddShape),"enableAutoSelectMoveTool"in e&&n(106,Xe=e.enableAutoSelectMoveTool),"enableTapToAddText"in e&&n(13,Ye=e.enableTapToAddText),"enableMoveTool"in e&&n(107,qe=e.enableMoveTool),"enableViewTool"in e&&n(108,Ke=e.enableViewTool),"enableToolShareStyles"in e&&n(109,Qe=e.enableToolShareStyles),"gridSize"in e&&n(14,Je=e.gridSize),"snapThreshold"in e&&n(15,et=e.snapThreshold),"enableSnapToContext"in e&&n(16,tt=e.enableSnapToContext),"willRenderHeaderTools"in e&&n(110,nt=e.willRenderHeaderTools),"willRenderPresetToolbar"in e&&n(111,rt=e.willRenderPresetToolbar),"willRenderShapeStyleControls"in e&&n(17,ot=e.willRenderShapeStyleControls),"willStartInteraction"in e&&n(112,it=e.willStartInteraction),"shapePresets"in e&&n(18,at=e.shapePresets),"utilKey"in e&&n(19,lt=e.utilKey),"mapScreenPointToImagePoint"in e&&n(20,st=e.mapScreenPointToImagePoint),"mapImagePointToScreenPoint"in e&&n(21,ct=e.mapImagePointToScreenPoint),"imageRotation"in e&&n(22,ut=e.imageRotation),"imageFlipX"in e&&n(23,dt=e.imageFlipX),"imageFlipY"in e&&n(24,pt=e.imageFlipY),"parentRect"in e&&we(n(25,ht=e.parentRect)),"hooks"in e&&n(113,ft=e.hooks)},e.$$.update=()=>{var t,J,ee,te;if(4194304&e.$$.dirty[4]&&n(123,r=le.includes(18)),2098176&e.$$.dirty[3]&&(xt&&Fe===xt||n(114,xt=Fe)),16&e.$$.dirty[1]&&Wt.set(H),16&e.$$.dirty[1]&&Vt.set(H),16&e.$$.dirty[1]&&Ut.set(H),512&e.$$.dirty[3]&&n(33,o=Array.isArray(ze)&&ze.length>1&&Array.isArray(ze[0][1])),4&e.$$.dirty[1]|512&e.$$.dirty[3]&&n(54,i=o?ze.map(((e,t)=>[t,e[0]])):[]),67108864&e.$$.dirty[0]|4&e.$$.dirty[1]|512&e.$$.dirty[3]&&n(137,a=o?ze[Gt][1]:ze),262144&e.$$.dirty[0]|311296&e.$$.dirty[3]|8192&e.$$.dirty[4]&&n(32,l=((e,t)=>{let{willRenderPresetToolbar:n,shapePresets:r,enableViewTool:i,enableMoveTool:a}=t,l=0!==r.length||n?e:e.filter((e=>"preset"!==e[0]));return o&&(l=[["move",e=>e.shapeLabelToolMove,{icon:e=>e.shapeIconToolMove}],["view",e=>e.shapeLabelToolView,{icon:e=>e.shapeIconToolView}],...l]),l=a?l:l.filter((e=>"move"!==e[0])),i?l:l.filter((e=>"view"!==e[0]))})(a,{willRenderPresetToolbar:rt,shapePresets:at,enableMoveTool:qe,enableViewTool:Ke})),2&e.$$.dirty[1]&&n(135,u=!!l.length),1&e.$$.dirty[0]|2&e.$$.dirty[1]|2048&e.$$.dirty[4]&&u&&void 0===Oe&&n(0,Oe=l[0][0]),67108865&e.$$.dirty[0]|4&e.$$.dirty[1]|4194304&e.$$.dirty[3]|8192&e.$$.dirty[4]&&o&&n(115,Zt={...Zt,[Gt]:a.map((e=>{let[t]=e;return t})).includes(Oe)?Oe:Zt[Gt]||a[0][0]}),512&e.$$.dirty[0]&&n(134,s=!!Object.keys(je).length),2&e.$$.dirty[1]&&n(34,c=l.length>1),12&e.$$.dirty[1]&&n(53,d=c||o),1&e.$$.dirty[0]&&n(136,p=void 0!==Oe),7168&e.$$.dirty[4]&&n(52,h=(!p||u)&&s),268435456&e.$$.dirty[0]&&n(30,O=dn&&(t=dn,(e,n)=>{t.dispatchEvent(gh(e,n))})),1073741825&e.$$.dirty[0]|16&e.$$.dirty[1]&&H&&O&&O("selectcontrol",Oe),524288&e.$$.dirty[0]|16&e.$$.dirty[1]|67108864&e.$$.dirty[4]&&(H?yi(zt,he[lt]={maskMarkupOpacity:.85},he):delete he[lt]),1&e.$$.dirty[0]|2097152&e.$$.dirty[3]&&n(133,f=Oe&&xt[Oe]?xt[Oe][1]:void 0),512&e.$$.dirty[4]&&n(124,m=f&&f.isSelection?"selection":"shapes"),1073741824&e.$$.dirty[3]|1&e.$$.dirty[4]&&(e=>{if(!Yt)return;const t=Yt.getShapeDraft(mt);t&&(e&&(qt=t.drawMode),Yt.updateShapeDraft({drawMode:e?"subtract":qt},mt))})("selection"===m&&r),134217729&e.$$.dirty[0]&&Oe&&Yt){const e=Yt.getMarkupItemDraft();e&&Jt(e)}if(1&e.$$.dirty[0]&&Oe&&Yt&&"move"!==Oe&&Yt.blurShapes(),16&e.$$.dirty[1]|33554432&e.$$.dirty[4]&&n(51,g=pe&&H),256&e.$$.dirty[1]|1048576&e.$$.dirty[4]&&n(50,y=de&&Ce(K.x-de.x,K.y-de.y)),512&e.$$.dirty[0]&&n(132,$=Object.keys(je)),16&e.$$.dirty[1]|262144&e.$$.dirty[4]&&n(120,b=H&&Y.filter(jr)[0]),16&e.$$.dirty[1]|262144&e.$$.dirty[4]&&n(129,v=H&&Y.find((e=>Wr(e)))),16&e.$$.dirty[1]|262144&e.$$.dirty[4]&&n(49,x=H&&Y.find((e=>Vr(e)))),1&e.$$.dirty[0]|16&e.$$.dirty[1]|2097152&e.$$.dirty[3]&&n(126,w=H&&xt[Oe]?po(Cr({...xt[Oe][0],...ue[lt]?ue[lt][Oe]:{}})):{}),2097152&e.$$.dirty[3]&&xt&&n(116,Qt={}),1&e.$$.dirty[0]|8454144&e.$$.dirty[3]|260&e.$$.dirty[4]&&n(125,S=w&&Object.keys(w).reduce(((e,t)=>{const n="disableStyle"===t,r="settings"===t,o=!!$.find((e=>e.split("_").includes(t)));if(!n&&!r&&!o)return e;if(void 0===w[t])return e;if(!0===w.disableStyle)return e;if(w.disableStyle&&w.disableStyle.includes(t))return e;const{share:i=!0}=w.settings&&w.settings[t]||{},a=Qe&&i?Qt:Qt[Oe]||{};return e[t]=Un(a,t)?a[t]:w[t],e}),{})),524289&e.$$.dirty[0]|2048&e.$$.dirty[3]|2&e.$$.dirty[4]&&(_e?((e,t,n)=>{const r=ue[e],o=r?r[t]:{};$t.set({...ue,[e]:{...r,[t]:{...o,...n}}})})(lt,Oe,S):(J=lt,$t.set({[J]:{}}))),16&e.$$.dirty[1]|134217728&e.$$.dirty[3]|16777218&e.$$.dirty[4]&&n(31,k=ce&&H?b||S:void 0),1&e.$$.dirty[1]|8388608&e.$$.dirty[4]&&k&&k.lineEnd&&!se&&console.warn("Set shapePreprocessor property to draw lineStart and lineEnd styles.\nhttps://pqina.nl/pintura/docs/v8/api/exports/#createshapepreprocessor"),1&e.$$.dirty[0]|4&e.$$.dirty[4]&&n(48,C=Un(w,"eraseRadius")||Un(w,"points")&&!Un(w,"pathClose")||"move"===Oe||"view"===Oe),64&e.$$.dirty[1]|4&e.$$.dirty[4]&&n(47,T=w&&void 0!==w.eraseRadius?tn(w.eraseRadius,ne):void 0),16&e.$$.dirty[1]|4194304&e.$$.dirty[4]&&n(130,M=H&&le.includes(32)),1&e.$$.dirty[0]|16&e.$$.dirty[1]&&n(131,P=H&&"view"===Oe),192&e.$$.dirty[4]&&n(128,E=P||M),48&e.$$.dirty[4]&&n(127,R=!!E&&(!!v||Wu(document.activeElement))),16&e.$$.dirty[1]|24&e.$$.dirty[4]&&Tt.set(!H||E&&!R),16&e.$$.dirty[1]|8&e.$$.dirty[4]&&Pt.set(!H||!R),64&e.$$.dirty[1]|6&e.$$.dirty[4]&&n(121,I=w.cursorStyle?((e,t,n)=>{let r,{cursorStyle:o,cursorSize:i}=e;const a=t[i];if(void 0===a?r=tn(i,n):Wn(a)?r=a:V(a)&&(r=$o(i,t[i],n),"strokeWidth"===i&&(r*=.5)),!(r<=0))return{size:r,style:o}})(w,{...w,...S},ne):void 0),67108864&e.$$.dirty[3]|2097152&e.$$.dirty[4]&&n(122,A=on&&(te=ie,(ee=on).x>=0&&ee.y>=0&&ee.x<=te.width&&ee.y<=te.height)),524288&e.$$.dirty[0]|160&e.$$.dirty[1]|1929379840&e.$$.dirty[3]|1&e.$$.dirty[4])if(A&&!nn&&I&&!oe){const e=I.size*Q.scale,t={id:"cursor-"+lt,x:rn.x,y:rn.y,strokeWidth:.5,strokeColor:[0,0,0]};"ellipse"===I.style&&(t.rx=e,t.ry=e);const n={strokeWidth:2.5,strokeColor:[1,1,1],opacity:.75},o=[{...t,...n},t];if("selection"===m&&r){const t=e,r=rn.x+t,i=rn.y+t+4,a={id:"cursor-"+lt,strokeWidth:.75,strokeColor:[0,0,0],points:[{x:r,y:i},{x:r+4,y:i}]};o.push({...a,...n,strokeWidth:2,points:[{x:r-.5,y:i},{x:r+4.5,y:i}]},a)}(e=>{Lt.update((t=>[...t.filter((e=>e.id!=="cursor-"+lt)),...e]))})(o)}else Lt.update((e=>e.filter((e=>e.id!=="cursor-"+lt))));1&e.$$.dirty[0]|128&e.$$.dirty[1]|956301312&e.$$.dirty[3]&&n(46,L=A?((e,t,n,r,o,i)=>{if(r)return"grab";if(e&&!t)return"none";if(!t)return"move"===i?"default":"crosshair";let a=t||n;return jr(a)?Wr(a)?"modal"===Ne?"default":"text":ro(a)?"move":"default":"default"})(I,nn,b,oe,0,Oe):"default"),264193&e.$$.dirty[0]|262144&e.$$.dirty[3]&&n(45,z="preset"===Oe&&(at.length>0||He||rt)),64&e.$$.dirty[1]&&(F=!Un(ne,"x")&&!Un(ne,"y")),524288&e.$$.dirty[4]&&n(44,D=q*At),262144&e.$$.dirty[3]|196608&e.$$.dirty[4]&&n(43,_=X&&rt?e=>Eh((()=>rt(e,ln,{...Z},(()=>pn.set({}))))):ae),1048576&e.$$.dirty[3]&&n(42,B=Object.keys(ft).reduce(((e,t)=>("beforeAddShape"===t||void 0===ft[t]||(e[t]=ft[t]),e)),{})),16&e.$$.dirty[1]&&(e=>{Y&&Le.update((t=>t.map((t=>(t._prerender=!!e&&Wr(t),t)))))})(H),131072&e.$$.dirty[3]|196608&e.$$.dirty[4]&&n(29,N=X&&nt([],Z,(()=>pn.set({})))),536871424&e.$$.dirty[0]&&n(41,j=!!N.length||!!Object.keys(je).some((e=>hn.includes(e)))),16&e.$$.dirty[1]|32768&e.$$.dirty[4]&&G&&fn.set(H?0:20),16384&e.$$.dirty[4]&&n(40,W=U?"transform: translateY(".concat(U,"px)"):void 0)},Ht.set(!1),[Oe,Pe,Ee,Re,Ae,Le,De,Be,Ne,je,Ue,He,Ge,Ye,Je,et,tt,ot,at,lt,st,ct,ut,dt,pt,ht,Gt,Yt,dn,N,O,k,l,o,c,H,Q,ne,oe,de,W,j,B,_,D,z,L,T,C,x,y,g,h,d,i,fe,me,ge,mt,gt,yt,$t,vt,wt,kt,Ct,Mt,Et,Rt,Lt,zt,Ft,Ot,Dt,_t,Bt,Nt,jt,(e,t)=>{let{index:r}=e;n(26,Gt=r),n(0,Oe=Zt[r])},(e,t)=>{let{value:r}=e;n(0,Oe=r),(Ze||/enter/i.test(t.key))&&(e=>{const[t,n]=xt[e];let r,o,i="relative"===n.position;const a=i?"0%":0,l=i?"0%":0;Fr(t)||Ar(t)?(o=i?"20%":.2*ne.width,r=Cr(t),r.x=a,r.y=l,Co(r,{width:o,height:o},ne)):Or(t)?(o=i?"10%":.1*ne.width,r=Cr(t),r.x=a,r.y=l,Co(r,{rx:o,ry:o},ne)):Dr(t)&&(o=i?"10%":.1*ne.width,r=Cr(t),r.x1=a,r.y1=l,r.x2=a,r.y2=l),r&&Promise.resolve().then((()=>{sn(an(r,void 0,o))}))})(r)},e=>{if("eraser"===Oe)Kt=Yt.eraseShape();else if(Oe&&xt[Oe]){const[e,t={}]=xt[Oe],{drawMode:n}=k;"selection"===m&&"new"===n&&mt.set([]);let o={};"selection"===m&&(O("selectiondown",[...ce]),r&&(qt=e.drawMode,o.drawMode="subtract")),Kt=Yt.createShape({...e,...S,...o},t)}else Kt=void 0;return!!Kt&&(Kt.start(e),!0)},e=>!!Kt&&(Kt.update(e),!0),e=>!!Kt&&(Kt.release(e),!0),e=>!!Kt&&(Kt.cancel(e),Kt=void 0,!0),e=>{if(!Kt)return!1;if(Kt.end(e),Kt=void 0,"selection"===m){if(e.detail.isTap){const[e]=xt[Oe];e.bitmap||mt.set([])}O("selectionup",[...ce])}const t=Yt.getMarkupItemDraft(),r=qe&&(!0===Xe||Array.isArray(Xe)&&Xe.includes(Oe));return t&&!t.isEditing||!r||n(0,Oe="move"),!0},e=>{const{key:t}=e,n=Yt.getMarkupItemDraft();/escape/i.test(t)&&n&&(e.preventDefault(),e.stopPropagation(),Yt.discardMarkupItemDraft(),Kt=void 0),/enter/i.test(t)&&n&&(e.preventDefault(),e.stopPropagation(),Jt(n),Kt=void 0)},function(e){Object.keys(e).forEach((t=>{const{retain:r=!0,share:o=!0}=w.settings&&w.settings[t]||{};r&&(Qe&&o?n(116,Qt[t]=e[t],Qt):(Qt[Oe]||n(116,Qt[Oe]={},Qt),n(116,Qt[Oe][t]=e[t],Qt)))})),O("selectstyle",e),b&&(Yt.updateMarkupShape(b,e),clearTimeout(en),en=setTimeout((()=>{un()}),200))},(e,t,r)=>{n(118,rn=t),n(119,on=r)},()=>{n(119,on=void 0),n(118,rn=void 0)},e=>{O("markuptap",e)},e=>n(117,nn=e),()=>{cn=!1},(e,t)=>{if(cn)return;const{beforeAddShape:n=(()=>!0)}=ft,r=Xt(t),o=Yt.getMarkupItemDraft(),i=It(re,{x:r.x+(ne.x||0),y:r.y+(ne.y||0)});if(o&&!i&&Yt.discardMarkupItemDraft(),i){if(!o){const o=Er(e,re),i=an(o,r);return n(i)?(Xr(i),void Yt.addShape(i)):(cn=!0,void t.preventDefault())}Fr(o)&&(r.x-=.5*o.width,r.y-=.5*o.height),e.shape&&(Un(e.shape,"x")&&(r.x=e.shape.x),Un(e.shape,"y")&&(r.y=e.shape.y)),Yt.updateMarkupShape(o,r)}},(e,t)=>{if(cn)return;const n=Xt(t);if(!It(re,{x:n.x+(ne.x||0),y:n.y+(ne.y||0)}))return void Yt.discardMarkupItemDraft();const r=Yt.confirmMarkupItemDraft();Yt.selectShape(r),O("addshape",r),St.write()},e=>ln(e),e=>{return t=e.detail.resources,n=Xt(e.detail.event),t.forEach((e=>ln(e,n)));var t,n},e=>{if(!it)return!0;const t=rectClone(te);return rectScale(t,1/ee),rectTranslate(t,J),rectScale(t,Q.scale),it(e,{...t,x:t.x+K.x,y:t.y+K.y})},un,pn,hn,fn,Ie,ze,Fe,_e,Ze,Xe,qe,Ke,Qe,nt,rt,it,ft,xt,Zt,Qt,nn,rn,on,b,I,A,r,m,S,w,R,E,v,M,P,$,f,s,u,p,a,U,G,Z,X,Y,q,K,ie,le,se,ce,pe,he,function(t){oa.call(this,e,t)},e=>e[0]===Oe,(e,t,n)=>{const r=e.filter((e=>{let[,t]=e;return!hn.includes(t)}));return ot?ot(r,t,n):r},e=>e[0]===Gt,e=>{Promise.resolve().then((()=>{O("addshape",e),un()}))},e=>{O("selectshape",e)},e=>{Promise.resolve().then((()=>{O("blurshape",e)}))},e=>{O("tapshape",e)},e=>{O("updateshape",e),un()},e=>{O("removeshape",e),un()},function(e){aa[e?"unshift":"push"]((()=>{Yt=e,n(27,Yt)}))},function(e){aa[e?"unshift":"push"]((()=>{dn=e,n(28,dn)}))},e=>e.filter((e=>{let[,t]=e;return hn.includes(t)})),function(t){oa.call(this,e,t)}]}class m$ extends Na{constructor(e){super(),Ba(this,e,f$,h$,ai,{isActive:1,isActiveFraction:2,isVisible:3,stores:101,locale:4,shapes:5,toolbar:102,toolShapes:103,toolActive:0,toolSelectRadius:6,toolRetainStyles:104,toolbarLayout:7,textInputMode:8,shapeControls:9,enableButtonFlipVertical:10,enablePresetSelectImage:11,enablePresetDropImage:12,enableSelectToolToAddShape:105,enableAutoSelectMoveTool:106,enableTapToAddText:13,enableMoveTool:107,enableViewTool:108,enableToolShareStyles:109,gridSize:14,snapThreshold:15,enableSnapToContext:16,willRenderHeaderTools:110,willRenderPresetToolbar:111,willRenderShapeStyleControls:17,willStartInteraction:112,shapePresets:18,utilKey:19,mapScreenPointToImagePoint:20,mapImagePointToScreenPoint:21,imageRotation:22,imageFlipX:23,imageFlipY:24,parentRect:25,hooks:113},null,[-1,-1,-1,-1,-1,-1,-1])}get isActive(){return this.$$.ctx[1]}set isActive(e){this.$$set({isActive:e}),$a()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),$a()}get isVisible(){return this.$$.ctx[3]}set isVisible(e){this.$$set({isVisible:e}),$a()}get stores(){return this.$$.ctx[101]}set stores(e){this.$$set({stores:e}),$a()}get locale(){return this.$$.ctx[4]}set locale(e){this.$$set({locale:e}),$a()}get shapes(){return this.$$.ctx[5]}set shapes(e){this.$$set({shapes:e}),$a()}get toolbar(){return this.$$.ctx[102]}set toolbar(e){this.$$set({toolbar:e}),$a()}get toolShapes(){return this.$$.ctx[103]}set toolShapes(e){this.$$set({toolShapes:e}),$a()}get toolActive(){return this.$$.ctx[0]}set toolActive(e){this.$$set({toolActive:e}),$a()}get toolSelectRadius(){return this.$$.ctx[6]}set toolSelectRadius(e){this.$$set({toolSelectRadius:e}),$a()}get toolRetainStyles(){return this.$$.ctx[104]}set toolRetainStyles(e){this.$$set({toolRetainStyles:e}),$a()}get toolbarLayout(){return this.$$.ctx[7]}set toolbarLayout(e){this.$$set({toolbarLayout:e}),$a()}get textInputMode(){return this.$$.ctx[8]}set textInputMode(e){this.$$set({textInputMode:e}),$a()}get shapeControls(){return this.$$.ctx[9]}set shapeControls(e){this.$$set({shapeControls:e}),$a()}get enableButtonFlipVertical(){return this.$$.ctx[10]}set enableButtonFlipVertical(e){this.$$set({enableButtonFlipVertical:e}),$a()}get enablePresetSelectImage(){return this.$$.ctx[11]}set enablePresetSelectImage(e){this.$$set({enablePresetSelectImage:e}),$a()}get enablePresetDropImage(){return this.$$.ctx[12]}set enablePresetDropImage(e){this.$$set({enablePresetDropImage:e}),$a()}get enableSelectToolToAddShape(){return this.$$.ctx[105]}set enableSelectToolToAddShape(e){this.$$set({enableSelectToolToAddShape:e}),$a()}get enableAutoSelectMoveTool(){return this.$$.ctx[106]}set enableAutoSelectMoveTool(e){this.$$set({enableAutoSelectMoveTool:e}),$a()}get enableTapToAddText(){return this.$$.ctx[13]}set enableTapToAddText(e){this.$$set({enableTapToAddText:e}),$a()}get enableMoveTool(){return this.$$.ctx[107]}set enableMoveTool(e){this.$$set({enableMoveTool:e}),$a()}get enableViewTool(){return this.$$.ctx[108]}set enableViewTool(e){this.$$set({enableViewTool:e}),$a()}get enableToolShareStyles(){return this.$$.ctx[109]}set enableToolShareStyles(e){this.$$set({enableToolShareStyles:e}),$a()}get gridSize(){return this.$$.ctx[14]}set gridSize(e){this.$$set({gridSize:e}),$a()}get snapThreshold(){return this.$$.ctx[15]}set snapThreshold(e){this.$$set({snapThreshold:e}),$a()}get enableSnapToContext(){return this.$$.ctx[16]}set enableSnapToContext(e){this.$$set({enableSnapToContext:e}),$a()}get willRenderHeaderTools(){return this.$$.ctx[110]}set willRenderHeaderTools(e){this.$$set({willRenderHeaderTools:e}),$a()}get willRenderPresetToolbar(){return this.$$.ctx[111]}set willRenderPresetToolbar(e){this.$$set({willRenderPresetToolbar:e}),$a()}get willRenderShapeStyleControls(){return this.$$.ctx[17]}set willRenderShapeStyleControls(e){this.$$set({willRenderShapeStyleControls:e}),$a()}get willStartInteraction(){return this.$$.ctx[112]}set willStartInteraction(e){this.$$set({willStartInteraction:e}),$a()}get shapePresets(){return this.$$.ctx[18]}set shapePresets(e){this.$$set({shapePresets:e}),$a()}get utilKey(){return this.$$.ctx[19]}set utilKey(e){this.$$set({utilKey:e}),$a()}get mapScreenPointToImagePoint(){return this.$$.ctx[20]}set mapScreenPointToImagePoint(e){this.$$set({mapScreenPointToImagePoint:e}),$a()}get mapImagePointToScreenPoint(){return this.$$.ctx[21]}set mapImagePointToScreenPoint(e){this.$$set({mapImagePointToScreenPoint:e}),$a()}get imageRotation(){return this.$$.ctx[22]}set imageRotation(e){this.$$set({imageRotation:e}),$a()}get imageFlipX(){return this.$$.ctx[23]}set imageFlipX(e){this.$$set({imageFlipX:e}),$a()}get imageFlipY(){return this.$$.ctx[24]}set imageFlipY(e){this.$$set({imageFlipY:e}),$a()}get parentRect(){return this.$$.ctx[25]}set parentRect(e){this.$$set({parentRect:e}),$a()}get hooks(){return this.$$.ctx[113]}set hooks(e){this.$$set({hooks:e}),$a()}}var g$=(e,t,n,r,o,i,a,l,s)=>{const c=Me(e),u=.5*n.width,d=.5*n.height,p=.5*t.width,h=.5*t.height,f=o.x+r.x,m=o.y+r.y;l&&(c.x=n.width-c.x),s&&(c.y=n.height-c.y);const g=Math.cos(i),y=Math.sin(i);c.x-=u,c.y-=d;const $=c.x*g-c.y*y,b=c.x*y+c.y*g;c.x=u+$,c.y=d+b,c.x*=a,c.y*=a,c.x+=p,c.y+=h,c.x+=f,c.y+=m,c.x-=u*a,c.y-=d*a;const v=(o.x-f)*a,x=(o.y-m)*a,w=v*g-x*y,S=v*y+x*g;return c.x+=w,c.y+=S,c},y$=(e,t,n,r,o,i,a,l,s)=>{const c=Me(e),u=tt(n),d=tt(t),p=Ce(o.x+r.x,o.y+r.y),h=Math.cos(i),f=Math.sin(i);c.x-=d.x,c.y-=d.y;const m=(o.x-p.x)*a,g=(o.y-p.y)*a,y=m*h-g*f,$=m*f+g*h;c.x-=y,c.y-=$,c.x-=p.x,c.y-=p.y,c.x/=a,c.y/=a;const b=c.x*h+c.y*f,v=c.x*f-c.y*h;return c.x=b,c.y=-v,c.x+=u.x,c.y+=u.y,l&&(c.x=n.width-c.x),s&&(c.y=n.height-c.y),c},$$=e=>"boolean"==typeof e;function b$(e){let t,n,r;function o(t){e[58](t)}let i={utilKey:"annotate",stores:e[4],locale:e[5],isActive:e[1],isActiveFraction:e[2],isVisible:e[3],mapScreenPointToImagePoint:e[43],mapImagePointToScreenPoint:e[42],imageRotation:e[44],imageFlipX:e[41],imageFlipY:e[40],shapes:e[46],toolbar:e[20]||e[6],toolShapes:e[21]||e[7],toolRetainStyles:e[8],enableSelectToolToAddShape:e[29],enableTapToAddText:e[30],enableViewTool:e[28],enableMoveTool:e[32],enableAutoSelectMoveTool:e[31],snapThreshold:e[15],gridSize:Wn(e[17])?e[17]:e[14],enableSnapToContext:$$(e[18])?e[18]:e[16],enableToolShareStyles:e[12],shapeControls:e[22]||e[9],shapePresets:e[26],enableButtonFlipVertical:e[23],parentRect:e[47],enablePresetDropImage:e[25],enablePresetSelectImage:e[24],toolSelectRadius:e[10],textInputMode:e[11],willStartInteraction:e[13],willRenderPresetToolbar:e[27]||e[19],hooks:{willRenderShapeControls:e[33],willRenderShapeTextControls:e[34],beforeAddShape:e[35],beforeRemoveShape:e[36],beforeDeselectShape:e[37],beforeSelectShape:e[38],beforeUpdateShape:e[39]}};return void 0!==e[0]&&(i.toolActive=e[0]),t=new m$({props:i}),aa.push((()=>Fa(t,"toolActive",o))),t.$on("measure",e[59]),{c(){Oa(t.$$.fragment)},m(e,n){Da(t,e,n),r=!0},p(e,r){const o={};16&r[0]&&(o.stores=e[4]),32&r[0]&&(o.locale=e[5]),2&r[0]&&(o.isActive=e[1]),4&r[0]&&(o.isActiveFraction=e[2]),8&r[0]&&(o.isVisible=e[3]),4096&r[1]&&(o.mapScreenPointToImagePoint=e[43]),2048&r[1]&&(o.mapImagePointToScreenPoint=e[42]),8192&r[1]&&(o.imageRotation=e[44]),1024&r[1]&&(o.imageFlipX=e[41]),512&r[1]&&(o.imageFlipY=e[40]),1048640&r[0]&&(o.toolbar=e[20]||e[6]),2097280&r[0]&&(o.toolShapes=e[21]||e[7]),256&r[0]&&(o.toolRetainStyles=e[8]),536870912&r[0]&&(o.enableSelectToolToAddShape=e[29]),1073741824&r[0]&&(o.enableTapToAddText=e[30]),268435456&r[0]&&(o.enableViewTool=e[28]),2&r[1]&&(o.enableMoveTool=e[32]),1&r[1]&&(o.enableAutoSelectMoveTool=e[31]),32768&r[0]&&(o.snapThreshold=e[15]),147456&r[0]&&(o.gridSize=Wn(e[17])?e[17]:e[14]),327680&r[0]&&(o.enableSnapToContext=$$(e[18])?e[18]:e[16]),4096&r[0]&&(o.enableToolShareStyles=e[12]),4194816&r[0]&&(o.shapeControls=e[22]||e[9]),67108864&r[0]&&(o.shapePresets=e[26]),8388608&r[0]&&(o.enableButtonFlipVertical=e[23]),33554432&r[0]&&(o.enablePresetDropImage=e[25]),16777216&r[0]&&(o.enablePresetSelectImage=e[24]),1024&r[0]&&(o.toolSelectRadius=e[10]),2048&r[0]&&(o.textInputMode=e[11]),8192&r[0]&&(o.willStartInteraction=e[13]),134742016&r[0]&&(o.willRenderPresetToolbar=e[27]||e[19]),508&r[1]&&(o.hooks={willRenderShapeControls:e[33],willRenderShapeTextControls:e[34],beforeAddShape:e[35],beforeRemoveShape:e[36],beforeDeselectShape:e[37],beforeSelectShape:e[38],beforeUpdateShape:e[39]}),!n&&1&r[0]&&(n=!0,o.toolActive=e[0],fa((()=>n=!1))),t.$set(o)},i(e){r||(Ca(t.$$.fragment,e),r=!0)},o(e){Ta(t.$$.fragment,e),r=!1},d(e){_a(t,e)}}}function v$(e,t,n){let r,o,i,a,l,s,c,u,d,{isActive:p}=t,{isActiveFraction:h}=t,{isVisible:f}=t,{stores:m}=t,{locale:g={}}=t,{markupEditorToolbar:y}=t,{markupEditorToolStyles:$}=t,{markupEditorToolRetainStyles:b}=t,{markupEditorShapeStyleControls:v}=t,{markupEditorToolSelectRadius:x}=t,{markupEditorTextInputMode:w}=t,{markupEditorToolShareStyles:S}=t,{markupEditorWillStartInteraction:k}=t,{markupEditorGridSize:C=0}=t,{markupEditorSnapThreshold:T=0}=t,{markupEditorSnapToContext:M=!1}=t,{annotateGridSize:P}=t,{annotateSnapToContext:E}=t,{willRenderShapePresetToolbar:R}=t,{annotateTools:I}=t,{annotateToolShapes:A}=t,{annotateShapeControls:L}=t,{annotateActiveTool:z}=t,{annotateEnableButtonFlipVertical:F=!1}=t,{annotateEnableSelectImagePreset:O=!1}=t,{annotateEnableDropImagePreset:D=!0}=t,{annotatePresets:_=[]}=t,{annotateWillRenderShapePresetToolbar:B}=t,{enableViewTool:N}=t,{enableSelectToolToAddShape:j}=t,{enableTapToAddText:W}=t,{enableAutoSelectMoveTool:V}=t,{enableMoveTool:U}=t,{willRenderShapeControls:H}=t,{willRenderShapeTextControls:G}=t,{beforeAddShape:Z}=t,{beforeRemoveShape:X}=t,{beforeDeselectShape:Y}=t,{beforeSelectShape:q}=t,{beforeUpdateShape:K}=t;const{rootRect:Q,imageAnnotation:J,imageSize:ee,imageRotation:te,imageFlipX:ne,imageFlipY:re,imageTransforms:oe,imageTransformsInterpolated:ie}=m;return ci(e,Q,(e=>n(57,u=e))),ci(e,ee,(e=>n(56,c=e))),ci(e,te,(e=>n(44,d=e))),ci(e,ne,(e=>n(41,a=e))),ci(e,re,(e=>n(40,i=e))),ci(e,oe,(e=>n(55,s=e))),ci(e,ie,(e=>n(54,l=e))),e.$$set=e=>{"isActive"in e&&n(1,p=e.isActive),"isActiveFraction"in e&&n(2,h=e.isActiveFraction),"isVisible"in e&&n(3,f=e.isVisible),"stores"in e&&n(4,m=e.stores),"locale"in e&&n(5,g=e.locale),"markupEditorToolbar"in e&&n(6,y=e.markupEditorToolbar),"markupEditorToolStyles"in e&&n(7,$=e.markupEditorToolStyles),"markupEditorToolRetainStyles"in e&&n(8,b=e.markupEditorToolRetainStyles),"markupEditorShapeStyleControls"in e&&n(9,v=e.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in e&&n(10,x=e.markupEditorToolSelectRadius),"markupEditorTextInputMode"in e&&n(11,w=e.markupEditorTextInputMode),"markupEditorToolShareStyles"in e&&n(12,S=e.markupEditorToolShareStyles),"markupEditorWillStartInteraction"in e&&n(13,k=e.markupEditorWillStartInteraction),"markupEditorGridSize"in e&&n(14,C=e.markupEditorGridSize),"markupEditorSnapThreshold"in e&&n(15,T=e.markupEditorSnapThreshold),"markupEditorSnapToContext"in e&&n(16,M=e.markupEditorSnapToContext),"annotateGridSize"in e&&n(17,P=e.annotateGridSize),"annotateSnapToContext"in e&&n(18,E=e.annotateSnapToContext),"willRenderShapePresetToolbar"in e&&n(19,R=e.willRenderShapePresetToolbar),"annotateTools"in e&&n(20,I=e.annotateTools),"annotateToolShapes"in e&&n(21,A=e.annotateToolShapes),"annotateShapeControls"in e&&n(22,L=e.annotateShapeControls),"annotateActiveTool"in e&&n(0,z=e.annotateActiveTool),"annotateEnableButtonFlipVertical"in e&&n(23,F=e.annotateEnableButtonFlipVertical),"annotateEnableSelectImagePreset"in e&&n(24,O=e.annotateEnableSelectImagePreset),"annotateEnableDropImagePreset"in e&&n(25,D=e.annotateEnableDropImagePreset),"annotatePresets"in e&&n(26,_=e.annotatePresets),"annotateWillRenderShapePresetToolbar"in e&&n(27,B=e.annotateWillRenderShapePresetToolbar),"enableViewTool"in e&&n(28,N=e.enableViewTool),"enableSelectToolToAddShape"in e&&n(29,j=e.enableSelectToolToAddShape),"enableTapToAddText"in e&&n(30,W=e.enableTapToAddText),"enableAutoSelectMoveTool"in e&&n(31,V=e.enableAutoSelectMoveTool),"enableMoveTool"in e&&n(32,U=e.enableMoveTool),"willRenderShapeControls"in e&&n(33,H=e.willRenderShapeControls),"willRenderShapeTextControls"in e&&n(34,G=e.willRenderShapeTextControls),"beforeAddShape"in e&&n(35,Z=e.beforeAddShape),"beforeRemoveShape"in e&&n(36,X=e.beforeRemoveShape),"beforeDeselectShape"in e&&n(37,Y=e.beforeDeselectShape),"beforeSelectShape"in e&&n(38,q=e.beforeSelectShape),"beforeUpdateShape"in e&&n(39,K=e.beforeUpdateShape)},e.$$.update=()=>{125830656&e.$$.dirty[1]&&n(43,r=e=>y$(e,u,c,l.origin,l.translation,s.rotation.z,l.scale,a,i)),125830656&e.$$.dirty[1]&&n(42,o=e=>g$(e,u,c,l.origin,l.translation,s.rotation.z,l.scale,a,i))},[z,p,h,f,m,g,y,$,b,v,x,w,S,k,C,T,M,P,E,R,I,A,L,F,O,D,_,B,N,j,W,V,U,H,G,Z,X,Y,q,K,i,a,o,r,d,Q,J,ee,te,ne,re,oe,ie,"annotate",l,s,c,u,function(e){z=e,n(0,z)},function(t){oa.call(this,e,t)}]}var x$={util:["annotate",class extends Na{constructor(e){super(),Ba(this,e,v$,b$,ai,{name:53,isActive:1,isActiveFraction:2,isVisible:3,stores:4,locale:5,markupEditorToolbar:6,markupEditorToolStyles:7,markupEditorToolRetainStyles:8,markupEditorShapeStyleControls:9,markupEditorToolSelectRadius:10,markupEditorTextInputMode:11,markupEditorToolShareStyles:12,markupEditorWillStartInteraction:13,markupEditorGridSize:14,markupEditorSnapThreshold:15,markupEditorSnapToContext:16,annotateGridSize:17,annotateSnapToContext:18,willRenderShapePresetToolbar:19,annotateTools:20,annotateToolShapes:21,annotateShapeControls:22,annotateActiveTool:0,annotateEnableButtonFlipVertical:23,annotateEnableSelectImagePreset:24,annotateEnableDropImagePreset:25,annotatePresets:26,annotateWillRenderShapePresetToolbar:27,enableViewTool:28,enableSelectToolToAddShape:29,enableTapToAddText:30,enableAutoSelectMoveTool:31,enableMoveTool:32,willRenderShapeControls:33,willRenderShapeTextControls:34,beforeAddShape:35,beforeRemoveShape:36,beforeDeselectShape:37,beforeSelectShape:38,beforeUpdateShape:39},null,[-1,-1])}get name(){return this.$$.ctx[53]}get isActive(){return this.$$.ctx[1]}set isActive(e){this.$$set({isActive:e}),$a()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),$a()}get isVisible(){return this.$$.ctx[3]}set isVisible(e){this.$$set({isVisible:e}),$a()}get stores(){return this.$$.ctx[4]}set stores(e){this.$$set({stores:e}),$a()}get locale(){return this.$$.ctx[5]}set locale(e){this.$$set({locale:e}),$a()}get markupEditorToolbar(){return this.$$.ctx[6]}set markupEditorToolbar(e){this.$$set({markupEditorToolbar:e}),$a()}get markupEditorToolStyles(){return this.$$.ctx[7]}set markupEditorToolStyles(e){this.$$set({markupEditorToolStyles:e}),$a()}get markupEditorToolRetainStyles(){return this.$$.ctx[8]}set markupEditorToolRetainStyles(e){this.$$set({markupEditorToolRetainStyles:e}),$a()}get markupEditorShapeStyleControls(){return this.$$.ctx[9]}set markupEditorShapeStyleControls(e){this.$$set({markupEditorShapeStyleControls:e}),$a()}get markupEditorToolSelectRadius(){return this.$$.ctx[10]}set markupEditorToolSelectRadius(e){this.$$set({markupEditorToolSelectRadius:e}),$a()}get markupEditorTextInputMode(){return this.$$.ctx[11]}set markupEditorTextInputMode(e){this.$$set({markupEditorTextInputMode:e}),$a()}get markupEditorToolShareStyles(){return this.$$.ctx[12]}set markupEditorToolShareStyles(e){this.$$set({markupEditorToolShareStyles:e}),$a()}get markupEditorWillStartInteraction(){return this.$$.ctx[13]}set markupEditorWillStartInteraction(e){this.$$set({markupEditorWillStartInteraction:e}),$a()}get markupEditorGridSize(){return this.$$.ctx[14]}set markupEditorGridSize(e){this.$$set({markupEditorGridSize:e}),$a()}get markupEditorSnapThreshold(){return this.$$.ctx[15]}set markupEditorSnapThreshold(e){this.$$set({markupEditorSnapThreshold:e}),$a()}get markupEditorSnapToContext(){return this.$$.ctx[16]}set markupEditorSnapToContext(e){this.$$set({markupEditorSnapToContext:e}),$a()}get annotateGridSize(){return this.$$.ctx[17]}set annotateGridSize(e){this.$$set({annotateGridSize:e}),$a()}get annotateSnapToContext(){return this.$$.ctx[18]}set annotateSnapToContext(e){this.$$set({annotateSnapToContext:e}),$a()}get willRenderShapePresetToolbar(){return this.$$.ctx[19]}set willRenderShapePresetToolbar(e){this.$$set({willRenderShapePresetToolbar:e}),$a()}get annotateTools(){return this.$$.ctx[20]}set annotateTools(e){this.$$set({annotateTools:e}),$a()}get annotateToolShapes(){return this.$$.ctx[21]}set annotateToolShapes(e){this.$$set({annotateToolShapes:e}),$a()}get annotateShapeControls(){return this.$$.ctx[22]}set annotateShapeControls(e){this.$$set({annotateShapeControls:e}),$a()}get annotateActiveTool(){return this.$$.ctx[0]}set annotateActiveTool(e){this.$$set({annotateActiveTool:e}),$a()}get annotateEnableButtonFlipVertical(){return this.$$.ctx[23]}set annotateEnableButtonFlipVertical(e){this.$$set({annotateEnableButtonFlipVertical:e}),$a()}get annotateEnableSelectImagePreset(){return this.$$.ctx[24]}set annotateEnableSelectImagePreset(e){this.$$set({annotateEnableSelectImagePreset:e}),$a()}get annotateEnableDropImagePreset(){return this.$$.ctx[25]}set annotateEnableDropImagePreset(e){this.$$set({annotateEnableDropImagePreset:e}),$a()}get annotatePresets(){return this.$$.ctx[26]}set annotatePresets(e){this.$$set({annotatePresets:e}),$a()}get annotateWillRenderShapePresetToolbar(){return this.$$.ctx[27]}set annotateWillRenderShapePresetToolbar(e){this.$$set({annotateWillRenderShapePresetToolbar:e}),$a()}get enableViewTool(){return this.$$.ctx[28]}set enableViewTool(e){this.$$set({enableViewTool:e}),$a()}get enableSelectToolToAddShape(){return this.$$.ctx[29]}set enableSelectToolToAddShape(e){this.$$set({enableSelectToolToAddShape:e}),$a()}get enableTapToAddText(){return this.$$.ctx[30]}set enableTapToAddText(e){this.$$set({enableTapToAddText:e}),$a()}get enableAutoSelectMoveTool(){return this.$$.ctx[31]}set enableAutoSelectMoveTool(e){this.$$set({enableAutoSelectMoveTool:e}),$a()}get enableMoveTool(){return this.$$.ctx[32]}set enableMoveTool(e){this.$$set({enableMoveTool:e}),$a()}get willRenderShapeControls(){return this.$$.ctx[33]}set willRenderShapeControls(e){this.$$set({willRenderShapeControls:e}),$a()}get willRenderShapeTextControls(){return this.$$.ctx[34]}set willRenderShapeTextControls(e){this.$$set({willRenderShapeTextControls:e}),$a()}get beforeAddShape(){return this.$$.ctx[35]}set beforeAddShape(e){this.$$set({beforeAddShape:e}),$a()}get beforeRemoveShape(){return this.$$.ctx[36]}set beforeRemoveShape(e){this.$$set({beforeRemoveShape:e}),$a()}get beforeDeselectShape(){return this.$$.ctx[37]}set beforeDeselectShape(e){this.$$set({beforeDeselectShape:e}),$a()}get beforeSelectShape(){return this.$$.ctx[38]}set beforeSelectShape(e){this.$$set({beforeSelectShape:e}),$a()}get beforeUpdateShape(){return this.$$.ctx[39]}set beforeUpdateShape(e){this.$$set({beforeUpdateShape:e}),$a()}}]};function w$(e){let t,n,r;function o(t){e[50](t)}let i={stores:e[4],locale:e[5],isActive:e[1],isActiveFraction:e[2],isVisible:e[3],mapScreenPointToImagePoint:e[41],mapImagePointToScreenPoint:e[40],utilKey:"decorate",shapes:e[43],toolbar:e[19]||e[6],toolShapes:e[20]||e[7],toolRetainStyles:e[8],shapeControls:e[21]||e[9],shapePresets:e[25],enableSelectToolToAddShape:e[27],enableTapToAddText:e[28],enableViewTool:e[29],enableMoveTool:e[30],enableAutoSelectMoveTool:e[31],snapThreshold:e[15],gridSize:Wn(e[17])?e[17]:e[14],enableSnapToContext:$$(e[18])?e[18]:e[16],enableToolShareStyles:e[12],enablePresetSelectImage:e[23],enablePresetDropImage:e[24],enableButtonFlipVertical:e[22],parentRect:e[42],toolSelectRadius:e[10],textInputMode:e[11],willStartInteraction:e[39],willRenderPresetToolbar:e[26]||e[13],hooks:{willRenderShapeControls:e[32],willRenderShapeTextControls:e[33],beforeAddShape:e[34],beforeRemoveShape:e[35],beforeDeselectShape:e[36],beforeSelectShape:e[37],beforeUpdateShape:e[38]}};return void 0!==e[0]&&(i.toolActive=e[0]),t=new m$({props:i}),aa.push((()=>Fa(t,"toolActive",o))),t.$on("measure",e[51]),{c(){Oa(t.$$.fragment)},m(e,n){Da(t,e,n),r=!0},p(e,r){const o={};16&r[0]&&(o.stores=e[4]),32&r[0]&&(o.locale=e[5]),2&r[0]&&(o.isActive=e[1]),4&r[0]&&(o.isActiveFraction=e[2]),8&r[0]&&(o.isVisible=e[3]),1024&r[1]&&(o.mapScreenPointToImagePoint=e[41]),512&r[1]&&(o.mapImagePointToScreenPoint=e[40]),524352&r[0]&&(o.toolbar=e[19]||e[6]),1048704&r[0]&&(o.toolShapes=e[20]||e[7]),256&r[0]&&(o.toolRetainStyles=e[8]),2097664&r[0]&&(o.shapeControls=e[21]||e[9]),33554432&r[0]&&(o.shapePresets=e[25]),134217728&r[0]&&(o.enableSelectToolToAddShape=e[27]),268435456&r[0]&&(o.enableTapToAddText=e[28]),536870912&r[0]&&(o.enableViewTool=e[29]),1073741824&r[0]&&(o.enableMoveTool=e[30]),1&r[1]&&(o.enableAutoSelectMoveTool=e[31]),32768&r[0]&&(o.snapThreshold=e[15]),147456&r[0]&&(o.gridSize=Wn(e[17])?e[17]:e[14]),327680&r[0]&&(o.enableSnapToContext=$$(e[18])?e[18]:e[16]),4096&r[0]&&(o.enableToolShareStyles=e[12]),8388608&r[0]&&(o.enablePresetSelectImage=e[23]),16777216&r[0]&&(o.enablePresetDropImage=e[24]),4194304&r[0]&&(o.enableButtonFlipVertical=e[22]),1024&r[0]&&(o.toolSelectRadius=e[10]),2048&r[0]&&(o.textInputMode=e[11]),256&r[1]&&(o.willStartInteraction=e[39]),67117056&r[0]&&(o.willRenderPresetToolbar=e[26]||e[13]),254&r[1]&&(o.hooks={willRenderShapeControls:e[32],willRenderShapeTextControls:e[33],beforeAddShape:e[34],beforeRemoveShape:e[35],beforeDeselectShape:e[36],beforeSelectShape:e[37],beforeUpdateShape:e[38]}),!n&&1&r[0]&&(n=!0,o.toolActive=e[0],fa((()=>n=!1))),t.$set(o)},i(e){r||(Ca(t.$$.fragment,e),r=!0)},o(e){Ta(t.$$.fragment,e),r=!1},d(e){_a(t,e)}}}function S$(e,t,n){let r,o,i,a,l,{isActive:s}=t,{isActiveFraction:c}=t,{isVisible:u}=t,{stores:d}=t,{locale:p={}}=t,{markupEditorToolbar:h}=t,{markupEditorToolStyles:f}=t,{markupEditorToolRetainStyles:m}=t,{markupEditorShapeStyleControls:g}=t,{markupEditorToolSelectRadius:y}=t,{markupEditorTextInputMode:$}=t,{markupEditorToolShareStyles:b}=t,{willRenderShapePresetToolbar:v}=t,{markupEditorGridSize:x}=t,{markupEditorSnapThreshold:w}=t,{markupEditorSnapToContext:S=!0}=t,{decorateGridSize:k}=t,{decorateSnapToContext:C}=t,{decorateTools:T}=t,{decorateToolShapes:M}=t,{decorateShapeControls:P}=t,{decorateActiveTool:E}=t,{decorateEnableButtonFlipVertical:R=!1}=t,{decorateEnableSelectImagePreset:I=!1}=t,{decorateEnableDropImagePreset:A=!0}=t,{decoratePresets:L=[]}=t,{decorateWillRenderShapePresetToolbar:z}=t,{enableSelectToolToAddShape:F}=t,{enableTapToAddText:O}=t,{enableViewTool:D}=t,{enableMoveTool:_}=t,{enableAutoSelectMoveTool:B}=t,{willRenderShapeControls:N}=t,{willRenderShapeTextControls:j}=t,{beforeAddShape:W}=t,{beforeRemoveShape:V}=t,{beforeDeselectShape:U}=t,{beforeSelectShape:H}=t,{beforeUpdateShape:G}=t,{markupEditorWillStartInteraction:Z}=t;const{imageCropRect:X,imageDecoration:Y,imageSelectionRectPresentation:q,imageTransformsInterpolated:K}=d;return ci(e,q,(e=>n(48,a=e))),ci(e,K,(e=>n(49,l=e))),e.$$set=e=>{"isActive"in e&&n(1,s=e.isActive),"isActiveFraction"in e&&n(2,c=e.isActiveFraction),"isVisible"in e&&n(3,u=e.isVisible),"stores"in e&&n(4,d=e.stores),"locale"in e&&n(5,p=e.locale),"markupEditorToolbar"in e&&n(6,h=e.markupEditorToolbar),"markupEditorToolStyles"in e&&n(7,f=e.markupEditorToolStyles),"markupEditorToolRetainStyles"in e&&n(8,m=e.markupEditorToolRetainStyles),"markupEditorShapeStyleControls"in e&&n(9,g=e.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in e&&n(10,y=e.markupEditorToolSelectRadius),"markupEditorTextInputMode"in e&&n(11,$=e.markupEditorTextInputMode),"markupEditorToolShareStyles"in e&&n(12,b=e.markupEditorToolShareStyles),"willRenderShapePresetToolbar"in e&&n(13,v=e.willRenderShapePresetToolbar),"markupEditorGridSize"in e&&n(14,x=e.markupEditorGridSize),"markupEditorSnapThreshold"in e&&n(15,w=e.markupEditorSnapThreshold),"markupEditorSnapToContext"in e&&n(16,S=e.markupEditorSnapToContext),"decorateGridSize"in e&&n(17,k=e.decorateGridSize),"decorateSnapToContext"in e&&n(18,C=e.decorateSnapToContext),"decorateTools"in e&&n(19,T=e.decorateTools),"decorateToolShapes"in e&&n(20,M=e.decorateToolShapes),"decorateShapeControls"in e&&n(21,P=e.decorateShapeControls),"decorateActiveTool"in e&&n(0,E=e.decorateActiveTool),"decorateEnableButtonFlipVertical"in e&&n(22,R=e.decorateEnableButtonFlipVertical),"decorateEnableSelectImagePreset"in e&&n(23,I=e.decorateEnableSelectImagePreset),"decorateEnableDropImagePreset"in e&&n(24,A=e.decorateEnableDropImagePreset),"decoratePresets"in e&&n(25,L=e.decoratePresets),"decorateWillRenderShapePresetToolbar"in e&&n(26,z=e.decorateWillRenderShapePresetToolbar),"enableSelectToolToAddShape"in e&&n(27,F=e.enableSelectToolToAddShape),"enableTapToAddText"in e&&n(28,O=e.enableTapToAddText),"enableViewTool"in e&&n(29,D=e.enableViewTool),"enableMoveTool"in e&&n(30,_=e.enableMoveTool),"enableAutoSelectMoveTool"in e&&n(31,B=e.enableAutoSelectMoveTool),"willRenderShapeControls"in e&&n(32,N=e.willRenderShapeControls),"willRenderShapeTextControls"in e&&n(33,j=e.willRenderShapeTextControls),"beforeAddShape"in e&&n(34,W=e.beforeAddShape),"beforeRemoveShape"in e&&n(35,V=e.beforeRemoveShape),"beforeDeselectShape"in e&&n(36,U=e.beforeDeselectShape),"beforeSelectShape"in e&&n(37,H=e.beforeSelectShape),"beforeUpdateShape"in e&&n(38,G=e.beforeUpdateShape),"markupEditorWillStartInteraction"in e&&n(39,Z=e.markupEditorWillStartInteraction)},e.$$.update=()=>{262144&e.$$.dirty[1]&&n(47,r=l?l.scale:1),196608&e.$$.dirty[1]&&n(41,o=e=>{const t=Me(e);return t.x-=a.x,t.y-=a.y,t.x/=r,t.y/=r,t}),196608&e.$$.dirty[1]&&n(40,i=e=>{const t=Me(e);return t.x*=r,t.y*=r,t.x+=a.x,t.y+=a.y,t})},[E,s,c,u,d,p,h,f,m,g,y,$,b,v,x,w,S,k,C,T,M,P,R,I,A,L,z,F,O,D,_,B,N,j,W,V,U,H,G,Z,i,o,X,Y,q,K,"decorate",r,a,l,function(e){E=e,n(0,E)},function(t){oa.call(this,e,t)}]}var k$={util:["decorate",class extends Na{constructor(e){super(),Ba(this,e,S$,w$,ai,{name:46,isActive:1,isActiveFraction:2,isVisible:3,stores:4,locale:5,markupEditorToolbar:6,markupEditorToolStyles:7,markupEditorToolRetainStyles:8,markupEditorShapeStyleControls:9,markupEditorToolSelectRadius:10,markupEditorTextInputMode:11,markupEditorToolShareStyles:12,willRenderShapePresetToolbar:13,markupEditorGridSize:14,markupEditorSnapThreshold:15,markupEditorSnapToContext:16,decorateGridSize:17,decorateSnapToContext:18,decorateTools:19,decorateToolShapes:20,decorateShapeControls:21,decorateActiveTool:0,decorateEnableButtonFlipVertical:22,decorateEnableSelectImagePreset:23,decorateEnableDropImagePreset:24,decoratePresets:25,decorateWillRenderShapePresetToolbar:26,enableSelectToolToAddShape:27,enableTapToAddText:28,enableViewTool:29,enableMoveTool:30,enableAutoSelectMoveTool:31,willRenderShapeControls:32,willRenderShapeTextControls:33,beforeAddShape:34,beforeRemoveShape:35,beforeDeselectShape:36,beforeSelectShape:37,beforeUpdateShape:38,markupEditorWillStartInteraction:39},null,[-1,-1])}get name(){return this.$$.ctx[46]}get isActive(){return this.$$.ctx[1]}set isActive(e){this.$$set({isActive:e}),$a()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),$a()}get isVisible(){return this.$$.ctx[3]}set isVisible(e){this.$$set({isVisible:e}),$a()}get stores(){return this.$$.ctx[4]}set stores(e){this.$$set({stores:e}),$a()}get locale(){return this.$$.ctx[5]}set locale(e){this.$$set({locale:e}),$a()}get markupEditorToolbar(){return this.$$.ctx[6]}set markupEditorToolbar(e){this.$$set({markupEditorToolbar:e}),$a()}get markupEditorToolStyles(){return this.$$.ctx[7]}set markupEditorToolStyles(e){this.$$set({markupEditorToolStyles:e}),$a()}get markupEditorToolRetainStyles(){return this.$$.ctx[8]}set markupEditorToolRetainStyles(e){this.$$set({markupEditorToolRetainStyles:e}),$a()}get markupEditorShapeStyleControls(){return this.$$.ctx[9]}set markupEditorShapeStyleControls(e){this.$$set({markupEditorShapeStyleControls:e}),$a()}get markupEditorToolSelectRadius(){return this.$$.ctx[10]}set markupEditorToolSelectRadius(e){this.$$set({markupEditorToolSelectRadius:e}),$a()}get markupEditorTextInputMode(){return this.$$.ctx[11]}set markupEditorTextInputMode(e){this.$$set({markupEditorTextInputMode:e}),$a()}get markupEditorToolShareStyles(){return this.$$.ctx[12]}set markupEditorToolShareStyles(e){this.$$set({markupEditorToolShareStyles:e}),$a()}get willRenderShapePresetToolbar(){return this.$$.ctx[13]}set willRenderShapePresetToolbar(e){this.$$set({willRenderShapePresetToolbar:e}),$a()}get markupEditorGridSize(){return this.$$.ctx[14]}set markupEditorGridSize(e){this.$$set({markupEditorGridSize:e}),$a()}get markupEditorSnapThreshold(){return this.$$.ctx[15]}set markupEditorSnapThreshold(e){this.$$set({markupEditorSnapThreshold:e}),$a()}get markupEditorSnapToContext(){return this.$$.ctx[16]}set markupEditorSnapToContext(e){this.$$set({markupEditorSnapToContext:e}),$a()}get decorateGridSize(){return this.$$.ctx[17]}set decorateGridSize(e){this.$$set({decorateGridSize:e}),$a()}get decorateSnapToContext(){return this.$$.ctx[18]}set decorateSnapToContext(e){this.$$set({decorateSnapToContext:e}),$a()}get decorateTools(){return this.$$.ctx[19]}set decorateTools(e){this.$$set({decorateTools:e}),$a()}get decorateToolShapes(){return this.$$.ctx[20]}set decorateToolShapes(e){this.$$set({decorateToolShapes:e}),$a()}get decorateShapeControls(){return this.$$.ctx[21]}set decorateShapeControls(e){this.$$set({decorateShapeControls:e}),$a()}get decorateActiveTool(){return this.$$.ctx[0]}set decorateActiveTool(e){this.$$set({decorateActiveTool:e}),$a()}get decorateEnableButtonFlipVertical(){return this.$$.ctx[22]}set decorateEnableButtonFlipVertical(e){this.$$set({decorateEnableButtonFlipVertical:e}),$a()}get decorateEnableSelectImagePreset(){return this.$$.ctx[23]}set decorateEnableSelectImagePreset(e){this.$$set({decorateEnableSelectImagePreset:e}),$a()}get decorateEnableDropImagePreset(){return this.$$.ctx[24]}set decorateEnableDropImagePreset(e){this.$$set({decorateEnableDropImagePreset:e}),$a()}get decoratePresets(){return this.$$.ctx[25]}set decoratePresets(e){this.$$set({decoratePresets:e}),$a()}get decorateWillRenderShapePresetToolbar(){return this.$$.ctx[26]}set decorateWillRenderShapePresetToolbar(e){this.$$set({decorateWillRenderShapePresetToolbar:e}),$a()}get enableSelectToolToAddShape(){return this.$$.ctx[27]}set enableSelectToolToAddShape(e){this.$$set({enableSelectToolToAddShape:e}),$a()}get enableTapToAddText(){return this.$$.ctx[28]}set enableTapToAddText(e){this.$$set({enableTapToAddText:e}),$a()}get enableViewTool(){return this.$$.ctx[29]}set enableViewTool(e){this.$$set({enableViewTool:e}),$a()}get enableMoveTool(){return this.$$.ctx[30]}set enableMoveTool(e){this.$$set({enableMoveTool:e}),$a()}get enableAutoSelectMoveTool(){return this.$$.ctx[31]}set enableAutoSelectMoveTool(e){this.$$set({enableAutoSelectMoveTool:e}),$a()}get willRenderShapeControls(){return this.$$.ctx[32]}set willRenderShapeControls(e){this.$$set({willRenderShapeControls:e}),$a()}get willRenderShapeTextControls(){return this.$$.ctx[33]}set willRenderShapeTextControls(e){this.$$set({willRenderShapeTextControls:e}),$a()}get beforeAddShape(){return this.$$.ctx[34]}set beforeAddShape(e){this.$$set({beforeAddShape:e}),$a()}get beforeRemoveShape(){return this.$$.ctx[35]}set beforeRemoveShape(e){this.$$set({beforeRemoveShape:e}),$a()}get beforeDeselectShape(){return this.$$.ctx[36]}set beforeDeselectShape(e){this.$$set({beforeDeselectShape:e}),$a()}get beforeSelectShape(){return this.$$.ctx[37]}set beforeSelectShape(e){this.$$set({beforeSelectShape:e}),$a()}get beforeUpdateShape(){return this.$$.ctx[38]}set beforeUpdateShape(e){this.$$set({beforeUpdateShape:e}),$a()}get markupEditorWillStartInteraction(){return this.$$.ctx[39]}set markupEditorWillStartInteraction(e){this.$$set({markupEditorWillStartInteraction:e}),$a()}}]};function C$(e){let t,n;return t=new m$({props:{stores:e[3],locale:e[4],isActive:e[0],isActiveFraction:e[1],isVisible:e[2],mapScreenPointToImagePoint:e[25],mapImagePointToScreenPoint:e[24],utilKey:"sticker",shapePresets:e[5],shapes:e[6]?e[34]:e[35],toolActive:"preset",imageFlipX:!!e[6]&&e[23],imageFlipY:!!e[6]&&e[22],imageRotation:e[6]?e[30]:0,parentRect:e[6]?e[36]:e[32],snapThreshold:e[28],gridSize:e[27],enableSnapToContext:e[26],enablePresetDropImage:e[7],enablePresetSelectImage:e[29],enableButtonFlipVertical:e[10]||e[8],toolSelectRadius:e[14],willStartInteraction:e[21],willRenderPresetToolbar:e[11]||e[9]||e[15],hooks:{willRenderShapeControls:e[12],willRenderShapeTextControls:e[13],beforeAddShape:e[16],beforeRemoveShape:e[17],beforeDeselectShape:e[18],beforeSelectShape:e[19],beforeUpdateShape:e[20]}}}),t.$on("measure",e[59]),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};8&n[0]&&(r.stores=e[3]),16&n[0]&&(r.locale=e[4]),1&n[0]&&(r.isActive=e[0]),2&n[0]&&(r.isActiveFraction=e[1]),4&n[0]&&(r.isVisible=e[2]),33554432&n[0]&&(r.mapScreenPointToImagePoint=e[25]),16777216&n[0]&&(r.mapImagePointToScreenPoint=e[24]),32&n[0]&&(r.shapePresets=e[5]),64&n[0]&&(r.shapes=e[6]?e[34]:e[35]),8388672&n[0]&&(r.imageFlipX=!!e[6]&&e[23]),4194368&n[0]&&(r.imageFlipY=!!e[6]&&e[22]),1073741888&n[0]&&(r.imageRotation=e[6]?e[30]:0),64&n[0]&&(r.parentRect=e[6]?e[36]:e[32]),268435456&n[0]&&(r.snapThreshold=e[28]),134217728&n[0]&&(r.gridSize=e[27]),67108864&n[0]&&(r.enableSnapToContext=e[26]),128&n[0]&&(r.enablePresetDropImage=e[7]),536870912&n[0]&&(r.enablePresetSelectImage=e[29]),1280&n[0]&&(r.enableButtonFlipVertical=e[10]||e[8]),16384&n[0]&&(r.toolSelectRadius=e[14]),2097152&n[0]&&(r.willStartInteraction=e[21]),35328&n[0]&&(r.willRenderPresetToolbar=e[11]||e[9]||e[15]),2043904&n[0]&&(r.hooks={willRenderShapeControls:e[12],willRenderShapeTextControls:e[13],beforeAddShape:e[16],beforeRemoveShape:e[17],beforeDeselectShape:e[18],beforeSelectShape:e[19],beforeUpdateShape:e[20]}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function T$(e,t,n){let r,o,i,a,l,s,c,u,d,p,h,f,m,g,y,{isActive:$}=t,{isActiveFraction:b}=t,{isVisible:v}=t,{stores:x}=t,{locale:w={}}=t,{stickers:S=[]}=t,{stickerForceEnable:k=!1}=t,{stickerStickToImage:C=!1}=t,{stickerEnableSelectImagePreset:T=!0}=t,{stickerEnableDropImagePreset:M=!0}=t,{stickerEnableButtonFlipVertical:P=!1}=t,{stickerWillRenderShapePresetToolbar:E}=t,{stickerEnableSelectImage:R=!0}=t,{stickersEnableButtonFlipVertical:I=!1}=t,{stickersWillRenderShapePresetToolbar:A}=t,{markupEditorGridSize:L=0}=t,{markupEditorSnapThreshold:z=0}=t,{markupEditorSnapToContext:F=!1}=t,{annotateGridSize:O}=t,{annotateSnapToContext:D}=t,{decorateGridSize:_}=t,{decorateSnapToContext:B}=t,{willRenderShapeControls:N}=t,{willRenderShapeTextControls:j}=t,{markupEditorToolSelectRadius:W}=t,{willRenderShapePresetToolbar:V}=t,{beforeAddShape:U}=t,{beforeRemoveShape:H}=t,{beforeDeselectShape:G}=t,{beforeSelectShape:Z}=t,{beforeUpdateShape:X}=t,{markupEditorWillStartInteraction:Y}=t;const{rootRect:q,imageCropRect:K,imageSelectionRectPresentation:Q,imageAnnotation:J,imageDecoration:ee,imageSize:te,imageTransforms:ne,imageTransformsInterpolated:re,imageRotation:oe,imageFlipX:ie,imageFlipY:ae}=x;return ci(e,q,(e=>n(58,g=e))),ci(e,Q,(e=>n(54,u=e))),ci(e,te,(e=>n(57,m=e))),ci(e,ne,(e=>n(56,f=e))),ci(e,re,(e=>n(55,h=e))),ci(e,oe,(e=>n(30,y=e))),ci(e,ie,(e=>n(23,p=e))),ci(e,ae,(e=>n(22,d=e))),e.$$set=e=>{"isActive"in e&&n(0,$=e.isActive),"isActiveFraction"in e&&n(1,b=e.isActiveFraction),"isVisible"in e&&n(2,v=e.isVisible),"stores"in e&&n(3,x=e.stores),"locale"in e&&n(4,w=e.locale),"stickers"in e&&n(5,S=e.stickers),"stickerForceEnable"in e&&n(43,k=e.stickerForceEnable),"stickerStickToImage"in e&&n(6,C=e.stickerStickToImage),"stickerEnableSelectImagePreset"in e&&n(44,T=e.stickerEnableSelectImagePreset),"stickerEnableDropImagePreset"in e&&n(7,M=e.stickerEnableDropImagePreset),"stickerEnableButtonFlipVertical"in e&&n(8,P=e.stickerEnableButtonFlipVertical),"stickerWillRenderShapePresetToolbar"in e&&n(9,E=e.stickerWillRenderShapePresetToolbar),"stickerEnableSelectImage"in e&&n(45,R=e.stickerEnableSelectImage),"stickersEnableButtonFlipVertical"in e&&n(10,I=e.stickersEnableButtonFlipVertical),"stickersWillRenderShapePresetToolbar"in e&&n(11,A=e.stickersWillRenderShapePresetToolbar),"markupEditorGridSize"in e&&n(46,L=e.markupEditorGridSize),"markupEditorSnapThreshold"in e&&n(47,z=e.markupEditorSnapThreshold),"markupEditorSnapToContext"in e&&n(48,F=e.markupEditorSnapToContext),"annotateGridSize"in e&&n(49,O=e.annotateGridSize),"annotateSnapToContext"in e&&n(50,D=e.annotateSnapToContext),"decorateGridSize"in e&&n(51,_=e.decorateGridSize),"decorateSnapToContext"in e&&n(52,B=e.decorateSnapToContext),"willRenderShapeControls"in e&&n(12,N=e.willRenderShapeControls),"willRenderShapeTextControls"in e&&n(13,j=e.willRenderShapeTextControls),"markupEditorToolSelectRadius"in e&&n(14,W=e.markupEditorToolSelectRadius),"willRenderShapePresetToolbar"in e&&n(15,V=e.willRenderShapePresetToolbar),"beforeAddShape"in e&&n(16,U=e.beforeAddShape),"beforeRemoveShape"in e&&n(17,H=e.beforeRemoveShape),"beforeDeselectShape"in e&&n(18,G=e.beforeDeselectShape),"beforeSelectShape"in e&&n(19,Z=e.beforeSelectShape),"beforeUpdateShape"in e&&n(20,X=e.beforeUpdateShape),"markupEditorWillStartInteraction"in e&&n(21,Y=e.markupEditorWillStartInteraction)},e.$$.update=()=>{16777216&e.$$.dirty[1]&&n(53,r=h?h.scale:1),24576&e.$$.dirty[1]&&n(29,o=!1!==T&&R),65536&e.$$.dirty[1]&&n(28,i=z),64&e.$$.dirty[0]|1343488&e.$$.dirty[1]&&n(27,a=C?Wn(O)?O:L:Wn(_)?_:L),64&e.$$.dirty[0]|2752512&e.$$.dirty[1]&&n(26,l=C?$$(D)?D:F:$$(B)?B:F),12582976&e.$$.dirty[0]|264241152&e.$$.dirty[1]&&n(25,s=C?e=>y$(e,g,m,h.origin,h.translation,f.rotation.z,h.scale,p,d):e=>{const t=Me(e);return t.x-=u.x,t.y-=u.y,t.x/=r,t.y/=r,t}),12582976&e.$$.dirty[0]|264241152&e.$$.dirty[1]&&n(24,c=C?e=>g$(e,g,m,h.origin,h.translation,f.rotation.z,h.scale,p,d):e=>{const t=Me(e);return t.x*=r,t.y*=r,t.x+=u.x,t.y+=u.y,t})},[$,b,v,x,w,S,C,M,P,E,I,A,N,j,W,V,U,H,G,Z,X,Y,d,p,c,s,l,a,i,o,y,q,K,Q,J,ee,te,ne,re,oe,ie,ae,"sticker",k,T,R,L,z,F,O,D,_,B,r,u,h,f,m,g,function(t){oa.call(this,e,t)}]}var M$={util:["sticker",class extends Na{constructor(e){super(),Ba(this,e,T$,C$,ai,{name:42,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,stickers:5,stickerForceEnable:43,stickerStickToImage:6,stickerEnableSelectImagePreset:44,stickerEnableDropImagePreset:7,stickerEnableButtonFlipVertical:8,stickerWillRenderShapePresetToolbar:9,stickerEnableSelectImage:45,stickersEnableButtonFlipVertical:10,stickersWillRenderShapePresetToolbar:11,markupEditorGridSize:46,markupEditorSnapThreshold:47,markupEditorSnapToContext:48,annotateGridSize:49,annotateSnapToContext:50,decorateGridSize:51,decorateSnapToContext:52,willRenderShapeControls:12,willRenderShapeTextControls:13,markupEditorToolSelectRadius:14,willRenderShapePresetToolbar:15,beforeAddShape:16,beforeRemoveShape:17,beforeDeselectShape:18,beforeSelectShape:19,beforeUpdateShape:20,markupEditorWillStartInteraction:21},null,[-1,-1])}get name(){return this.$$.ctx[42]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),$a()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),$a()}get isVisible(){return this.$$.ctx[2]}set isVisible(e){this.$$set({isVisible:e}),$a()}get stores(){return this.$$.ctx[3]}set stores(e){this.$$set({stores:e}),$a()}get locale(){return this.$$.ctx[4]}set locale(e){this.$$set({locale:e}),$a()}get stickers(){return this.$$.ctx[5]}set stickers(e){this.$$set({stickers:e}),$a()}get stickerForceEnable(){return this.$$.ctx[43]}set stickerForceEnable(e){this.$$set({stickerForceEnable:e}),$a()}get stickerStickToImage(){return this.$$.ctx[6]}set stickerStickToImage(e){this.$$set({stickerStickToImage:e}),$a()}get stickerEnableSelectImagePreset(){return this.$$.ctx[44]}set stickerEnableSelectImagePreset(e){this.$$set({stickerEnableSelectImagePreset:e}),$a()}get stickerEnableDropImagePreset(){return this.$$.ctx[7]}set stickerEnableDropImagePreset(e){this.$$set({stickerEnableDropImagePreset:e}),$a()}get stickerEnableButtonFlipVertical(){return this.$$.ctx[8]}set stickerEnableButtonFlipVertical(e){this.$$set({stickerEnableButtonFlipVertical:e}),$a()}get stickerWillRenderShapePresetToolbar(){return this.$$.ctx[9]}set stickerWillRenderShapePresetToolbar(e){this.$$set({stickerWillRenderShapePresetToolbar:e}),$a()}get stickerEnableSelectImage(){return this.$$.ctx[45]}set stickerEnableSelectImage(e){this.$$set({stickerEnableSelectImage:e}),$a()}get stickersEnableButtonFlipVertical(){return this.$$.ctx[10]}set stickersEnableButtonFlipVertical(e){this.$$set({stickersEnableButtonFlipVertical:e}),$a()}get stickersWillRenderShapePresetToolbar(){return this.$$.ctx[11]}set stickersWillRenderShapePresetToolbar(e){this.$$set({stickersWillRenderShapePresetToolbar:e}),$a()}get markupEditorGridSize(){return this.$$.ctx[46]}set markupEditorGridSize(e){this.$$set({markupEditorGridSize:e}),$a()}get markupEditorSnapThreshold(){return this.$$.ctx[47]}set markupEditorSnapThreshold(e){this.$$set({markupEditorSnapThreshold:e}),$a()}get markupEditorSnapToContext(){return this.$$.ctx[48]}set markupEditorSnapToContext(e){this.$$set({markupEditorSnapToContext:e}),$a()}get annotateGridSize(){return this.$$.ctx[49]}set annotateGridSize(e){this.$$set({annotateGridSize:e}),$a()}get annotateSnapToContext(){return this.$$.ctx[50]}set annotateSnapToContext(e){this.$$set({annotateSnapToContext:e}),$a()}get decorateGridSize(){return this.$$.ctx[51]}set decorateGridSize(e){this.$$set({decorateGridSize:e}),$a()}get decorateSnapToContext(){return this.$$.ctx[52]}set decorateSnapToContext(e){this.$$set({decorateSnapToContext:e}),$a()}get willRenderShapeControls(){return this.$$.ctx[12]}set willRenderShapeControls(e){this.$$set({willRenderShapeControls:e}),$a()}get willRenderShapeTextControls(){return this.$$.ctx[13]}set willRenderShapeTextControls(e){this.$$set({willRenderShapeTextControls:e}),$a()}get markupEditorToolSelectRadius(){return this.$$.ctx[14]}set markupEditorToolSelectRadius(e){this.$$set({markupEditorToolSelectRadius:e}),$a()}get willRenderShapePresetToolbar(){return this.$$.ctx[15]}set willRenderShapePresetToolbar(e){this.$$set({willRenderShapePresetToolbar:e}),$a()}get beforeAddShape(){return this.$$.ctx[16]}set beforeAddShape(e){this.$$set({beforeAddShape:e}),$a()}get beforeRemoveShape(){return this.$$.ctx[17]}set beforeRemoveShape(e){this.$$set({beforeRemoveShape:e}),$a()}get beforeDeselectShape(){return this.$$.ctx[18]}set beforeDeselectShape(e){this.$$set({beforeDeselectShape:e}),$a()}get beforeSelectShape(){return this.$$.ctx[19]}set beforeSelectShape(e){this.$$set({beforeSelectShape:e}),$a()}get beforeUpdateShape(){return this.$$.ctx[20]}set beforeUpdateShape(e){this.$$set({beforeUpdateShape:e}),$a()}get markupEditorWillStartInteraction(){return this.$$.ctx[21]}set markupEditorWillStartInteraction(e){this.$$set({markupEditorWillStartInteraction:e}),$a()}},e=>{let{stickers:t,stickerEnableSelectImage:n,stickerEnableSelectImagePreset:r,stickerEnableDropImagePreset:o,stickerForceEnable:i}=e;return t&&t.length||n||r||o||i}]};function P$(e){let t,n,r,o,i,a=(e[14](e[34].value)||"")+"",l=(U(e[34].label)?e[34].label(e[1]):e[34].label)+"";return{c(){t=Ri("div"),n=new Ui(!1),r=Li(),o=Ri("span"),i=Ai(l),n.a=r,_i(t,"slot","option")},m(e,l){Pi(e,t,l),n.m(a,t),Ci(t,r),Ci(t,o),Ci(o,i)},p(e,t){8&t[1]&&a!==(a=(e[14](e[34].value)||"")+"")&&n.p(a),2&t[0]|8&t[1]&&l!==(l=(U(e[34].label)?e[34].label(e[1]):e[34].label)+"")&&ji(i,l)},d(e){e&&Ei(t)}}}function E$(e){let t,n;return t=new zd({props:{locale:e[1],class:"PinturaControlList",layout:"row",options:e[2],selectedIndex:e[6],onchange:e[12],$$slots:{option:[P$,e=>{let{option:t}=e;return{34:t}},e=>{let{option:t}=e;return[0,t?8:0]}]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};2&n[0]&&(r.locale=e[1]),4&n[0]&&(r.options=e[2]),64&n[0]&&(r.selectedIndex=e[6]),2&n[0]|24&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function R$(e){let t,n,r,o,i;return n=new Cy({props:{locale:e[1],class:"PinturaControlPanels",shape:e[4],onchange:e[13],controls:e[3],scrollElasticity:e[7]}}),o=new yu({props:{elasticity:e[10],$$slots:{default:[E$]},$$scope:{ctx:e}}}),{c(){t=Ri("div"),Oa(n.$$.fragment),r=Li(),Oa(o.$$.fragment),_i(t,"slot","footer"),_i(t,"style",e[5])},m(e,a){Pi(e,t,a),Da(n,t,null),Ci(t,r),Da(o,t,null),i=!0},p(e,r){const a={};2&r[0]&&(a.locale=e[1]),16&r[0]&&(a.shape=e[4]),8&r[0]&&(a.controls=e[3]),128&r[0]&&(a.scrollElasticity=e[7]),n.$set(a);const l={};70&r[0]|16&r[1]&&(l.$$scope={dirty:r,ctx:e}),o.$set(l),(!i||32&r[0])&&_i(t,"style",e[5])},i(e){i||(Ca(n.$$.fragment,e),Ca(o.$$.fragment,e),i=!0)},o(e){Ta(n.$$.fragment,e),Ta(o.$$.fragment,e),i=!1},d(e){e&&Ei(t),_a(n),_a(o)}}}function I$(e){let t,n;return t=new Em({props:{$$slots:{footer:[R$]},$$scope:{ctx:e}}}),t.$on("measure",e[23]),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};254&n[0]|16&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function A$(e,t,n){let r,o,i,a,l,s,c,u,d=Jo,p=()=>(d(),d=li(h,(e=>n(20,l=e))),h);e.$$.on_destroy.push((()=>d()));let{isActive:h}=t;p();let{stores:f}=t,{locale:m={}}=t,{frameStyles:g={}}=t,{frameOptions:y=[]}=t,{markupEditorShapeStyleControls:$}=t;const b=ra("elasticityMultiplier");ci(e,b,(e=>n(22,u=e)));const{history:v,animation:x,scrollElasticity:w,imageFrame:S,allowPan:k,allowZoom:C,allowZoomControls:T,allowPlayPause:M}=f;ci(e,x,(e=>n(21,s=e))),ci(e,S,(e=>n(4,c=e)));let P,E={};const R=Ks(s?20:0);return ci(e,R,(e=>n(19,a=e))),e.$$set=e=>{"isActive"in e&&p(n(0,h=e.isActive)),"stores"in e&&n(17,f=e.stores),"locale"in e&&n(1,m=e.locale),"frameStyles"in e&&n(18,g=e.frameStyles),"frameOptions"in e&&n(2,y=e.frameOptions),"markupEditorShapeStyleControls"in e&&n(3,$=e.markupEditorShapeStyleControls)},e.$$.update=()=>{1048576&e.$$.dirty[0]&&k.set(l),1048576&e.$$.dirty[0]&&C.set(l),1048576&e.$$.dirty[0]&&T.set(l),1048576&e.$$.dirty[0]&&l&&M.set(!0),4194304&e.$$.dirty[0]&&n(7,r=u*w),20&e.$$.dirty[0]&&n(6,o=c?y.findIndex((e=>{let[t]=e;return t===c.id})):0),3145728&e.$$.dirty[0]&&s&&R.set(l?0:20),524288&e.$$.dirty[0]&&n(5,i=a?"transform: translateY(".concat(a,"px)"):void 0)},[h,m,y,$,c,i,o,r,b,x,w,S,e=>{let{value:t}=e;const n=g[t];if(!n||!n.shape)return S.set(void 0),void v.write();const{shape:r}=n,o={id:t,...Cr(r),...Object.keys(E).reduce(((e,t)=>r[t]?(e[t]=E[t],e):e),{})};S.set(o),v.write()},function(e){Un(e,"frameColor")&&(E.frameColor=e.frameColor),c&&(Co(c,e),S.set(c),clearTimeout(P),P=setTimeout((()=>{v.write()}),200))},e=>{const t=g[e];var n;if(t&&t.thumb)return n=t.thumb,/div/i.test(n)||Ty(n)?n:/rect|path|circle|line|<g>/i.test(n)?'<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" stroke-width="1" stroke="currentColor" fill="none" aria-hidden="true" focusable="false" stroke-linecap="round" stroke-linejoin="round">'.concat(n,"</svg>"):'<img src="'.concat(n,'" alt=""/>')},R,"frame",f,g,a,l,s,u,function(t){oa.call(this,e,t)}]}var L$={util:["frame",class extends Na{constructor(e){super(),Ba(this,e,A$,I$,ai,{name:16,isActive:0,stores:17,locale:1,frameStyles:18,frameOptions:2,markupEditorShapeStyleControls:3},null,[-1,-1])}get name(){return this.$$.ctx[16]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),$a()}get stores(){return this.$$.ctx[17]}set stores(e){this.$$set({stores:e}),$a()}get locale(){return this.$$.ctx[1]}set locale(e){this.$$set({locale:e}),$a()}get frameStyles(){return this.$$.ctx[18]}set frameStyles(e){this.$$set({frameStyles:e}),$a()}get frameOptions(){return this.$$.ctx[2]}set frameOptions(e){this.$$set({frameOptions:e}),$a()}get markupEditorShapeStyleControls(){return this.$$.ctx[3]}set markupEditorShapeStyleControls(e){this.$$set({markupEditorShapeStyleControls:e}),$a()}},e=>{let{src:t}=e;return t&&!bh(t)}]};function z$(e){let t,n,r,o,i,a,l,s;return{c(){t=Ri("div"),n=Ri("input"),o=Li(),i=Ri("label"),a=Ai(e[1]),_i(n,"id",e[0]),_i(n,"type","number"),_i(n,"min","1"),_i(n,"inputmode","numeric"),_i(n,"pattern","[0-9]*"),_i(n,"data-state",e[3]),_i(n,"autocomplete","off"),_i(n,"placeholder",e[4]),n.value=r=void 0===e[5]?"":e[7](e[5]+""),_i(i,"for",e[0]),_i(i,"title",e[2]),_i(i,"aria-label",e[2]),_i(t,"class","PinturaInputDimension")},m(r,c){Pi(r,t,c),Ci(t,n),Ci(t,o),Ci(t,i),Ci(i,a),l||(s=Fi(n,"input",e[8]),l=!0)},p(e,t){let[o]=t;1&o&&_i(n,"id",e[0]),8&o&&_i(n,"data-state",e[3]),16&o&&_i(n,"placeholder",e[4]),160&o&&r!==(r=void 0===e[5]?"":e[7](e[5]+""))&&n.value!==r&&(n.value=r),2&o&&ji(a,e[1]),1&o&&_i(i,"for",e[0]),4&o&&_i(i,"title",e[2]),4&o&&_i(i,"aria-label",e[2])},i:Jo,o:Jo,d(e){e&&Ei(t),l=!1,s()}}}function F$(e,t,n){let{id:r}=t,{label:o}=t,{title:i}=t,{state:a}=t,{placeholder:l}=t,{value:s}=t,{onchange:c}=t,{format:u=(e=>e.replace(/\D/g,""))}=t;return e.$$set=e=>{"id"in e&&n(0,r=e.id),"label"in e&&n(1,o=e.label),"title"in e&&n(2,i=e.title),"state"in e&&n(3,a=e.state),"placeholder"in e&&n(4,l=e.placeholder),"value"in e&&n(5,s=e.value),"onchange"in e&&n(6,c=e.onchange),"format"in e&&n(7,u=e.format)},[r,o,i,a,l,s,c,u,e=>c(u(e.currentTarget.value))]}class O$ extends Na{constructor(e){super(),Ba(this,e,F$,z$,ai,{id:0,label:1,title:2,state:3,placeholder:4,value:5,onchange:6,format:7})}}function D$(e){let t;return{c(){t=Ii("g")},m(n,r){Pi(n,t,r),t.innerHTML=e[2]},p(e,n){4&n&&(t.innerHTML=e[2])},d(e){e&&Ei(t)}}}function _$(e){let t,n,r,o,i,a,l,s;return i=new Qc({props:{$$slots:{default:[D$]},$$scope:{ctx:e}}}),{c(){t=Ri("div"),n=Ri("input"),r=Li(),o=Ri("label"),Oa(i.$$.fragment),_i(n,"id",e[0]),_i(n,"class","implicit"),_i(n,"type","checkbox"),n.checked=e[1],_i(o,"for",e[0]),_i(o,"title",e[3])},m(c,u){Pi(c,t,u),Ci(t,n),Ci(t,r),Ci(t,o),Da(i,o,null),a=!0,l||(s=Fi(n,"change",e[5]),l=!0)},p(e,t){let[r]=t;(!a||1&r)&&_i(n,"id",e[0]),(!a||2&r)&&(n.checked=e[1]);const l={};68&r&&(l.$$scope={dirty:r,ctx:e}),i.$set(l),(!a||1&r)&&_i(o,"for",e[0]),(!a||8&r)&&_i(o,"title",e[3])},i(e){a||(Ca(i.$$.fragment,e),a=!0)},o(e){Ta(i.$$.fragment,e),a=!1},d(e){e&&Ei(t),_a(i),l=!1,s()}}}function B$(e,t,n){let{id:r}=t,{locked:o}=t,{icon:i}=t,{title:a}=t,{onchange:l}=t;return e.$$set=e=>{"id"in e&&n(0,r=e.id),"locked"in e&&n(1,o=e.locked),"icon"in e&&n(2,i=e.icon),"title"in e&&n(3,a=e.title),"onchange"in e&&n(4,l=e.onchange)},[r,o,i,a,l,e=>l(e.currentTarget.checked)]}class N$ extends Na{constructor(e){super(),Ba(this,e,B$,_$,ai,{id:0,locked:1,icon:2,title:3,onchange:4})}}function j$(e){let t;return{c(){t=Ai("Save")},m(e,n){Pi(e,t,n)},d(e){e&&Ei(t)}}}function W$(e){let t,n,r,o,i,a,l,s,c,u,d,p,h,f=e[1].resizeLabelFormCaption+"";return s=new ah({props:{items:e[4]}}),u=new au({props:{type:"submit",class:"implicit",$$slots:{default:[j$]},$$scope:{ctx:e}}}),{c(){t=Ri("form"),n=Ri("div"),r=Ri("fieldset"),o=Ri("legend"),i=Ai(f),a=Li(),l=Ri("div"),Oa(s.$$.fragment),c=Li(),Oa(u.$$.fragment),_i(o,"class","implicit"),_i(l,"class","PinturaFieldsetInner"),_i(n,"class","PinturaFormInner"),_i(t,"slot","footer"),_i(t,"style",e[3])},m(f,m){Pi(f,t,m),Ci(t,n),Ci(n,r),Ci(r,o),Ci(o,i),Ci(r,a),Ci(r,l),Da(s,l,null),e[65](l),Ci(n,c),Da(u,n,null),d=!0,p||(h=[Fi(l,"focusin",e[15]),Fi(l,"focusout",e[16]),Fi(t,"submit",Oi(e[17]))],p=!0)},p(e,n){(!d||2&n[0])&&f!==(f=e[1].resizeLabelFormCaption+"")&&ji(i,f);const r={};16&n[0]&&(r.items=e[4]),s.$set(r);const o={};16&n[3]&&(o.$$scope={dirty:n,ctx:e}),u.$set(o),(!d||8&n[0])&&_i(t,"style",e[3])},i(e){d||(Ca(s.$$.fragment,e),Ca(u.$$.fragment,e),d=!0)},o(e){Ta(s.$$.fragment,e),Ta(u.$$.fragment,e),d=!1},d(n){n&&Ei(t),_a(s),e[65](null),_a(u),p=!1,oi(h)}}}function V$(e){let t,n;return t=new Em({props:{$$slots:{footer:[W$]},$$scope:{ctx:e}}}),t.$on("measure",e[66]),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};30&n[0]|16&n[3]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function U$(e,t,n){let r,o,i,a,l,s,c,u,d,p,h,f,m,g,y,$,b,v,x,w,S,k,C,T,M,P,E,R,I,A,L=Jo,z=()=>(L(),L=li(O,(e=>n(49,h=e))),O);e.$$.on_destroy.push((()=>L()));const F=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:9999;if(V(e)&&!(e=e.replace(/\D/g,"")).length)return;const r=Math.round(e);return Number.isNaN(r)?void 0:sl(r,t,n)};let{isActive:O}=t;z();let{stores:D}=t,{locale:_={}}=t,{resizeMinSize:B=Qe(1,1)}=t,{resizeMaxSize:N=Qe(9999,9999)}=t,{resizeAspectRatioLocked:j=!1}=t,{resizeEnableButtonLockAspectRatio:W=!0}=t,{resizeSizePresetOptions:U}=t,{resizeWidthPresetOptions:H}=t,{resizeHeightPresetOptions:G}=t,{resizeWillRenderFooter:X=ae}=t;const Y=Ks(0,{stiffness:.15,damping:.3});ci(e,Y,(e=>n(54,$=e)));const{animation:q,imageSize:K,imageCropRect:Q,imageCropRectAspectRatio:J,imageCropAspectRatio:ee,imageOutputSize:te,imageSelectionZoom:ne,imageSelectionPan:re,history:oe,env:le,allowPan:se,allowZoom:ce,allowZoomControls:ue,allowPlayPause:de}=D;ci(e,q,(e=>n(50,f=e))),ci(e,K,(e=>n(73,R=e))),ci(e,Q,(e=>n(52,g=e))),ci(e,J,(e=>n(53,y=e))),ci(e,ee,(e=>n(72,T=e))),ci(e,te,(e=>n(61,C=e))),ci(e,ne,(e=>n(74,I=e))),ci(e,re,(e=>n(75,A=e))),ci(e,le,(e=>n(51,m=e)));const pe=Z();let he,fe,me,ge,ye,$e,be=ke();const ve=(e,t,n,r,o)=>null!=e&&n!==t?e>=r[t]&&e<=o[t]?"valid":"invalid":"undetermined",xe=(e,t,n)=>Math.round(null!=e?e/t:n.height),we=()=>{j&&fe&&me&&("width"===ge?n(39,me=Math.round(fe/y)):"height"===ge?n(38,fe=Math.round(me*y)):("width"===ye?n(39,me=Math.round(fe/y)):"height"===ye&&n(38,fe=Math.round(me*y)),Se()))},Se=e=>{let t=F(fe),r=F(me),o=t,i=r,a=o&&i,l=e||y;if(!o&&!i)return;o&&!i?i=Math.round(o/l):i&&!o&&(o=Math.round(i*l)),l=e||a?ie(o,i):y;let s=Qe(o,i);rt(N,s)||(s=Lt(N,l)),rt(s,B)||(s=At(B,l)),n(38,fe=null!=t?Math.round(s.width):void 0),n(39,me=null!=r?Math.round(s.height):void 0)},Ce=()=>{Se();const{width:e,height:t}=C||{};e===fe&&t===me||(fe||me?(fe&&me&&yi(ee,T=fe/me,T),yi(te,C=Qe(fe,me),C)):(yi(ee,T=R.width/R.height,T),yi(ee,T=void 0,T),yi(te,C=void 0,C)),oe.write())},Te=te.subscribe((e=>{if(!e)return n(38,fe=void 0),void n(39,me=void 0);n(38,fe=e.width),n(39,me=e.height),Se()})),Me=ee.subscribe((e=>{(fe||me)&&e&&(fe&&me&&ie(fe,me)!==e?(n(39,me=fe/e),Se(e)):Se())})),Pe=e=>V(e[0])?(e[1]=e[1].map(Pe),e):Wn(e)?[e,""+e]:e,Ee=e=>{if(V(e[0]))return e[1]=e[1].map(Ee),e;let[t,n]=e;if(Wn(t)&&Wn(n)){const[e,r]=[t,n];n="".concat(e," &times; ").concat(r),t=[e,r]}return[t,n]},Re=Va();ci(e,Re,(e=>n(60,k=e)));const Ie=Va();ci(e,Ie,(e=>n(64,E=e)));const Ae=Va();ci(e,Ae,(e=>n(58,w=e)));const Le=Va();ci(e,Le,(e=>n(63,P=e)));const ze=Va();ci(e,ze,(e=>n(56,v=e)));const Fe=Va();ci(e,Fe,(e=>n(62,M=e)));const Oe=Ua([te,Ie],((e,t)=>{let[n,r]=e;if(!r)return t(-1);const o=r.findIndex((e=>{let[t]=e;if(!t&&!n)return!0;if(!t)return!1;const[r,o]=t;return n.width===r&&n.height===o}));t(o<0?0:o)}));ci(e,Oe,(e=>n(59,S=e)));const De=Ua([te,Le],((e,t)=>{let[n,r]=e;if(!r)return t(-1);const o=r.findIndex((e=>{let[t]=e;return!t&&!n||!!t&&n.width===t}));t(o<0?0:o)}));ci(e,De,(e=>n(57,x=e)));const _e=Ua([te,Fe],((e,t)=>{let[n,r]=e;if(!r)return t(-1);const o=r.findIndex((e=>{let[t]=e;return!t&&!n||!!t&&n.height===t}));t(o<0?0:o)}));let Be,Ne;ci(e,_e,(e=>n(55,b=e)));const je=ra("redrawTrigger"),We=Ks(f?20:0);return ci(e,We,(e=>n(48,p=e))),ea((()=>{Te(),Me()})),e.$$set=e=>{"isActive"in e&&z(n(0,O=e.isActive)),"stores"in e&&n(30,D=e.stores),"locale"in e&&n(1,_=e.locale),"resizeMinSize"in e&&n(31,B=e.resizeMinSize),"resizeMaxSize"in e&&n(32,N=e.resizeMaxSize),"resizeAspectRatioLocked"in e&&n(28,j=e.resizeAspectRatioLocked),"resizeEnableButtonLockAspectRatio"in e&&n(33,W=e.resizeEnableButtonLockAspectRatio),"resizeSizePresetOptions"in e&&n(34,U=e.resizeSizePresetOptions),"resizeWidthPresetOptions"in e&&n(35,H=e.resizeWidthPresetOptions),"resizeHeightPresetOptions"in e&&n(36,G=e.resizeHeightPresetOptions),"resizeWillRenderFooter"in e&&n(37,X=e.resizeWillRenderFooter)},e.$$.update=()=>{var t;262144&e.$$.dirty[1]&&se.set(!h),262144&e.$$.dirty[1]&&ce.set(!h),262144&e.$$.dirty[1]&&ue.set(!h),262144&e.$$.dirty[1]&&h&&de.set(!0),536870920&e.$$.dirty[1]&&U&&(yi(Re,k=U.map(Ee),k),yi(Ie,E=od(k),E)),536870912&e.$$.dirty[1]&&n(47,a=!!k),268435456&e.$$.dirty[1]|4&e.$$.dirty[2]&&n(46,r=S>-1&&E[S][1]),134217744&e.$$.dirty[1]&&H&&(yi(Ae,w=H.map(Pe),w),yi(Le,P=od(w),P)),134283264&e.$$.dirty[1]&&n(44,l=!a&&w),67108864&e.$$.dirty[1]|2&e.$$.dirty[2]&&n(45,o=x>-1&&P[x][1]),33554464&e.$$.dirty[1]&&G&&(yi(ze,v=G.map(Pe),v),yi(Fe,M=od(v),M)),33619968&e.$$.dirty[1]&&n(43,s=!a&&v),16777216&e.$$.dirty[1]|1&e.$$.dirty[2]&&n(42,i=b>-1&&M[b][1]),77824&e.$$.dirty[1]&&n(41,c=!a&&!l&&!s),268435458&e.$$.dirty[0]|1072824263&e.$$.dirty[1]&&n(4,u=je&&Eh((()=>{return X([a&&["Dropdown","size-presets",{label:r,options:k,onchange:e=>{return(t=e.value)&&!Be&&(Be={...g},Ne=T),t?(yi(ee,T=ie(t[0],t[1]),T),yi(te,C=qe(t),C)):(yi(Q,g=Be,g),yi(ee,T=Ne,T),yi(te,C=void 0,C),Be=void 0,Ne=void 0),void oe.write();var t},selectedIndex:S}],l&&["Dropdown","width-presets",{label:o,options:w,onchange:e=>{n(38,fe=e.value),Ce()},selectedIndex:x}],l&&s&&["span","times",{class:"PinturaResizeLabel",innerHTML:"&times;"}],s&&["Dropdown","height-presets",{label:i,options:v,onchange:e=>{n(39,me=e.value),Ce()},selectedIndex:b}],c&&[O$,"width-input",{id:"width-"+pe,title:_.resizeTitleInputWidth,label:_.resizeLabelInputWidth,placeholder:(e=F(me),t=y,u=g,Math.round(null!=e?e*t:u.width)),value:fe,state:ve(F(fe),"width",ge,B,N),onchange:e=>{n(38,fe=e),we()}}],c&&W&&[N$,"aspect-ratio-lock",{id:"aspect-ratio-lock-"+pe,title:_.resizeTitleButtonMaintainAspectRatio,icon:V(_.resizeIconButtonMaintainAspectRatio)?_.resizeIconButtonMaintainAspectRatio:_.resizeIconButtonMaintainAspectRatio(j,$),locked:j,onchange:e=>{n(28,j=e),we()}}],c&&[O$,"height-input",{id:"height-"+pe,title:_.resizeTitleInputHeight,label:_.resizeLabelInputHeight,placeholder:xe(F(fe),y,g),value:me,state:ve(F(me),"height",ge,B,N),onchange:e=>{n(39,me=e),we()}}]].filter(Boolean),{...m},(()=>je.set({})));var e,t,u})).filter(Boolean)),268435456&e.$$.dirty[0]&&Y.set(j?1:0),512&e.$$.dirty[1]&&ge&&(ye=ge),262144&e.$$.dirty[1]&&h&&(be=A,$e=I),1074003968&e.$$.dirty[1]&&(h?(t=C,yi(re,A=ke(),A),yi(ne,I=t&&g?t.width/g.width||t.height/g.height:1,I)):(yi(re,A=be,A),yi(ne,I=$e,I))),786432&e.$$.dirty[1]&&f&&We.set(h?0:20),131072&e.$$.dirty[1]&&n(3,d=p?"transform: translateY(".concat(p,"px)"):void 0)},[O,_,he,d,u,Y,q,K,Q,J,ee,te,ne,re,le,e=>{const t=e.target.id;/width/.test(t)?n(40,ge="width"):/height/.test(t)?n(40,ge="height"):/aspectRatio/i.test(t)?n(40,ge="lock"):n(40,ge=void 0)},e=>{he.contains(e.relatedTarget)||Ce(),n(40,ge=void 0)},Ce,Re,Ie,Ae,Le,ze,Fe,Oe,De,_e,We,j,"resize",D,B,N,W,U,H,G,X,fe,me,ge,c,i,s,l,o,r,a,p,h,f,m,g,y,$,b,v,x,w,S,k,C,M,P,E,function(e){aa[e?"unshift":"push"]((()=>{he=e,n(2,he)}))},function(t){oa.call(this,e,t)}]}var H$={util:["resize",class extends Na{constructor(e){super(),Ba(this,e,U$,V$,ai,{name:29,isActive:0,stores:30,locale:1,resizeMinSize:31,resizeMaxSize:32,resizeAspectRatioLocked:28,resizeEnableButtonLockAspectRatio:33,resizeSizePresetOptions:34,resizeWidthPresetOptions:35,resizeHeightPresetOptions:36,resizeWillRenderFooter:37},null,[-1,-1,-1,-1])}get name(){return this.$$.ctx[29]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),$a()}get stores(){return this.$$.ctx[30]}set stores(e){this.$$set({stores:e}),$a()}get locale(){return this.$$.ctx[1]}set locale(e){this.$$set({locale:e}),$a()}get resizeMinSize(){return this.$$.ctx[31]}set resizeMinSize(e){this.$$set({resizeMinSize:e}),$a()}get resizeMaxSize(){return this.$$.ctx[32]}set resizeMaxSize(e){this.$$set({resizeMaxSize:e}),$a()}get resizeAspectRatioLocked(){return this.$$.ctx[28]}set resizeAspectRatioLocked(e){this.$$set({resizeAspectRatioLocked:e}),$a()}get resizeEnableButtonLockAspectRatio(){return this.$$.ctx[33]}set resizeEnableButtonLockAspectRatio(e){this.$$set({resizeEnableButtonLockAspectRatio:e}),$a()}get resizeSizePresetOptions(){return this.$$.ctx[34]}set resizeSizePresetOptions(e){this.$$set({resizeSizePresetOptions:e}),$a()}get resizeWidthPresetOptions(){return this.$$.ctx[35]}set resizeWidthPresetOptions(e){this.$$set({resizeWidthPresetOptions:e}),$a()}get resizeHeightPresetOptions(){return this.$$.ctx[36]}set resizeHeightPresetOptions(e){this.$$set({resizeHeightPresetOptions:e}),$a()}get resizeWillRenderFooter(){return this.$$.ctx[37]}set resizeWillRenderFooter(e){this.$$set({resizeWillRenderFooter:e}),$a()}},e=>{let{src:t}=e;return t&&!bh(t)}]};function G$(e){let t,n;return t=new m$({props:{stores:e[3],locale:e[4],isActive:e[0],isActiveFraction:e[1],isVisible:e[2],mapScreenPointToImagePoint:e[9],mapImagePointToScreenPoint:e[8],utilKey:"redact",imageRotation:e[10],imageFlipX:e[7],imageFlipY:e[6],shapes:e[11],toolbar:["rect"],toolShapes:{rectangle:[{x:0,y:0,width:0,height:0}]},toolActive:"rectangle",parentRect:e[13],enablePresetDropImage:!1,enablePresetSelectImage:!1,willStartInteraction:e[5],hooks:{willRenderShapeControls:e[24]}}}),t.$on("measure",e[25]),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){let[r]=n;const o={};8&r&&(o.stores=e[3]),16&r&&(o.locale=e[4]),1&r&&(o.isActive=e[0]),2&r&&(o.isActiveFraction=e[1]),4&r&&(o.isVisible=e[2]),512&r&&(o.mapScreenPointToImagePoint=e[9]),256&r&&(o.mapImagePointToScreenPoint=e[8]),1024&r&&(o.imageRotation=e[10]),128&r&&(o.imageFlipX=e[7]),64&r&&(o.imageFlipY=e[6]),32&r&&(o.willStartInteraction=e[5]),t.$set(o)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function Z$(e,t,n){let r,o,i,a,l,s,c,u,d,{isActive:p}=t,{isActiveFraction:h}=t,{isVisible:f}=t,{stores:m}=t,{locale:g={}}=t,{markupEditorWillStartInteraction:y}=t;const{imageRedaction:$,rootRect:b,imageSize:v,imageRotation:x,imageFlipX:w,imageFlipY:S,imageTransforms:k,imageTransformsInterpolated:C}=m;return ci(e,b,(e=>n(23,u=e))),ci(e,v,(e=>n(22,c=e))),ci(e,x,(e=>n(10,d=e))),ci(e,w,(e=>n(7,a=e))),ci(e,S,(e=>n(6,i=e))),ci(e,k,(e=>n(21,s=e))),ci(e,C,(e=>n(20,l=e))),e.$$set=e=>{"isActive"in e&&n(0,p=e.isActive),"isActiveFraction"in e&&n(1,h=e.isActiveFraction),"isVisible"in e&&n(2,f=e.isVisible),"stores"in e&&n(3,m=e.stores),"locale"in e&&n(4,g=e.locale),"markupEditorWillStartInteraction"in e&&n(5,y=e.markupEditorWillStartInteraction)},e.$$.update=()=>{15728832&e.$$.dirty&&n(9,r=e=>y$(e,u,c,l.origin,l.translation,s.rotation.z,l.scale,a,i)),15728832&e.$$.dirty&&n(8,o=e=>g$(e,u,c,l.origin,l.translation,s.rotation.z,l.scale,a,i))},[p,h,f,m,g,y,i,a,o,r,d,$,b,v,x,w,S,k,C,"redact",l,s,c,u,e=>(((e,t)=>{const n=Cf(e,t);lu(n,(t=>Sf(t)===e))})("to-front",kf(e[0])),e),function(t){oa.call(this,e,t)}]}var X$={util:["redact",class extends Na{constructor(e){super(),Ba(this,e,Z$,G$,ai,{name:19,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,markupEditorWillStartInteraction:5})}get name(){return this.$$.ctx[19]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),$a()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),$a()}get isVisible(){return this.$$.ctx[2]}set isVisible(e){this.$$set({isVisible:e}),$a()}get stores(){return this.$$.ctx[3]}set stores(e){this.$$set({stores:e}),$a()}get locale(){return this.$$.ctx[4]}set locale(e){this.$$set({locale:e}),$a()}get markupEditorWillStartInteraction(){return this.$$.ctx[5]}set markupEditorWillStartInteraction(e){this.$$set({markupEditorWillStartInteraction:e}),$a()}},e=>{let{src:t}=e;return t&&!bh(t)}]};function Y$(e){let t,n,r=(U(e[32].label)?e[32].label(e[1]):e[32].label)+"";return{c(){t=Ri("span"),n=Ai(r)},m(e,r){Pi(e,t,r),Ci(t,n)},p(e,t){2&t[0]|2&t[1]&&r!==(r=(U(e[32].label)?e[32].label(e[1]):e[32].label)+"")&&ji(n,r)},d(e){e&&Ei(t)}}}function q$(e){let t,n,r,o=(e[11](e[32].value)||"")+"",i=e[32].label&&Y$(e);return{c(){t=Ri("div"),n=new Ui(!1),r=Li(),i&&i.c(),n.a=r,_i(t,"slot","option")},m(e,a){Pi(e,t,a),n.m(o,t),Ci(t,r),i&&i.m(t,null)},p(e,r){2&r[1]&&o!==(o=(e[11](e[32].value)||"")+"")&&n.p(o),e[32].label?i?i.p(e,r):(i=Y$(e),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},d(e){e&&Ei(t),i&&i.d()}}}function K$(e){let t,n;return t=new zd({props:{locale:e[1],class:"PinturaControlList",layout:"row",options:e[2],selectedIndex:e[4],onchange:e[10],$$slots:{option:[q$,e=>{let{option:t}=e;return{32:t}},e=>{let{option:t}=e;return[0,t?2:0]}]},$$scope:{ctx:e}}}),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};2&n[0]&&(r.locale=e[1]),4&n[0]&&(r.options=e[2]),16&n[0]&&(r.selectedIndex=e[4]),2&n[0]|6&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function Q$(e){let t,n,r;return n=new yu({props:{elasticity:e[5],$$slots:{default:[K$]},$$scope:{ctx:e}}}),{c(){t=Ri("div"),Oa(n.$$.fragment),_i(t,"slot","footer"),_i(t,"style",e[3])},m(e,o){Pi(e,t,o),Da(n,t,null),r=!0},p(e,o){const i={};32&o[0]&&(i.elasticity=e[5]),22&o[0]|4&o[1]&&(i.$$scope={dirty:o,ctx:e}),n.$set(i),(!r||8&o[0])&&_i(t,"style",e[3])},i(e){r||(Ca(n.$$.fragment,e),r=!0)},o(e){Ta(n.$$.fragment,e),r=!1},d(e){e&&Ei(t),_a(n)}}}function J$(e){let t,n;return t=new Em({props:{$$slots:{footer:[Q$]},$$scope:{ctx:e}}}),t.$on("measure",e[22]),{c(){Oa(t.$$.fragment)},m(e,r){Da(t,e,r),n=!0},p(e,n){const r={};62&n[0]|4&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ca(t.$$.fragment,e),n=!0)},o(e){Ta(t.$$.fragment,e),n=!1},d(e){_a(t,e)}}}function eb(e,t,n){let r,o,i,a,l,s,c,u,d,p,h=Jo,f=()=>(h(),h=li(m,(e=>n(17,s=e))),m);e.$$.on_destroy.push((()=>h()));let{isActive:m}=t;f();let{stores:g}=t,{locale:y={}}=t,{fillOptions:$=[]}=t;const b=e=>e.map((e=>(e=>Hn(e)&&V(e[0])&&Hn(e[1]))(e)?[e[0],b(e[1]),e[2]]:(e=>[Array.isArray(e)&&3===e.length?[...e,1]:e,void 0,{disabled:!1}])(e))),v=ra("elasticityMultiplier");ci(e,v,(e=>n(21,p=e)));const{history:x,animation:w,scrollElasticity:S,imageBackgroundColor:k,imageBackgroundImage:C,allowPan:T,allowZoom:M,allowZoomControls:P,allowPlayPause:E}=g;ci(e,w,(e=>n(18,c=e))),ci(e,k,(e=>n(20,d=e))),ci(e,C,(e=>n(19,u=e)));const R=Ks(c?20:0);return ci(e,R,(e=>n(16,l=e))),e.$$set=e=>{"isActive"in e&&f(n(0,m=e.isActive)),"stores"in e&&n(14,g=e.stores),"locale"in e&&n(1,y=e.locale),"fillOptions"in e&&n(15,$=e.fillOptions)},e.$$.update=()=>{32768&e.$$.dirty[0]&&n(2,r=b($)),131072&e.$$.dirty[0]&&T.set(s),131072&e.$$.dirty[0]&&M.set(s),131072&e.$$.dirty[0]&&P.set(s),131072&e.$$.dirty[0]&&s&&E.set(!0),2097152&e.$$.dirty[0]&&n(5,o=p*S),1572868&e.$$.dirty[0]&&n(4,i=r.findIndex((e=>{let[t]=e;return u?t===u:Array.isArray(t)?hl(t,d):void 0}))||0),393216&e.$$.dirty[0]&&c&&R.set(s?0:20),65536&e.$$.dirty[0]&&n(3,a=l?"transform: translateY(".concat(l,"px)"):void 0)},[m,y,r,a,i,o,v,w,k,C,e=>{let{value:t}=e;V(t)&&(yi(k,d=void 0,d),yi(C,u=t,u)),Hn(t)&&(yi(k,d=t,d),yi(C,u=void 0,u)),x.write()},e=>{if(V(e))return'<div class="PinturaFillTile"><img src="'.concat(e,'" alt="" width="48" height="64"/></div>');if(Hn(e)){const[t,n,r,o]=e.map(((e,t)=>t<3?Math.round(255*e):e));return'<div class="PinturaFillTile" data-transparent="'.concat(o<1,'"><div style="background-color:rgba(').concat(t,",").concat(n,",").concat(r,",").concat(o,')"></div></div>')}return"<div></div>"},R,"fill",g,$,l,s,c,u,d,p,function(t){oa.call(this,e,t)}]}var tb={util:["fill",class extends Na{constructor(e){super(),Ba(this,e,eb,J$,ai,{name:13,isActive:0,stores:14,locale:1,fillOptions:15},null,[-1,-1])}get name(){return this.$$.ctx[13]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),$a()}get stores(){return this.$$.ctx[14]}set stores(e){this.$$set({stores:e}),$a()}get locale(){return this.$$.ctx[1]}set locale(e){this.$$set({locale:e}),$a()}get fillOptions(){return this.$$.ctx[15]}set fillOptions(e){this.$$set({fillOptions:e}),$a()}},e=>{let{src:t,fillOptions:n}=e;return t&&!bh(t)&&n&&n.length}]};const nb='<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"></path></path></g>',rb='<path fill="none" d="M9 15 L12 9 L15 15 M10 13.5 h3" stroke="currentColor" stroke-width=".125em"/>';var ob={labelReset:"Reset",labelDefault:"Default",labelAuto:"Auto",labelNone:"None",labelEdit:"Edit",labelClose:"Close",labelSupportError:e=>e.join(", ")+" not supported on this browser",labelColor:"Color",labelWidth:"Width",labelSize:"Size",labelOffset:"Offset",labelAmount:"Amount",labelInset:"Inset",labelRadius:"Radius",labelColorPalette:"Color palette",labelSizeExtraSmall:"Extra small",labelSizeSmall:"Small",labelSizeMediumSmall:"Medium small",labelSizeMedium:"Medium",labelSizeMediumLarge:"Medium large",labelSizeLarge:"Large",labelSizeExtraLarge:"Extra large",labelButtonCancel:"Cancel",labelButtonUndo:"Undo",labelButtonRedo:"Redo",labelButtonRevert:"Revert",labelButtonExport:"Done",labelZoomIn:"Zoom in",labelZoomOut:"Zoom out",labelZoomFit:"Fit to view",labelZoomActual:"Actual size",iconZoomIn:'<path stroke="currentColor" stroke-width=".125em" d="M8 12 h8 M12 8 v8" />',iconZoomOut:'<path stroke="currentColor" stroke-width=".125em" d="M9 12 h6" />',iconSupportError:'<g fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><g><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></g>',iconButtonClose:nb,iconButtonRevert:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M7.388 18.538a8 8 0 10-2.992-9.03"/><path fill="currentColor" d="M2.794 11.696L2.37 6.714l5.088 3.18z"/><path d="M12 8v4M12 12l4 2"/></g>',iconButtonUndo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M10 8h4c2.485 0 5 2 5 5s-2.515 5-5 5h-4"/><path fill="currentColor" d="M5 8l4-3v6z"/></g>',iconButtonRedo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M14 8h-4c-2.485 0-5 2-5 5s2.515 5 5 5h4"/><path fill="currentColor" d="M19 8l-4-3v6z"/></g>',iconButtonExport:'<polyline points="20 6 9 17 4 12" fill="none" stroke="currentColor" stroke-width=".125em"></polyline>',statusLabelButtonClose:"Close",statusIconButtonClose:nb,statusLabelLoadImage:e=>e&&e.task?e.error?"IMAGE_TOO_SMALL"===e.error.code?"Minimum image size is {minWidth} &times; {minHeight}":"Error loading image":"blob-to-bitmap"===e.task?"Preparing image&hellip;":"Loading image&hellip;":"Waiting for image",statusLabelProcessImage:e=>{if(e&&e.task)return"store"===e.task?e.error?"Error uploading image":"Uploading image&hellip;":e.error?"Error processing image":"Processing image&hellip;"}};const ib={shapeLabelButtonSelectSticker:"Select image",shapeIconButtonSelectSticker:'<g fill="none" stroke="currentColor" stroke-width="0.0625em"><path d="M8 21 L15 11 L19 15"/><path d="M15 2 v5 h5"/><path d="M8 2 h8 l4 4 v12 q0 4 -4 4 h-8 q-4 0 -4 -4 v-12 q0 -4 4 -4z"/></g><circle fill="currentColor" cx="10" cy="8" r="1.5"/>',shapeIconButtonFlipHorizontal:'<g stroke="currentColor" stroke-width=".125em"><path fill="none" d="M6 6.5h5v11H6z"/><path fill="currentColor" d="M15 6.5h3v11h-3z"/><path d="M11 4v16" fill="currentColor"/></g>',shapeIconButtonFlipVertical:'<g stroke="currentColor" stroke-width=".125em"><rect x="7" y="8" width="11" height="5" fill="none"/><rect x="7" y="17" width="11" height="2" fill="currentColor"/><line x1="5" y1="13" x2="20" y2="13"/></g>',shapeIconButtonRemove:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M7.5 7h9z"/><path d="M7.916 9h8.168a1 1 0 01.99 1.14l-.972 6.862a2 2 0 01-1.473 1.653c-.877.23-1.753.345-2.629.345-.876 0-1.752-.115-2.628-.345a2 2 0 01-1.473-1.653l-.973-6.862A1 1 0 017.916 9z" fill="currentColor"/><rect fill="currentColor" x="10" y="5" width="4" height="3" rx="1"/></g>',shapeIconButtonDuplicate:'<g fill="none" fill-rule="evenodd"><path d="M15 13.994V16a2 2 0 01-2 2H8a2 2 0 01-2-2v-5a2 2 0 012-2h2.142" stroke="currentColor" stroke-width=".125em"/><path d="M15 9V8a1 1 0 00-2 0v1h-1a1 1 0 000 2h1v1a1 1 0 002 0v-1h1a1 1 0 000-2h-1zm-4-4h6a2 2 0 012 2v6a2 2 0 01-2 2h-6a2 2 0 01-2-2V7a2 2 0 012-2z" fill="currentColor"/></g>',shapeIconButtonMoveToFront:'<g fill="none" fill-rule="evenodd"><rect fill="currentColor" x="11" y="13" width="8" height="2" rx="1"/><rect fill="currentColor" x="9" y="17" width="10" height="2" rx="1"/><path d="M11.364 8H10a5 5 0 000 10M12 6.5L14.5 8 12 9.5z" stroke="currentColor" stroke-width=".125em" stroke-linecap="round"/></g>',shapeIconButtonTextLayoutAutoWidth:""+rb,shapeIconButtonTextLayoutAutoHeight:'<g fill="currentColor"><circle cx="4" cy="12" r="1.5"/><circle cx="20" cy="12" r="1.5"/></g>'+rb,shapeIconButtonTextLayoutFixedSize:'<g fill="currentColor"><circle cx="5" cy="6" r="1.5"/><circle cx="19" cy="6" r="1.5"/><circle cx="19" cy="19" r="1.5"/><circle cx="5" cy="19" r="1.5"/></g>'+rb,shapeTitleButtonTextLayoutAutoWidth:"Auto width",shapeTitleButtonTextLayoutAutoHeight:"Auto height",shapeTitleButtonTextLayoutFixedSize:"Fixed size",shapeTitleButtonFlipHorizontal:"Flip Horizontal",shapeTitleButtonFlipVertical:"Flip Vertical",shapeTitleButtonRemove:"Remove",shapeTitleButtonDuplicate:"Duplicate",shapeTitleButtonMoveToFront:"Move to front",shapeLabelInputText:"Edit text",shapeIconInputCancel:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"/></g>',shapeIconInputConfirm:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><polyline points="20 6 9 17 4 12"/></g>',shapeLabelInputCancel:"Cancel",shapeLabelInputConfirm:"Confirm",shapeLabelStrokeNone:"No outline",shapeLabelFontStyleNormal:"Normal",shapeLabelFontStyleBold:"Bold",shapeLabelFontStyleItalic:"Italic",shapeLabelFontStyleItalicBold:"Bold Italic",shapeTitleBackgroundColor:"Fill color",shapeTitleCornerRadius:"Corner radius",shapeTitleFontFamily:"Font",shapeTitleFontSize:"Font size",shapeTitleFontStyle:"Font style",shapeTitleLineHeight:"Line height",shapeTitleLineStart:"Start",shapeTitleLineEnd:"End",shapeTitleStrokeWidth:"Line width",shapeTitleStrokeColor:"Line color",shapeTitleLineDecorationBar:"Bar",shapeTitleLineDecorationCircle:"Circle",shapeTitleLineDecorationSquare:"Square",shapeTitleLineDecorationArrow:"Arrow",shapeTitleLineDecorationCircleSolid:"Circle solid",shapeTitleLineDecorationSquareSolid:"Square solid",shapeTitleLineDecorationArrowSolid:"Arrow solid",shapeIconLineDecorationBar:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M16,8 V16"/></g>',shapeIconLineDecorationCircle:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="none" stroke-width=".125em" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquare:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="none" stroke-width=".125em" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrow:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16 M13,7 l6,5 l-6,5" fill="none"/></g>',shapeIconLineDecorationCircleSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="currentColor" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquareSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="currentColor" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrowSolid:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M13,7 l6,5 l-6,5z" fill="currentColor"/></g>',shapeTitleColorTransparent:"Transparent",shapeTitleColorWhite:"White",shapeTitleColorSilver:"Silver",shapeTitleColorGray:"Gray",shapeTitleColorBlack:"Black",shapeTitleColorNavy:"Navy",shapeTitleColorBlue:"Blue",shapeTitleColorAqua:"Aqua",shapeTitleColorTeal:"Teal",shapeTitleColorOlive:"Olive",shapeTitleColorGreen:"Green",shapeTitleColorYellow:"Yellow",shapeTitleColorOrange:"Orange",shapeTitleColorRed:"Red",shapeTitleColorMaroon:"Maroon",shapeTitleColorFuchsia:"Fuchsia",shapeTitleColorPurple:"Purple",shapeTitleTextOutline:"Text outline",shapeTitleTextOutlineWidth:"Width",shapeTitleTextShadow:"Text shadow",shapeTitleTextShadowBlur:"Blur",shapeTitleTextColor:"Font color",shapeTitleTextAlign:"Text align",shapeTitleTextAlignLeft:"Left align text",shapeTitleTextAlignCenter:"Center align text",shapeTitleTextAlignRight:"Right align text",shapeIconTextAlignLeft:'<g stroke-width=".125em" stroke="currentColor"><line x1="5" y1="8" x2="15" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="5" y1="16" x2="14" y2="16"/></g>',shapeIconTextAlignCenter:'<g stroke-width=".125em" stroke="currentColor"><line x1="7" y1="8" x2="17" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="8" y1="16" x2="16" y2="16"/></g>',shapeIconTextAlignRight:'<g stroke-width=".125em" stroke="currentColor"><line x1="9" y1="8" x2="19" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="11" y1="16" x2="19" y2="16"/></g>',shapeLabelToolMove:"Move",shapeLabelToolView:"View",shapeLabelToolSharpie:"Sharpie",shapeLabelToolEraser:"Eraser",shapeLabelToolPath:"Path",shapeLabelToolRectangle:"Rectangle",shapeLabelToolEllipse:"Ellipse",shapeLabelToolArrow:"Arrow",shapeLabelToolLine:"Line",shapeLabelToolText:"Text",shapeLabelToolPreset:"Stickers",shapeIconToolView:'<g stroke-width=".125em" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M10.98 9.703V2.567c0-1.19 1.19-1.785 1.784-1.785.595 0 1.784.595 1.784 1.785v3.568"/><path d="M14.548 9.703V4.35c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.594 1.784 1.784v2.973"/><path d="M18.116 10.244V7.271c0-1.19 1.19-1.784 1.784-1.784.595 0 1.785.595 1.785 1.784 0 1.19 0 8.92-1.19 12.488-1.19 3.569-10.704 4.758-13.678 0-2.973-4.757-2.973-4.757-4.163-6.541-1.189-1.784-1.153-2.974-.594-3.568.558-.595 1.784-1.19 2.973.594 1.277 1.916 2.07 2.907 2.379 2.974V5.487c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.595 1.784 1.784V8.46"/></g>',shapeIconToolMove:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M6 2 L6 19 L18 13 Z M13 18 L16 24" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSharpie:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolEraser:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" fill="none"><g transform="translate(3, 15) rotate(-45)"><rect x="0" y="0" width="18" height="10" rx="3"/></g><line x1="11" y1="21" x2="18" y2="21"/><line x1="20" y1="21" x2="22" y2="21"/></g>',shapeIconToolPath:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none"><circle cx="21" cy="3" r="2"/><circle cx="9" cy="9" r="2"/><circle cx="3" cy="21" r="2"/><path d="M19 4 11 8 M8 11 4 19"/></g>',shapeIconToolRectangle:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="1" y="1" width="22" height="22" rx="4"/></g>',shapeIconToolEllipse:'<g stroke-width=".125em" stroke="currentColor" fill="none"><circle cx="12" cy="12" r="11"/></g>',shapeIconToolArrow:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/><path d="m10 6 L21.5 1 L20 13.5" fill="currentColor" stroke="none"/></g>',shapeIconToolLine:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/></g>',shapeIconToolText:'<g stroke="none" fill="currentColor" transform="translate(6,0)"><path d="M8.14 20.085c.459 0 .901-.034 1.329-.102a8.597 8.597 0 001.015-.21v1.984c-.281.135-.695.247-1.242.336a9.328 9.328 0 01-1.477.133c-3.312 0-4.968-1.745-4.968-5.235V6.804H.344v-1.25l2.453-1.078L3.89.819h1.5v3.97h4.97v2.015H5.39v10.078c0 1.031.245 1.823.735 2.375s1.161.828 2.015.828z"/>',shapeIconToolPreset:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"></path><path d="M20 17c-3 3-5 5-8 5"></path></g>',shapeTitleSelectionMode:"Selection mode",shapeTitleBrushSize:"Brush size",shapeLabelSelectionModeNew:"New",shapeLabelSelectionModeAdd:"Add",shapeLabelSelectionModeSubtract:"Remove",shapeLabelToolSelectionBrush:"Brush",shapeLabelToolSelectionLassoo:"Lassoo",shapeLabelToolSelectionRectangle:"Rectangle marquee",shapeLabelToolSelectionEllipse:"Ellipse marquee",shapeIconSelectionModeNew:'<g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M6.5 17H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v1.5"/><rect width="12" height="12" x="9" y="9" fill="currentColor" fill-opacity=".25" rx="2"/></g>',shapeIconSelectionModeAdd:'<g fill="none" fill-rule="evenodd" stroke="currentColor"><path fill="currentColor" fill-opacity=".25" stroke-linecap="round" stroke-linejoin="round" d="M15 3a2 2 0 0 1 2 2v4h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2v-2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10Z"/><path d="M13 15h4M15 13v4"/></g>',shapeIconSelectionModeSubtract:'<g fill="none" fill-rule="evenodd" stroke="currentColor"><path fill="currentColor" fill-opacity=".25" stroke-linecap="round" stroke-linejoin="round" d="M15 3a2 2 0 0 1 2 2v4h-6a2 2 0 0 0-1.995 1.85L9 11v6H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10Z"/><rect width="12" height="12" x="9" y="9" stroke-linecap="round" stroke-linejoin="round" rx="2"/><path d="M13 15h4"/></g>',shapeIconToolSelectionBrush:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSelectionLassoo:'<g fill="none" fill-rule="evenodd" stroke-width=".125em" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.428 17.702a18.46 18.46 0 0 0 4.085-1.595c5.851-3.112 9.019-8.599 7.074-12.256-1.945-3.657-8.265-4.1-14.116-.988C2.619 5.974-.55 11.46 1.396 15.118c.63 1.186 1.72 2.033 3.105 2.532"/><ellipse cx="8" cy="18.5" rx="3.5" ry="2.833" transform="rotate(-15 8 18.5)"/><path stroke-linecap="round" d="M5 18c3.347 1.048 5.514 1.881 6.5 2.5.859.54 1.517.994 1.5 2.364"/></g>',shapeIconToolSelectionRectangle:'<g stroke-width=".125em" stroke="currentColor"><path d="M9 1 h6 m4 0 h4v4 m0 4 v6 m0 4 v4h-4 m-4 0 h-6 m-4 0 h-4v-4 m0 -4 v-6 m0 -4 v-4h4" fill="none" /></g>',shapeIconToolSelectionEllipse:'<path stroke-width=".125em" stroke="currentColor" d="M1.21 9.853a11.054 11.054 0 0 0 0 4.294m1.643 3.965a11.054 11.054 0 0 0 3.035 3.035m3.965 1.644a11.054 11.054 0 0 0 4.294 0m3.965-1.644a11.054 11.054 0 0 0 3.035-3.035m1.644-3.965a11.054 11.054 0 0 0 0-4.294m-1.644-3.965a11.054 11.054 0 0 0-3.035-3.035m-3.965-1.644a11.054 11.054 0 0 0-4.294 0M5.888 2.853a11.054 11.054 0 0 0-3.035 3.035"/>'};var ab=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e);Object.keys(n).forEach((r=>{n[r].get?Object.defineProperty(t,r,{get:()=>e[r],set:t=>e[r]=t}):t[r]=e[r]}))},lb=e=>{const t={},{sub:n,pub:r}=or();T()&&null!==document.doctype||console.warn("Browser is in quirks mode, add <!DOCTYPE html> to page to fix render issues");const o=kl();ab(o,t);const i=((e,t)=>{const n={},r=new df({target:e,props:{stores:t,pluginComponents:Array.from($f)}});let o=!1;const i=()=>{o||(T()&&window.removeEventListener("pagehide",i),r&&(o=!0,r.$destroy()))};mf||(mf=new Set(Hc(df).filter((e=>!hf.includes(e))))),mf.forEach((e=>{Object.defineProperty(n,e,{get:()=>r[e],set:ff.includes(e)?t=>{r[e]={...r[e],...t}}:t=>r[e]=t})})),Object.defineProperty(n,"previewImageData",{get:()=>r.imagePreviewCurrent}),gf.forEach((e=>{const t=yf[e],o=t[0];Object.defineProperty(n,e,{get:()=>r.pluginInterface[o][e],set:n=>{const o=t.reduce(((t,o)=>(t[o]={...r.pluginOptions[o],[e]:n},t)),{});r.pluginOptions={...r.pluginOptions,...o}}})})),Object.defineProperty(n,"element",{get:()=>r.root,set:()=>{}});const a=r.history;return tl(n,{on:(e,t)=>{if(o)return()=>{};if(/undo|redo|revert|writehistory/.test(e))return a.on(e,t);const n=[r.sub(e,t),r.$on(e,(e=>t(e instanceof CustomEvent&&!e.detail?void 0:e)))].filter(Boolean);return()=>n.forEach((e=>e()))},updateImagePreview:e=>{r.imagePreviewSrc=e},close:()=>!o&&r.pub("close"),destroy:i}),Object.defineProperty(n,"history",{get:()=>({undo:()=>a.undo(),redo:()=>a.redo(),revert:()=>a.revert(),get:()=>a.get(),getCollapsed:()=>a.get().splice(0,a.index+1),set:e=>a.set(e),write:e=>a.write(e),get length(){return a.length()},get index(){return a.index},set index(e){a.index=e}})}),T()&&window.addEventListener("pagehide",i),n})(e,o.stores);ab(i,t);const a=["loadImage","processImage","abortProcessImage","abortLoadImage"].map((e=>i.on(e,(t=>{const n=o[e](t&&t.detail);n instanceof Promise&&n.catch(x)})))),l=(e,t)=>{const r=n(e,t),a=o.on(e,t),l=i.on(e,t);return()=>{r(),a(),l()}};t.handleEvent=x;const s=vf.map((e=>l(e,(n=>t.handleEvent(e,n)))));return tl(t,{on:l,updateImage:e=>new Promise(((n,r)=>{const i=t.history.get(),a=t.history.index,l=t.imageState;o.loadImage(e).then((e=>{t.history.set(i),t.history.index=a,t.imageState=l,n(e)})).catch(r)})),close:()=>{r("close")},destroy:()=>{[...a,...s].forEach((e=>e())),i.destroy(),o.destroy(),r("destroy")}}),setTimeout((()=>r("init",t)),0),t};T()&&HTMLElement;var sb=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=V(e)?document.querySelector(e):e;if(!Qt(n))return;t.class=t.class?"pintura-editor "+t.class:"pintura-editor";const r=lb(n);return Object.assign(r,t)};const{document:cb,window:ub}=Ea;const db=(e,t,n,r)=>{const o=Ce(t.x-e.x,t.y-e.y),i=Ie(o),a=5*n;let l;l=r?.5*a:Math.ceil(.5*(a-1));const s=_e(Me(i),l);return{anchor:Me(e),offset:s,normal:i,solid:r,size:a,sizeHalf:l}},pb=(e,t)=>{let{anchor:n,solid:r,normal:o,offset:i,size:a,sizeHalf:l,strokeWidth:s,strokeColor:c,strokeJoin:u,strokeCap:d,bitmap:p}=e;const h=n.x,f=n.y,m=_e(Me(o),a),g=Ce(h+m.x,f+m.y);if(_e(m,.55),r){Fe(t,i);const e=_e(Me(o),.5*l);return[{points:[Ce(h-e.x,f-e.y),Ce(g.x-m.y,g.y+m.x),Ce(g.x+m.y,g.y-m.x)],pathClose:!0,backgroundColor:c}]}{const e=_e((e=>{const t=e.x;return e.x=-e.y,e.y=t,e})(Me(o)),.5),t=Ce(h-e.x,f-e.y),n=Ce(h+e.x,f+e.y);return[{points:[Ce(g.x+m.y,g.y-m.x),t,Ce(h,f),n,Ce(g.x-m.y,g.y+m.x)],pathClose:!1,strokeWidth:s,strokeColor:c,strokeJoin:u,strokeCap:d,bitmap:p}]}},hb=(e,t)=>{let{anchor:n,solid:r,offset:o,normal:i,sizeHalf:a,strokeWidth:l,strokeColor:s}=e;return Fe(t,o),r&&Fe(t,Pe(Me(i))),[{x:n.x,y:n.y,rx:a,ry:a,backgroundColor:r?s:void 0,strokeWidth:r?void 0:l,strokeColor:r?void 0:s}]},fb=e=>{let{anchor:t,offset:n,strokeWidth:r,strokeColor:o,strokeJoin:i,strokeCap:a,bitmap:l}=e;return[{points:[Ce(t.x-n.y,t.y+n.x),Ce(t.x+n.y,t.y-n.x)],strokeWidth:r,strokeColor:o,strokeJoin:i,strokeCap:a,bitmap:l}]},mb=(e,t)=>{let{anchor:n,solid:r,offset:o,normal:i,sizeHalf:a,strokeWidth:l,strokeColor:s}=e;return Fe(t,o),[{x:n.x-a,y:n.y-a,width:2*a,height:2*a,rotation:(c=i,Math.atan2(c.y,c.x)),backgroundColor:r?s:void 0,strokeWidth:r?void 0:l,strokeColor:r?void 0:s}];var c},gb=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>{if(!t.lineStart&&!t.lineEnd)return;const n=[],{lineStart:r,lineEnd:o,strokeWidth:i,strokeColor:a,strokeJoin:l,strokeCap:s,bitmap:c}=t,u=Ce(t.x1,t.y1),d=Ce(t.x2,t.y2),p=[u,d];if(r){const[t,o]=r.split("-"),p=e[t];if(p){const e=db(u,d,i,!!o);n.push(...p({...e,strokeColor:a,strokeWidth:i,strokeJoin:l,strokeCap:s,bitmap:c},u))}}if(o){const[t,r]=o.split("-"),p=e[t];if(p){const e=db(d,u,i,!!r);n.push(...p({...e,strokeColor:a,strokeWidth:i,strokeJoin:l,strokeCap:s,bitmap:c},d))}}return[{points:p,strokeWidth:i,strokeColor:a,strokeJoin:l,strokeCap:s,bitmap:c},...n]}},yb=(e,t)=>{const n=parseFloat(e)*t;return V(e)?n+"%":n},$b=(e,t)=>V(e)?fo(e,t):e,bb=e=>[{...e,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:e.frameSize?yb(e.frameSize,2):"2.5%",frameRadius:e.frameRound?yb(e.frameSize,2):0}],vb=(e,t)=>{let{width:n,height:r,frameImage:o,frameSize:i="15%",frameOutset:a=0,frameSlices:l={x1:.15,y1:.15,x2:.85,y2:.85}}=e,{isPreview:s}=t;if(!o)return[];const c=Math.sqrt(n*r),u=$b(i,c),d=s?u:Math.round(u),p=d,h=$b(a,c),f=2*h,{x1:m,x2:g,y1:y,y2:$}=l,b={x0:0,y0:0,x1:d,y1:p,x2:n-d,y2:r-p,x3:n,y3:r,cw:d,ch:p,ew:n-d-d,eh:r-p-p},v=s?1:0,x=2*v,w=h>0,S={expandsCanvas:w,width:b.cw,height:b.ch,backgroundImage:o};return[{expandsCanvas:w,x:b.x1-v-h,y:b.y0-h,width:b.ew+x+f,height:b.ch,backgroundCorners:[{x:m,y:0},{x:g,y:0},{x:g,y:y},{x:m,y:y}],backgroundImage:o},{expandsCanvas:w,x:b.x1-v-h,y:b.y2+h,width:b.ew+x+f,height:b.ch,backgroundCorners:[{x:m,y:$},{x:g,y:$},{x:g,y:1},{x:m,y:1}],backgroundImage:o},{expandsCanvas:w,x:b.x0-h,y:b.y1-v-h,width:b.cw,height:b.eh+x+f,backgroundCorners:[{x:0,y:y},{x:m,y:y},{x:m,y:$},{x:0,y:$}],backgroundImage:o},{expandsCanvas:w,x:b.x2+h,y:b.y1-v-h,width:b.cw,height:b.eh+x+f,backgroundCorners:[{x:g,y:y},{x:1,y:y},{x:1,y:$},{x:g,y:$}],backgroundImage:o},{...S,x:b.x0-h,y:b.y0-h,backgroundCorners:[{x:0,y:0},{x:m,y:0},{x:m,y:y},{x:0,y:y}]},{...S,x:b.x2+h,y:b.y0-h,backgroundCorners:[{x:g,y:0},{x:1,y:0},{x:1,y:y},{x:g,y:y}]},{...S,x:b.x2+h,y:b.y2+h,backgroundCorners:[{x:g,y:$},{x:1,y:$},{x:1,y:1},{x:g,y:1}]},{...S,x:b.x0-h,y:b.y2+h,backgroundCorners:[{x:0,y:$},{x:m,y:$},{x:m,y:1},{x:0,y:1}]}]},xb=(e,t)=>{let{x:n,y:r,width:o,height:i,frameInset:a="3.5%",frameSize:l=".25%",frameColor:s=[1,1,1],frameOffset:c="5%",frameAmount:u=1,frameRadius:d=0,expandsCanvas:p=!1}=e,{isPreview:h}=t;const f=Math.sqrt(o*i);let m=$b(l,f);const g=$b(a,f),y=$b(c,f);let $=0;h||(m=Math.max(1,Math.round(m)),$=m%2==0?0:.5);const b=$b(yb(d,u),f);return new Array(u).fill(void 0).map(((e,t)=>{const a=y*t;let l=n+g+a,c=r+g+a,u=n+o-g-a,d=r+i-g-a;return h||(l=Math.round(l),c=Math.round(c),u=Math.round(u),d=Math.round(d)),{x:l+$,y:c+$,width:u-l,height:d-c,cornerRadius:b>0?b-a:0,strokeWidth:m,strokeColor:s,expandsCanvas:p}}))},wb=(e,t)=>{let{x:n,y:r,width:o,height:i,frameSize:a=".25%",frameOffset:l=0,frameInset:s="2.5%",frameColor:c=[1,1,1]}=e,{isPreview:u}=t;const d=Math.sqrt(o*i);let p=$b(a,d),h=$b(s,d),f=$b(l,d),m=0;u||(p=Math.max(1,Math.round(p)),h=Math.round(h),f=Math.round(f),m=p%2==0?0:.5);const g=f-h,y=n+h+m,$=r+h+m,b=n+o-h-m,v=r+i-h-m;return[{points:[Ce(y+g,$),Ce(b-g,$)]},{points:[Ce(b,$+g),Ce(b,v-g)]},{points:[Ce(b-g,v),Ce(y+g,v)]},{points:[Ce(y,v-g),Ce(y,$+g)]}].map((e=>(e.strokeWidth=p,e.strokeColor=c,e)))},Sb=(e,t)=>{let{x:n,y:r,width:o,height:i,frameSize:a=".25%",frameInset:l="2.5%",frameLength:s="2.5%",frameColor:c=[1,1,1]}=e,{isPreview:u}=t;const d=Math.sqrt(o*i);let p=$b(a,d),h=$b(l,d),f=$b(s,d),m=0;u||(p=Math.max(1,Math.round(p)),h=Math.round(h),f=Math.round(f),m=p%2==0?0:.5);const g=n+h+m,y=r+h+m,$=n+o-h-m,b=r+i-h-m;return[{points:[Ce(g,y+f),Ce(g,y),Ce(g+f,y)]},{points:[Ce($-f,y),Ce($,y),Ce($,y+f)]},{points:[Ce($,b-f),Ce($,b),Ce($-f,b)]},{points:[Ce(g+f,b),Ce(g,b),Ce(g,b-f)]}].map((e=>(e.strokeWidth=p,e.strokeColor=c,e)))},kb=(e,t)=>{let{x:n,y:r,width:o,height:i,frameColor:a=[1,1,1]}=e,{isPreview:l}=t;const s=Math.sqrt(o*i),c=.1*s;let u=.2*s,d=0;const p=.5*c;return l?d=1:u=Math.ceil(u),a.length=3,[{id:"border",x:n-p+d,y:r-p+d,width:o+c-2*d,height:i+u-2*d,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:c,frameColor:a,expandsCanvas:!0},{id:"chin",x:n-p,y:i-d,width:o+c,height:u,backgroundColor:a,expandsCanvas:!0}].filter(Boolean)},Cb=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t,n)=>{if(!Un(t,"frameStyle"))return;const r=t.frameStyle,o=e[r];if(!o)return;const{frameStyle:i,...a}=t;return o(a,n)}},Tb=e=>{const t=function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isPreview:!0};const o=e.map((e=>{const o=e(n,r);if(o)return o.map((e=>t(e,r)))})).filter(Boolean).flat();return o.length?o.flat().map(((e,t)=>(e.id=n.id+"_"+t,e))):n};return t};"undefined"!=typeof window&&(e=>{if(!e)return;const[t,n,r,o]=[[108,111,99,97,116,105,111,110],[82,101,103,69,120,112],[116,101,115,116],[112,113,105,110,97,92,46,110,108]].map((e=>e.map((e=>String.fromCharCode(e))).join("")));e._7vysqoe=new e[n](o)[r](e[t])})(window);const Mb=os,Pb=as,Eb=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{blurAmount:t,dataSizeScalar:n,scrambleAmount:r,backgroundColor:o}=e;return(e,i)=>async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return;const{width:n,height:r}=e,{dataSize:o=96,dataSizeScalar:i=1,scrambleAmount:a=4,blurAmount:l=6,outputFormat:s="canvas",backgroundColor:c=[0,0,0]}=t,u=Math.round(o*i),d=Math.min(u/n,u/r),p=Math.floor(n*d),h=Math.floor(r*d),f=R("canvas",{width:p,height:h}),m=f.getContext("2d",{willReadFrequently:!0});if(c.length=3,m.fillStyle=Jn(c),m.fillRect(0,0,p,h),L(e)){const t=R("canvas",{width:n,height:r});t.getContext("2d",{willReadFrequently:!0}).putImageData(e,0,0),m.drawImage(t,0,0,p,h),A(t)}else m.drawImage(e,0,0,p,h);const g=m.getImageData(0,0,p,h),y=[];if(a>0&&y.push([Us,{amount:a}]),l>0)for(let b=0;b<l;b++)y.push([Dn,{matrix:Hs}]);let $;if(y.length){const e=(t,n)=>"(err, imageData) => {\n(".concat(t[n][0].toString(),")(Object.assign({ imageData: imageData }, filterInstructions[").concat(n,"]), \n").concat(t[n+1]?e(t,n+1):"done",")\n}"),t="function (options, done) {\nconst filterInstructions = options.filterInstructions;\nconst imageData = options.imageData;\n(".concat(e(y,0),")(null, imageData)\n}"),n=await Y(t,[{imageData:g,filterInstructions:y.map((e=>e[1]))}],[g.data.buffer]);$=zn(n)}else $=g;return"canvas"===s?(m.putImageData($,0,0),f):$}(e,{blurAmount:t,scrambleAmount:r,backgroundColor:o,...i,dataSizeScalar:n||i.dataSizeScalar})},Rb=pm,Ib={markupEditorToolbar:Xf(),markupEditorToolStyles:Gf(),markupEditorShapeStyleControls:pm()},Ab=kg,Lb=Ig,zb=_g,Fb=x$,Ob=k$,Db=M$,_b=L$,Bb=X$,Nb=H$,jb=tb,Wb=Lf,Vb=Mf,Ub=zf,Hb=ob,Gb=ib,Zb={cropLabel:"Crop",cropIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M23 17H9a2 2 0 0 1-2-2v-5m0-3V1 M1 7h14a2 2 0 0 1 2 2v7m0 4v3"/></g>',cropIconButtonRecenter:'<path stroke="currentColor" fill="none" stroke-width="2" stroke-linejoin="bevel" d="M1.5 7.5v-6h6M1.5 16.5v6h6M22.5 16.5v6h-6M22.5 7.5v-6h-6"/><circle cx="12" cy="12" r="3.5" fill="currentColor" stroke="none"/>',cropIconButtonRotateLeft:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><rect x="3" rx="1" height="12" width="12" y="9"/><path d="M15 5h-1a5 5 0 015 5 1 1 0 002 0 7 7 0 00-7-7h-1.374l.747-.747A1 1 0 0011.958.84L9.603 3.194a1 1 0 000 1.415l2.355 2.355a1 1 0 001.415-1.414l-.55-.55H15z"/></g>',cropIconButtonRotateRight:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><path d="M11.177 5H10a5 5 0 00-5 5 1 1 0 01-2 0 7 7 0 017-7h1.374l-.747-.747A1 1 0 0112.042.84l2.355 2.355a1 1 0 010 1.415l-2.355 2.354a1 1 0 01-1.415-1.414l.55-.55z"/><rect rx="1" height="12" width="12" y="9" x="9"/></g>',cropIconButtonFlipVertical:'<g stroke="none" fill="currentColor"><path d="M19.993 12.143H7a1 1 0 0 1-1-1V5.994a1 1 0 0 1 1.368-.93l12.993 5.15a1 1 0 0 1-.368 1.93z"/><path d="M19.993 14a1 1 0 0 1 .368 1.93L7.368 21.078A1 1 0 0 1 6 20.148V15a1 1 0 0 1 1-1h12.993z" opacity=".6"/></g>',cropIconButtonFlipHorizontal:'<g stroke="none" fill="currentColor"><path d="M11.93 7.007V20a1 1 0 0 1-1 1H5.78a1 1 0 0 1-.93-1.368l5.15-12.993a1 1 0 0 1 1.929.368z"/><path d="M14 7.007V20a1 1 0 0 0 1 1h5.149a1 1 0 0 0 .93-1.368l-5.15-12.993A1 1 0 0 0 14 7.007z" opacity=".6"/></g>',cropIconSelectPreset:(e,t)=>{const[n,r,o]=t?[t<1?1:.3,1===t?.85:.5,t>1?1:.3]:[.2,.3,.4];return'<g fill="currentColor">\n            <rect opacity="'.concat(n,'" x="2" y="4" width="10" height="18" rx="1"/>\n            <rect opacity="').concat(r,'" x="4" y="8" width="14" height="14" rx="1"/>\n            <rect opacity="').concat(o,'" x="6" y="12" width="17" height="10" rx="1"/>\n        </g>')},cropIconCropBoundary:(e,t)=>{const[n,r,o,i]=t?[.3,1,0,0]:[0,0,.3,1];return'<g fill="currentColor">\n            <rect opacity="'.concat(n,'" x="2" y="3" width="20" height="20" rx="1"/>\n            <rect opacity="').concat(r,'" x="7" y="8" width="10" height="10" rx="1"/>\n            <rect opacity="').concat(o,'" x="4" y="8" width="14" height="14" rx="1"/>\n            <rect opacity="').concat(i,'" x="12" y="4" width="10" height="10" rx="1"/>\n        </g>')},cropLabelButtonRecenter:"Recenter",cropLabelButtonRotateLeft:"Rotate left",cropLabelButtonRotateRight:"Rotate right",cropLabelButtonFlipHorizontal:"Flip horizontal",cropLabelButtonFlipVertical:"Flip vertical",cropLabelSelectPreset:"Crop shape",cropLabelCropBoundary:"Crop boundary",cropLabelCropBoundaryEdge:"Edge of image",cropLabelCropBoundaryNone:"None",cropLabelTabRotation:"Rotation",cropLabelTabZoom:"Scale"},Xb={fillLabel:"Fill",fillIcon:'\n    <g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">\n        <g transform="rotate(60, 12, 12)">\n            <rect x="4" y="4" width="14" height="16" rx="3"/>\n        </g>\n        <path d="M21 13 L21 21"></path>\n        <path d="M4.5 12.5 L19 12.5"></path>\n    </g>\n    '},Yb={filterLabel:"Filter",filterIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M18.347 9.907a6.5 6.5 0 1 0-1.872 3.306M3.26 11.574a6.5 6.5 0 1 0 2.815-1.417 M10.15 17.897A6.503 6.503 0 0 0 16.5 23a6.5 6.5 0 1 0-6.183-8.51"/></g>',filterLabelChrome:"Chrome",filterLabelFade:"Fade",filterLabelCold:"Cold",filterLabelWarm:"Warm",filterLabelPastel:"Pastel",filterLabelMonoDefault:"Mono",filterLabelMonoNoir:"Noir",filterLabelMonoWash:"Wash",filterLabelMonoStark:"Stark",filterLabelSepiaDefault:"Sepia",filterLabelSepiaBlues:"Blues",filterLabelSepiaRust:"Rust",filterLabelSepiaColor:"Color"},qb={finetuneLabel:"Finetune",finetuneIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M4 1v5.5m0 3.503V23M12 1v10.5m0 3.5v8M20 1v15.5m0 3.5v3M2 7h4M10 12h4M18 17h4"/></g>',finetuneLabelBrightness:"Brightness",finetuneLabelContrast:"Contrast",finetuneLabelSaturation:"Saturation",finetuneLabelExposure:"Exposure",finetuneLabelTemperature:"Temperature",finetuneLabelGamma:"Gamma",finetuneLabelClarity:"Clarity",finetuneLabelVignette:"Vignette"},Kb={resizeLabel:"Resize",resizeIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="2" y="12" width="10" height="10" rx="2"/><path d="M4 11.5V4a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-5.5"/><path d="M14 10l3.365-3.365M14 6h4v4"/></g>',resizeLabelFormCaption:"Image output size",resizeLabelInputWidth:"w",resizeTitleInputWidth:"Width",resizeLabelInputHeight:"h",resizeTitleInputHeight:"Height",resizeTitleButtonMaintainAspectRatio:"Maintain aspectratio",resizeIconButtonMaintainAspectRatio:(e,t)=>'<defs><mask id="mask1" x="0" y="0" width="24" height="24" ><rect x="0" y="0" width="24" height="10" fill="#fff" stroke="none"/></mask></defs><g fill="none" fill-rule="evenodd"><g  mask="url(#mask1)"><path transform="translate(0 '.concat(3*(t-1),')" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" d="M9.401 10.205v-.804a2.599 2.599 0 0 1 5.198 0V17"/></g><rect fill="currentColor" x="7" y="10" width="10" height="7" rx="1.5"/></g>')},Qb={decorateLabel:"Decorate",decorateIcon:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width=".125em" stroke-linecap="round" stroke-linejoin="round" d="M12 18.5l-6.466 3.4 1.235-7.2-5.23-5.1 7.228-1.05L12 2l3.233 6.55 7.229 1.05-5.231 5.1 1.235 7.2z"/></g>'},Jb={annotateLabel:"Annotate",annotateIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M17.086 2.914a2.828 2.828 0 1 1 4 4l-14.5 14.5-5.5 1.5 1.5-5.5 14.5-14.5z"/></g>'},ev={stickerLabel:"Sticker",stickerIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"/><path d="M20 17c-3 3-5 5-8 5"/></g>'},tv={frameLabel:"Frame",frameIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">\n            <rect x="2" y="2" width="20" height="20" rx="4"/>\n            <rect x="6" y="6" width="12" height="12" rx="1"/>\n        </g>',frameLabelMatSharp:"Mat",frameLabelMatRound:"Bevel",frameLabelLineSingle:"Line",frameLabelLineMultiple:"Zebra",frameLabelEdgeSeparate:"Inset",frameLabelEdgeOverlap:"Plus",frameLabelEdgeCross:"Lumber",frameLabelCornerHooks:"Hook",frameLabelPolaroid:"Polaroid"},nv={redactLabel:"Redact",redactIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M 4 5 l 1 -1"/><path d="M 4 10 l 6 -6"/><path d="M 4 15 l 11 -11"/><path d="M 4 20 l 16 -16"/><path d="M 9 20 l 11 -11"/><path d="M 14 20 l 6 -6"/><path d="M 19 20 l 1 -1"/></g>'},rv=sb,ov=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Tb([Cb({solid:bb,hook:Sb,line:xb,edge:wb,polaroid:kb,nine:vb}),gb({arrow:pb,circle:hb,square:mb,bar:fb}),...e])},iv=function(){let e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.isArray(r.imageReader)||(t=r.imageReader,delete r.imageReader),Array.isArray(r.imageWriter)?e=Pb():(e=U(r.imageWriter)?r.imageWriter:Pb(r.imageWriter),delete r.imageWriter),U(r.imageScrambler)||(n=r.imageScrambler,delete r.imageScrambler),{imageReader:Mb(t),imageWriter:e,imageOrienter:{read:k,apply:B},imageScrambler:Eb(n)}},av=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};bf(Ab,Lb,zb,Fb,Ob,Db,_b,Bb,Nb,jb);const t=iv(e),n={...Hb,...Gb,...Zb,...Xb,...Yb,...qb,...tv,...nv,...Kb,...Qb,...Jb,...ev,...e.locale};delete e.locale;const r="function"==typeof e.shapePreprocessor?e.shapePreprocessor:ov(e.shapePreprocessor);return delete e.shapePreprocessor,e.markupEditorShapeStyleControls&&Object.entries(e.markupEditorShapeStyleControls).every((e=>{let[t,n]=e;return/Options$/.test(t)||!Array.isArray(n)}))&&(e.markupEditorShapeStyleControls=Rb({...e.markupEditorShapeStyleControls})),Ha([{...t,shapePreprocessor:r,utils:["trim","crop","filter","finetune","retouch","annotate","decorate","sticker","fill","frame","redact","resize"],...Wb,...Vb,...Ub,...Ib,stickerStickToImage:!0,locale:n},e])},lv=e=>/^on[A-Z]/.test(e),sv=e=>e.substr(2).toLowerCase(),cv=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;(e.unsubs||[]).filter((e=>{let[n]=e;return!t||t.includes(n)})).forEach((e=>{let[,t]=e;return t()}))},uv=(e,t)=>{cv(e,(e=>Object.keys(e).filter(lv).map(sv))(t)),e.unsubs=Object.keys(t).filter(lv).map((n=>{const r=sv(n);return[r,e.editor.on(r,t[n])]}))};class dv extends e.Component{constructor(t){super(t),this.elementRef=e.createRef(),this.editor=void 0}componentDidMount(){if(!this.elementRef.current)return;const e={...this.props};this.editor=rv(this.elementRef.current,e),uv(this,e)}componentDidUpdate(){const e={...this.props};Object.assign(this.editor,e),uv(this,e)}componentWillUnmount(){this.editor&&(cv(this),this.editor.destroy(),this.editor=void 0)}render(){return e.createElement("div",{className:"PinturaRootWrapper ".concat(this.props.className?this.props.className:"").trim(),ref:this.elementRef})}}const pv=dv;e.Component;e.Component;const hv=av(),fv=()=>{const[t,n]=(0,e.useState)();(0,e.useRef)(null);return(0,r.jsx)("div",{className:"App",style:{height:"80vh"},children:t?(0,r.jsx)(pv,{...hv,src:t,onProcess:e=>{(e=>{const t=document.createElement("a");t.style.display="none",t.href=URL.createObjectURL(e),t.download=e.name,document.body.appendChild(t),t.click(),setTimeout((()=>{URL.revokeObjectURL(t.href),t.parentNode.removeChild(t)}),0)})(e.dest)},imageCropAspectRatio:1}):(0,r.jsxs)("div",{className:"my-4 d-flex flex-column justify-content-center",children:[(0,r.jsx)("span",{className:"fw-bold me-2",children:"Select your image:"}),(0,r.jsx)("input",{type:"file",onChange:function(e){let t=URL.createObjectURL(e.target.files[0]);n(t)}})]})})};const mv=function(){const[t,n]=(0,e.useState)(null);return(0,r.jsx)(g,{children:null!=t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:"btn btn-secondary",onClick:()=>n(null),children:"Go Back "}),1==t?(0,r.jsx)(h,{}):(0,r.jsx)(fv,{})]}):(0,r.jsx)(o,{setEditor:n})})},gv=e=>{e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((t=>{let{getCLS:n,getFID:r,getFCP:o,getLCP:i,getTTFB:a}=t;n(e),r(e),o(e),i(e),a(e)}))};t.createRoot(document.getElementById("root")).render((0,r.jsx)(e.StrictMode,{children:(0,r.jsx)(mv,{})})),gv()})()})();
//# sourceMappingURL=main.2ea2bc29.js.map